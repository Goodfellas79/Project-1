"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("panelUtils/mixins/linkColorPickerMixin",["react","lodash"],function(e,t){function i(e){return e?{top:e.top+72+"px",left:e.left-12+"px"}:null}function s(e,t){return t||(i(e)||{top:null,left:null})}return{contextTypes:{panelMeasures:e.PropTypes.object},componentDidMount:function(){if(!t.isFunction(this.getEditorAPI))throw new Error("You must use editorAPIMixin to use the linkStyleMixin")},componentWillUpdate:function(e,i,n){var o=this.context.panelMeasures&&this.context.panelMeasures.designPanel,r=n.panelMeasures&&n.panelMeasures.designPanel;if(o&&r&&!t.isEqual(o,r)){var l=s(r);this.getEditorAPI().panelManager.updatePanelProps("panels.toolPanels.colorPicker.colorPickerPanel",{top:l.top,left:l.left})}},openColorPicker:function(e,t,i,n,o,r,l){var a=this.getEditorAPI(),u=s(this.context.panelMeasures&&this.context.panelMeasures.designPanel,n);a.panelManager.openPanel("panels.toolPanels.colorPicker.colorPickerPanel",{value:t,onChange:e,onClose:l,siteCustomColors:a.theme.colors.getCustomUsedInSkins(),sessionStorage:a.userPreferences.session,history:!1!==r?a.history:null,palettePresets:i?a.theme.colors.getColorPresets():null,updateSitePalette:i?this.updateSitePalette:null,previewOnHover:o,top:u.top,left:u.left},!0)},updateSitePalette:function(e){this.getEditorAPI().theme.colors.update(e)},resolveColor:function(e){return this.getEditorAPI().theme.colors.render(e)}}}),define("panelUtils/mixins/linkStyleMixin",["lodash","styles"],function(e,t){function i(t,i){var s=this.getEditorAPI(),n=i.style,o=l.getStyleForSkin(s,t,this.cachedStylePropertiesForSkins[t]);l.mergeSharedProperties(s,o.properties,n.properties,t,i.skin);var r=e.cloneDeep(i);return e.assign(r.style,o),r.skin=t,r}function s(t){return e.includes(u,t)}function n(t,i,s,n,o){var r=e.cloneDeep(t),a=r.style;"object"===(void 0===s?"undefined":_typeof(s))?(a.properties[i]=s.value,a.propertiesSource&&(a.propertiesSource[i]=s.source)):(a.properties[i]=s,a.propertiesSource&&(a.propertiesSource[i]=l.getPropertySource(s))),this.getEditorAPI().theme.styles.update(r.id,r,o),this.isMounted()&&this.setState({styleDataItem:r})}function o(e){return this.getEditorAPI().documentServices.theme.styles.get(e)}function r(t,i,s){var n=i.style.properties[s];return e.isUndefined(n)?a.getSkinParamDefaultValue(t,i.skin,s):n}var l=t.advancedStyle.styleUtil,a=t.advancedStyle.advancedStyleDataUtil,u=["TEXT_COLOR","COLOR","BG_COLOR","BORDER_COLOR"];return{componentDidMount:function(){if(!e.isFunction(this.getEditorAPI))throw new Error("You must use editorAPIMixin to use the linkStyleMixin")},componentWillReceiveProps:function(e){e.styleId!==this.state.styleId&&this.setState({styleId:e.styleId,styleDataItem:o.call(this,e.styleId)})},getInitialState:function(){return this.cachedStylePropertiesForSkins={},{styleId:this.props.styleId,styleDataItem:o.call(this,this.props.styleId)}},linkStyleParam:function(t,i,o){if(e.includes(i,"COLOR_ALPHA"))return this.linkColorAlphaWithMutator(t,o);var l=this.state.styleDataItem;return{value:r(this.getEditorAPI(),l,t),requestChange:function(e){n.call(this,this.state.styleDataItem,t,e,o||"active",s(i))}.bind(this)}},linkColorAlphaWithMutator:function(e,t){var i="alpha-"+e,s=this.state.styleDataItem,o=this.getEditorAPI(),l=r(o,s,i);return{value:{color:r(o,s,e),alpha:l},requestChange:function(s){var l=s.alpha,a=s.color;r(o,this.state.styleDataItem,i)!==l?n.call(this,this.state.styleDataItem,i,l,t):n.call(this,this.state.styleDataItem,e,a,t)}.bind(this)}},cacheStylePropertiesForSkin:function(e,t){this.cachedStylePropertiesForSkins[e]=t},changeSkin:function(e){var t=this.getEditorAPI().documentServices.theme.styles.get(this.props.styleId);if(e!==t.skin){var s=i.call(this,e,t);this.cacheStylePropertiesForSkin(t.skin,t.style.properties),this.getEditorAPI().theme.styles.update(this.props.styleId,s),this.setState({styleDataItem:s})}}}}),define("panelUtils",["panelUtils/mixins/linkColorPickerMixin","panelUtils/mixins/linkStyleMixin"],function(e,t){return{linkColorPickerMixin:e,linkStyleMixin:t}});
//# sourceMappingURL=panelUtils.min.js.map