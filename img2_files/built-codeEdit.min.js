!function(e,t){"function"==typeof define&&define.amd?define([],t):(e.orion=e.orion||{},e.orion.codeEdit=t())}(this,function(){var e,t,n;!function(i){function r(e,t){return x.call(e,t)}function o(e,t){var n,i,r,o,s,a,l,c,h,d,u=t&&t.split("/"),p=_.map,f=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(u=u.slice(0,u.length-1),e=u.concat(e.split("/")),c=0;c<e.length;c+=1)if(d=e[c],"."===d)e.splice(c,1),c-=1;else if(".."===d){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((u||f)&&p){for(n=e.split("/"),c=n.length;c>0;c-=1){if(i=n.slice(0,c).join("/"),u)for(h=u.length;h>0;h-=1)if(r=p[u.slice(0,h).join("/")],r&&(r=r[i])){o=r,s=c;break}if(o)break;!a&&f&&f[i]&&(a=f[i],l=c)}!o&&a&&(o=a,s=l),o&&(n.splice(0,s,o),e=n.join("/"))}return e}function s(e,t){return function(){return p.apply(i,w.call(arguments,0).concat([e,t]))}}function a(e){return function(t){return o(t,e)}}function l(e){return function(t){m[e]=t}}function c(e){if(r(v,e)){var t=v[e];delete v[e],y[e]=!0,u.apply(i,t)}if(!r(m,e)&&!r(y,e))throw new Error("No "+e);return m[e]}function h(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function d(e){return function(){return _&&_.config&&_.config[e]||{}}}var u,p,f,g,m={},v={},_={},y={},x=Object.prototype.hasOwnProperty,w=[].slice;f=function(e,t){var n,i=h(e),r=i[0];return e=i[1],r&&(r=o(r,t),n=c(r)),r?e=n&&n.normalize?n.normalize(e,a(t)):o(e,t):(e=o(e,t),i=h(e),r=i[0],e=i[1],r&&(n=c(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:n}},g={require:function(e){return s(e)},exports:function(e){var t=m[e];return"undefined"!=typeof t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:d(e)}}},u=function(e,t,n,o){var a,h,d,u,p,_,x=[];if(o=o||e,"function"==typeof n){for(t=!t.length&&n.length?["require","exports","module"]:t,p=0;p<t.length;p+=1)if(u=f(t[p],o),h=u.f,"require"===h)x[p]=g.require(e);else if("exports"===h)x[p]=g.exports(e),_=!0;else if("module"===h)a=x[p]=g.module(e);else if(r(m,h)||r(v,h)||r(y,h))x[p]=c(h);else{if(!u.p)throw new Error(e+" missing "+h);u.p.load(u.n,s(o,!0),l(h),{}),x[p]=m[h]}d=n.apply(m[e],x),e&&(a&&a.exports!==i&&a.exports!==m[e]?m[e]=a.exports:d===i&&_||(m[e]=d))}else e&&(m[e]=n)},e=t=p=function(e,t,n,r,o){return"string"==typeof e?g[e]?g[e](t):c(f(e,t).f):(e.splice||(_=e,t.splice?(e=t,t=n,n=null):e=i),t=t||function(){},"function"==typeof n&&(n=r,r=o),r?u(i,e,t,n):setTimeout(function(){u(i,e,t,n)},4),p)},p.config=function(e){return _=e,p},n=function(e,t,n){t.splice||(n=t,t=[]),r(m,e)||r(v,e)||(v[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("almond",function(){}),n("orion/objects",[],function(){function e(e){for(var t=Object.prototype.hasOwnProperty,n=1,i=arguments.length;i>n;n++){var r=arguments[n];for(var o in r)t.call(r,o)&&(e[o]=r[o])}return e}return{clone:function(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var n=Object.create(Object.getPrototypeOf(t));return e(n,t),n},mixin:e,toArray:function(e){return Array.isArray(e)?e:[e]}}}),function(){"use strict";function e(e,t,n,i,r,o){t[e]&&(n.push(e),(t[e]===!0||1===t[e])&&i.push(r+e+"/"+o))}function i(e,n,i,r,o){var s=r+n+"/"+o;t._fileExists(e.toUrl(s+".js"))&&i.push(s)}function r(e,t,n){var i;for(i in t)!t.hasOwnProperty(i)||e.hasOwnProperty(i)&&!n?"object"==typeof t[i]&&(!e[i]&&t[i]&&(e[i]={}),r(e[i],t[i],n)):e[i]=t[i]}var o=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;n("i18n",["module"],function(t){var n=t.config?t.config():{};return n=n||{},{version:"2.0.4",load:function(t,s,a,l){l=l||{},l.locale&&(n.locale=l.locale);var c,h,d,u=o.exec(t),p=u[1],f=u[4],g=u[5],m=f.split("-"),v=[],_={},y="";if(u[5]?(p=u[1],c=p+g):(c=t,g=u[4],f=n.locale,f||(f=n.locale="undefined"==typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),m=f.split("-")),l.isBuild){for(v.push(c),i(s,"root",v,p,g),h=0;h<m.length;h++)d=m[h],y+=(y?"-":"")+d,i(s,y,v,p,g);if(l.locales){var x,w;for(x=0;x<l.locales.length;x++)for(f=l.locales[x],m=f.split("-"),y="",w=0;w<m.length;w++)d=m[w],y+=(y?"-":"")+d,i(s,y,v,p,g)}s(v,function(){a()})}else s([c],function(t){var n,i=[];for(e("root",t,i,v,p,g),h=0;h<m.length;h++)n=m[h],y+=(y?"-":"")+n,e(y,t,i,v,p,g);s(v,function(){var e,n,o;for(e=i.length-1;e>-1&&i[e];e--)o=i[e],n=t[o],(n===!0||1===n)&&(n=s(p+o+"/"+g)),r(_,n);a(_)})})}}})}(),n("orion/nls/messages",{root:!0}),n("orion/nls/root/messages",{Navigator:"Navigator",Sites:"Sites",Shell:"Shell","Get Plugins":"Get Plug-ins",Global:"Global",Editor:"Editor",EditorRelatedLink:"Show Current Folder",EditorRelatedLinkParent:"Show Enclosing Folder",EditorLinkWorkspace:"Edit",EditorRelatedLinkProj:"Show Project",sidebar:"Sidebar","Filter bindings":"Filter bindings",BindingPrompt:"Enter the new binding",NoBinding:"---",orionClientLabel:"Orion client repository","Orion Editor":"Text Editor","Orion Image Viewer":"Image Viewer","Orion Markdown Editor":"Markdown Editor","Orion Markdown Viewer":"Markdown Viewer","Orion JSON Editor":"JSON Editor","View on Site":"View on Site","View this file or folder on a web site hosted by Orion":"View this file or folder on a web site hosted by Orion.",ShowAllKeyBindings:"Show a list of all the keybindings on this page","Show Keys":"Show Keys",HideShowBannerFooter:"Hide or show the page banner","Toggle banner and footer":"Toggle banner",ChooseFileOpenEditor:"Choose a file by name and open an editor on it",FindFile:"Open File...","System Configuration Details":"System Configuration Details","System Config Tooltip":"Go to the System Configuration Details page","Background Operations":"Background Operations","Background Operations Tooltip":"Go to the Background Operations page","Operation status is unknown":"Operation status is unknown","Unknown item":"Unknown item",NoSearchAvailableErr:"Can't search: no search service is available",Related:"Related",Options:"Options","LOG: ":"LOG: ",View:"View",SplashTitle:"Setting up Workspace",SplashTitleSettings:"Loading Settings",SplashTitleGit:"Loading Git Repositories",LoadingPage:"Loading Page",LoadingPlugins:"Loading Plugins",LoadingResources:"Loading Resources",plugin_started:'"${0}" started',"plugin_lazy activation":'"${0}" lazily activated',plugin_starting:'"${0}" starting',"no parent":"no parent","no tree model":"no tree model","no renderer":"no renderer","could not find table row ":"could not find table row ",Operations:"Operations","Operations running":"Operations running",SomeOpWarning:"Some operations finished with warning",SomeOpErr:"Some operations finished with error","no service registry":"no service registry",Tasks:"Tasks",Close:"Close","Expand all":"Expand all","Collapse all":"Collapse all",Search:"Search","Advanced search":"Advanced search",Submit:"Submit",More:"More","Recent searches":"Recent searches","Regular expression":"Regular expression","Search options":"Search options","Global search":"Global search","Orion Home":"Home","Close notification":"Close notification",OpPressSpaceMsg:"Operations - Press spacebar to show current operations","Toggle side panel":"Toggle side panel","Open or close the side panel":"Open or close the side panel",Projects:"Projects","Toggle Sidebar":"Toggle Sidebar","Sample HTML5 Site":"Sample HTML5 Site","Generate an HTML5 'Hello World' website, including JavaScript, HTML, and CSS files.":"Generate an HTML5 'Hello World' website, including JavaScript, HTML, and CSS files.","Sample Orion Plugin":"Sample Orion Plug-in","Generate a sample plugin for integrating with Orion.":"Generate a sample plug-in for integrating with Orion.",Browser:"Web Browser",OutlineProgress:"Getting outline for ${0} from ${1}",outlineTimeout:"Outline service timed out. Try reloading the page and opening the outline again.",UnknownError:"An unknown error occurred.",Filter:"Filter (* = any string, ? = any character)",TemplateExplorerLabel:"Templates",OpenTemplateExplorer:"Open Template Explorer",Edit:"Edit",CentralNavTooltip:"Toggle Navigation Menu","Wrote: ${0}":"Wrote: ${0}",GenerateHTML:"Generate HTML file",GenerateHTMLTooltip:"Write an HTML file generated from the current Markdown editor content","alt text":"alt text",blockquote:"blockquote",code:"code","code (block)":"code (block)","code (span)":"code (span)",emphasis:"emphasis","fenced code (${0})":"fenced code (${0})","header (${0})":"header (${0})","horizontal rule":"horizontal rule",label:"label","link (auto)":"link (auto)","link (image)":"link (image)","link (inline)":"link (inline)","link label":"link label","link label (optional)":"link label (optional)","link (ref)":"link (ref)","list item (bullet)":"list item (bullet)","list item (numbered)":"list item (numbered)","strikethrough (${0})":"strikethrough (${0})",strong:"strong","table (${0})":"table (${0})",text:"text","title (optional)":"title (optional)",url:"url",workedProgress:"${0} (${1}/${2})",TogglePaneOrientationTooltip:"Toggle split pane orientation",WarningDuplicateLinkId:"Duplicate link ID: ${0} (link IDs are not case-sensitive)",WarningHeaderTooDeep:"Header level cannot exceed 6",WarningLinkHasNoText:"Link has no text",WarningLinkHasNoURL:"Link has no URL",WarningOrderedListItem:"Ordered list item within unordered list",WarningOrderedListShouldStartAt1:"The first item in an ordered list should have index 1",WarningUndefinedLinkId:"Undefined link ID: ${0}",WarningUnorderedListItem:"Unordered list item within ordered list",PageTitleFormat:"${0} - ${1}",KeyCTRL:"Ctrl",KeySHIFT:"Shift",KeyALT:"Alt",KeyBKSPC:"Backspace",KeyDEL:"Del",KeyEND:"End",KeyENTER:"Enter",KeyESCAPE:"Esc",KeyHOME:"Home",KeyINSERT:"Ins",KeyPAGEDOWN:"Page Down",KeyPAGEUP:"Page Up",KeySPACE:"Space",KeyTAB:"Tab","a year":"a year",years:"${0} years","a month":"a month",months:"${0} months","a day":"a day",days:"${0} days","an hour":"an hour",hours:"${0} hours","a minute":"a minute",minutes:"${0} minutes",timeAgo:"${0} ago",justNow:"just now",fixAll:"Fix all"}),n("orion/util",[],function(){function e(e){var t=arguments;return e.replace(/\$\{([^\}]+)\}/g,function(e,n){return t[(n<<0)+1]})}function t(e,t){return e.createElementNS?e.createElementNS(x,t):e.createElement(t)}function n(e,t){t.addEventListener("keydown",function(t){9!==t.keyCode||t.shiftKey||(t.preventDefault(),e.focus())}),e.addEventListener("keydown",function(e){9===e.keyCode&&e.shiftKey&&(e.preventDefault(),t.focus())})}var i=navigator.userAgent,r=-1!==i.indexOf("MSIE")||-1!==i.indexOf("Trident")?document.documentMode:void 0,o=parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0,s=-1!==i.indexOf("Opera")?parseFloat(i.split("Version/")[1]):void 0,a=parseFloat(i.split("Chrome/")[1])||void 0,l=-1!==i.indexOf("Safari")&&!a,c=parseFloat(i.split("WebKit/")[1])||void 0,h=-1!==i.indexOf("Android"),d=-1!==i.indexOf("iPad"),u=-1!==i.indexOf("iPhone"),p=d||u,f=-1!==i.indexOf("Electron"),g=-1!==navigator.platform.indexOf("Mac"),m=-1!==navigator.platform.indexOf("Win"),v=-1!==navigator.platform.indexOf("Linux"),_="undefined"!=typeof document&&"ontouchstart"in document.createElement("input"),y=m?"\r\n":"\n",x="http://www.w3.org/1999/xhtml";return{formatMessage:e,createElement:t,confineDialogTab:n,isIE:r,isFirefox:o,isOpera:s,isChrome:a,isSafari:l,isWebkit:c,isAndroid:h,isIPad:d,isIPhone:u,isIOS:p,isElectron:f,isMac:g,isWindows:m,isLinux:v,isTouch:_,platformDelimiter:y}}),n("orion/webui/littlelib",["orion/util"],function(e){function t(e,t){return t||(t=document),t.querySelector(e)}function n(e,t){return t||(t=document),t.querySelectorAll(e)}function i(e,t){return Array.prototype.slice.call(n(e,t))}function r(e){var t=e;return"string"==typeof e&&(t=document.getElementById(e)),t}function o(e,t){if(!e||!t)return!1;if(e===t)return!0;var n=e.compareDocumentPosition(t);return Boolean(16&n)}function s(e){var t=e.getBoundingClientRect(),n=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),i=Math.max(document.documentElement.scrollTop,document.body.scrollTop);return{left:t.left+n,top:t.top+i,width:t.width,height:t.height}}function a(e){for(;e.hasChildNodes();){var t=e.firstChild;e.removeChild(t)}}function l(t){var n=t.tabIndex;if(0===n&&e.isIE){var i={a:!0,body:!0,button:!0,frame:!0,iframe:!0,img:!0,input:!0,isindex:!0,object:!0,select:!0,textarea:!0};i[t.nodeName.toLowerCase()]||t.attributes.tabIndex||(n=-1)}return n}function c(e){if(l(e)>=0)return e;if(e.hasChildNodes())for(var t=0;t<e.childNodes.length;t++){var n=c(e.childNodes[t]);if(n)return n}return null}function h(e){if(l(e)>=0)return e;if(e.hasChildNodes())for(var t=e.childNodes.length-1;t>=0;t--){var n=h(e.childNodes[t]);if(n)return n}return null}function d(e,t){if(3===e.nodeType){var n=b.exec(e.nodeValue);n&&n.length>1&&t(e,n)}if(e.hasChildNodes())for(var i=0;i<e.childNodes.length;i++)d(e.childNodes[i],t)}function u(e,t){if(!e||!t)return 0;var n=e.ownerDocument,i=n.defaultView||n.parentWindow;if(i.getComputedStyle){var r=i.getComputedStyle(e,null),o=r.getPropertyValue(t);if(o.length>2&&-1!==o.indexOf("px",o.length-2)){o=o.slice(0,-2);var s=parseInt(o,10);return s!==s?0:s}}return 0}function p(e,t){d(e,function(e,n){var i=t[n[1]]||n[1];e.parentNode.replaceChild(document.createTextNode(i),e)})}function f(e,t){d(e,function(e,n){var i=t[n[1]];if(i){var r=document.createRange(),o=n.index;r.setStart(e,o),r.setEnd(e,o+n[0].length),r.deleteContents(),r.insertNode(i)}})}function g(t,n){function i(e){C.forEach(function(t){var n=!1,i=t.excludeNodes.some(function(t){return document.body.contains(t)?(n=!0,t.contains(e.target)):!1});if(n&&!i)try{t.dismiss(e)}catch(r){"undefined"!=typeof console&&console&&console.error(r&&r.message)}}),C=C.filter(function(e){return e.excludeNodes.some(function(e){return document.body.contains(e)})})}null===C&&(C=[],document.addEventListener("click",i,!0),e.isIOS&&document.addEventListener("touchend",function(e){function t(){e.target.removeEventListener("click",t)}0===e.touches.length&&e.target.addEventListener("click",t)},!1)),C.push({excludeNodes:t,dismiss:n})}function m(e){C=C.filter(function(t){return e!==t.dismiss})}function v(e){for(var t=e.parentNode,n=document.documentElement;t&&t!==n;){var i=window.getComputedStyle(t,null);if(!i)break;var r=i.getPropertyValue("overflow-y");if("auto"===r||"scroll"===r)break;t=t.parentNode}return t}function _(e){window.document.all&&(e.keyCode=0),e.preventDefault&&(e.preventDefault(),e.stopPropagation())}function y(e){for(var t=document.getElementsByTagName("iframe"),n=0;n<t.length;n++)t[n].parentNode.style.pointerEvents=e?"":"none"}function x(e){return T[e]||null}function w(e,t){var n=t,i=null;return void 0===n&&(n=document.createElement("div")),n.innerHTML=e,i=n.children.length>1?n.children:n.firstChild}var b=/\$\{([^\}]+)\}/,C=null,E={BKSPC:8,TAB:9,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DEL:46,COMMAND:991},T=Object.create(null);return Object.keys(E).forEach(function(e){T[E[e]]=e}),{$:t,$$:n,$$array:i,node:r,contains:o,bounds:s,empty:a,firstTabbable:c,lastTabbable:h,pixelValueOf:u,stop:_,processTextNodes:p,processDOMNodes:f,addAutoDismiss:g,setFramesEnabled:y,getOffsetParent:v,removeAutoDismiss:m,keyName:x,KEY:E,createNodes:w}}),n("orion/commandsProxy",["orion/util","orion/webui/littlelib"],function(e,t){function n(t,n){function i(t){if(e.isMac){if(t.metaKey&&!t.altKey)return t.shiftKey||t.ctrlKey||65!==t.keyCode&&67!==t.keyCode&&86!==t.keyCode&&88!==t.keyCode&&90!==t.keyCode?!1:!0;if(t.ctrlKey)return!1}else{if(t.ctrlKey&&!t.altKey)return t.shiftKey||65!==t.keyCode&&67!==t.keyCode&&86!==t.keyCode&&88!==t.keyCode&&90!==t.keyCode?!1:!0;if(t.altKey&&!t.ctrlKey)return!1;if(t.ctrlKey&&t.altKey)return!1}if(t["char"])return t["char"].length>0;if(t.charCode||t.keyCode){var n=t.charCode||t.keyCode;switch(n){case 8:case 9:case 13:case 46:return!0;default:return n>=32&&112>n||n>123}}return!1}if(t=t||window.event,i(t)){if("true"===t.target.contentEditable)return;var r=t.target.nodeName.toLowerCase();if("input"===r){var o=t.target.type.toLowerCase();switch(o){case"text":case"password":case"search":case"color":case"date":case"datetime":case"datetime-local":case"email":case"month":case"number":case"range":case"tel":case"time":case"url":case"week":return}}else if("textarea"===r)return}n(t)}function i(){this._init()}return i.prototype={destroy:function(){this._listener&&(document.removeEventListener("keydown",this._listener),this._listener=null)},setProxy:function(e){this.proxy=e},setKeyBindings:function(e){this.bindings=e},_init:function(){var e=this;document.addEventListener("keydown",this._listener=function(i){return n(i,function(n){var i=e.proxy,r=e.bindings;if(r&&i)for(var o=0;o<r.length;o++)r[o].match(n)&&(i.processKey({type:n.type,keyCode:n.keyCode,altKey:n.altKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey,shiftKey:n.shiftKey}),t.stop(n))})})}},{handleKeyEvent:n,CommandsProxy:i}}),n("wix-code/orion-overrides/orion/commandsProxy",["orion/commandsProxy"],function(e){function t(e){i=e}function n(e,t){(!i||i.hasFocus())&&r.apply(this,arguments)}var i,r=e.handleKeyEvent;return{handleKeyEvent:n,CommandsProxy:e.CommandsProxy,init:t}}),n("orion/EventTarget",[],function(){function e(){this._namedListeners={}}return e.prototype={dispatchEvent:function(e){if(!e.type)throw new Error("unspecified type");var t=this._namedListeners[e.type];return t&&t.forEach(function(t){try{"function"==typeof t?t(e):t.handleEvent(e)}catch(n){"undefined"!=typeof console&&console.log(n)}}),!e.defaultPrevented},addEventListener:function(e,t){("function"==typeof t||t.handleEvent)&&(this._namedListeners[e]=this._namedListeners[e]||[],this._namedListeners[e].push(t))},removeEventListener:function(e,t){var n=this._namedListeners[e];if(n)for(var i=0;i<n.length;i++)if(n[i]===t){1===n.length?delete this._namedListeners[e]:n.splice(i,1);break}}},e.prototype.constructor=e,e.attach=function(t){var n=new e;t.dispatchEvent=n.dispatchEvent.bind(n),t.addEventListener=n.addEventListener.bind(n),t.removeEventListener=n.removeEventListener.bind(n)},e}),n("orion/webui/dropdown",["orion/webui/littlelib","orion/EventTarget"],function(e,t){function n(e){t.attach(this),this._init(e)}function i(e,t){t=void 0===t?"span":t;var n=document.createElement(t);if(n.tabIndex=0,n.className="dropdownMenuItem",n.setAttribute("role","menuitem"),e){var i=document.createElement("span");i.appendChild(document.createTextNode(e)),i.classList.add("dropdownCommandName"),n.appendChild(i)}var r=document.createElement("li");return r.appendChild(n),r}function r(){var e=document.createElement("li");return e.classList.add("dropdownSeparator"),e}function o(e,t){var n=document.createElement("span");n.classList.add("dropdownKeyBinding"),n.appendChild(document.createTextNode(t)),e.appendChild(n)}return n.prototype={_init:function(t){if(this._dropdownNode=e.node(t.dropdown),!this._dropdownNode)throw"no dom node for dropdown found";if(this._populate=t.populate,this._selectionClass=t.selectionClass,this._parentDropdown=t.parentDropdown,this._positioningNode=t.positioningNode,!this._parentDropdown)for(var n=this._dropdownNode.parentNode;n&&document!==n;){if(n.classList&&n.classList.contains("dropdownMenu")){this._parentDropdown=n.dropdown;break}n=n.parentNode}if(this._dropdownNode.tabIndex=0,t.triggerNode?this._triggerNode=t.triggerNode:this._triggerNode=e.$(".dropdownTrigger",this._dropdownNode.parentNode),!this._triggerNode)throw"no dom node for dropdown trigger found";var i=function(t){var n=!1;n=this._triggerNode.classList.contains("dropdownMenuItem")?this.open(t):this.toggle(t),n&&e.stop(t)}.bind(this);t.skipTriggerEventListeners||(this._triggerNode.addEventListener("click",i,!1),"span"===this._triggerNode.tagName.toLowerCase()&&this._triggerNode.addEventListener("keydown",function(t){(t.keyCode===e.KEY.ENTER||t.keyCode===e.KEY.SPACE)&&i(t)}.bind(this),!1)),this._dropdownNode.addEventListener("keydown",this._dropdownKeyDown.bind(this),!1)},addTriggerNode:function(t){var n=this;t.addEventListener("click",function(t){n.toggle(t)&&e.stop(t)},!1)},toggle:function(e){return this.isVisible()?this.close():this.open(e)},isVisible:function(){return this._isVisible},open:function(t){var n=!1;if(!this.isVisible()){this.dispatchEvent({type:"triggered",dropdown:this,event:t}),this._populate&&(this.empty(),this._populate(this._dropdownNode));var i=this.getItems();if(i.length>0){e.setFramesEnabled(!1),this._boundAutoDismiss&&e.removeAutoDismiss(this._boundAutoDismiss),this._boundAutoDismiss=this._autoDismiss.bind(this);var r=e.$$array(".dropdownSubMenu",this._dropdownNode);e.addAutoDismiss([this._triggerNode].concat(r),this._boundAutoDismiss),this._triggerNode.classList.add("dropdownTriggerOpen"),this._selectionClass&&this._triggerNode.classList.add(this._selectionClass),this._dropdownNode.classList.add("dropdownMenuOpen"),this._isVisible=!0,this._positionDropdown(t),this._focusDropdownNode(),n=!0,this._parentDropdown&&this._parentDropdown.submenuOpen(this)}}return n},_focusDropdownNode:function(){this._dropdownNode.focus()},_autoDismiss:function(e){if(this.close(!1)&&this._dropdownNode.contains(e.target))for(var t=this._parentDropdown;t;)t.close(!1),t=t._parentDropdown},_positionDropdown:function(t){if(this._dropdownNode.style.left="",this._dropdownNode.style.top="",this._positioningNode)return void(this._dropdownNode.style.left=this._positioningNode.offsetLeft+"px");var n=e.bounds(this._dropdownNode),i=e.bounds(document.body);if(n.left+n.width>i.left+i.width)if(this._triggerNode.classList.contains("dropdownMenuItem"))this._dropdownNode.style.left=-n.width+"px";else{var r=e.bounds(this._boundingNode(this._triggerNode)),o=e.bounds(this._triggerNode);this._dropdownNode.style.left=o.left-r.left-n.width+o.width+"px"}var s=n.top+n.height-(i.top+i.height);s>0&&(this._dropdownNode.style.top=Math.floor(this._dropdownNode.style.top-s)+"px")},_boundingNode:function(e){var t=window.getComputedStyle(e,null);if(null===t)return e;var n=t.getPropertyValue("position");return"absolute"!==n&&e.parentNode&&e!==document.body?this._boundingNode(e.parentNode):e},close:function(t){var n=!1;return this.isVisible()&&(this._triggerNode.classList.remove("dropdownTriggerOpen"),this._selectionClass&&this._triggerNode.classList.remove(this._selectionClass),this._dropdownNode.classList.remove("dropdownMenuOpen"),e.setFramesEnabled(!0),t&&this._triggerNode.focus(),this._isVisible=!1,this._selectedItem&&(this._selectedItem.classList.remove("dropdownMenuItemSelected"),this._selectedItem=null),this._boundAutoDismiss&&(e.removeAutoDismiss(this._boundAutoDismiss),this._boundAutoDismiss=null),n=!0),n},getItems:function(){var t=e.$$array("li:not(.dropdownSeparator) > .dropdownMenuItem",this._dropdownNode,!0),n=[],i=this;return t.forEach(function(e){e.parentNode.parentNode===i._dropdownNode&&n.push(e)}),n.forEach(function(t){t._hasDropdownMouseover||(t.addEventListener("mouseover",function(n){t.dropdown?t.dropdown.open(n):(i._closeSelectedSubmenu(),e.stop(n)),i._selectItem(t)}),t._hasDropdownMouseover=!0)}),n},empty:function(){var t=e.$$array("li",this._dropdownNode),n=this;t.forEach(function(e){e.parentNode===n._dropdownNode&&e.parentNode.removeChild(e)})},_dropdownKeyDown:function(t){if(t.keyCode===e.KEY.UP||t.keyCode===e.KEY.DOWN||t.keyCode===e.KEY.RIGHT||t.keyCode===e.KEY.ENTER||t.keyCode===e.KEY.LEFT){var n=this.getItems();if(n.length&&n.length>0){if(this._selectedItem){var i=n.indexOf(this._selectedItem);0>i&&(i=n.indexOf(this._selectedItem.parentNode)),i>=0&&(t.keyCode===e.KEY.UP&&i>0?(i--,this._selectItem(n[i])):t.keyCode===e.KEY.DOWN&&i<n.length-1?(i++,this._selectItem(n[i])):t.keyCode===e.KEY.ENTER||t.keyCode===e.KEY.RIGHT?this._selectedItem.classList.contains("dropdownTrigger")&&this._selectedItem.dropdown?(this._selectedItem.dropdown.open(),this._selectedItem.dropdown._selectItem()):t.keyCode===e.KEY.ENTER&&this._selectedItem.click():t.keyCode===e.KEY.LEFT&&this._selectedItem.parentNode.parentNode.classList.contains("dropdownMenuOpen")&&(this.close(!0),this._parentDropdown&&this._parentDropdown._dropdownNode.focus()))}else this._selectItem(n[0]);e.stop(t)}}else t.keyCode===e.KEY.ESCAPE&&(this.close(!0),e.stop(t))},_selectItem:function(e){var t=e||this.getItems()[0];t&&(this._selectedItem&&this._selectedItem.classList.remove("dropdownMenuItemSelected"),this._selectedItem=t,this._selectedItem.classList.add("dropdownMenuItemSelected")),document.activeElement!==this._dropdownNode&&this._dropdownNode.focus()},submenuOpen:function(e){e!==this._selectedSubmenu&&(this._closeSelectedSubmenu(),this._selectedSubmenu=e)},_closeSelectedSubmenu:function(){for(var e=this._selectedSubmenu;e;)e.close(),e=e._selectedSubmenu},destroy:function(){this.empty(),this._boundAutoDismiss&&(e.removeAutoDismiss(this._boundAutoDismiss),this._boundAutoDismiss=null)},appendMenuItem:function(e,t){var n=i(e,t);return this._dropdownNode.appendChild(n),n},appendSeparator:function(){var e=r();return this._dropdownNode.appendChild(e),e}},n.prototype.constructor=n,{Dropdown:n,appendKeyBindingString:o,createMenuItem:i,createSeparator:r}}),n("text",["module"],function(e){"use strict";var n,i,r,o,s,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],l=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,h="undefined"!=typeof location&&location.href,d=h&&location.protocol&&location.protocol.replace(/\:/,""),u=h&&location.hostname,p=h&&(location.port||void 0),f={},g=e.config&&e.config()||{};return n={version:"2.0.12",strip:function(e){if(e){e=e.replace(l,"");var t=e.match(c);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:g.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=a[t];try{e=new ActiveXObject(n)}catch(i){}if(e){a=[n];break}}return e},parseName:function(e){var t,n,i,r=!1,o=e.indexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!s||o>1)?(t=e.substring(0,o),n=e.substring(o+1,e.length)):t=e,i=n||t,o=i.indexOf("!"),-1!==o&&(r="strip"===i.substring(o+1),i=i.substring(0,o),n?n=i:t=i),{moduleName:t,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,i,r){var o,s,a,l=n.xdRegExp.exec(e);return l?(o=l[2],s=l[3],s=s.split(":"),a=s[1],s=s[0],!(o&&o!==t||s&&s.toLowerCase()!==i.toLowerCase()||(a||s)&&a!==r)):!0},finishLoad:function(e,t,i,r){i=t?n.strip(i):i,g.isBuild&&(f[e]=i),r(i)},load:function(e,t,i,r){if(r&&r.isBuild&&!r.inlineText)return void i();g.isBuild=r&&r.isBuild;var o=n.parseName(e),s=o.moduleName+(o.ext?"."+o.ext:""),a=t.toUrl(s),l=g.useXhr||n.useXhr;return 0===a.indexOf("empty:")?void i():void(!h||l(a,d,u,p)?n.get(a,function(t){n.finishLoad(e,o.strip,t,i)},function(e){i.error&&i.error(e)}):t([s],function(e){n.finishLoad(o.moduleName+"."+o.ext,o.strip,e,i)}))},write:function(e,t,i,r){if(f.hasOwnProperty(t)){var o=n.jsEscape(f[t]);i.asModule(e+"!"+t,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,t,i,r,o){var s=n.parseName(t),a=s.ext?"."+s.ext:"",l=s.moduleName+a,c=i.toUrl(s.moduleName+a)+".js";n.load(l,i,function(t){var i=function(e){return r(c,e)};i.asModule=function(e,t){return r.asModule(e,c,t)},n.write(e,l,i,o)},o)}},"node"===g.env||!g.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(i=t.nodeRequire("fs"),n.get=function(e,t,n){try{var r=i.readFileSync(e,"utf8");0===r.indexOf("\ufeff")&&(r=r.substring(1)),t(r)}catch(o){n&&n(o)}}):"xhr"===g.env||!g.env&&n.createXhr()?n.get=function(e,t,i,r){var o,s=n.createXhr();if(s.open("GET",e,!0),r)for(o in r)r.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),r[o]);g.onXhr&&g.onXhr(s,e),s.onreadystatechange=function(n){var r,o;4===s.readyState&&(r=s.status||0,r>399&&600>r?(o=new Error(e+" HTTP status: "+r),o.xhr=s,i&&i(o)):t(s.responseText),g.onXhrComplete&&g.onXhrComplete(s,e))},s.send(null)}:"rhino"===g.env||!g.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?n.get=function(e,t){var n,i,r="utf-8",o=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),r)),l="";try{for(n=new java.lang.StringBuffer,i=a.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=a.readLine());)n.append(s),n.append(i);l=String(n.toString())}finally{a.close()}t(l)}:("xpconnect"===g.env||!g.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,o=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,n.get=function(e,t){var n,i,a,l={};s&&(e=e.replace(/\//g,"\\")),a=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),n.init(a,1,0,!1),i=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),i.init(n,"utf-8",n.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),i.readString(n.available(),l),i.close(),n.close(),t(l.value)}catch(c){throw new Error((a&&a.path||"")+": "+c)}}),n}),n("text!orion/webui/dropdowntriggerbutton.html",[],function(){return'<button class="dropdownTrigger">${ButtonText}<!--span class="dropdownArrowDown core-sprite-openarrow"></span--></button><ul class="dropdownMenu"></ul>'}),n("text!orion/webui/dropdowntriggerbuttonwitharrow.html",[],function(){return'<button class="dropdownTrigger dropdownDefaultButton">${ButtonText}<span class="dropdownArrowDown core-sprite-openarrow"></span></button><ul class="dropdownMenu"></ul>'}),n("text!orion/webui/checkedmenuitem.html",[],function(){return'<li><label class="dropdownMenuItem"><input class="checkedMenuItem" role="menuitem" type="checkbox" />${ItemText}</label></li>'}),n("orion/webui/tooltip",["orion/webui/littlelib"],function(e){function t(e){this._init(e)}return t.prototype={_init:function(t){if(this._node=e.node(t.node),!this._node)throw"no dom node for tooltip found";this._position=t.position||["right","above","below","left"],this._text=t.text,this._hideDelay=void 0===t.hideDelay?200:t.hideDelay,this._tailSize=t.tailSize||10,this._trigger=t.trigger||"mouseover",this._afterShowing=t.afterShowing,this._afterHiding=t.afterHiding;var n=this;if("click"===this._trigger)this._showDelay=0,this._node.addEventListener("click",this._clickHandler=function(t){t.target===n._node&&(n.show(),e.stop(t))},!1);else if("mouseover"===this._trigger){this._showDelay=void 0===t.showDelay?500:t.showDelay;var i=["mouseout","click"];this._node.addEventListener("mouseover",this._mouseoverHandler=function(t){e.contains(n._node,t.target)&&(n.show(),e.stop(t))},!1),this._leaveHandler=function(t){e.contains(n._node,t.target)&&n.hide()};for(var r=0;r<i.length;r++)this._node.addEventListener(i[r],this._leaveHandler,!1)}else"focus"===this._trigger&&(this._showDelay=void 0===t.showDelay?0:t.showDelay,this._hideDelay=void 0===t.hideDelay?0:t.hideDelay,this._node.addEventListener("focus",this._focusHandler=function(t){e.contains(n._node,t.target)&&n.show()},!1),this._blurHandler=function(t){e.contains(n._node,t.target)&&n.hide()},this._node.addEventListener("blur",this._blurHandler,!1))},_makeTipNode:function(){if(!this._tip){if(this._tip=document.createElement("span"),this._tip.classList.add("tooltipContainer"),this._tipInner=document.createElement("div"),this._tipInner.classList.add("tooltip"),this._text){this._tipTextContent=document.createElement("div"),this._tipTextContent.classList.add("textContent"),this._tipInner.appendChild(this._tipTextContent);var t=document.createTextNode(this._text);this._tipTextContent.appendChild(t)}this._tip.appendChild(this._tipInner),document.body.appendChild(this._tip);var n=this;if(e.addAutoDismiss([this._tip,this._node],function(){n.hide()}),"mouseover"===this._trigger){
this._tipInner.setAttribute("role","tooltip"),this._tipInner.id="tooltip"+(new Date).getTime().toString();var i=this._node.getAttribute("aria-label");this._text!==i&&this._node.setAttribute("aria-describedby",this._tipInner.id),this._tip.addEventListener("mouseover",function(t){n._timeout&&(window.clearTimeout(n._timeout),n._timeout=null),n._tip.addEventListener("mouseout",function(t){e.contains(n._tip,t.target)&&(n.hide(),e.stop(t))},!1)},!1)}}return this._tip},_positionTip:function(t,n){this._makeTipNode(),this._tip.classList.add("tooltipShowing"),"left"===t?this._tipInner.classList.add("left"):this._tipInner.classList.remove("left");var i,r=this._node;for(i=e.bounds(r);r&&!i.width&&!i.height;r=r.parentNode)i=e.bounds(r);var o,s,a=e.bounds(this._tipInner);switch(t){case"above":o=i.top-a.height-this._tailSize-1,s=i.left-this._tailSize;break;case"below":o=i.top+i.height+this._tailSize+1,s=i.left-this._tailSize;break;case"left":o=i.top-this._tailSize/2,s=i.left-a.width-this._tailSize-1;break;default:o=i.top-this._tailSize/2,s=i.left+i.width+this._tailSize+1}var l=document.body,c=document.documentElement,h=Math.max(c.scrollLeft,l.scrollLeft),d=Math.max(c.scrollTop,l.scrollTop),u=h+c.clientWidth,p=d+c.clientHeight;if(o+a.height>p){if(!n)return!1;o=p-a.height-1}if(s+a.width>u){if(!n)return!1;s=u-a.width-1}if(h>s){if(!n)return!1;s=h+4}if(d>o){if(!n)return!1;o=d+4}return this._tail&&this._tail.previousPosition!==t&&(this._tip.removeChild(this._tail),this._tail=null),this._tail||(this._tail=document.createElement("span"),this._tail.classList.add("tooltipTailFrom"+t),"above"===t||"left"===t?this._tip.appendChild(this._tail):this._tip.insertBefore(this._tail,this._tipInner),this._tail.previousPosition=t),this._tip.style.top=o+"px",this._tip.style.left=s+"px",!0},contentContainer:function(){return this._makeTipNode(),this._tipInner},isShowing:function(){return this._tip&&this._tip.classList.contains("tooltipShowing")},show:function(){this.isShowing()||(this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null),this._showDelay?this._timeout=window.setTimeout(this._showImmediately.bind(this),this._showDelay):this._showImmediately())},_showImmediately:function(){for(var e=!1,t=0;!e&&t<this._position.length;)e=this._positionTip(this._position[t]),t++;e||this._positionTip(this._position[0],!0),this._afterShowing&&this._afterShowing()},hide:function(e){if(this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null),this.isShowing()){void 0===e&&(e=this._hideDelay);var t=this;this._timeout=window.setTimeout(function(){t._tip.classList.remove("tooltipShowing"),t._tip.removeAttribute("style"),t._afterHiding&&t._afterHiding()},e)}},destroy:function(){if(this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null),this._tip&&(document.body.removeChild(this._tip),this._tip=null,this._tipInner=null,this._tipTextContent=null,this._tail=null),this._node){this._node.removeEventListener("click",this._clickHandler,!1),this._node.removeEventListener("mouseover",this._mouseoverHandler,!1),this._node.removeEventListener("focus",this._focusHandler,!1),this._node.removeEventListener("blur",this._blurHandler,!1);for(var e=["mouseout","click"],t=0;t<e.length;t++)this._node.removeEventListener(e[t],this._leaveHandler,!1)}}},t.prototype.constructor=t,{Tooltip:t}}),n("orion/metrics",[],function(){function e(e,t){var n=e.getServiceReferences("orion.metrics"),i=[];n.forEach(function(t){i.push(e.getService(t))});var o=window.location.protocol+"//"+window.location.hostname+window.location.pathname+window.location.search,s=window.location.pathname+window.location.search,a=document.title;r=i,r.forEach(function(e){e.pageLoad(o,s,a,t)}),e.registerService("orion.core.metrics.client",this)}function t(e,t,n,i){r.forEach(function(r){r.logTiming(e,t,n,i)})}function n(e,t,n,i,o){r.forEach(function(r){r.logEvent(e,t,n||"",i,o)})}function i(e,n){if(window.performance){if(window.performance.getEntriesByName&&window.performance.mark){if(window.performance.getEntriesByName(e).length)return;window.performance.mark(e)}else{if(o[e])return;o[e]=Date.now()}t("page",e,window.performance.now(),n)}}var r=[],o=Object.create(null);return e.prototype={logTiming:function(e,n,i,r){t(e,n,i,r)},logEvent:function(e,t,i,r,o){n(e,t,i,r,o)},logPageLoadTiming:function(e,t){i(e,t)}},{Metrics:e,logTiming:t,logEvent:n,logPageLoadTiming:i}}),n("orion/commands",["i18n!orion/nls/messages","orion/webui/littlelib","orion/commandsProxy","orion/webui/dropdown","text!orion/webui/dropdowntriggerbutton.html","text!orion/webui/dropdowntriggerbuttonwitharrow.html","text!orion/webui/checkedmenuitem.html","orion/webui/tooltip","orion/metrics"],function(e,t,n,i,r,o,s,a,l){function c(e){C=e}function h(e){var t=e.invocation;if(t){var n=e.command;if("function"==typeof n.hrefCallback){var i=n.hrefCallback.call(t.handler||window,t);return i.then?i.then(function(e){window.open(e)}):window.open(i),!0}if(t.commandRegistry)return t.commandRegistry._invoke(t),!0;if(n.onClick||n.callback)return window.setTimeout(function(){(n.onClick||n.callback).call(t.handler||window,t)},0),!0}return!1}function d(e,n){for(var i in n)if(n[i]&&n[i].keyBinding&&n[i].command&&n[i].keyBinding.match(e)){var r=n[i],o=r.keyBinding;if((!o.domScope||t.contains(t.node(o.domScope),e.target))&&h(r))return void t.stop(e)}}function u(){var e={};if(C){var t,n,i;for(n=Object.keys(E),t=0;t<n.length;t++)i=n[t],e[i]=E[i];var r=C();for(n=Object.keys(r),t=0;t<n.length;t++)i=n[t],e[i]=r[i]}else e=E;return e}function p(e){d(e,u())}function f(e,t,n){t.classList.add("commandImage");var i;return e.imageClass?e.addImageClassToElement?t.classList.add(e.imageClass):(i=document.createElement("span"),t.appendChild(i),i.classList.add(e.spriteClass),i.classList.add(e.imageClass)):(i=new Image,i.alt=e.name,i.name=n,i.id=n,i.src=e.image,t.appendChild(i)),i}function g(e,n,s,a,l,c,h,d,u,p){if(e=t.node(e),!e)throw"no parent node was specified";var g=document.createRange();g.selectNode(e);var m=u?g.createContextualFragment(o):g.createContextualFragment(r);t.processTextNodes(m,{ButtonText:n}),e.appendChild(m);var v,_,y=e.lastChild;return u?(v=y.previousSibling,_=v.lastChild):v=y.previousSibling,a?v.classList.add(a):(v.classList.add("orionButton"),v.classList.add("commandButton")),p&&p.split(" ").forEach(v.classList.add.bind(v.classList)),l&&(c||(v.textContent="",v.setAttribute("aria-label",n)),f({spriteClass:"commandSprite",imageClass:l},v,n),v.classList.add("orionButton")),v.dropdown=new i.Dropdown({dropdown:y,populate:s,selectionClass:h,skipTriggerEventListeners:!!_,positioningNode:d}),y.dropdown=v.dropdown,{menuButton:v,menu:y,dropdown:v.dropdown,dropdownArrow:_}}function m(e,n,i,r){if(e=t.node(e),!e)throw"no parent node was specified";var o=document.createRange();o.selectNode(e);var a=o.createContextualFragment(s);t.processTextNodes(a,{ItemText:n}),e.appendChild(a);var l=e.lastChild,c=t.$(".checkedMenuItem",l);return c.checked=i,c.addEventListener("change",r,!1),c}function v(t,n,i,r,o){var s,a,l,c,h,d="/languageTools/quickfix";s=document.createElement("div"),a=l=document.createElement("button"),a.className="orionButton",n.extraClass&&a.classList.add(n.extraClass),a.classList.add("commandButton");var u=document.createTextNode(n.name);a.appendChild(u);var p=r||n.callback;if(p){var f=function(){c&&(c.checked&&(i.userData.doFixAll=!0),o&&o.get(d).then(function(e){e[n.id]=c.checked,o.put(d,e)})),p.call(i.handler,i)};n.onClick=p,l.addEventListener("click",function(e){var t;t=function(e){e&&f()},n.preCallback?n.preCallback(i).then(function(e){t(e)}):t(!0),e.stopPropagation()},!1)}if("ul"===t.nodeName.toLowerCase()){var g=document.createElement("li");t.appendChild(g),t=g}else a.classList.add("commandMargins");if(s.appendChild(a),n.fixAllEnabled&&i.userData._annotationModel){var m=n.id+"fixAll";c=document.createElement("input"),c.type="checkbox",c.className="quickfixAllParameter",c.checked=!0,c.id=m,h=document.createElement("label"),h.htmlFor=m,h.className="quickfixAllParameter",h.appendChild(document.createTextNode(e.fixAll)),o&&o.get(d).then(function(e){"boolean"==typeof e[n.id]&&(c.checked=e[n.id])}),s.appendChild(c),s.appendChild(h)}return t.appendChild(s),s}function _(e,n,i,r,o,s,l){var c,h;s=s||!n.name&&n.hasImage();var d=function(){if(s)n.hasImage()?(f(n,c,r),n.name&&c.setAttribute("aria-label",n.name)):(c.classList.add("commandButton"),c.classList.add("commandMissingImageButton"),c.appendChild(document.createTextNode(n.name)));else{c.classList.add("commandButton");var e=document.createTextNode(n.name);c.appendChild(e)}};if("function"==typeof n.hrefCallback){c=h=document.createElement("a"),c.id=r,s&&n.hasImage()?f(n,c,r):(c.className="commandLink",c.appendChild(document.createTextNode(n.name)));var u=n.hrefCallback.call(i.handler,i);u.then?u.then(function(e){c.href=e}):u?c.href=u:c.href="#"}else{if("switch"===n.type){c=document.createElement("div"),c.tabIndex=0,c.className="orionSwitch";var p=h=document.createElement("input");p.type="checkbox",p.className="orionSwitchCheck",p.id="orionSwitchCheck"+n.id,e.id&&(p.id=p.id+e.id),c.appendChild(p);var g=document.createElement("label");g.className="orionSwitchLabel",g.setAttribute("for",p.id);var m=document.createElement("span");m.className="orionSwitchInner";var v=document.createElement("span");v.className="orionSwitchSwitch",g.appendChild(m),g.appendChild(v),c.appendChild(g),c.addEventListener("keydown",function(e){(e.keyCode===t.KEY.ENTER||e.keyCode===t.KEY.SPACE)&&p.click()},!1),p.checked=n.checked,m.classList.add(n.imageClass)}else"toggle"===n.type?(c=h=document.createElement("button"),c.className="orionButton",c.classList.add(n.checked?"orionToggleOn":"orionToggleOff"),n.extraClass&&c.classList.add(n.extraClass),c.id="orionToggle"+n.id,e.id&&(c.id=c.id+e.id),d()):(c=h=document.createElement("button"),c.className="orionButton",n.extraClass&&c.classList.add(n.extraClass),d());var _=l||n.callback;if(_){var y=function(){_.call(i.handler,i)};n.onClick=_,h.addEventListener("click",function(e){var t;t="switch"===n.type||"toggle"===n.type?function(e){"toggle"===n.type?(e&&(n.checked=!n.checked),n.checked?(c.classList.remove("orionToggleOff"),c.classList.add("orionToggleOn"),c.classList.add("orionToggleAnimate")):(c.classList.remove("orionToggleOn"),c.classList.add("orionToggleOff"),c.classList.add("orionToggleAnimate"))):e?n.checked=p.checked:p.checked=!p.checked,e&&window.setTimeout(y,250)}:function(e){e&&y()},n.preCallback?n.preCallback(i).then(function(e){t(e)}):t(!0),e.stopPropagation()},!1)}}if("ul"===e.nodeName.toLowerCase()){var x=document.createElement("li");e.appendChild(x),e=x}else c.classList.add("commandMargins");return e.appendChild(c),n.tooltip&&(c.commandTooltip=new a.Tooltip({node:c,text:n.tooltip,position:["above","below","right","left"]})),o&&(E[n.id]={keyBinding:o,command:n,invocation:i}),c}function y(e,n,r,o,s,l){var c,h,d=e.dropdown;if("function"==typeof n.hrefCallback){h=i.createMenuItem(n.name,"a"),r.domNode=c=h.firstElementChild;var u=n.hrefCallback.call(r.handler,r);u.then?u.then(function(e){c.href=e}):u?c.href=u:c.href="#",c.addEventListener("keydown",function(e){(e.keyCode===t.KEY.ENTER||e.keyCode===t.KEY.SPACE)&&c.click()},!1)}else{h=i.createMenuItem(n.name),c=h.firstElementChild;var p=s||n.callback;p&&(n.onClick=p,c.addEventListener("click",function(e){d&&d.close(!0),p.call(r.handler,r)},!1),c.addEventListener("keydown",function(e){(e.keyCode===t.KEY.ENTER||e.keyCode===t.KEY.SPACE)&&(e.preventDefault(),c.click())},!1))}return n.tooltip&&(c.commandTooltip=new a.Tooltip({node:c,text:n.tooltip,position:["right","above","below","left"]})),l&&i.appendKeyBindingString(c,l),e.appendChild(h),o&&(E[n.id]={keyBinding:o,command:n,invocation:r}),c}function x(e,t,n,i,r){this.commandRegistry=r,this.handler=e,this.items=t,this.userData=n,this.command=i,i.parameters&&(this.parameters=i.parameters.makeCopy()),this.id=i.id}function w(e){this._init(e)}var b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAAtJREFUCNdjIBEAAAAwAAFletZ8AAAAAElFTkSuQmCC",C=null,E={};return window.document.addEventListener("keydown",function(e){return n.handleKeyEvent(e,p)},!1),x.prototype={collectsParameters:function(){return this.commandRegistry&&this.commandRegistry.collectsParameters()},makeCopy:function(e){var t=new x(this.handler,this.items,this.userData,this.command,this.commandRegistry);return t.domNode=this.domNode,t.domParent=this.domParent,e?t.parameters=e.makeCopy():this.parameters&&(t.parameters=this.parameters.makeCopy()),t}},x.prototype.constructor=x,w.prototype={_init:function(e){this.id=e.id,this.name=e.name,this.tooltip=e.tooltip,this.fixAllEnabled=e.fixAllEnabled,this.callback=e.callback,this.preCallback=e.preCallback,this.hrefCallback=e.hrefCallback,this.choiceCallback=e.choiceCallback,this.positioningNode=e.positioningNode,this.image=e.image||b,this.imageClass=e.imageClass,this.addImageClassToElement=e.addImageClassToElement,this.extraClass=e.extraClass,this.selectionClass=e.selectionClass,this.spriteClass=e.spriteClass||"commandSprite",this.visibleWhen=e.visibleWhen,this.parameters=e.parameters,this.isEditor=e.isEditor,this.type=e.type,this.checked=e.checked,this.track=e.track},populateChoicesMenu:function(e,n,i,r,o){var s=this.getChoices(n,i,r),a=s.some(function(e){return e.checked});s.forEach(function(i){if(i.name){var r=document.createElement("li");e.appendChild(r);var s=document.createElement("span");if(s.tabIndex=0,s.setAttribute("role","menuitem"),s.classList.add("dropdownMenuItem"),a){var c=document.createElement("span");c.classList.add("check"),c.appendChild(document.createTextNode(i.checked?"●":"")),s.appendChild(c)}if(i.imageClass){var h=document.createElement("span");h.classList.add(i.imageClass),s.appendChild(h)}var d=document.createElement("span"),u=document.createTextNode(i.name);d.appendChild(u),s.appendChild(d),r.appendChild(s),s.choice=i,s.addEventListener("click",function(e){l.logEvent("command","invoke",this.id+">"+i.name),i.callback.call(i,n)}.bind(this),!1),s.addEventListener("keydown",function(e){(e.keyCode===t.KEY.ENTER||e.keyCode===t.KEY.SPACE)&&(l.logEvent("command","invoke",this.id+">"+i.name),i.callback.call(i,n))}.bind(this),!1)}else o._generateMenuSeparator(e)}.bind(this))},getChoices:function(e,t,n){return this.choiceCallback?this.choiceCallback.call(t,e,n):null},makeChoiceCallback:function(e,t){return function(n){e.callback&&e.callback.call(e,t,n)}},hasImage:function(){return this.imageClass||this.image!==b}},w.prototype.constructor=w,{Command:w,CommandInvocation:x,createDropdownMenu:g,createCheckedMenuItem:m,createQuickfixItem:v,createCommandItem:_,createCommandMenuItem:y,executeBinding:h,setKeyBindingProvider:c,localKeyBindings:E,getKeyBindings:u,processKey:p,NO_IMAGE:b,_testMethodProcessKey:d}}),n("orion/keyBinding",["orion/util"],function(e){function t(e,t,n,i,r,o){this.type=o||"keydown","string"==typeof e&&"keydown"===this.type?this.keyCode=e.toUpperCase().charCodeAt(0):this.keyCode=e,this.mod1=void 0!==t&&null!==t?t:!1,this.mod2=void 0!==n&&null!==n?n:!1,this.mod3=void 0!==i&&null!==i?i:!1,this.mod4=void 0!==r&&null!==r?r:!1}function n(e){this.keys=e}return t.prototype={getKeys:function(){return[this]},match:function(t,n){if(void 0!==n){if(0!==n)return!1}else if(t instanceof Array){if(t.length>1)return!1;t=t[0]}if(t.type!==this.type)return!1;if(this.keyCode===t.keyCode||this.keyCode===String.fromCharCode(e.isOpera?t.which:void 0!==t.charCode?t.charCode:t.keyCode)){var i=e.isMac?t.metaKey:t.ctrlKey;return this.mod1!==i?!1:"keydown"===this.type&&this.mod2!==t.shiftKey?!1:this.mod3!==t.altKey?!1:e.isMac&&this.mod4!==t.ctrlKey?!1:!0}return!1},equals:function(e){return e?this.keyCode!==e.keyCode?!1:this.mod1!==e.mod1?!1:this.mod2!==e.mod2?!1:this.mod3!==e.mod3?!1:this.mod4!==e.mod4?!1:this.type!==e.type?!1:!0:!1}},n.prototype={getKeys:function(){return this.keys.slice(0)},match:function(e,t){var n=this.keys;if(void 0!==t)return t>n.length?!1:n[t].match(e)?t===n.length-1?!0:t+1:!1;if(e instanceof Array||(e=[e]),e.length>n.length)return!1;var i;for(i=0;i<e.length;i++)if(!n[i].match(e[i]))return!1;return i===n.length?!0:i},equals:function(e){if(!e.keys)return!1;if(e.keys.length!==this.keys.length)return!1;for(var t=0;t<e.keys.length;t++)if(!e.keys[t].equals(this.keys[t]))return!1;return!0}},{KeyBinding:t,KeyStroke:t,KeySequence:n}}),n("orion/explorers/navigationUtils",[],function(){function e(e,t,n,i){r||e&&(e.push({domNode:t}),t.style.outline="none")}function t(t,n,i){if(t){var r=t.getGridNavHolder(n,!0);r&&e(r,i)}}function n(e,t){if(e)for(var n=0;n<e.length;n++)if(e[n].domNode===t)return void e.splice(n,1)}var i=navigator.userAgent,r=-1!==i.indexOf("iPad");return{addNavGrid:t,generateNavGrid:e,removeNavGrid:n}}),n("orion/i18nUtil",[],function(){function e(e){var t=/\$\{([^\}]+)\}/g,n=arguments;return 2===n.length&&n[1]&&"object"==typeof n[1]?e.replace(t,function(e,t){return n[1][t]}):e.replace(t,function(e,t){return n[(t<<0)+1]})}return{formatMessage:e}}),n("orion/PageUtil",[],function(){function e(){var e=window.location.href.split("#")[1];return e=e?"#"+e:""}function t(e){e=e||window.location.toString();var t={resource:""},n=e.indexOf("#");if(-1!==n){var i=e.substring(n+1);if(0!==i.length){var r=i.split(",");t.resource=decodeURIComponent(r[0]);for(var o=1;o<r.length;o++){var s=r[o],a=/([^=]*)(=?)(.*)/.exec(s),l=decodeURIComponent(a[1]||""),c=decodeURIComponent(a[3]||"");""!==l&&"resource"!==l&&(t[l]=c)}}}return t}function n(e,t){var n=e;if(-1===e.indexOf("://")){var r=document.createElement("a");r.href=e,n=r.href}var o=!1;return o=t?t.some(function(e){return new RegExp("^"+e+":","i").test(n)}):i.test(n),o?e:(console.log("Illegal URL Scheme: '"+e+"'"),"")}var i=new RegExp("^http[s]?","i");return{hash:e,matchResourceParameters:t,validateURLScheme:n}}),n("orion/uiUtils",["i18n!orion/nls/messages","orion/webui/littlelib","orion/i18nUtil"],function(e,t,n){function i(n){var i="";if(m)n.mod4&&(i+="⌃"),n.mod3&&(i+="⌥"),n.mod2&&(i+="⇧"),n.mod1&&(i+="⌘");else{var r="+";n.mod1&&(i+=e.KeyCTRL+r),n.mod2&&(i+=e.KeySHIFT+r),n.mod3&&(i+=e.KeyALT+r)}if(n.alphaKey)return i+n.alphaKey;if("keypress"===n.type)return i+n.keyCode;var o=n.keyCode,s=v[o];if(s)return i+s;var a=t.keyName(o);if(a)return a=e["Key"+a]||a,i+a;var l;switch(n.keyCode){case 59:l=n.mod2?":":";";break;case 61:l=n.mod2?"+":"=";break;case 188:l=n.mod2?"<":",";break;case 190:l=n.mod2?">":".";break;case 191:l=n.mod2?"?":"/";break;case 192:l=n.mod2?"~":"`";break;case 219:l=n.mod2?"{":"[";break;case 220:l=n.mod2?"|":"\\";break;case 221:l=n.mod2?"}":"]";break;case 222:l=n.mod2?'"':"'"}return l?i+l:n.keyCode>=112&&n.keyCode<=123?i+"F"+(n.keyCode-111):i+String.fromCharCode(n.keyCode)}function r(e){for(var t="",n=e.getKeys(),r=0;r<n.length;r++)0!==r&&(t+=" "),t+=i(n[r]);return t}function o(e){var n=e.id,i=e.refNode,r=e.hideRefNode,o=e.initialText,s=e.onComplete,a=e.onEditDestroy,l=e.selectTo,c=e.isInitialValid,h=e.insertAsChild,d=!1,u=function(e){return function(l){if(!d){var h=t.node(n),u=h.value;if(h)return e&&l.keyCode===t.KEY.ESCAPE?(r&&(i.style.display="inline"),d=!0,h.parentNode.removeChild(h),void(a&&a())):void(e&&l.keyCode!==t.KEY.ENTER||(0===u.length||!c&&u===o?(r&&(i.style.display="inline"),d=!0):(s(u),r&&i.parentNode&&(i.style.display="inline"),d=!0),h.parentNode&&h.parentNode.removeChild(h),a&&a()))}}},p=document.createElement("input");p.id=n,p.value=o||"",h?i.appendChild(p):i.parentNode.insertBefore(p,i.nextSibling),p.classList.add("userEditBoxPrompt"),r&&(i.style.display="none"),p.addEventListener("keydown",u(!0),!1),p.addEventListener("blur",u(!1),!1),window.setTimeout(function(){if(p.focus(),o){var e=t.node(n),i=l?o.indexOf(l):-1;if(i>0)if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveStart("character",0),r.moveEnd("character",i),r.select()}else e.setSelectionRange?e.setSelectionRange(0,i):void 0!==e.selectionStart&&(e.selectionStart=0,e.selectionEnd=i);else e.select()}},0)}function s(e){var t=-1!==window.navigator.platform.indexOf("Mac");return t&&e.metaKey||!t&&e.ctrlKey}function a(e,t){t&&s(t)?window.open(e):window.location=e}function l(e,n){var i=document.createElement("button");return i.className="orionButton commandButton commandMargins",i.addEventListener("click",function(e){n(),t.stop(e)},!1),e&&i.appendChild(document.createTextNode(e)),i}function c(e,t,n){}function h(e,t){if(!e||!e.tagName)return!1;switch(e.tagName.toLowerCase()){case"button":case"fieldset":case"form":case"input":case"keygen":case"label":case"legend":case"meter":case"optgroup":case"output":case"progress":case"select":case"textarea":return!0}return e.parentNode===t?!1:e.parentNode&&h(e.parentNode,t)}function d(e,t,n){var i=n?0:1;return e.substring(0,e.length-encodeURIComponent(t).length-i)}function u(e){var t=new Date,n=new Date(e),i=t.getTime()-n.getTime(),r=Math.floor(i/1e3/60/60/24/365);i-=1e3*r*60*60*24*365;var o=Math.floor(i/1e3/60/60/24/30);i-=1e3*o*60*60*24*30;var s=Math.floor(i/1e3/60/60/24);i-=1e3*s*60*60*24;var a=Math.floor(i/1e3/60/60);i-=1e3*a*60*60;var l=Math.floor(i/1e3/60);i-=1e3*l*60;var c=Math.floor(i/1e3);return{year:r,month:o,day:s,hour:a,minute:l,second:c}}function p(t,i,r){return t>0?1===t?e[i]:n.formatMessage(e[r],t):""}function f(e){var t=u(e),n=p(t.year,"a year","years"),i=p(t.month,"a month","months"),r=p(t.day,"a day","days"),o=p(t.hour,"an hour","hours"),s=p(t.minute,"a minute","minutes"),a="";return n?a=t.year>0?n:n+i:i?a=t.month>0?i:i+r:r?a=t.day>0?r:r+o:o?a=t.hour>0?o:o+s:s&&(a=s),a}function g(t){var i=f(t);return i?n.formatMessage(e.timeAgo,i):e.justNow}var m=-1!==navigator.platform.indexOf("Mac"),v=Object.create(null);return v[t.KEY.DOWN]="↓",v[t.KEY.UP]="↑",v[t.KEY.RIGHT]="→",v[t.KEY.LEFT]="←",m&&(v[t.KEY.BKSPC]="⌫",v[t.KEY.DEL]="⌦",v[t.KEY.END]="⇲",v[t.KEY.ENTER]="⏎",v[t.KEY.ESCAPE]="⎋",v[t.KEY.HOME]="⇱",v[t.KEY.PAGEDOWN]="⇟",v[t.KEY.PAGEUP]="⇞",v[t.KEY.SPACE]="␣",v[t.KEY.TAB]="⇥"),{getUserKeyString:r,getUserText:o,openInNewWindow:s,followLink:a,createButton:l,createDropdownButton:c,isFormElement:h,path2FolderName:d,timeElapsed:f,displayableTimeElapsed:g}}),n("text!orion/webui/submenutriggerbutton.html",[],function(){return'<li class="dropdownSubMenu"><span class="dropdownTrigger dropdownMenuItem" role="menuitem" tabindex="0"><span class="dropdownCommandName">${ButtonText}</span><span class="dropdownArrowRight core-sprite-closedarrow"></span></span><ul class="dropdownMenu"></ul></li>'}),function(e,t){"function"==typeof n&&n.amd?n("orion/Deferred",t):"object"==typeof exports?module.exports=t():(e.orion=e.orion||{},e.orion.Deferred=t())}(this,function(){function e(){for(var e;e=o.shift();)e();s=!1}function t(e){o.push(e),s||(s=!0,a())}function n(e){return function(t){e(t)}}function i(e,t,i){try{var r=e(t),o=r&&("object"==typeof r||"function"==typeof r)&&r.then;if("function"==typeof o)if(r===i.promise)i.reject(new TypeError);else{var s=r.cancel;"function"==typeof s?i._parentCancel=s.bind(r):delete i._parentCancel,o.call(r,n(i.resolve),n(i.reject),n(i.progress))}else i.resolve(r)}catch(a){i.reject(a)}}function r(){function e(){for(var e;e=c.shift();){var t=e.deferred,n="fulfilled"===l?"resolve":"reject",r=e[n];"function"==typeof r?i(r,a,t):t[n](a)}}function n(n){delete h._parentCancel,l="rejected",a=n,c.length&&t(e)}function o(i){function s(e){return function(t){l&&"assumed"!==l||e(t)}}delete h._parentCancel;try{var d=i&&("object"==typeof i||"function"==typeof i)&&i.then;if("function"==typeof d)if(i===h)n(new TypeError);else{l="assumed";var u=i&&i.cancel;if("function"!=typeof u){var p=new r;i=p.promise;try{d(p.resolve,p.reject,p.progress)}catch(f){p.reject(f)}u=i.cancel,d=i.then}a=i,d.call(i,s(o),s(n)),h._parentCancel=u.bind(i)}else l="fulfilled",a=i,c.length&&t(e)}catch(g){s(n)(g)}}function s(){var e=h._parentCancel;if(e)delete h._parentCancel,e();else if(!l){var t=new Error("Cancel");t.name="Cancel",n(t)}}var a,l,c=[],h=this;this.resolve=function(e){return l||o(e),h},this.reject=function(e){return l||n(e),h},this.progress=function(e){return l||c.forEach(function(t){if(t.progress)try{t.progress(e)}catch(n){}}),h.promise},this.cancel=function(){return h._parentCancel?setTimeout(s,0):s(),h},this.then=function(n,i,o){var s=new r;return s._parentCancel=h.promise.cancel,c.push({resolve:n,reject:i,progress:o,deferred:s}),("fulfilled"===l||"rejected"===l)&&t(e),s.promise},this.promise={then:h.then,cancel:h.cancel}}var o=[],s=!1,a=function(){if("undefined"!=typeof process&&"function"==typeof process.nextTick){var t=process.nextTick;return function(){t(e)}}if("function"==typeof MutationObserver){var n=document.createElement("div"),i=new MutationObserver(e);return i.observe(n,{attributes:!0}),function(){n.setAttribute("class","_tick")}}return function(){setTimeout(e,0)}}();return r.all=function(e,t){function n(e,t){a||(s[e]=t,0===--o&&l.resolve(s))}function i(e,i){if(!a){if(t)try{return void n(e,t(i))}catch(r){i=r}l.reject(i)}}var o=e.length,s=[],a=!1,l=new r;return l.then(void 0,function(){a=!0,e.forEach(function(e){e.cancel&&e.cancel()})}),0===o?l.resolve(s):e.forEach(function(e,t){e.then(n.bind(void 0,t),i.bind(void 0,t))}),l.promise},r.when=function(e,t,n,i){var o,s;return e&&"function"==typeof e.then?o=e:(s=new r,s.resolve(e),o=s.promise),o.then(t,n,i)},r}),n("orion/commandRegistry",["orion/commands","orion/keyBinding","orion/explorers/navigationUtils","orion/i18nUtil","orion/PageUtil","orion/uiUtils","orion/webui/littlelib","orion/webui/dropdown","orion/webui/tooltip","text!orion/webui/submenutriggerbutton.html","orion/metrics","orion/Deferred","orion/EventTarget"],function(e,t,n,i,r,o,s,a,l,c,h,d,u){function p(e){this._commandList={},this._contributionsByScopeId={},this._activeBindings={},this._urlBindings={},this._pendingBindings={},this._parameterCollector=null,this._init(e||{})}function f(e,t){this.token=e,this.parameterName=t}function g(e,t,n){this.event=e,this.handler=t,this.capture=n||!1}function m(e,t,n,i,r,o,s){this.name=e,this.type=t,this.label=n,this.value=i,this.lines=r||1,this.validator=s,this.eventListeners=Array.isArray(o)?o:o?[o]:[]}function v(e,t,n){this._storeParameters(e),this._hasOptionalParameters=t&&t.hasOptionalParameters,this._options=t,this.optionsRequested=!1,this.getParameters=n,this.clientCollect=t&&t.clientCollect,this.getParameterElement=t&&t.getParameterElement,this.getSubmitName=t&&t.getSubmitName,this.getCancelName=t&&t.getCancelName,this.message=t&&t.message}return p.prototype={_init:function(t){this._selectionService=t.selection;var n=this;e.setKeyBindingProvider(function(){return n._activeBindings}),u.attach(p.prototype),this.addEventListener("bindingChanged",function(e){this._handleBindingChanges(e)}.bind(this)),this.addEventListener=function(e,t){this._bindingOverrides&&"bindingChanged"===e&&this._updateBindingOverrides(t),p.prototype.addEventListener.call(this,e,t)}},processURL:function(e){for(var t in this._urlBindings)if(this._urlBindings[t]&&this._urlBindings[t].urlBinding&&this._urlBindings[t].command){var n=this._urlBindings[t].urlBinding.match(e);if(n){var i=this._urlBindings[t],r=i.command,o=i.invocation;if(o&&o.parameters&&r.callback){o.parameters.setValue(n.parameterName,n.parameterValue);var s=this;return void window.setTimeout(function(){s._invoke(o)},0)}}}},findCommand:function(e){return this._commandList[e]},runCommand:function(t,n,i,r,o,s){var a=this;if(n){var l=this._commandList[t],c=l&&(l.visibleWhen?l.visibleWhen(n):!0);if(c&&l.callback){var h=new e.CommandInvocation(i,n,o,l,a);return h.domParent=s,a._invoke(h,r)}}else{var d=this._urlBindings[t];if(d&&d.command&&d.command.callback)return a._invoke(d.invocation,r)}},getSelectionService:function(){return this._selectionService},setParameterCollector:function(e){this._parameterCollector=e},openParameterCollector:function(e,t,n){this._parameterCollector&&(this._parameterCollector.close(),this._parameterCollector.open(e,t,n))},confirm:function(e,t,n,i,r,o){var s=!1;if(!this._parameterCollector||r)s=window.confirm(t),o(s);else{var a=this,c=function(){o(s)},h=function(){a._parameterCollector.close()},d=function(e,r){var o=document.createElement("span");o.classList.add("parameterPrompt"),o.textContent=t,e.appendChild(o);var a=document.createElement("button");a.addEventListener("click",function(e){s=!0,c(),h()},!1),r.appendChild(a),a.appendChild(document.createTextNode(n)),a.className="dismissButton";var l=document.createElement("button");return l.addEventListener("click",function(e){s=!1,h()},!1),r.appendChild(l),l.appendChild(document.createTextNode(i)),l.className="dismissButton",a};this._parameterCollector.close();var u=this._parameterCollector.open(e,d,function(){});if(!u){var p=new l.Tooltip({node:e,afterHiding:function(){this.destroy()},trigger:"click",position:["below","right","above","left"]}),f=p.contentContainer();f.classList.add("parameterPopup");var g=window.document.activeElement;h=function(){g&&g.focus(),p.destroy()};var m=document.createElement("div");m.classList.add("parameterMessage"),f.appendChild(m);var v=document.createElement("div");f.appendChild(v),v.classList.add("layoutRight"),v.classList.add("parametersDismiss");var _=d(m,v);p.show(),_&&window.setTimeout(function(){_.focus(),_.select&&_.select()},0)}}},closeParameterCollector:function(){this._parameterCollector&&this._parameterCollector.close()},collectsParameters:function(){return this._parameterCollector},_invoke:function(e,t){return this._collectAndInvoke(e.makeCopy(t),!1)},_collectAndInvoke:function(e,t,n){if(e){if(!(this._parameterCollector&&e.parameters&&e.parameters.hasParameters()&&(t||e.parameters.shouldCollectParameters())))return h.logEvent("command","invoke",e.command.id),e.command.callback.call(e.handler||window,e);var i=!1;if(e.parameters.updateParameters(e),e.parameters.shouldCollectParameters()&&(i=this._parameterCollector.collectParameters(e,n),!i)){var r=new l.Tooltip({node:e.domNode||e.domParent,afterHiding:function(){this.destroy(),e.domParent&&e.domParent.classList.remove("parameterPopupOpen")},trigger:"click",position:["below","right","above","left"]}),o=r.contentContainer();o.classList.add("parameterPopup");var s=window.document.activeElement,a=this._parameterCollector.getFillFunction(e,function(){s&&s.focus(),r.destroy(),e.domParent&&e.domParent.classList.remove("parameterPopupOpen")},n)(o);r.show(),e.domParent&&e.domParent.classList.add("parameterPopupOpen"),a&&window.setTimeout(function(){a.focus(),a.select&&a.select()},0),i=!0}if(!i)return h.logEvent("command","invoke",e.command.id),e.command.callback.call(e.handler||window,e)}else window.console.log("Client attempted to invoke command without an available (rendered) command invocation")},collectParameters:function(e,t){this._collectAndInvoke(e,!0,t)},showKeyBindings:function(t){function n(t){return function(){e.executeBinding(t)}}var i,r={},o=[];for(var s in this._activeBindings)i=this._activeBindings[s],i&&i.keyBinding&&i.command&&(i.command.name||i.command.tooltip)&&o.push(i);o.sort(function(e,t){var n=e.command.name||e.command.tooltip,i=t.command.name||t.command.tooltip;return n.localeCompare(i)});for(var a=0;a<o.length;a++)i=o[a],i.keyBinding.scopeName?(r[i.keyBinding.scopeName]||(r[i.keyBinding.scopeName]=[]),r[i.keyBinding.scopeName].push(i)):t.createItem(i.keyBinding,i.command.name||i.command.tooltip,i.command.id,n(i));for(var l in r)r[l].length&&r[l].length>0&&(t.createHeader(l),r[l].forEach(function(e){t.createItem(e.keyBinding,e.command.name||e.command.tooltip,e.command.id,n(e))}))},_handleBindingChanges:function(t){var n=this.findCommand(t.id);if(n){var i=this._activeBindings[t.id];i?i.keyBinding=t.newBinding:this._addBinding(n,"key",t.newBinding)}if(this._renderedCommands&&this._renderedCommands[t.id])for(var r=this._renderedCommands[t.id],s=Object.keys(r),a=0;a<s.length;a++){var l=r[s[a]],c=o.getUserKeyString(t.newBinding),h=e.createCommandMenuItem(l.domParent,l.command,l,null,l.onClick,c);l.domNode.parentNode.replaceChild(h,l.domNode),l.domNode=h}},createBindingOverride:function(e,t,n){if(this._bindingOverrides||(this._bindingOverrides=[]),
this._bindingOverrides.push({id:e,newBinding:t,prevBinding:n}),this._prefService){var i=JSON.stringify(this._bindingOverrides);this._prefService.put("/KeyBindings",{overridesJSON:i})}var r={type:"bindingChanged",id:e,newBinding:t,prevBinding:n};this.dispatchEvent(r)},_registerRenderedCommand:function(e,t,n){this._renderedCommands||(this._renderedCommands={});var i=this._renderedCommands[e];i||(i=this._renderedCommands[e]={}),i[t]=n},_getBindingOverrides:function(){return this._prefService.get("/KeyBindings").then(function(e){var n=[],i=e.overridesJSON;i&&(n="string"==typeof i?JSON.parse(i):i);for(var r=0;r<n.length;r++){var o=n[r];if(o.newBinding){var s=o.newBinding;n[r].newBinding=new t.KeyStroke(s.keyCode,s.mod1,s.mod2,s.mod3,s.mod4,s.type)}if(o.prevBinding){var a=o.prevBinding;n[r].prevBinding=new t.KeyStroke(a.keyCode,a.mod1,a.mod2,a.mod3,a.mod4,a.type)}}return(new d).resolve(n)}.bind(this))},getBindingOverride:function(e){if(!this._bindingOverrides)return null;for(var t=this._bindingOverrides.length-1;t>=0;t--){var n=this._bindingOverrides[t];if(n.id===e)return n.newBinding}return null},addCommand:function(e){this._commandList[e.id]=e;var t=this._pendingBindings[e.id];if(t){var n=this;t.forEach(function(t){n._addBinding(e,t.type,t.binding,t.bindingOnly)}),delete this._pendingBindings[e.id]}},addCommandGroup:function(e,t,n,i,r,o,s,a,l,c,h){this._contributionsByScopeId[e]||(this._contributionsByScopeId[e]={});var d=this._contributionsByScopeId[e];r&&(d=this._createEntryForPath(d,r)),d[t]?(i&&(d[t].title=i),n&&(d[t].position=n),s&&(d[t].imageClass=s),a&&(d[t].tooltip=a),l&&(d[t].selectionClass=l),h&&(d[t].extraClass=h),c===!0?d[t].pretendDefaultActionId=!0:d[t].defaultActionId=c,d[t].emptyGroupMessage=o):(d[t]={title:i,position:n,emptyGroupMessage:o,imageClass:s,tooltip:a,selectionClass:l,defaultActionId:c===!0?null:c,pretendDefaultActionId:c===!0,children:{},extraClasses:h},d.sortedContributions=null)},_createEntryForPath:function(e,t){if(t){var n=t.split("/");n.forEach(function(t){t.length>1&&(e[t]||(e[t]={position:0,children:{}},e.sortedContributions=null),e=e[t].children)})}return e},registerSelectionService:function(e,t){this._contributionsByScopeId[e]||(this._contributionsByScopeId[e]={}),this._contributionsByScopeId[e].localSelectionService=t},setServiceRegistry:function(e){this._serviceRegistry=e,this._prefService=e.getService("orion.core.preference"),this._prefService&&(this._getBindingOverrides().then(function(e){this._bindingOverrides=e,this._updateBindingOverrides()}.bind(this)),this._prefService.addEventListener("changed",function(e){"/KeyBindings"===e.namespace&&this._getBindingOverrides().then(function(e){if(e.length>this._bindingOverrides.length)for(var t=this._bindingOverrides.length;t<e.length;t++){var n=e[t],i={type:"bindingChanged",id:n.id,newBinding:n.newBinding,prevBinding:n.prevBinding};this.dispatchEvent(i)}this._bindingOverrides=e}.bind(this))}.bind(this)))},_updateBindingOverrides:function(e){for(var t=0;t<this._bindingOverrides.length;t++){var n=this._bindingOverrides[t],i={type:"bindingChanged",id:n.id,newBinding:n.newBinding,prevBinding:n.prevBinding};e?e(i):this.dispatchEvent(i)}},registerCommandContribution:function(e,t,n,i,r,o,s,a){this._contributionsByScopeId[e]||(this._contributionsByScopeId[e]={});var l=this._contributionsByScopeId[e];i&&(l=this._createEntryForPath(l,i)),l[t]={position:n,handler:a};var c;if(this._bindingOverrides){var h=this.getBindingOverride(t,o);h&&(o=h)}o&&(c=this._commandList[t],c?this._addBinding(c,"key",o,r):this._addPendingBinding(t,"key",o,r)),s&&(c=this._commandList[t],c?this._addBinding(c,"url",s,r):this._addPendingBinding(t,"url",s,r)),l.sortedContributions=null},unregisterCommandContribution:function(e,t,n){if(this._contributionsByScopeId[e]){delete this._commandList[t],delete this._activeBindings[t],delete this._urlBindings[t],delete this._pendingBindings[t];var i=this._contributionsByScopeId[e];if(n){var r=n.split("/");r.forEach(function(e){if(e.length>1){if(!i[e])return;i=i[e].children}})}delete i[t],i.sortedContributions=null}},_addBinding:function(e,t,n,i){if(!e.id)throw new Error("No command id: "+e);"key"===t?this._activeBindings[e.id]={command:e,keyBinding:n,bindingOnly:i}:"url"===t&&(this._urlBindings[e.id]={command:e,urlBinding:n,bindingOnly:i})},_addPendingBinding:function(e,t,n,i){this._pendingBindings[e]=this._pendingBindings[e]||[],this._pendingBindings[e].push({type:t,binding:n,bindingOnly:i})},_checkForTrailingSeparator:function(e,t,n){var i;if(("tool"===t||"button"===t)&&(i=e.childNodes.length>0?e.childNodes[e.childNodes.length-1]:null,i&&i.classList.contains("commandSeparator")))return n?(e.removeChild(i),!1):!0;if("menu"===t){var r=s.$$array("li > *",e);if(r.length>0&&r[r.length-1].classList.contains("dropdownSeparator"))return i=r[r.length-1],n?(i.parentNode.parentNode.removeChild(i.parentNode),!1):!0}return!1},renderCommands:function(e,t,n,i,r,o,a){if("string"!=typeof e)throw"a scope id for rendering must be specified";if(t=s.node(t),!t)throw"no parent";var l=this._contributionsByScopeId[e];if(!n&&l){var c=l.localSelectionService||this._selectionService,h=this;return void(c&&c.getSelections(function(n){h.renderCommands(e,t,n,i,r,o)}))}l&&(this._render(e,l,t,n,i,r||"button",o,a),this._checkForTrailingSeparator(t,r,!0))},destroy:function(e){if(e=s.node(e),!e)throw"no parent";for(;e.hasChildNodes();){var t=e.firstChild;t.commandTooltip&&t.commandTooltip.destroy(),t.emptyGroupTooltip&&t.emptyGroupTooltip.destroy(),this.destroy(t),e.removeChild(t)}},_render:function(t,i,r,s,a,c,h,d,u){var p=i.sortedContributions;if(!p){p=[];var f=!1;for(var g in i)if(Object.prototype.hasOwnProperty.call(i,g)){var m=i[g];m&&"number"==typeof m.position&&(m.id=g,p.push(m),f=!0)}f&&(p.sort(function(e,t){return e.position-t.position}),i.sortedContributions=p)}var v=0,_=this;p.forEach(function(i){function u(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var p,f;if(i.imageClass||(i.imageClass=null),i.children&&Object.getOwnPropertyNames(i.children).length>0){var g,m=i.children;if("tool"===c||"button"===c)if(i.title){var y;if(i.defaultActionId){i.pretendDefaultActionId=i.defaultActionId===!0;var x=_._commandList[i.defaultActionId];x&&(x.visibleWhen?x.visibleWhen(s):!0)?(y=new e.CommandInvocation(a,s,h,x,_),y.domParent=r):i.pretendDefaultActionId=!0}g=_._createDropdownMenu(r,i.title,null,null,i.imageClass,i.tooltip,i.selectionClass,null,y,i.pretendDefaultActionId,i.extraClasses),d&&n.generateNavGrid(d,g.menuButton),g&&(_._render(t,i.children,g.menu,s,a,"menu",h,d),_._checkForTrailingSeparator(g.menu,"menu",!0),0===g.menu.childNodes.length?i.emptyGroupMessage?g.menuButton.emptyGroupTooltip||(g.menuButton.emptyGroupTooltip=new l.Tooltip({node:g.menuButton,text:i.emptyGroupMessage,trigger:"click",position:["below","right","above","left"]})):(d&&n.removeNavGrid(d,g.menuButton),u(g.menu),u(g.menuButton),u(g.destroyButton)):g.menuButton.style.visibility="visible")}else{var w;if(r.childNodes.length>0&&!_._checkForTrailingSeparator(r,c)&&(w=_.generateSeparatorImage(r)),_._render(t,m,r,s,a,c,h,d),r.childNodes.length>0){var b=r.childNodes[r.childNodes.length-1];b!==w&&(w=_.generateSeparatorImage(r))}}else if(i.title){var C=_._createDropdownMenu(r,i.title,!0,null,null,i.imageClass);C&&(_._render(t,m,C.menu,s,a,"menu",h,d),_._checkForTrailingSeparator(C.menu,"menu",!0),0===C.menu.childNodes.length&&C.destroyButton&&r.removeChild(C.destroyButton))}else r.childNodes.length>0&&_._generateMenuSeparator(r),_._render(t,m,r,s,a,c,h,d),r.childNodes.length>0&&_._generateMenuSeparator(r)}else{var E=_._commandList[i.id],T=E?!0:!1,S=null,k=null;if(E){f=new e.CommandInvocation(i.handler||a,s,h,E,_),f.domParent=r;var A=!1;try{A=T&&(E.visibleWhen?E.visibleWhen(s,f):!0)}catch(L){throw console.log(L),L}_._activeBindings[E.id]&&_._activeBindings[E.id].keyBinding&&(S=_._activeBindings[E.id],A?S.invocation=f:S.invocation=null,S.bindingOnly&&(T=!1)),_._urlBindings[E.id]&&_._urlBindings[E.id].urlBinding&&(k=_._urlBindings[E.id],A?k.invocation=f:k.invocation=null,k.bindingOnly&&(T=!1)),T=T&&A}if(T)if(E.choiceCallback){var M,N;"tool"===c||"button"===c?(M=r,N=!1,"ul"===r.nodeName.toLowerCase()&&(M=document.createElement("li"),r.appendChild(M))):(M=r,N=!0);var O=function(e){E.populateChoicesMenu(e,s,a,h,_)};_._createDropdownMenu(M,E.name,N,O.bind(E),E.imageClass,E.tooltip||E.title,E.selectionClass,E.positioningNode)}else{f.handler=f.handler||this,f.domParent=r;var D,R=function(e){_._invoke(f)};if("menu"===c){var I=null;S&&S.keyBinding&&(I=o.getUserKeyString(S.keyBinding)),D=e.createCommandMenuItem(r,E,f,null,R,I),f.onClick=R,_._registerRenderedCommand(E.id,t,f)}else if("quickfix"===c){p=c+E.id+v;var P=document.createElement("div");r.appendChild(P),r.classList.add("quickFixList"),D=e.createQuickfixItem(P,E,f,R,_._prefService)}else p=c+E.id+v,D=e.createCommandItem(r,E,f,p,null,"tool"===c,R);n.generateNavGrid(d,D),f.domNode=D,v++}}})},_createDropdownMenu:function(t,n,i,r,o,h,d,u,p,f,g){if(t=s.node(t),!t||!s.contains(document.body,t))return null;var m,v,_,y,x=t;if(i){var w=document.createRange();w.selectNode(t);var b=w.createContextualFragment(c);s.processTextNodes(b,{ButtonText:n}),t.appendChild(b),y=t.lastChild,v=y.lastChild,m=v.previousSibling,m.dropdown=new a.Dropdown({dropdown:v,populate:r,parentDropdown:t.dropdown}),v.dropdown=m.dropdown}else{"ul"===t.nodeName.toLowerCase()&&(x=document.createElement("li"),t.appendChild(x),y=x);var C=null;o&&(C="dropdownButtonWithIcon",h=h||n),h=o?h||n:h;var E=e.createDropdownMenu(x,n,r,C,o,!1,d,u,p||f,g);if(_=E.dropdownArrow,m=E.menuButton,_){p&&(p.domNode=E.menuButton);var T=this;m.onclick=function(e){var t=s.bounds(_);(e.clientX>=t.left||f===!0)&&E.dropdown?E.dropdown.toggle(e):T._invoke(p)},E.dropdown&&(m.onkeydown=function(e){s.KEY.DOWN===e.keyCode&&(E.dropdown.toggle(e),s.stop(e))})}v=E.menu;var S,k=p&&p.command&&(p.command.tooltip||p.command.name);S=k?p.command.tooltip||p.command.name:h,S&&(m.commandTooltip=new l.Tooltip({node:m,text:S,position:["above","below","right","left"]}))}return{menuButton:m,menu:v,dropdown:m.dropdown,destroyButton:y,dropdownArrow:_}},_generateMenuSeparator:function(e){if(!this._checkForTrailingSeparator(e,"menu")){var t=document.createElement("li");t.classList.add("dropdownSeparator");var n=document.createElement("span");n.classList.add("dropdownSeparator"),t.appendChild(n),e.appendChild(t)}},generateSeparatorImage:function(e){var t;return"ul"===e.nodeName.toLowerCase()?(t=document.createElement("li"),e.appendChild(t)):(t=document.createElement("span"),e.appendChild(t)),t.classList.add("core-sprite-sep"),t.classList.add("imageSprite"),t.classList.add("commandSeparator"),t}},p.prototype.constructor=p,f.prototype={match:function(e){var t=r.matchResourceParameters(e);return"undefined"!=typeof t[this.token]?(this.parameterValue=t[this.token],this):null}},f.prototype.constructor=f,g.prototype.constructor=g,m.prototype={optionsRequested:function(){return this.optionsRequested}},m.prototype.constructor=m,v.prototype={_storeParameters:function(e){if(this.parameterTable=null,e){var t=this.parameterTable={};e.forEach(function(e){t[e.name]=e})}},updateParameters:function(e){"function"==typeof this.getParameters&&this._storeParameters(this.getParameters(e))},hasParameters:function(){return null!==this.parameterTable},shouldCollectParameters:function(){return!this.clientCollect&&this.hasParameters()},parameterNamed:function(e){return this.parameterTable[e]},valueFor:function(e){var t=this.parameterTable[e];return t?t.value:null},setValue:function(e,t){var n=this.parameterTable[e];n&&(n.value=t)},forEach:function(e){for(var t in this.parameterTable)this.parameterTable[t].type&&this.parameterTable[t].name&&e(this.parameterTable[t])},validate:function(e,t){var n=this.parameterTable[e];return n&&n.validator?n.validator(t):!0},makeCopy:function(){var e=[];this.forEach(function(t){var n=new m(t.name,t.type,t.label,t.value,t.lines,t.eventListeners,t.validator);e.push(n)});var t=new v(e,this._options,this.getParameters);return t.clientCollect=this.clientCollect,t.message=this.message,t},hasOptionalParameters:function(){return this._hasOptionalParameters}},v.prototype.constructor=v,{CommandRegistry:p,URLBinding:f,ParametersDescription:v,CommandParameter:m,CommandEventListener:g}}),n("orion/navigate/nls/messages",{root:!0}),n("orion/navigate/nls/root/messages",{Navigator:"Navigator","Strings Xtrnalizr":"Strings Xtrnalizr","Externalize strings":"Externalize strings from JavaScript files in this folder.",NotSupportFileSystem:"${0} is not supported in this file system",SrcNotSupportBinRead:"Source file service does not support binary read",TargetNotSupportBinWrite:"Target file service does not support binary write",NoFileSrv:"No matching file service for location: ${0}","Choose a Folder":"Choose a Folder","Copy of ${0}":"Copy of ${0}",EnterName:"Enter a new name for '${0}'",ChooseFolder:"Choose folder...",Rename:"Rename",RenameFilesFolders:"Rename the selected files or folders",CompareEach:"Compare with each other","Compare 2 files":"Compare the selected 2 files with each other","Compare with...":"Compare With...",CompareFolders:"Compare the selected folder with a specified folder",Delete:"Delete","Unknown item":"Unknown item","delete item msg":"Are you sure you want to delete these ${0} items?",DeleteTrg:"Are you sure you want to delete '${0}'?",Zip:"Zip",ZipDL:"Create a zip file of the folder contents and download it","New File":"File","Create a new file":"Create a new file",FailedToCreateProject:"Failed to create project: ${0}",FailedToCreateFile:"Failed to create file: ${0}",CopyFailed:"Copy operation failed",MoveFailed:"Move operation failed","Name:":"Name:","New Folder":"Folder","Folder name:":"Folder name:","Create a new folder":"Create a new folder","Creating folder":"Creating folder",Folder:"Folder","Create an empty folder":"Create an empty folder",CreateEmptyMsg:"Create an empty folder on the Orion server. You can import, upload, or create content in the editor.","Sample HTML5 Site":"Sample HTML5 Site","Generate a sample":"Generate a sample",'Generate an HTML5 "Hello World" website, including JavaScript, HTML, and CSS files.':'Generate an HTML5 "Hello World" website, including JavaScript, HTML, and CSS files.',"Creating a folder for ${0}":"Creating a folder for ${0}","SFTP Import":"SFTP Import","Import content from SFTP":"Import content from SFTP","Imported Content":"Imported Content","Upload a Zip":"Upload a Zip","Upload content from a local zip file":"Upload content from a local zip file","Uploaded Content":"Uploaded Content","Clone Git Repository":"Clone Git Repository","Clone a git repository":"Clone a git repository","Link to Server":"Link to Server",LinkContent:"Link to existing content on the server",CreateLinkedFolder:"Create a folder that links to an existing folder on the server.","Server path:":"Server path:",NameLocationNotClear:"The name and server location were not specified.","Go Up":"Go Up",GoUpToParent:"Move up to the parent folder","Go Into":"Go Into",GoSelectedFolder:"Move into the selected folder","File or zip archive":"File or Zip Archive",ImportLcFile:"Import a file or zip archive from your local file system","SFTP from...":"SFTP",CpyFrmSftp:"Copy files and folders from a specified SFTP connection","Importing from ${0}":"Importing from ${0}","SFTP to...":"SFTP",CpyToSftp:"Copy files and folders to a specified SFTP location",Exporting:"Exporting to ${0}","Pasting ${0}":"Pasting ${0}","Copy to":"Copy to","Move to":"Move to","Copying ${0}":"Copying ${0}","Moving ${0}":"Moving ${0}","Renaming ${0}":"Renaming ${0}","Deleting ${0}":"Deleting ${0}","Creating ${0}":"Creating ${0}","Linking to ${0}":"Linking to ${0}",MvToLocation:"Move files and folders to a new location",Cut:"Cut",Copy:"Copy","Fetching children of ":"Fetching children of ",Paste:"Paste","Open With":"Open With","Loading ":"Loading ",New:"New",File:"File",Actions:"Actions","Orion Content":"Orion Content","File System":"File System","Create new content":"Create new content","Import from HTTP...":"HTTP","File URL:":"File URL:",ImportURL:"Import a file from a URL and optionally unzip it","Unzip *.zip files:":"Unzip *.zip files:","Extracted from:":"Extracted from:",FolderDropNotSupported:"Did not drop ${0}. Folder drop is not supported in this browser.",CreateFolderErr:"You cannot copy files directly into the workspace. Create a folder first.","Unzip ${0}?":"Unzip ${0}?","Upload progress: ":"Upload progress: ","Uploading ":"Uploading ","Cancel upload":"Cancel upload",UploadingFileErr:"Uploading the following file failed: ","Enter project name:":"Enter project name:","Create new project":"Create new project","Creating project ${0}":"Creating project ${0}",NoFile:"Use the ${0} menu to create new files and folders. Click a file to start coding.",Download:"Download",Download_tooltips:"Download the file contents as the displayed name","Downloading...":"Reading file contents...","Download not supported":"Contents download is not supported in this browser.",gettingContentFrom:"Getting content from ",confirmLaunchDelete:'Delete Launch Configuration "${0}" ?',deletingLaunchConfiguration:"Deleting launch configuration...",deployTo:"Deploy to ",deploy:"Deploy ",connect:"Connect",fetchContent:"Fetch content",fetchContentOf:"Fetch content of ",disconnectFromProject:"Disconnect from project",doNotTreatThisFolder:"Do not treat this folder as a part of the project",checkStatus:"Check status",checkApplicationStatus:"Check application status",checkApplicationState:"Check application state",stop:"Stop",start:"Start",stopApplication:"Stop the App",startApplication:"Start the application",manage:"Manage",manageThisApplicationOnRemote:"Manage this application on remote server",deleteLaunchConfiguration:"Delete this launch configuration",editLaunchConfiguration:"Edit this launch configuration",deployThisApplication:"Deploy the App from the Workspace",associatedFolder:"Associated Folder",associateAFolderFromThe:"Associate a folder from the workspace with this project.",convertToProject:"Convert to project",convertThisFolderIntoA:"Convert this folder into a project",thisFolderIsAProject:"This folder is a project already.",basic:"Basic","createAnEmptyProject.":"Create an empty project.",sFTP:"SFTP",createAProjectFromAn:"Create a project from an SFTP site.",readMeCommandName:"Readme File",readMeCommandTooltip:"Create a README.md file in this project",zipArchiveCommandName:"Zip Archive",zipArchiveCommandTooltip:"Create a project from a local zip archive.","Url:":"Url:",notZip:"The following files are not zip files: ${0}. Would you like to continue the import?",notZipMultiple:"There are multiple non-zip files being uploaded. Would you like to continue the import?",Cancel:"Cancel",Ok:"Ok",missingCredentials:"Enter the ${0} authentication credentials associated with ${1} to check its status.",deploying:"deploying",starting:"restarting",stopping:"stopping",checkingStateShortMessage:"checking status"}),n("orion/fileClient",["i18n!orion/navigate/nls/messages","orion/Deferred","orion/i18nUtil","orion/EventTarget"],function(e,t,n,i){function r(t,i,r){if(!t[i])throw new Error(n.formatMessage(e.NotSupportFileSystem,i));return t[i].apply(t,r)}function o(n,i,s,a){if(!n.readBlob)throw new Error(e.SrcNotSupportBinRead);if(!s.writeBlob)throw new Error(e.TargetNotSupportBinWrite);if("/"!==i[i.length-1])return r(n,"readBlob",[i]).then(function(e){return r(s,"writeBlob",[a,e])});var l=a.substring(0,a.length-1),c=decodeURIComponent(l.substring(l.lastIndexOf("/")+1)),h=l.substring(0,l.lastIndexOf("/")+1);return r(s,"createFolder",[h,c]).then(function(){},function(){}).then(function(){return r(n,"fetchChildren",[i]).then(function(e){for(var i=[],r=0;r<e.length;++r){var l=e[r].Location,c=l;e[r].Directory&&(c=l.substring(0,l.length-1));var h=decodeURIComponent(c.substring(c.lastIndexOf("/")+1)),d=a+encodeURIComponent(h);e[r].Directory&&(d+="/"),i[r]=o(n,l,s,d)}return t.all(i)})})}function s(r,o){function s(n){var i=new t;return i.reject(e["No Matching FileService for location:"]+n),i}function a(){if(!c){l=[],c=[],h=[];var e=r.getServiceReferences("orion.core.file"),t=e;if(o){t=[];for(var n=0;n<e.length;++n)o(e[n])&&t.push(e[n])}t.sort(function(e,t){var n=e.getProperty("ranking")||0,i=t.getProperty("ranking")||0;return n-i});for(var i=0;i<t.length;++i){d[i]={Directory:!0,Length:0,LocalTimeStamp:0,Location:t[i].getProperty("top"),ChildrenLocation:t[i].getProperty("top"),Name:t[i].getProperty("Name")||t[i].getProperty("NameKey")};var s=t[i].getProperty("top"),a=t[i].getProperty("pattern")||(s?s.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"):"");Array.isArray(a)||(a=[a]);for(var u=[],p=0;p<a.length;p++){var f=a[p];"^"!==f[0]&&(f="^"+f),u.push(new RegExp(f))}l[i]=u,c[i]=r.getService(t[i]),h[i]=t[i].getProperty("Name")||t[i].getProperty("NameKey")}}}var l,c,h;i.attach(this);var d=[],u={fetchChildren:function(){var e=new t;return e.resolve(d),e},createWorkspace:function(){var n=new t;return n.reject(e["no file service"]),n},loadWorkspaces:function(){var n=new t;return n.reject(e["no file service"]),n},loadWorkspace:function(n){var i=new t;return window.setTimeout(function(){i.resolve({Directory:!0,Length:0,LocalTimeStamp:0,Name:e["File Servers"],Location:"/",Children:d,ChildrenLocation:"/"})},100),i},search:s,createProject:s,createFolder:s,createFile:s,deleteFile:s,moveFile:s,copyFile:s,read:s,write:s};this._getServiceIndex=function(t){if(a(),"/"===t)return-1;if(!t||t.length&&0===t.length)return c[0]?0:-1;for(var i=0;i<l.length;++i)for(var r=0;r<l[i].length;r++)if(l[i][r].test(t))return i;throw new Error(n.formatMessage(e.NoFileSrv,t))},this._getService=function(e){var t=this._getServiceIndex(e);return-1===t?u:c[t]},this._getServiceName=function(e){var t=this._getServiceIndex(e);return-1===t?u.Name:h[t]},this._getServiceRootURL=function(e){var t=this._getServiceIndex(e);return-1===t?u.Location:d[t].Location},this._frozenEvent={type:"Changed"},this._eventFrozenMode=!1,r.registerService("orion.core.file.client",this)}return s.prototype={freezeChangeEvents:function(){this._frozenEvent={type:"Changed"},this._eventFrozenMode=!0},thawChangeEvents:function(){this._eventFrozenMode=!1,this.dispatchEvent(this._frozenEvent)},isEventFrozen:function(){return this._eventFrozenMode},getService:function(e){return this._getService(e)},fileServiceName:function(e){return this._getServiceName(e)},fileServiceRootURL:function(e){return this._getServiceRootURL(e)},fetchChildren:function(e){return r(this._getService(e),"fetchChildren",arguments)},createWorkspace:function(e){return r(this._getService(),"createWorkspace",arguments)},loadWorkspaces:function(){return r(this._getService(),"loadWorkspaces",arguments)},loadWorkspace:function(e){return r(this._getService(e),"loadWorkspace",arguments)},changeWorkspace:function(e){return r(this._getService(),"changeWorkspace",arguments)},_createArtifact:function(e,t,n,i){return r(this._getService(e),t,i).then(function(t){return this.isEventFrozen()?(this._frozenEvent.created||(this._frozenEvent.created=[]),this._frozenEvent.created.push({parent:e,result:t,eventData:n})):this.dispatchEvent({type:"Changed",created:[{parent:e,result:t,eventData:n}]}),t}.bind(this))},createProject:function(e,t,n,i){return r(this._getService(e),"createProject",arguments)},createFolder:function(e,t,n){return this._createArtifact(e,"createFolder",n,arguments)},createFile:function(e,t,n){return this._createArtifact(e,"createFile",n,arguments)},deleteFile:function(e,t){return r(this._getService(e),"deleteFile",arguments).then(function(n){return this.isEventFrozen()?(this._frozenEvent.deleted||(this._frozenEvent.deleted=[]),this._frozenEvent.deleted.push({deleteLocation:e,eventData:t})):this.dispatchEvent({type:"Changed",deleted:[{deleteLocation:e,eventData:t}]}),n}.bind(this))},moveFile:function(e,t,n){var i=this._getService(e),s=this._getService(t);if(i===s)return r(i,"moveFile",arguments).then(function(n){return this.isEventFrozen()?(this._frozenEvent.moved||(this._frozenEvent.moved=[]),this._frozenEvent.moved.push({source:e,target:t,result:n})):this.dispatchEvent({type:"Changed",moved:[{source:e,target:t,result:n}]}),n}.bind(this));var a="/"===e[e.length-1],l=t;if("/"!==l[l.length-1]&&(l+="/"),n)l+=encodeURIComponent(n);else{var c=e;a&&(c=c.substring(0,c.length-1)),l+=c.substring(c.lastIndexOf("/")+1)}return a&&"/"!==l[l.length-1]&&(l+="/"),o(i,e,s,l).then(function(){return r(i,"deleteFile",[e])})},copyFile:function(e,t,n){var i=this._getService(e),s=this._getService(t);if(i===s)return r(i,"copyFile",arguments).then(function(n){return this.isEventFrozen()?(this._frozenEvent.copied||(this._frozenEvent.copied=[]),this._frozenEvent.copied.push({source:e,target:t,result:n})):this.dispatchEvent({type:"Changed",copied:[{source:e,target:t,result:n}]}),n}.bind(this));var a="/"===e[e.length-1],l=t;if("/"!==l[l.length-1]&&(l+="/"),n)l+=encodeURIComponent(n);else{var c=e;a&&(c=c.substring(0,c.length-1)),l+=c.substring(c.lastIndexOf("/")+1)}return a&&"/"!==l[l.length-1]&&(l+="/"),o(i,e,s,l)},read:function(e,t){return r(this._getService(e),"read",arguments)},readBlob:function(e){return r(this._getService(e),"readBlob",arguments)},write:function(e,t,n){return r(this._getService(e),"write",arguments).then(function(t){return this.isEventFrozen()?(this._frozenEvent.modified||(this._frozenEvent.modified=[]),this._frozenEvent.modified.push(e)):this.dispatchEvent({type:"Changed",modified:[e]}),t}.bind(this))},remoteImport:function(e,t,n){return r(this._getService(e),"remoteImport",arguments).then(function(e){return this.isEventFrozen()?(this._frozenEvent.copied||(this._frozenEvent.copied=[]),this._frozenEvent.copied.push({target:n})):this.dispatchEvent({type:"Changed",copied:[{target:n}]}),e}.bind(this))},remoteExport:function(e,t){return r(this._getService(e),"remoteExport",arguments)},find:function(e,t,n){return r(this._getService(location),"find",arguments)},search:function(e){return r(this._getService(e.resource),"search",arguments)}},s.prototype.constructor=s,{FileClient:s}}),n("orion/serviceTracker",[],function(){function e(e,i){function r(e){var t=e.getProperty("service.id"),n=this.addingService(e);n&&(c[t]=e,h[t]=n)}function o(e){var t=e.getProperty("service.id"),n=h[t];delete c[t],delete h[t],this.removedService(e,n)}function s(e){return-1!==e.getProperty("objectClass").indexOf(i)}this.serviceRegistry=e;var a,l,c={},h={},d=t;this.close=function(){if(d!==n)throw new Error("Already closed");d=t,e.removeEventListener("registered",a),e.removeEventListener("unregistering",l),a=null,l=null;var i=this;this.getServiceReferences().forEach(function(e){o.call(i,e)}),"function"==typeof this.onClose&&this.onClose()},this.getServiceReferences=function(){var e=Object.keys(c);return e.length?e.map(function(e){return c[e]}):null},this.open=function(c){if("undefined"==typeof c&&(c=!0),d!==t)throw new Error("Already open");d=n;var h=this;a=function(e){return s(e.serviceReference)&&(r.call(h,e.serviceReference),"function"==typeof h.onServiceAdded)?h.onServiceAdded(e.serviceReference,h.serviceRegistry.getService(e.serviceReference)):void 0},l=function(e){s(e.serviceReference)&&o.call(h,e.serviceReference)},e.addEventListener("registered",a),e.addEventListener("unregistering",l),c&&e.getServiceReferences(i).forEach(function(t){return r.call(h,t),"function"==typeof h.onServiceAdded?h.onServiceAdded(t,e.getService(t)):void 0}),"function"==typeof this.onOpen&&this.onOpen()}}var t=0,n=1;return e.prototype={addingService:function(e){return this.serviceRegistry.getService(e)},onOpen:null,onClose:null,onServiceAdded:null,removedService:function(e,t){}},e}),n("orion/contentTypes",["orion/serviceTracker"],function(e){function t(e,t){return-1!==e.indexOf(t)}function n(e){switch(e&&e.id){case"image/jpeg":case"image/png":case"image/gif":case"image/ico":case"image/tiff":case"image/svg":return!0}return!1}function i(e){return e?"application/octet-stream"===e.id||"application/octet-stream"===e["extends"]:!1}function r(e,n){if("string"!=typeof e)return null;var i,r=null,o=e.indexOf(".");o++;for(var s=e.substring(o).toLowerCase(),a=0;a<n.length;a++){if(i=n[a],i.filename.indexOf(e)>=0){r=i;break}t(i.extension,s)&&(r=i)}if(!r)for(o=s.indexOf(".");!r&&o>=0;){for(o++,s=s.substring(o),a=0;a<n.length;a++)if(i=n[a],t(i.extension,s)){r=i;break}o=s.indexOf(".")}return r}function o(e){return null===e||"undefined"==typeof e?[]:Array.isArray(e)?e:[e]}function s(e){return o(e).map(function(e){return String.prototype.toLowerCase.call(e)})}function a(e){return{id:e.id,name:e.name,image:e.image,imageClass:e.imageClass,"extends":e["extends"],extension:s(e.extension),filename:o(e.filename)}}function l(e,t){t.map(a).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t.id)||(e[t.id]=t)})}function c(e,t){t.map(a).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t.id)&&delete e[t.id]})}function h(e,t){for(var n=o(e.getProperty("contentTypes")),i=0;i<n.length;i++)t.push(n[i])}function d(e){var t=Object.create(null);return l(t,e),t}function u(e){for(var t=e.getServiceReferences(g).concat(e.getServiceReferences(m)),n=[],i=0;i<t.length;i++){var r=t[i];h(r,n)}return d(n)}function p(t){if(t&&t.registerService){this.serviceRegistry=t;var n=new e(this.serviceRegistry,"orion.core.contenttype"),i=this;n.onServiceAdded=function(e){var t=[];h(e,t),l(i.map,t)},n.removedService=function(e){var t=[];h(e,t),c(i.map,t)},n.open(!1),this.map=u(t),t.registerService(f,this)}else{if(!Array.isArray(t))throw new Error("Invalid parameter");this.serviceRegistry=null,this.map=d(t)}}var f="orion.core.contentTypeRegistry",g="orion.core.contenttype",m="orion.file.contenttype";return p.prototype={getContentTypes:function(){var e=this.getContentTypesMap(),t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(e[n]);return t},getContentTypesMap:function(){return this.map},getFileContentType:function(e){return r(e.Name,this.getContentTypes())},getFilenameContentType:function(e){return r(e,this.getContentTypes())},getContentType:function(e){return this.map[e]||null},isExtensionOf:function(e,t){if(e="string"==typeof e?this.getContentType(e):e,t="string"==typeof t?this.getContentType(t):t,!e||!t)return!1;if(e.id===t.id)return!0;for(var n=e,i={};n&&(n=this.getContentType(n["extends"]));){if(n.id===t.id)return!0;if(i[n.id])throw new Error("Cycle: "+n.id);i[n.id]=!0}return!1},isSomeExtensionOf:function(e,t){for(var n=0;n<t.length;n++)if(this.isExtensionOf(e,t[n]))return!0;return!1}},{ContentTypeRegistry:p,isImage:n,isBinary:i,getFilenameContentType:r}}),n("orion/edit/nls/messages",{root:!0}),n("orion/edit/nls/root/messages",{Editor:"Editor",switchEditor:"Switch Editor",Fetching:"Fetching: ${0}",confirmUnsavedChanges:"There are unsaved changes. Do you still want to navigate away?",searchFilesCommand:"Quick Search...",searchFiles:"Quick Search in ${0}",searchTerm:"Enter search term:",unsavedChanges:"There are unsaved changes.",unsavedAutoSaveChanges:"Please stay on the page until Auto Save is complete.",Save:"Save",Saved:"Saved",Blame:"Blame",BlameTooltip:"Show blame annotations",Diff:"Diff",DiffTooltip:"Show diff annotations",saveOutOfSync:"Resource is out of sync with the server. Do you want to save it anyway?",loadOutOfSync:"Resource is out of sync with the server. Do you want to load it anyway? This will overwrite your local changes.",ReadingMetadata:"Reading metadata of ${0}",ReadingMetadataError:"Cannot get metadata of ${0}",Reading:"Reading ${0}",ReloadWith:"Reload With","Convert Line Delimiters":"Convert Line Delimiters","Windows (CR/LF)":"Windows (CR/LF)","Unix (LF)":"Unix (LF)",ConversionCompleteCRLF:"Line delimiters have been converted to CR/LF",ConversionCompleteLF:"Line delimiters have been converted to LF",readonly:"Read Only.",saveFile:"Save this file",toggleZoomRuler:"Toggle Zoom Ruler",gotoLine:"Go to Line...",gotoLineTooltip:"Go to specified line number",gotoLinePrompt:"Go to line:",Undo:"Undo",Redo:"Redo",Cut:"Cut",Copy:"Copy",Paste:"Paste",Find:"Find...",noResponse:"No response from server. Check your internet connection and try again.",
savingFile:"Saving file ${0}",running:"Running ${0}","Saving...":"Saving...",View:"View",SplitSinglePage:"Single Page",SplitVertical:"Split Vertical",SplitHorizontal:"Split Horizontal",SplitPipInPip:"Picture in Picture",SplitModeTooltip:"Change split editor mode",SidePanel:"Side Panel",SidePanelTooltip:"Choose what to show in the side panel.",Slideout:"Slideout",Actions:"Actions",Navigator:"Navigator",FolderNavigator:"Folder Navigator",Project:"Project",New:"New",File:"File",Edit:"Edit",Tools:"Tools",Add:"Add",noActions:"There are no actions for the current selection.",NoFile:"Use the ${0} to create new files and folders. Click a file to start coding.",LocalEditorSettings:"Local Editor Settings",NoProject:"${0} is not a project. To convert it to a project use ${1}.",NoProjects:"There are no projects in your workspace. Use the ${0} menu to create projects.",Disconnected:"${0} (disconnected)",ChooseFS:"Choose Filesystem",ChooseFSTooltip:"Choose the filesystem you want to view.",FSTitle:"${0} (${1})",Deploy:"Deploy","Deploy As":"Deploy As",Import:"Import",Export:"Export",OpenWith:"Open With",OpenRelated:"Open Related",OpenFolder:"Open Folder",OpenRecent:"Open Recent",OpenFolderTip:"Change the root folder",Dependency:"Dependency",UnnamedCommand:"Unnamed",searchInFolder:"Folder Search...","Global Search":"Global Search...",ClickEditLabel:"Click to edit",ProjectInfo:"Project Information",Name:"Name",Description:"Description",Site:"Site",projectsSectionTitle:"Projects",listingProjects:"Listing projects...",gettingWorkspaceInfo:"Getting workspace information...",showProblems:"Show Problems...",showTooltip:"Show Tooltip",showTooltipTooltip:"Shows the tooltip immediately based on the caret position",emptyDeploymentInfoMessage:"Use the Launch Configurations dropdown to deploy this project"}),n("orion/widgets/input/DropDownMenu",["orion/objects","orion/webui/littlelib"],function(e,t){function n(e,n,i){var r=t.node(e);if(!r)throw new Error("Parent node of dropdown menu not found");this._parent=r,i=i||{},this.options=i,this.navDropDownId=this._parent.id+"_navdropdown",this.selectionClass=i.selectionClass;var o=document.createElement("div");if(o.classList.add("dropdownMenu"),o.classList.add("dropdownMenuOpen"),o.id=this.navDropDownId,o.style.display="none",this._parent.appendChild(o),this._dropdownMenu=o,n=t.node(n),!n)throw"Trigger node of dropdown menu not found";this._triggerNode=n,"hidden"===this._triggerNode.style.visibility&&(this._triggerNode.style.visibility="visible"),i.noClick||(this._triggerNode.onclick=this.click.bind(this)),this._dropdownMenu.addEventListener("keydown",function(e){e.keyCode===t.KEY.ESCAPE&&this.clearPanel()}.bind(this))}return e.mixin(n.prototype,{click:function(){"none"===this._dropdownMenu.style.display?this.updateContent(this.getContentNode(),function(){t.setFramesEnabled(!1),this._dropdownMenu.style.display="",this._positionDropdown(),this.selectionClass&&this._triggerNode.classList.add(this.selectionClass),this.handle=t.addAutoDismiss([this._triggerNode,this._dropdownMenu],this.clearPanel.bind(this)),this.options.onShow&&this.options.onShow()}.bind(this)):this.clearPanel()},clearPanel:function(){this.isVisible()&&(this._dropdownMenu.style.display="none",t.setFramesEnabled(!0),this.selectionClass&&this._triggerNode.classList.remove(this.selectionClass),this.options.onHide&&this.options.onHide())},addContent:function(e){this._dropdownMenu.innerHTML=e},getContentNode:function(){return this._dropdownMenu},updateContent:function(e,t){t()},_positionDropdown:function(){this._dropdownMenu.style.right="";var e=t.bounds(this._dropdownMenu),n=t.bounds(document.body);if(e.left+e.width>n.left+n.width){var i=t.bounds(this._boundingNode(this._triggerNode)),r=t.bounds(this._triggerNode);this._dropdownMenu.style.right=i.width-(r.left-i.left+r.width)+"px"}},_boundingNode:function(e){var t=window.getComputedStyle(e,null);if(null===t)return e;var n=t.getPropertyValue("position");return"absolute"!==n&&e.parentNode&&e!==document.body?this._boundingNode(e.parentNode):e},isDestroyed:function(){return!this._dropdownMenu.parentNode},isVisible:function(){return"none"!==this._dropdownMenu.style.display&&!this.isDestroyed()},focus:function(){this._dropdownMenu.focus()},destroy:function(){this._parent&&(t.setFramesEnabled(!0),t.empty(this._parent),this._parent=this.select=null)}}),n}),n("orion/URITemplate",[],function(){function e(e){this._text=e}function t(e){return e.replace("%25","%")}function n(e,n){if("U"===n)return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()});if("U+R"===n)return encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(d,t);if("U+R-,"===n)return encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/,/g,"%2C");throw new Error("Unknown allowed character set: "+n)}function i(e,t,i){for(var r=[],o=0;o<e.length;o++)"undefined"!=typeof e[o]&&r.push(n(e[o],t));return r.join(i)}function r(e,t,i,r){for(var o=Object.keys(e),s=[],a=0;a<o.length;a++)"undefined"!=typeof e[o[a]]&&s.push(n(o[a],t)+i+n(e[o[a]],t));return s.join(r)}function o(e){for(var t=[],n=e.split(","),i=0;i<n.length;i++){var r=n[i].match(h);if(null===r)throw new Error("Bad VarSpec: "+e);t.push({name:r[1],explode:!!r[2],prefix:r[3]?parseInt(r[3],10):-1})}return t}function s(e){if(0===e.length)throw new Error("Invalid Expression: 0 length expression");this._operator=c[e[0]],this._operator?e=e.substring(1):this._operator=c.NUL,this._varSpecList=o(e)}function a(t){for(var n=[],i=0,r=t.indexOf("{",i);-1!==r;){n.push(new e(t.substring(i,r)));var o=t.indexOf("}",r+1);if(-1===o)throw new Error("Invalid template: "+t);n.push(new s(t.substring(r+1,o))),i=o+1,r=t.indexOf("{",i)}return n.push(new e(t.substring(i))),n}function l(e){this._templateComponents=a(e)}var c={NUL:{first:"",sep:",",named:!1,ifemp:"",allow:"U"},"+":{first:"",sep:",",named:!1,ifemp:"",allow:"U+R"},".":{first:".",sep:",",named:!1,ifemp:"",allow:"U"},"/":{first:"/",sep:"/",named:!1,ifemp:"",allow:"U"},";":{first:";",sep:";",named:!0,ifemp:"",allow:"U"},"?":{first:"?",sep:"&",named:!0,ifemp:"=",allow:"U"},"&":{first:"&",sep:"&",named:!0,ifemp:"=",allow:"U"},"#":{first:"#",sep:",",named:!1,ifemp:"",allow:"U+R"},",":{first:"",sep:",",named:!1,ifemp:"",allow:"U+R-,"}},h=/^((?:(?:[a-zA-Z0-9_])|(?:%[0-9A-F][0-9A-F]))(?:(?:[a-zA-Z0-9_.])|(?:%[0-9A-F][0-9A-F]))*)(?:(\*)|:([0-9]+))?$/,d=/%25[0-9A-F][0-9A-F]/g;return e.prototype={expand:function(e){return encodeURI(this._text)}},s.prototype={expand:function(e){for(var t=[],o=0;o<this._varSpecList.length;o++){var s=this._varSpecList[o],a=s.name,l=e[a],c=typeof l;if("undefined"!==c&&null!==l){var h=0===t.length?this._operator.first:this._operator.sep;if("string"===c)this._operator.named&&(h+=n(a,"U+R"),h+=0===l.length?this._operator.ifemp:"="),-1!==s.prefix&&s.prefix<l.length&&(l=l.substring(0,s.prefix)),h+=n(l,this._operator.allow);else if(Array.isArray(l)){if(0===l.length)continue;if(s.explode)h+=i(l,this._operator.allow,this._operator.sep);else{var d=i(l,this._operator.allow,",");this._operator.named&&(h+=n(a,"U+R"),h+=0===d.length?this._operator.ifemp:"="),h+=d}}else{if("object"!==c)throw new Error("bad param type: "+a+" : "+c);if(0===Object.keys(l).length)continue;if(s.explode)h+=r(l,this._operator.allow,"=",this._operator.sep);else{var u=r(l,this._operator.allow,",",",");this._operator.named&&(h+=n(a,"U+R"),h+=0===u.length?this._operator.ifemp:"="),h+=u}}t.push(h)}}return t.join("")}},l.prototype={expand:function(e){for(var t=[],n=0;n<this._templateComponents.length;n++)t.push(this._templateComponents[n].expand(e));return t.join("")}},l}),function(){function e(e){if("string"!=typeof e)throw new TypeError}function t(e){return e?e.split("&"):[]}function n(e){return 0===e.length?"":e.join("&")}function i(e){var t=/([^=]*)(?:=?)(.*)/.exec(e),n=t[1]?decodeURIComponent(t[1]):"",i=t[2]?decodeURIComponent(t[2]):"";return[n,i]}function r(e){var t=encodeURIComponent(e[0]);return e[1]&&(t+="="+encodeURIComponent(e[1])),t}function o(e,n){var r="",o=[],s=0;return{next:function(){if(r!==e.query&&(r=e.query,o=t(r)),s<o.length){var a=i(o[s++]);switch(n){case"keys":return a[0];case"values":return a[1];case"keys+values":return[a[0],a[1]];default:throw new TypeError}}throw L}}}function s(e){Object.defineProperty(this,"_url",{get:function(){return e._url}})}function a(e,t){if(!e.scheme&&t&&(e.scheme=t.scheme,!e.host&&t.host&&(e.userinfo=t.userinfo,e.host=t.host,e.port=t.port,e.pathRelative=!0)),e.pathRelative)if(e.path){if("/"!==e.path[0]){var n=/^(.*\/)[^\/]*$/.exec(t.path)[1]||"/";e.path=n+e.path}}else e.path=t.path}function l(e){return e.toLowerCase()}function c(e){return e?/[1-9]\d*$/.exec(e)[0]:""}function h(e){var t=[];return e.split("/").forEach(function(e){".."===e?t.length>1&&t.pop():"."!==e&&t.push(e)}),t.join("/")}function d(e){e.scheme&&(e.scheme=l(e.scheme)),e.port&&(e.port=c(e.port)),e.host&&e.path&&(e.path=h(e.path))}function u(e){return e.replace(/\s/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function p(e,t){if("string"!=typeof e)throw new TypeError;e=u(e);var n=_.exec(e);if(!n)return null;var i={};if(i.scheme=n[1]||"",i.scheme&&!w.test(i.scheme))return null;var r=n[2];if(r){var o=y.exec(r);if(i.userinfo=o[1],i.host=o[2],i.port=o[3],i.port&&!b.test(i.port))return null}return i.path=n[3],i.query=n[4],i.fragment=n[5],a(i,t),d(i),i}function f(e){var t=e.scheme?e.scheme+":":"";return e.host&&(t+="//",e.userinfo&&(t+=e.userinfo+"@"),t+=e.host,e.port&&(t+=":"+e.port)),t+=e.path,e.query&&(t+="?"+e.query),e.fragment&&(t+="#"+e.fragment),t}function g(e,t){var n;if(t){if(t=t.href||t,n=p(t),!n||!n.scheme)throw new SyntaxError;Object.defineProperty(this,"_baseURL",{value:n})}var i=p(e,n);if(!i)throw new SyntaxError;Object.defineProperty(this,"_input",{value:e,writable:!0}),Object.defineProperty(this,"_url",{value:i,writable:!0});var r=new s(this);Object.defineProperty(this,"query",{get:function(){return this._url?r:null},enumerable:!0})}try{var m;if("function"==typeof self.URL&&0!==self.URL.length&&"http:"===(m=new self.URL("http://www.w3.org?q")).protocol&&m.query)return}catch(v){}var _=/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?$/,y=/^(?:(.*)@)?(\[[^\]]*\]|[^:]*)(?::(.*))?$/,x=/^\S*$/,w=/^([a-zA-Z](?:[a-zA-Z0-9+-.])*)$/,b=/^\d*$/,C=/^(\[[^\]\/?#\s]*\]|[^:\/?#\s]*)$/,E=/^(\[[^\]\/?#\s]*\]|[^:\/?#\s]*)(?::(\d*))?$/,T=/^([^?#\s]*)$/,S=/^([^\s]*)$/,k=x,A=/([^:]*):?(.*)/,L="undefined"!=typeof StopIteration?StopIteration:new Error("Stop Iteration"),M={"ftp:":"21","gopher:":"70","http:":"80","https:":"443","ws:":"80","wss:":"443"};Object.defineProperties(s.prototype,{get:{value:function(n){e(n);var r,o=t(this._url.query);return o.some(function(e){var t=i(e);return t[0]===n?(r=t[1],!0):void 0}),r},enumerable:!0},set:{value:function(o,s){e(o),e(s);var a=t(this._url.query),l=a.some(function(e,t){var n=i(e);return n[0]===o?(n[1]=s,a[t]=r(n),!0):void 0});l||a.push(r([o,s])),this._url.query=n(a)},enumerable:!0},has:{value:function(n){e(n);var r=t(this._url.query);return r.some(function(e){var t=i(e);return t[0]===n?!0:void 0})},enumerable:!0},"delete":{value:function(r){e(r);var o=t(this._url.query),s=o.filter(function(e){var t=i(e);return t[0]!==r});return s.length!==o.length?(this._url.query=n(s),!0):!1},enumerable:!0},clear:{value:function(){this._url.query=""},enumerable:!0},forEach:{value:function(e,t){if("function"!=typeof e)throw new TypeError;var n=o(this._url,"keys+values");try{for(;;){var i=n.next();e.call(t,i[1],i[0],this)}}catch(r){if(r!==L)throw r}},enumerable:!0},keys:{value:function(){return o(this._url,"keys")},enumerable:!0},values:{value:function(){return o(this._url,"values")},enumerable:!0},items:{value:function(){return o(this._url,"keys+values")}},size:{get:function(){return t(this._url.query).length},enumerable:!0},getAll:{value:function(n){e(n);var r=[],o=t(this._url.query);return o.forEach(function(e){var t=i(e);t[0]===n&&r.push(t[1])}),r},enumerable:!0},append:{value:function(i,o){e(i),e(o);var s=t(this._url.query);s.push(r([i,o])),this._url.query=n(s)},enumerable:!0}}),Object.defineProperties(g.prototype,{toString:{value:function(){return this.href}},href:{get:function(){return this._url?f(this._url):this._input},set:function(t){e(t),this._input=t,this._url=p(this._input,this._baseURL)},enumerable:!0},origin:{get:function(){return this._url&&this._url.host?this.protocol+"//"+this.host:""},enumerable:!0},protocol:{get:function(){return this._url?this._url.scheme+":":":"},set:function(t){if(e(t),this._url){var n=":"===t.slice(-1)?t.substring(0,t.length-1):t;(""===n||w.test(n))&&(this._url.scheme=l(n))}},enumerable:!0},_userinfo:{get:function(){return this._url?this._url.userinfo:""},set:function(t){e(t),this._url&&(this._url.userinfo=t)}},username:{get:function(){if(!this._url)return"";var e=A.exec(this._userinfo),t=decodeURIComponent(e[1]||"");return t},set:function(t){if(e(t),this._url){var n=A.exec(this._userinfo),i=[encodeURIComponent(t||"")];n[2]&&i.push(n[2]),this._userinfo=i.join(":")}},enumerable:!0},password:{get:function(){if(!this._url)return"";var e=A.exec(this._userinfo),t=decodeURIComponent(e[2]||"");return t},set:function(t){if(e(t),this._url){var n=A.exec(this._userinfo),i=[n[1]||""];t&&i.push(encodeURIComponent(t)),this._userinfo=i.join(":")}},enumerable:!0},host:{get:function(){var e="";return this._url&&this._url.host&&(e+=this._url.host,this._url.port&&(e+=":"+this._url.port)),e},set:function(t){if(e(t),this._url){var n=E.exec(t);n&&(this._url.host=n[1],this._url.port=c(n[2]))}},enumerable:!0},hostname:{get:function(){return this._url?this._url.host:""},set:function(t){if(e(t),this._url){var n=C.exec(t);n&&(this._url.host=t)}},enumerable:!0},port:{get:function(){var e=this._url?this._url.port||"":"";return e&&e===M[this.protocol]&&(e=""),e},set:function(t){if(e(t),this._url){var n=b.exec(t);n&&(this._url.port=c(t))}},enumerable:!0},pathname:{get:function(){return this._url?this._url.path:""},set:function(t){if(e(t),this._url){var n=T.exec(t);n&&(this._url.host&&t&&"/"!==t[0]&&(t="/"+t),this._url.path=t?h(t):"")}},enumerable:!0},search:{get:function(){return this._url&&this._url.query?"?"+this._url.query:""},set:function(t){if(e(t),this._url){t&&"?"===t[0]&&(t=t.substring(1));var n=S.exec(t);n&&(this._url.query=t)}},enumerable:!0},hash:{get:function(){return this._url&&this._url.fragment?"#"+this._url.fragment:""},set:function(t){if(e(t),this._url){t&&"#"===t[0]&&(t=t.substring(1));var n=k.exec(t);n&&(this._url.fragment=t)}},enumerable:!0}});var N=self.URL||self.webkitURL;N&&N.createObjectURL&&(Object.defineProperty(g,"createObjectURL",{value:N.createObjectURL.bind(N),enumerable:!1}),Object.defineProperty(g,"revokeObjectURL",{value:N.revokeObjectURL.bind(N),enumerable:!1})),self.URL=g}(),n("orion/URL-shim",function(){}),n("orion/PageLinks",["require","orion/Deferred","orion/PageUtil","orion/URITemplate","orion/i18nUtil","orion/objects","orion/URL-shim"],function(e,t,n,i,r,o){function s(){if(e.toUrl){var t=new URL(e.toUrl("orion/"),self.location.href);return new URL("../",t).href.slice(0,-1)}return new URL("/",self.location.href).href.slice(0,-1)}function a(e,t){return c(e,t).then(function(e){return new u(e)})}function l(e){var t={};return e.getPropertyKeys().forEach(function(n){"objectClass"!==n&&"service.names"!==n&&"service.id"!==n&&"__plugin__"!==n&&(t[n]=e.getProperty(n))}),t}function c(e,r){r=r||"orion.page.link";var o=e.getServiceReferences(r),a=n.matchResourceParameters(window.location.href),c=s(),h={OrionHome:c,Location:a.resource},d=[];return o.forEach(function(e){var r=l(e);if(r.uriTemplate&&(r.nls||r.name)){var o=new i(r.uriTemplate),s=o.expand(h);s=n.validateURLScheme(s),r.href=s,r.textContent=r.name||r.nameKey,d.push((new t).resolve(r))}}),t.all(d)}function h(e){var n;if(!g){n=[];var i=e.getServiceReferences("orion.page.link.category");return i.forEach(function(i){var r=l(i);r.id&&(r.name||r.nameKey)&&(r.service=e.getService(i),r.textContent=r.name,n.push((new t).resolve(r)))}),t.all(n).then(function(e){return g=new d(e)})}return(new t).resolve(g)}function d(e){var t=this.categories=Object.create(null);e.forEach(function(e){t[e.id]=e})}function u(e){this.allPageLinks=e,this.allPageLinks.sort(p)}function p(e,t){var n=e.textContent&&e.textContent.toLowerCase(),i=t.textContent&&t.textContent.toLowerCase();return i>n?-1:n>i?1:0}function f(e,t,n){var i=document.createElement("a");return i.href=e,i.target=t,i.classList.add("targetSelector"),i.textContent=n,i}var g;return o.mixin(d.prototype,{getCategoryIDs:function(){return Object.keys(this.categories)},getCategory:function(e){return this.categories[e]||null}}),o.mixin(u.prototype,{createLinkElements:function(){return this.allPageLinks.map(function(e){return f(e.href,"_self",e.textContent)})},getAllLinks:function(){return this.allPageLinks}}),{getCategoriesInfo:h,getPageLinksInfo:a,getOrionHome:s}}),n("orion/extensionCommands",["orion/Deferred","orion/commands","orion/PageUtil","orion/contentTypes","orion/URITemplate","orion/i18nUtil","orion/PageLinks","i18n!orion/edit/nls/messages","orion/URL-shim"],function(e,t,n,i,r,o,s,a){function l(e){var t={},n=e.getPropertyKeys();return n.forEach(function(n){t[n]=e.getProperty(n)}),t}function c(e){return e.id||e.name}var h={},d=s.getOrionHome();h._cloneItemWithoutChildren=function g(e){if(null===e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)"children"!==n&&"Children"!==n&&"parent"!==n&&"Project"!==n&&(t[n]=g(e[n]));return t},h._getOpenWithNavCommandExtensions=function(e,t){function n(){for(var t=e.getServiceReferences("orion.edit.editor"),n=[],i=0;i<t.length;i++){var r=t[i],o=r.getProperty("id");n.push({id:o,"default":r.getProperty("default")||!1,name:r.getProperty("name"),nameKey:r.getProperty("nameKey"),nls:r.getProperty("nls"),uriTemplate:r.getProperty("orionTemplate")||r.getProperty("uriTemplate"),validationProperties:r.getProperty("validationProperties")||[]})}return n}function i(e,t){for(var n=e.getServiceReferences("orion.navigate.openWith"),i=[],r=[],o=0;o<n.length;o++){var s=n[o];if(s.getProperty("editor")===t.id){var a=s.getProperty("contentType");a instanceof Array?i=i.concat(a):i.push(a||"*/*");var l=s.getProperty("excludedContentTypes");l instanceof Array?r=r.concat(l):null!==l&&"undefined"!=typeof l&&r.push(l)}}return 0===i.length&&(i=null),0===r.length&&(r=null),{contentTypes:i,excludedContentTypes:r}}for(var r,o=n(),s=[],a="orion.editor",l=0;l<o.length;l++){var c=o[l],h=i(e,c),d=h.contentTypes,u=h.excludedContentTypes,p={name:c.name||c.id,nameKey:c.nameKey,id:"eclipse.openWithCommand."+c.id,contentType:d,excludedContentTypes:u,uriTemplate:c.uriTemplate,nls:c.nls,forceSingleItem:!0,isEditor:c["default"]?"default":"editor",validationProperties:c.validationProperties},f={properties:p,service:{}};c.id===a?r=f:s.push(f)}return r&&s.push(r),s},h._makeValidator=function(e,t,n,o){function s(e,t,n,i,r){var o,s=!1;if("!"===t.charAt(0))return"undefined"==typeof e[t.substring(1)];if("undefined"!=typeof e[t]){if("undefined"==typeof n)o=e[t],s=!0;else if("string"==typeof n){if(!i.variableName)return new RegExp(n).test(e[t]);var a=new RegExp(n).exec(e[t]);if(a){var l=a[0];o="before"===i.variableMatchPosition?e[t].substring(0,a.index):"after"===i.variableMatchPosition?e[t].substring(a.index+l.length):"only"===i.variableMatchPosition?l:e[t],s=!0}}else e[t]===n&&(o=e[t],s=!0);var c=i.variableName,h=i.replacements;if(s&&c&&(r[c]=o,r.itemCached=e,h)){if("string"!=typeof o)return window.console.log("Cannot replace "+c+", value is not a string: "+o),s;for(var d=0;d<h.length;d++){var u=!1;if(h[d].pattern){var p=h[d].pattern,f=h[d].replacement||"";r[c]=r[c].replace(new RegExp(p),f).replace(new RegExp(p),f)}else u=!0;u&&window.console.log("Invalid replacements specified in validation property.  "+h[d])}}return s}return!1}function a(e,t,n,i){var r,o,l,c,h=n.match;if((l=t.indexOf("["))>=0){if((c=t.indexOf("]"))<0)return!1;var d,u,p=t.substring(0,l);if(!(d=e[p])||!Array.isArray(d))return!1;if(r=t.substring(l+1,c),u=parseInt(r,10),isNaN(u))return!1;0>u&&(u+=d.length),o=t.substring(c+1),t=p+":"+String(u)+o}return t.indexOf("|")>=0?(r=t.substring(0,t.indexOf("|")),o=t.substring(t.indexOf("|")+1),a(e,r,n,i)?!0:a(e,o,n,i)):t.indexOf(":")>=0?(r=t.substring(0,t.indexOf(":")),o=t.substring(t.indexOf(":")+1),e[r]?a(e[r],o,n,i):!1):s(e,t,h,n,i)}function l(t,n,r){if(r.info.validationProperties)for(var o=0;o<r.info.validationProperties.length;o++){var s=r.info.validationProperties[o];if("undefined"==typeof s.source)return window.console.log("Invalid validationProperties in "+e.id+".  No source property specified."),!1;var l=a(t,s.source,s,r);if(!l)return!1}if(!r.info.contentType&&!r.info.excludedContentTypes)return!0;if(t.Directory)return r.info.contentType&&r.info.contentType.indexOf("*/*")>=0?!0:!1;var c=!0,h=n?i.getFilenameContentType(t.Name,n):null;return h=h||{id:"application/octet-stream"},r.info.excludedContentTypes&&n&&(c=r.info.excludedContentTypes.every(function(e){var t=e.replace(/([*?])/g,".$1");return-1!==h.id.search(t)?!1:!0})),c&&r.info.contentType&&n&&(c=r.info.contentType.some(function(e){var t=e.replace(/([*?])/g,".$1");return-1!==h.id.search(t)?!0:!1})),c}var c={info:e};return c.validationFunction=function(e){if("function"==typeof o&&(e=o.call(this,e)),e){if(Array.isArray(e)){if((this.info.forceSingleItem||this.info.uriTemplate)&&1!==e.length)return!1;if(e.length<1)return!1}else e=[e];for(var t=0;t<e.length;t++)if(!l(e[t],n,this))return!1;return!0}return!1},c.generatesURI=function(){return!!this.info.uriTemplate},c.getURI=function(e){if(this.info.uriTemplate){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);if(this.info.validationProperties)for(var i=0;i<this.info.validationProperties.length;i++){var o=this.info.validationProperties[i];if(o.source&&o.variableName){var s=this.itemCached===e&&this[o.variableName];s||a(e,o.source,o,this),e[o.variableName]?window.console.log("Variable name "+o.variableName+" in the extension "+this.info.id+" conflicts with an existing property in the item metadata."):t[o.variableName]=this[o.variableName]}}t.OrionHome=d;var l=new r(this.info.uriTemplate);return l.expand(t)}return null},c};var u=a.UnnamedCommand,p="";h._createCommandOptions=function(t,i,r,o,s,a){function l(e,l){var c=h._makeValidator(t,r,o,a);if(e.visibleWhen=c.validationFunction.bind(c),s)if(c.generatesURI.bind(c)())e.hrefCallback=function(e){var t=Array.isArray(e.items)?e.items[0]:e.items,i=c.getURI.bind(c)(t);return e.command&&e.command.isEditor&&e.domNode.addEventListener("click",function(r){if(t.Location){var o=n.matchResourceParameters();if(o.resource!==t.Location)return void(e.domNode.target="_blank");var s=n.matchResourceParameters(i);if(s&&s.editor===o.editor)return void(e.domNode.target="_blank")}e.domNode.target=""}),i};else{var d=t;e.callback=function(t){var n;if(d.forceSingleItem){var o=Array.isArray(t.items)?t.items[0]:t.items;n=h._cloneItemWithoutChildren(o)}else if(Array.isArray(t.items)){n=[];for(var s=0;s<t.items.length;s++)n.push(h._cloneItemWithoutChildren(t.items[s]))}else n=h._cloneItemWithoutChildren(t.items);if(r)var a=r.getService("orion.page.progress");i.run?a?a.progress(i.run(n),"Running command: "+e.name):i.run(n):r&&(a?a.progress(r.getService(i).run(n),"Running command: "+e.name):r.getService(i).run(n))}}l.resolve(e)}var d=new e,f={name:t.name||t.nameKey||u,image:t.image,id:c(t),tooltip:t.tooltip||t.tooltipKey||p,isEditor:t.isEditor,showGlobally:t.showGlobally};return t.fixAllEnabled&&(f.fixAllEnabled=!0),l(f,d),d},h.getOpenWithCommand=function(e,t,n){for(var i,r=n||h.getOpenWithCommands(e),o=0;o<r.length;o++)if(r[o].visibleWhen(t)){var s="default"===r[o].isEditor;if((!i||s)&&(i=r[o],s))break}return i},h.getOpenWithCommands=function(e){var t=[];for(var n in e._commandList){var i=e._commandList[n];i.isEditor&&t.push(i)}return t};var f;return h.createAndPlaceFileCommandsExtension=function(e,t,n,i,r,o){var s=o?"all":void 0,l=!!o;return h.createFileCommands(e,null,s,l,t).then(function(e){return r&&0<e.length&&(t.addCommandGroup(n,"eclipse.openWith",1e3,a.OpenWith,r,null,null,null,"dropdownSelection"),t.addCommandGroup(n,"eclipse.fileCommandExtensions",1e3,a.OpenRelated,r)),e.forEach(function(e){var o=null;r&&(o=e.isEditor?r+"/eclipse.openWith":r+"/eclipse.fileCommandExtensions"),t.registerCommandContribution(n,e.id,i,o)}),{}})},h.createFileCommands=function(n,i,r,o,s){function a(){var t=n.getService("orion.core.contentTypeRegistry")||i;return f||e.when(t.getContentTypes(),function(e){return f=e})}r=void 0===r?"global":r,o=void 0===o?!0:o;var l=[];return h._cachedFileCommands||h._createCachedFileCommands(n),("all"===r||"global"===r)&&h._cachedFileCommands.forEach(function(e){var t=e.properties;("all"===r||t.forceSingleItem&&t.showGlobally)&&l.push(e)}),e.when(a(),function(){o&&(h._cachedOpenWithExtensions||(h._cachedOpenWithExtensions=h._getOpenWithNavCommandExtensions(n,f)),l=l.concat(h._cachedOpenWithExtensions),s._addedOpenWithCommands=o);var i=l.map(function(i){var r=i.properties,o=i.service,a=s.findCommand(c(r));return a?(new e).resolve(a):h._createCommandOptions(r,o,n,f,!0).then(function(e){var n=new t.Command(e);return s.addCommand(n),n})});return e.all(i,function(e){return{_error:e}}).then(function(e){return e})})},h._createCachedFileCommands=function(e){var t=e.getServiceReferences("orion.navigate.command");h._cachedFileCommands=[];for(var n=0;n<t.length;n++){var i=t[n].getProperty("id");if("orion.navigateFromMetadata"!==i){var r=e.getService(t[n]),o=l(t[n]);h._cachedFileCommands.push({properties:o,service:r})}}},h.getFileCommandIds=function(){var e=[];if(!h._cachedFileCommands)throw"extensionCommandUtils._cachedFileCommands is not initialized";return h._cachedFileCommands.length&&(e=h._cachedFileCommands.map(function(e){return e.properties.id})),e},h.createOpenWithCommands=function(t,n,i){return i&&i._addedOpenWithCommands?(new e).resolve(h.getOpenWithCommands(i)):h.createFileCommands(t,n,"none",!0,i)},h}),n("orion/regex",[],function(){function e(e){return e.replace(/([\\$\^*\/+?\.\(\)|{}\[\]])/g,"\\$&")}function t(e){var t=/^\s*\/(.+)\/([gim]{0,3})\s*$/.exec(e);return t?{pattern:t[1],flags:t[2]}:null}return{escape:e,parse:t}}),n("orion/editor/eventTarget",[],function(){function e(){}return e.addMixin=function(t){var n=e.prototype;for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},e.prototype={addEventListener:function(e,t,n){this._eventTypes||(this._eventTypes={});var i=this._eventTypes[e];i||(i=this._eventTypes[e]={level:0,listeners:[]});var r=i.listeners;r.push({listener:t,useCapture:n})},dispatchEvent:function(e){var t=e.type;this._dispatchEvent("pre"+t,e),this._dispatchEvent(t,e),this._dispatchEvent("post"+t,e)},_dispatchEvent:function(e,t){var n=this._eventTypes?this._eventTypes[e]:null;if(n){var i=n.listeners;try{if(n.level++,i)for(var r=0,o=i.length;o>r;r++)if(i[r]){var s=i[r].listener;"function"==typeof s?s.call(this,t):s.handleEvent&&"function"==typeof s.handleEvent&&s.handleEvent(t)}}finally{if(n.level--,n.compact&&0===n.level){for(var a=i.length-1;a>=0;a--)i[a]||i.splice(a,1);0===i.length&&delete this._eventTypes[e],n.compact=!1}}}},isListening:function(e){return this._eventTypes?void 0!==this._eventTypes[e]:!1},removeEventListener:function(e,t,n){if(this._eventTypes){var i=this._eventTypes[e];if(i){for(var r=i.listeners,o=0,s=r.length;s>o;o++){var a=r[o];if(a&&a.listener===t&&a.useCapture===n){0!==i.level?(r[o]=null,i.compact=!0):r.splice(o,1);break}}0===r.length&&delete this._eventTypes[e]}}}},{EventTarget:e}}),n("orion/editor/textModel",["orion/editor/eventTarget","orion/regex","orion/util"],function(e,t,n){function i(e,t){this._lastLineIndex=-1,this._text=[""],this._lineOffsets=[0],this.setText(e),this.setLineDelimiter(t)}return i.prototype={destroy:function(){},find:function(e){this._text.length>1&&(this._text=[this._text.join("")]);var n=e.string,i=e.regex,r=n,o="",s=e.caseInsensitive;if(r)if(i){var a=t.parse(r);a&&(r=a.pattern,o=a.flags)}else r=n.replace(/([\\$\^*\/+?\.\(\)|{}\[\]])/g,"\\$&"),s&&(r=r.replace(/[iI\u0130\u0131]/g,"[Iiİı]"));var l,c=null;if(r){var h=e.reverse,d=e.wrap,u=e.wholeWord,p=e.start||0,f=e.end,g=null!==f&&void 0!==f;-1===o.indexOf("g")&&(o+="g"),-1===o.indexOf("m")&&(o+="m"),s&&-1===o.indexOf("i")&&(o+="i"),u&&(r="\\b"+r+"\\b");var m,v,_=this._text[0],y=0;if(g){var x=f>p?p:f,w=f>p?f:p;_=_.substring(x,w),y=x}var b=new RegExp(r,o);h?l=function(){var e=null;for(b.lastIndex=0;;){if(v=b.lastIndex,m=b.exec(_),v===b.lastIndex)return null;if(!m)break;if(m.index+y<p)e={start:m.index+y,end:b.lastIndex+y};else{if(!d||e)break;p=_.length+y,e={start:m.index+y,end:b.lastIndex+y}}}return e&&(p=e.start),e}:(g||(b.lastIndex=p),l=function(){for(;;){if(v=b.lastIndex,m=b.exec(_),v===b.lastIndex)return null;if(m)return{start:m.index+y,end:b.lastIndex+y};if(0===v||!d)break}return null}),c=l()}return{next:function(){var e=c;return e&&(c=l()),e},hasNext:function(){return null!==c}}},getCharCount:function(){for(var e=0,t=0;t<this._text.length;t++)e+=this._text[t].length;return e},getLine:function(e,t){var n=this.getLineCount();if(!(e>=0&&n>e))return null;var i=this._lineOffsets[e];if(n>e+1){var r=this.getText(i,this._lineOffsets[e+1]);if(t)return r;for(var o,s=r.length;10===(o=r.charCodeAt(s-1))||13===o;)s--;return r.substring(0,s)}return this.getText(i)},getLineAtOffset:function(e){var t=this.getCharCount();if(!(e>=0&&t>=e))return-1;var n=this.getLineCount();if(e===t)return n-1;var i,r,o=this._lastLineIndex;if(o>=0&&n>o&&(i=this._lineOffsets[o],r=n>o+1?this._lineOffsets[o+1]:t,e>=i&&r>e))return o;for(var s=n,a=-1;s-a>1;)if(o=Math.floor((s+a)/2),i=this._lineOffsets[o],r=n>o+1?this._lineOffsets[o+1]:t,i>=e)s=o;else{if(r>e){s=o;break}a=o}return this._lastLineIndex=s,s},getLineCount:function(){return this._lineOffsets.length},getLineDelimiter:function(){return this._lineDelimiter},getLineEnd:function(e,t){var n=this.getLineCount();if(!(e>=0&&n>e))return-1;if(n>e+1){var i=this._lineOffsets[e+1];if(t)return i;for(var r,o=this.getText(Math.max(this._lineOffsets[e],i-2),i),s=o.length;10===(r=o.charCodeAt(s-1))||13===r;)s--;return i-(o.length-s)}return this.getCharCount()},getLineStart:function(e){return e>=0&&e<this.getLineCount()?this._lineOffsets[e]:-1},getText:function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=this.getCharCount()),e===t)return"";for(var n,i=0,r=0;r<this._text.length&&(n=this._text[r].length,!(i+n>=e));)i+=n,r++;for(var o=i,s=r;r<this._text.length&&(n=this._text[r].length,!(i+n>=t));)i+=n,r++;var a=i,l=r;if(s>=this._text.length||l>=this._text.length||s>l)return"";if(s===l)return this._text[s].substring(e-o,t-a);var c=this._text[s].substring(e-o),h=this._text[l].substring(0,t-a);return c+this._text.slice(s+1,l).join("")+h},onChanging:function(e){return this.dispatchEvent(e)},onChanged:function(e){return this.dispatchEvent(e)},setLineDelimiter:function(e,t){if("auto"===e&&(e=void 0,this.getLineCount()>1&&(e=this.getText(this.getLineEnd(0),this.getLineEnd(0,!0)))),this._lineDelimiter=e?e:n.platformDelimiter,t){var i=this.getLineCount();if(i>1){for(var r=new Array(i),o=0;i>o;o++)r[o]=this.getLine(o);this.setText(r.join(this._lineDelimiter))}}},setText:function(e,t,n){if(void 0===e&&(e=""),void 0===t&&(t=0),void 0===n&&(n=this.getCharCount()),t!==n||""!==e){for(var i=this.getLineAtOffset(t),r=this.getLineAtOffset(n),o=t,s=n-t,a=r-i,l=e.length,c=0,h=this.getLineCount(),d=0,u=0,p=0,f=[];;){if(-1!==d&&p>=d&&(d=e.indexOf("\r",p)),-1!==u&&p>=u&&(u=e.indexOf("\n",p)),-1===u&&-1===d)break;p=-1!==d&&-1!==u?d+1===u?u+1:(u>d?d:u)+1:-1!==d?d+1:u+1,f.push(t+p),c++}var g={type:"Changing",text:e,start:o,removedCharCount:s,addedCharCount:l,removedLineCount:a,addedLineCount:c};if(this.onChanging(g),0===f.length){var m,v=this.getLineStart(i);m=h>r+1?this.getLineStart(r+1):this.getCharCount(),t!==v&&(e=this.getText(v,t)+e,t=v),n!==m&&(e+=this.getText(n,m),n=m)}for(var _=l-s,y=i+a+1;h>y;y++)this._lineOffsets[y]+=_;var x,w=5e4,b=w;if(f.length<b)x=[i+1,a].concat(f),Array.prototype.splice.apply(this._lineOffsets,x);else{
p=i+1,this._lineOffsets.splice(p,a);for(var C=0;C<f.length;C+=b)x=[p,0].concat(f.slice(C,Math.min(f.length,C+b))),Array.prototype.splice.apply(this._lineOffsets,x),p+=b}for(var E,T=0,S=0;S<this._text.length&&(E=this._text[S].length,!(T+E>=t));)T+=E,S++;for(var k=T,A=S;S<this._text.length&&(E=this._text[S].length,!(T+E>=n));)T+=E,S++;var L=T,M=S,N=this._text[A],O=this._text[M],D=N.substring(0,t-k),R=O.substring(n-L),I=[A,M-A+1];D&&I.push(D),e&&I.push(e),R&&I.push(R),Array.prototype.splice.apply(this._text,I),0===this._text.length&&(this._text=[""]);var P={type:"Changed",start:o,removedCharCount:s,addedCharCount:l,removedLineCount:a,addedLineCount:c};this.onChanged(P)}}},e.EventTarget.addMixin(i.prototype),{TextModel:i}}),n("orion/searchUtils",["i18n!orion/nls/messages","orion/regex","orion/editor/textModel","orion/URITemplate"],function(e,t,n,i){function r(e,n,i){var r="";i&&(r="^");var o=n.wholeWord?"\\b"+e.searchStr+"\\b":e.searchStr,s=t.parse("/"+r+o+"/");if(s){var a=s.pattern,l=s.flags;-1!==l.indexOf("i")||n.caseSensitive||(l+="i"),e.regExp={pattern:a,flags:l},e.wildCard=!0}}var o={};return o.ALL_FILE_TYPE="*.*",o.getSearchParams=function(t,n,i){if(t){var r=n,s=!0;if("*"===r&&(r=""),""===r&&(s=i&&i.type!==o.ALL_FILE_TYPE),s){var a=t.createSearchParams(r,!1,!1,i);return a}}else window.alert(e.NoSearchAvailableErr);return null},o.generateSearchHelper=function(e,t){var n=e.keyword,i=n,s={};if(e.fileType&&e.fileType!==o.ALL_FILE_TYPE&&""===n&&(i="*."+e.fileType),e.regEx)s.searchStr=n,r(s,e,t);else{var a=n.indexOf("*")>-1,l=n.indexOf("?")>-1;a&&(n=n.split("*").join(".*")),l&&(n=n.split("?").join(".")),e.wholeWord&&(n=a||l?n.replace(/[-[\]{}()+,\\^$|#\s]/g,"\\$&"):n.replace(/[-[\]{}()+.,\\^$|#\s]/g,"\\$&")),a||l||e.nameSearch||e.wholeWord?(s.searchStr=e.caseSensitive?n:n.toLowerCase(),r(s,e,t),s.wildCard=!0):(s.searchStr=e.caseSensitive?n.split("\\").join(""):n.split("\\").join("").toLowerCase(),s.wildCard=!1)}return s.searchStrLength=s.searchStr.length,{params:e,inFileQuery:s,displayedSearchTerm:i}},o.convertSearchParams=function(e){void 0!==e.rows&&(e.rows=parseInt(e.rows,10)),void 0!==e.start&&(e.start=parseInt(e.start,10)),"string"==typeof e.regEx&&(e.regEx="true"===e.regEx.toLowerCase()),"string"==typeof e.caseSensitive&&(e.caseSensitive="true"===e.caseSensitive.toLowerCase()),"string"==typeof e.nameSearch&&(e.nameSearch="true"===e.nameSearch.toLowerCase()),void 0!==e.fileNamePatterns&&(e.fileNamePatterns=o.getFileNamePatternsArray(e.fileNamePatterns))},o.getFileNamePatternsArray=function(e){var t=void 0;if(e){var n=e.trim();n=n.replace(/^(\s*,\s*)+/g,""),n=n.replace(/([^\\]),(\s*,\s*)*/g,"$1/"),n=n.replace(/(\s*\/\s*)/g,"/"),n=n.replace(/\/\/+/g,"/"),n=n.replace(/\/+$/g,""),t=n.split("/")}return t},o.copySearchParams=function(e,t){var n={};for(var i in e)if(void 0!==e[i]&&null!==e[i]){if(!t&&"replace"===i)continue;n[i]=e[i]}return n},o.generateFindURLBinding=function(e,t,n,r,o){var s={find:t.searchStr,regEx:t.wildCard?!0:void 0,caseSensitive:e.caseSensitive?!0:void 0,wholeWord:e.wholeWord?!0:void 0,replaceWith:"string"==typeof r?r:void 0,atLine:"number"==typeof n?n:void 0};if(o)return s;var a=new i("{,params*}").expand({params:s});return","+a},o.convertFindURLBinding=function(e){"string"==typeof e.regEx&&(e.regEx="true"===e.regEx.toLowerCase()),"string"==typeof e.caseSensitive&&(e.caseSensitive="true"===e.caseSensitive.toLowerCase()),"string"==typeof e.wholeWord&&(e.wholeWord="true"===e.wholeWord.toLowerCase()),"string"==typeof e.atLine&&(e.atLine=parseInt(e.atLine,10))},o.replaceRegEx=function(e,t,n){var i=new RegExp(t.pattern,t.flags);return e.replace(i,n)},o.replaceStringLiteral=function(e,n,i){var r=t.parse("/"+n+"/gim");return o.replaceRegEx(e,r,i)},o.searchOnelineLiteral=function(e,t,n,i,r){for(var o,s=0,a=!1,l=[];;){if(o=t.indexOf(e.searchStr,s),0>o)break;if(i){var c=i.getLineStart(r)+o;l.push({startIndex:o,length:e.searchStrLength,start:c,end:c+e.searchStrLength})}else l.push({startIndex:o,length:e.searchStrLength});if(a=!0,n)break;s=o+e.searchStrLength}return a?l:null},o.findRegExp=function(e,t,n,i){if(!t)return null;n=n||"",n+=(-1===n.indexOf("g")?"g":"")+(-1===n.indexOf("m")?"m":"");var r=new RegExp(t,n),o=null;return o=r.exec(e.substring(i)),o&&{startIndex:o.index+i,length:o[0].length}},o.searchOnelineRegEx=function(e,t,n,i,r){for(var s=0,a=!1,l=[];;){var c=o.findRegExp(t,e.regExp.pattern,e.regExp.flags,s);if(!c)break;if(i){var h=i.getLineStart(r)+c.startIndex;c.start=h,c.end=h+c.length}if(l.push(c),a=!0,n)break;s=c.startIndex+c.length}return a?l:null},o.generateNewContents=function(e,t,n,i,r,s){if(i&&t){e||(n.contents=[]);for(var a=0;a<t.length;a++){for(var l,c,h=t[a],d=!1,u=!1,p=[],f=0,g=0;g<i.children.length;g++){var m=i.children[g].lineNumber-1;if(m===a){for(f=g,c=0;c<i.children[g].matches.length;c++)i.children[g+c].checked!==!1&&p.push(c);u=p.length>0,l=i.children[g].matches,d=!0;break}}if(d){var v;if(u){var _=o.replaceCheckedMatches(h,r,l,p,s);for(v=_.replacedStr,c=0;c<i.children[f].matches.length;c++)i.children[f+c].newMatches=_.newMatches}else for(v=h,c=0;c<i.children[f].matches.length;c++)i.children[f+c].newMatches=i.children[f+c].matches;e?n.contents[a]=v:n.contents.push(v)}else e||n.contents.push(h)}}},o.generateMatchContext=function(e,t,n){var i,r,o=[],s=2*e+1;t.length<=s?(i=0,r=t.length-1):(i=n-e,0>i?(i=0,r=i+s-1):(r=n+e,r>t.length-1&&(r=t.length-1,i=r-s+1)));for(var a=i;r>=a;a++)o.push({context:t[a],current:a===n});return o},o.splitFile=function(e){for(var t=0,n=0,i=0,r=0,o=[];;){if(-1!==t&&i>=t&&(t=e.indexOf("\r",i)),-1!==n&&i>=n&&(n=e.indexOf("\n",i)),-1===n&&-1===t){o.push(e.substring(r));break}var s=1;-1!==t&&-1!==n?t+1===n?(s=2,i=n+1):i=(n>t?t:n)+1:i=-1!==t?t+1:n+1,o.push(e.substring(r,i)),r=i}return o},o.searchWithinFile=function(e,t,i,r,s,a,l){var c;(a||l)&&(c=new n.TextModel(i));var h=o.splitFile(i);if((r||a)&&(t.contents=h),t){t.children=[];for(var d=0,u=0;u<h.length;u++){var p=h[u];if(p&&p.length>0){var f,g=s?p:p.toLowerCase();if(f=e.wildCard?o.searchOnelineRegEx(e,g,!1,c,u):o.searchOnelineLiteral(e,g,!1,c,u)){var m,v=u+1;if(r)for(var _=0;_<f.length;_++){var y=_+1;m={parent:t,checked:t.checked,type:"detail",matches:f,lineNumber:v,matchNumber:y,name:p,location:t.location},t.children.push(m)}else m=a?{lineNumber:v,matches:f,name:p}:{parent:t,context:o.generateMatchContext(2,h,u),checked:t.checked,type:"detail",matches:f,lineNumber:v,name:p,location:t.location},t.children.push(m);d+=f.length}}}t.totalMatches=d}},o.replaceCheckedMatches=function(e,t,n,i,r){for(var o=r,s=0,a="",l=[],c=0;c<n.length;c++){s!==n[c].startIndex&&(a+=e.substring(s,n[c].startIndex)),n[c].length&&(o=n[c].length);for(var h=!1,d=0;d<i.length;d++)if(i[d]===c){h=!0;break}h?(l.push({startIndex:a.length,length:t.length}),a+=t):(l.push({startIndex:a.length,length:o}),a+=e.substring(n[c].startIndex,n[c].startIndex+o)),s=n[c].startIndex+o}return s<e.length&&(a+=e.substring(s)),{replacedStr:a,newMatches:l}},o.fullPathNameByMeta=function(e){var t=e.length,n="";if(t>0)for(var i=t-1;i>-1;i--){var r=""===n?"":"/";n=n+r+e[i].Name}return n},o}),n("orion/editor/nls/messages",{root:!0}),n("orion/editor/nls/root/messages",{multipleAnnotations:"Multiple annotations:",line:"Line: ${0}",breakpoint:"Breakpoint",bookmark:"Bookmark",task:"Task",error:"Error",warning:"Warning",currentSearch:"Current Search",currentLine:"Current Line",matchingBracket:"Matching Bracket",currentBracket:"Current Bracket",diffAdded:"Diff Added Lines",diffDeleted:"Diff Deleted Lines",diffModified:"Diff Modified Lines",lineUp:"Line Up",lineDown:"Line Down",lineStart:"Line Start",lineEnd:"Line End",charPrevious:"Previous Character",charNext:"Next Character",pageUp:"Page Up",pageDown:"Page Down",scrollPageUp:"Scroll Page Up",scrollPageDown:"Scroll Page Down",scrollLineUp:"Scroll Line Up",scrollLineDown:"Scroll Line Down",wordPrevious:"Previous Word",wordNext:"Next Word",textStart:"Document Start",textEnd:"Document End",scrollTextStart:"Scroll Document Start",scrollTextEnd:"Scroll Document End",centerLine:"Center Line",selectLineUp:"Select Line Up",selectLineDown:"Select Line Down",selectWholeLineUp:" Select Whole Line Up",selectWholeLineDown:"Select Whole Line Down",selectLineStart:"Select Line Start",selectLineEnd:"Select Line End",selectCharPrevious:"Select Previous Character",selectCharNext:"Select Next Character",selectPageUp:"Select Page Up",selectPageDown:"Select Page Down",selectWordPrevious:"Select Previous Word",selectWordNext:"Select Next Word",selectTextStart:"Select Document Start",selectTextEnd:"Select Document End",deletePrevious:"Delete Previous Character",deleteNext:"Delete Next Character",deleteWordPrevious:"Delete Previous Word",deleteWordNext:"Delete Next Word",deleteLineStart:"Delete Line Start",deleteLineEnd:"Delete Line End",tab:"Insert Tab",enter:"Insert Line Delimiter",enterNoCursor:"Insert Line Delimiter",escape:"Escape",selectAll:"Select All",copy:"Copy",cut:"Cut",paste:"Paste",uppercase:"To Upper Case",lowercase:"To Lower Case",capitalize:"Capitalize",reversecase:"Reverse Case",toggleWrapMode:"Toggle Wrap Mode",toggleTabMode:"Toggle Tab Mode",toggleOverwriteMode:"Toggle Overwrite Mode",committerOnTime:"${0} on ${1}",emacs:"Emacs",exchangeMarkPoint:"Exchange Mark and Point",setMarkCommand:"Set Mark",clearMark:"Clear Mark",digitArgument:"Digit Argument ${0}",negativeArgument:"Negative Argument",Comment:"Comment","Flat outline":"Flat outline",incrementalFindStr:"Incremental find: ${0}",incrementalFindStrNotFound:"Incremental find: ${0} (not found)",incrementalFindReverseStr:"Reverse Incremental find: ${0}",incrementalFindReverseStrNotFound:"Reverse Incremental find: ${0} (not found)",findReplace:"Find/Replace",find:"Find...",undo:"Undo",redo:"Redo",cancelMode:"Cancel Current Mode",findNext:"Find Next Occurrence",findPrevious:"Find Previous Occurrence",incrementalFind:"Incremental Find",incrementalFindReverse:"Incremental Find Reverse",indentLines:"Indent Lines",unindentLines:"Unindent Lines",moveLinesUp:"Move Lines Up",moveLinesDown:"Move Lines Down",copyLinesUp:"Copy Lines Up",copyLinesDown:"Copy Lines Down",deleteLines:"Delete Lines",gotoLine:"Goto Line...",gotoLinePrompty:"Goto Line:",nextAnnotation:"Next Annotation",prevAnnotation:"Previous Annotation",expand:"Expand",collapse:"Collapse",expandAll:"Expand All",collapseAll:"Collapse All",lastEdit:"Last Edit Location",trimTrailingWhitespaces:"Trim Trailing Whitespaces",toggleLineComment:"Toggle Line Comment",addBlockComment:"Add Block Comment",removeBlockComment:"Remove Block Comment",linkedModeEntered:"Linked Mode: Enter or ESC to exit",linkedModeExited:"Linked Mode exited",syntaxError:"Syntax Error",contentAssist:"Content Assist",noProposals:"No proposals found",computingProposals:"Computing content assist proposals...",lineColumn:"Line ${0} : Column ${1}",lineColumnOffset:"Line ${0} : Column ${1} : Offset ${2}",multiSelections:"${0} selection regions",vi:"vi",vimove:"(Move)",viyank:"(Yank)",videlete:"(Delete)",vichange:"(Change)",viLeft:"${0} Left",viRight:"${0} Right",viUp:"${0} Up",viDown:"${0} Down",viw:"${0} Next Word",vib:"${0} Beginning of Word",viW:"${0} Next Word (ws stop)",viB:"${0} Beginning of Word (ws stop)",vie:"${0} End of Word",viE:"${0} End of Word (ws stop)",vi$:"${0} End of the line","vi^_":"${0} First non-blank Char Current Line","vi+":"${0} First Char Next Line","vi-":"${0} First Char Previous Line","vi|":"${0} nth Column in Line",viH:"${0} Top of Page",viM:"${0} Middle of Page",viL:"${0} Bottom of Page","vi/":"${0} Search Forward","vi?":"${0} Search Backward",vin:"${0} Next Search",viN:"${0} Previous Search",vif:"${0} Search Char Fwd",viF:"${0} Search Char Bckwd",vit:"${0} Search Before Char Fwd",viT:"${0} Search Before Char Bckwd","vi,":"${0} Repeat Reverse Char Search","vi;":"${0} Repeat Char Search",viG:"${0} Go to Line",viycd:"${0} Current Line",via:"Append After Cursor",viA:"Append to End of Line",vii:"Insert Before Cursor",viI:"Insert at Beginning of Line",viO:"Insert Line Above",vio:"Insert Line Below",viR:"Begin Overwriting Text",vis:"Substitute a Character",viS:"Substitute Entire Line",viC:"Change Text Until Line End",vip:"Paste After Char or Line",viP:"Paste Before Char or Line",viStar:"Search Word Under Cursor",next:"Next",previous:"Previous",replace:"Replace",replaceAll:"Replace All",findWith:"Find With",replaceWith:"Replace With",caseInsensitive:"Aa",regex:"/.*/",wholeWord:"\\b",caseInsensitiveTooltip:"Toggle Case Insensitive",regexTooltip:"Toggle Regular Expression",wholeWordTooltip:"Toggle Whole Word",closeTooltip:"Close",replacingAll:"Replacing all...",replacedMatches:"Replaced ${0} matches",nothingReplaced:"Nothing replaced",notFound:"Not found"}),n("orion/editor/annotations",["i18n!orion/editor/nls/messages","orion/editor/eventTarget"],function(e,t){function n(){}function i(e,t,n){this.start=e,this.end=t,this._projectionModel=n,this.html=this._expandedHTML,this.style=this._expandedStyle,this.expanded=!0}function r(t,i){var r=t.lastIndexOf("."),o=t.substring(r+1),s={title:e[o],style:{styleClass:"annotation "+o},html:"<div class='annotationHTML "+o+"'></div>",overviewStyle:{styleClass:"annotationOverview "+o}};i?s.lineStyle={styleClass:"annotationLine "+o}:s.rangeStyle={styleClass:"annotationRange "+o},n.registerType(t,s)}function o(){}function s(e,t,n,i,r){var o;for(void 0===i&&(i=-1),void 0===r&&(r=e.length);r-i>1;)if(o=Math.floor((r+i)/2),t<=e[o].start)r=o;else{if(n&&t<e[o].end){r=o;break}i=o}return r}function a(e){this._annotations=[];var t=this;this._listener={onChanged:function(e){t._onChanged(e)}},this.setTextModel(e)}function l(e,t){this._view=e,this._annotationModel=t;var n=this;this._listener={onDestroy:function(e){n._onDestroy(e)},onLineStyle:function(e){n._onLineStyle(e)},onChanged:function(e){n._onAnnotationModelChanged(e)}},e.addEventListener("Destroy",this._listener.onDestroy),e.addEventListener("postLineStyle",this._listener.onLineStyle),t.addEventListener("Changed",this._listener.onChanged)}i.prototype={_expandedHTML:"<div class='annotationHTML expanded'></div>",_expandedStyle:{styleClass:"annotation expanded"},_collapsedHTML:"<div class='annotationHTML collapsed'></div>",_collapsedStyle:{styleClass:"annotation collapsed"},_collapse:function(){return this.expanded?(this.expanded=!1,this.html=this._collapsedHTML,this.style=this._collapsedStyle,this._annotationModel&&this._annotationModel.modifyAnnotation(this),!0):!1},_expand:function(){return this.expanded?!1:(this.expanded=!0,this.html=this._expandedHTML,this.style=this._expandedStyle,this._annotationModel&&this._annotationModel.modifyAnnotation(this),!0)},_collapseImpl:function(e){if(this._collapse()){e&&this._forEachOverlaping(function(e){e.expanded||(e._expandImpl(!1),e._recollapse=!0)});var t=this._projectionModel,n=t.getBaseModel();this._projection={annotation:this,start:n.getLineStart(n.getLineAtOffset(this.start)+1),end:n.getLineEnd(n.getLineAtOffset(this.end),!0)},t.addProjection(this._projection)}},_expandImpl:function(e){this._expand()&&(this._projectionModel._removeProjection(this._projection,!this._annotationModel),e&&this._forEachOverlaping(function(e){e._recollapse&&(e._collapseImpl(!1),e._recollapse=!1)}))},_forEachOverlaping:function(e){if(this._annotationModel)for(var t=this._annotationModel.getAnnotations(this.start,this.end);t.hasNext();){var i=t.next();i!==this&&i.type===n.ANNOTATION_FOLDING&&e.call(this,i)}},collapse:function(){this._recollapse=!1,this._collapseImpl(!0)},expand:function(){this._recollapse=!1,this._expandImpl(!0)}},n.ANNOTATION_ERROR="orion.annotation.error",n.ANNOTATION_WARNING="orion.annotation.warning",n.ANNOTATION_TASK="orion.annotation.task",n.ANNOTATION_BREAKPOINT="orion.annotation.breakpoint",n.ANNOTATION_BOOKMARK="orion.annotation.bookmark",n.ANNOTATION_FOLDING="orion.annotation.folding",n.ANNOTATION_CURRENT_BRACKET="orion.annotation.currentBracket",n.ANNOTATION_MATCHING_BRACKET="orion.annotation.matchingBracket",n.ANNOTATION_CURRENT_LINE="orion.annotation.currentLine",n.ANNOTATION_CURRENT_SEARCH="orion.annotation.currentSearch",n.ANNOTATION_MATCHING_SEARCH="orion.annotation.matchingSearch",n.ANNOTATION_READ_OCCURRENCE="orion.annotation.readOccurrence",n.ANNOTATION_WRITE_OCCURRENCE="orion.annotation.writeOccurrence",n.ANNOTATION_SELECTED_LINKED_GROUP="orion.annotation.selectedLinkedGroup",n.ANNOTATION_CURRENT_LINKED_GROUP="orion.annotation.currentLinkedGroup",n.ANNOTATION_LINKED_GROUP="orion.annotation.linkedGroup",n.ANNOTATION_BLAME="orion.annotation.blame",n.ANNOTATION_CURRENT_BLAME="orion.annotation.currentBlame",n.ANNOTATION_DIFF_ADDED="orion.annotation.diffAdded",n.ANNOTATION_DIFF_DELETED="orion.annotation.diffDeleted",n.ANNOTATION_DIFF_MODIFIED="orion.annotation.diffModified";var c={};return n.registerType=function(e,t){var n=t;return"function"!=typeof n&&(n=function(e,t,n){this.start=e,this.end=t,void 0!==n&&(this.title=n)},n.prototype=t),n.prototype.type=e,c[e]=n,e},n.createAnnotation=function(e,t,n,i){return new(this.getType(e))(t,n,i)},n.getType=function(e){return c[e]},r(n.ANNOTATION_ERROR),r(n.ANNOTATION_WARNING),r(n.ANNOTATION_TASK),r(n.ANNOTATION_BREAKPOINT),r(n.ANNOTATION_BOOKMARK),r(n.ANNOTATION_CURRENT_BRACKET),r(n.ANNOTATION_MATCHING_BRACKET),r(n.ANNOTATION_CURRENT_SEARCH),r(n.ANNOTATION_MATCHING_SEARCH),r(n.ANNOTATION_READ_OCCURRENCE),r(n.ANNOTATION_WRITE_OCCURRENCE),r(n.ANNOTATION_SELECTED_LINKED_GROUP),r(n.ANNOTATION_CURRENT_LINKED_GROUP),r(n.ANNOTATION_LINKED_GROUP),r(n.ANNOTATION_CURRENT_LINE,!0),r(n.ANNOTATION_BLAME,!0),r(n.ANNOTATION_CURRENT_BLAME,!0),r(n.ANNOTATION_DIFF_ADDED),r(n.ANNOTATION_DIFF_DELETED),r(n.ANNOTATION_DIFF_MODIFIED),n.registerType(n.ANNOTATION_FOLDING,i),o.addMixin=function(e){var t=o.prototype;for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},o.prototype={addAnnotationType:function(e,t){this._annotationTypes||(this._annotationTypes=[]);var n=t-1;void 0!=t&&n>=0&&n<this._annotationTypes.length?this._annotationTypes.splice(n,0,e):this._annotationTypes.push(e)},getAnnotationTypePriority:function(e){if(this._annotationTypes)for(var t=0;t<this._annotationTypes.length;t++)if(this._annotationTypes[t]===e)return t+1;return 0},getAnnotationsByType:function(e,t,n){for(var i,r=e.getAnnotations(t,n),o=[];r.hasNext();){i=r.next();var s=this.getAnnotationTypePriority(i.type);0!==s&&o.push(i)}var a=this;return o.sort(function(e,t){return a.getAnnotationTypePriority(e.type)-a.getAnnotationTypePriority(t.type)}),o},isAnnotationTypeVisible:function(e){return 0!==this.getAnnotationTypePriority(e)},removeAnnotationType:function(e){if(this._annotationTypes)for(var t=0;t<this._annotationTypes.length;t++)if(this._annotationTypes[t]===e){this._annotationTypes.splice(t,1);break}}},a.prototype={addAnnotation:function(e){if(e){var t=this._annotations,n=s(t,e.start);t.splice(n,0,e),e._annotationModel=this;var i={type:"Changed",added:[e],removed:[],changed:[]};this.onChanged(i)}},getTextModel:function(){return this._model},getAnnotations:function(e,t){var n,i,r=this._annotations,o=0;return i=void 0===e&&void 0===t?function(){return o<r.length?r[o++]:null}:function(){for(;o<r.length;){var n=r[o++];if(e===n.start||(e>n.start?e<n.end:n.start<t))return n;if(n.start>=t)break}return null},n=i(),{next:function(){var e=n;return e&&(n=i()),e},hasNext:function(){return null!==n}}},modifyAnnotation:function(e){if(e){var t=this._getAnnotationIndex(e);if(!(0>t)){var n={type:"Changed",added:[],removed:[],changed:[e]};this.onChanged(n)}}},onChanged:function(e){return this.dispatchEvent(e)},removeAnnotations:function(e){var t,n,i=this._annotations;if(e)for(t=[],n=i.length-1;n>=0;n--){var r=i[n];r.type===e&&(i.splice(n,1),t.splice(0,0,r),r._annotationModel=null)}else t=i,i=[];var o={type:"Changed",removed:t,added:[],changed:[]};this.onChanged(o)},removeAnnotation:function(e){if(e){var t=this._getAnnotationIndex(e);if(!(0>t)){e._annotationModel=null;var n={type:"Changed",removed:this._annotations.splice(t,1),added:[],changed:[]};this.onChanged(n)}}},replaceAnnotations:function(e,t){var n,i,r,o=this._annotations,a=[];if(e)for(n=e.length-1;n>=0;n--)r=e[n],i=this._getAnnotationIndex(r),0>i||(r._annotationModel=null,o.splice(i,1),a.splice(0,0,r));for(t||(t=[]),n=0;n<t.length;n++)r=t[n],i=s(o,r.start),r._annotationModel=this,o.splice(i,0,r);var l={type:"Changed",removed:a,added:t,changed:[]};this.onChanged(l)},setTextModel:function(e){this._model&&this._model.removeEventListener("Changed",this._listener.onChanged),this._model=e,this._model&&this._model.addEventListener("Changed",this._listener.onChanged)},_getAnnotationIndex:function(e){for(var t=this._annotations,n=s(t,e.start);n<t.length&&t[n].start===e.start;){if(t[n]===e)return n;n++}return-1},_onChanged:function(e){var t=e.start,n=e.addedCharCount,i=e.removedCharCount,r=this._annotations,o=t+i,s=0;if(s>=0&&s<r.length){var a,l={type:"Changed",added:[],removed:[],changed:[],textModelChangedEvent:e},c=n-i;for(a=s;a<r.length;a++){var h=r[a];h.start>=o?(h._oldStart=h.start,h._oldEnd=h.end,h.start+=c,h.end+=c,l.changed.push(h)):h.end<=t||(h.start<t&&o<h.end?(h._oldStart=h.start,h._oldEnd=h.end,h.end+=c,l.changed.push(h)):(r.splice(a,1),l.removed.push(h),h._annotationModel=null,h.expand&&h.expand(),a--))}(l.added.length>0||l.removed.length>0||l.changed.length>0)&&this.onChanged(l)}}},t.EventTarget.addMixin(a.prototype),l.prototype={destroy:function(){var e=this._view;e&&(e.removeEventListener("Destroy",this._listener.onDestroy),e.removeEventListener("LineStyle",this._listener.onLineStyle),this.view=null);var t=this._annotationModel;t&&(t.removeEventListener("Changed",this._listener.onChanged),t=null)},_mergeStyle:function(e,t){if(t){e||(e={}),e.styleClass&&t.styleClass&&e.styleClass!==t.styleClass?e.styleClass+=" "+t.styleClass:e.styleClass=t.styleClass;var n;if(t.tagName&&(e.tagName||(e.tagName=t.tagName)),t.style){e.style||(e.style={});for(n in t.style)e.style[n]||(e.style[n]=t.style[n])}if(t.attributes){e.attributes||(e.attributes={});for(n in t.attributes)e.attributes[n]||(e.attributes[n]=t.attributes[n])}}return e},_mergeStyleRanges:function(e,t){e||(e=[]);for(var n,i=s(e,t.start,!0);i<e.length&&t;i++){var r=e[i];if(t.end<=r.start)break;if(!(t.start>=r.end)){n=this._mergeStyle({},r.style),n=this._mergeStyle(n,t.style);var o=[];o.push(i,1),t.start<r.start&&o.push({start:t.start,end:r.start,style:t.style}),t.start>r.start&&o.push({start:r.start,end:t.start,style:r.style}),o.push({start:Math.max(r.start,t.start),end:Math.min(r.end,t.end),style:n}),t.end<r.end&&o.push({start:t.end,end:r.end,style:r.style}),t=t.end>r.end?{start:r.end,end:t.end,style:t.style}:null,Array.prototype.splice.apply(e,o)}}return t&&(n=this._mergeStyle({},t.style),e.splice(i,0,{start:t.start,end:t.end,style:n})),e},_onAnnotationModelChanged:function(e){function t(e,t){o.getBaseModel&&(e=o.mapOffset(e,!0),t=o.mapOffset(t,!0)),-1!==e&&-1!==t&&i.redrawRange(e,t)}function n(e,n){for(var i=0;i<e.length;i++)if(r.isAnnotationTypeVisible(e[i].type)){var o=e[i];t(o.start,o.end),n&&void 0!==o._oldStart&&o._oldEnd&&t(o._oldStart,o._oldEnd)}}var i=this._view;if(i){var r=this,o=i.getModel();n(e.added),n(e.removed),n(e.changed,!0)}},_onDestroy:function(e){this.destroy()},_onLineStyle:function(e){var t=this._annotationModel,n=e.textView.getModel(),i=t.getTextModel(),r=e.lineStart,o=e.lineStart+e.lineText.length;i!==n&&(r=n.mapOffset(r),o=n.mapOffset(o));for(var s=t.getAnnotations(r,o);s.hasNext();){var a=s.next();if(this.isAnnotationTypeVisible(a.type)){if(a.rangeStyle){var l=a.start,c=a.end;i!==n&&(l=n.mapOffset(l,!0),c=n.mapOffset(c,!0)),e.ranges=this._mergeStyleRanges(e.ranges,{start:l,end:c,style:a.rangeStyle})}a.lineStyle&&(e.style=this._mergeStyle({},e.style),e.style=this._mergeStyle(e.style,a.lineStyle))}}}},o.addMixin(l.prototype),{FoldingAnnotation:i,AnnotationType:n,AnnotationTypeList:o,AnnotationModel:a,AnnotationStyler:l}}),n("orion/editorCommands",["i18n!orion/edit/nls/messages","orion/i18nUtil","orion/webui/littlelib","orion/widgets/input/DropDownMenu","orion/Deferred","orion/URITemplate","orion/commands","orion/keyBinding","orion/commandRegistry","orion/extensionCommands","orion/contentTypes","orion/searchUtils","orion/objects","orion/PageUtil","orion/PageLinks","orion/editor/annotations","orion/regex","orion/PageUtil","orion/uiUtils","orion/util"],function(e,t,n,i,r,o,s,a,l,c,h,d,u,p,f,g,m,v,_,y){function x(e){var t=new o(e.uriTemplate),n=e.params||{};n.OrionHome=n.OrionHome||f.getOrionHome();var i=t.expand(n),r=document.createElement("div"),s=document.createElement("iframe");return s.id=e.id,s.name=e.id,s.type="text/html",s.sandbox="allow-scripts allow-same-origin allow-forms allow-popups",s.frameborder=void 0!==e.border?e.border:1,s.src=i,s.className="delegatedUI",e.width&&(r.style.width=e.width,s.style.width=e.width),e.height&&(r.style.height=e.height,s.style.height=e.height),s.style.visibility="hidden",null!==e.parent&&(e.parent||window.document.body).appendChild(r),r.appendChild(s),s.style.left=e.left||(window.innerWidth-parseInt(s.clientWidth,10))/2+"px",s.style.top=e.top||(window.innerHeight-parseInt(s.clientHeight,10))/2+"px",s.style.visibility="",window.addEventListener("message",function a(t){if(t.source===s.contentWindow&&"string"==typeof t.data){var n=JSON.parse(t.data);"orion.page.delegatedUI"===n.pageService&&n.source===e.id&&(n.cancelled?e.cancelled&&e.cancelled():n.result?e.done&&e.done(n.result):(n.Status||n.status)&&e.status&&e.status(n.Status||n.status),window.removeEventListener("message",a,!1),r.parentNode&&r.parentNode.removeChild(r))}},!1),r}function w(e,t){t&&"undefined"!=typeof t.HTML&&delete t.HTML;var n=e.getService("orion.page.message");return n?n.setProgressResult(t).then(null,function(e){throw console.log(e),e}):(console.log(t),(new r).resolve(t))}function b(e){return{_error:e}}function C(e){this.serviceRegistry=e.serviceRegistry,this.commandService=e.commandRegistry,this.fileClient=e.fileClient,this.preferences=e.preferences,this.inputManager=e.inputManager,this.renderToolbars=e.renderToolbars,this.toolbarId=e.toolbarId,this.saveToolbarId=e.saveToolbarId,this.editToolbarId=e.editToolbarId,this.pageNavId=e.navToolbarId,this.editorContextMenuId=e.editorContextMenuId,this.isReadOnly=e.readonly,this.textSearcher=e.textSearcher,this.searcher=e.searcher,this.localSettings=e.localSettings,this.editorPreferences=e.editorPreferences,this.differ=e.differ,this.blamer=e.blamer;var t=this;this.listener={onServiceAdded:function(e){t._onServiceAdded(e.serviceReference)},onServiceRemoved:function(e){t._onServiceRemoved(e.serviceReference)}},this.serviceRegistry.addEventListener("registered",this.listener.onServiceAdded),this.serviceRegistry.addEventListener("unregistering",this.listener.onServiceRemoved)}var E={},T=null;return E.createDelegatedUI=x,C.prototype={createCommands:function(){return this._createSettingsCommand(),this._createGotoLineCommnand(),this._createFindCommnand(),this._createBlameCommand(),this._createDiffCommand(),this._createShowTooltipCommand(),this._createUndoStackCommands(),this._createClipboardCommands(),this._createDelimiterCommands(),this._createEncodingCommand(),this._createSaveCommand(),this._createOpenFolderCommand(),this._createOpenRecentCommand(),this._createEditCommands()},updateWorkspacePrefs:function(e){var t=this;return this.preferences.get("/workspace").then(function(e){return e.recentWorkspaces?e.recentWorkspaces:[]}).then(function(n){var i=10,r=n.indexOf(e);return-1!==r&&n.splice(r,1),n.length<i?n.unshift(e):n.length===i&&(n.pop(),n.unshift(e)),t.preferences.put("/workspace",{recentWorkspaces:n,currentWorkspace:e})})},setSideBar:function(e){this.sideBar=e},getEditCommands:function(){var e=[],t=this.commandService;for(var n in t._commandList){var i=t._commandList[n];i.editInfo&&e.push(i)}return e},updateCommands:function(e){e=e||{},this.editor=e.editor,this.inputManager=e.inputManager,this.localSettings=e.localSettings,this.differ=e.differ,this.blamer=e.blamer,this.textSearcher=e.textSearcher,this._recreateEditCommands&&this._createEditCommands().then(function(){this.registerCommands(),this.registerContextMenuCommands(),this.renderToolbars&&this.renderToolbars()}.bind(this))},_registerCommandGroups:function(e,t){var n,i=this.commandService,r=this.serviceRegistry,o=r.getServiceReferences("orion.edit.command.category");o.forEach(function(r){for(var o={},s=r.getPropertyKeys(),a=0;a<s.length;a++)o[s[a]]=r.getProperty(s[a]);n=t,o.parentPath&&(n+="/"+o.parentPath),i.addCommandGroup(e,o.id,o.position||101,o.name,n,null,o.imageClass)}.bind(this))},registerCommands:function(){function t(e){if(!e)return null;var t=new a.KeyBinding;return a.KeyBinding.apply(t,e),t}var n=this.commandService;n.registerCommandContribution("settingsActions","orion.edit.settings",1,null,!1,new a.KeyBinding("s",!0,!0),null,this),n.registerCommandContribution(this.editToolbarId||this.toolbarId,"orion.edit.undo",400,this.editToolbarId?"orion.menuBarEditGroup/orion.edit.undoGroup":null,!this.editToolbarId,new a.KeyBinding("z",!0),null,this),n.registerCommandContribution(this.editToolbarId||this.toolbarId,"orion.edit.redo",401,this.editToolbarId?"orion.menuBarEditGroup/orion.edit.undoGroup":null,!this.editToolbarId,y.isMac?new a.KeyBinding("z",!0,!0):new a.KeyBinding("y",!0),null,this),n.registerCommandContribution(this.saveToolbarId||this.toolbarId,"orion.edit.openFolder",1,this.saveToolbarId?"orion.menuBarFileGroup/orion.edit.saveGroup":null,!1,new a.KeyBinding("o",!0)),n.registerCommandContribution(this.saveToolbarId||this.toolbarId,"orion.edit.openRecent",3,this.saveToolbarId?"orion.menuBarFileGroup/orion.edit.saveGroup":null,!1,new a.KeyBinding("r",!0)),n.registerCommandContribution(this.saveToolbarId||this.toolbarId,"orion.openResource",1,this.saveToolbarId?"orion.menuBarFileGroup/orion.edit.saveGroup":null,!1,new a.KeyBinding("f",!0,!0)),n.registerCommandContribution(this.saveToolbarId||this.toolbarId,"orion.edit.save",2,this.saveToolbarId?"orion.menuBarFileGroup/orion.edit.saveGroup":null,!1,new a.KeyBinding("s",!0),null,this),n.registerCommandContribution(this.editToolbarId||this.pageNavId,"orion.edit.gotoLine",3,this.editToolbarId?"orion.menuBarEditGroup/orion.findGroup":null,!this.editToolbarId,new a.KeyBinding("l",!y.isMac,!1,!1,y.isMac),new l.URLBinding("gotoLine","line"),this),n.registerCommandContribution(this.editToolbarId||this.pageNavId,"orion.edit.find",0,this.editToolbarId?"orion.menuBarEditGroup/orion.findGroup":null,!this.editToolbarId,new a.KeyBinding("f",!0),new l.URLBinding("find","find"),this),n.registerCommandContribution(this.toolbarId,"orion.keyAssist",0,"orion.menuBarToolsGroup",!1,new a.KeyBinding(191,!1,!0,!0)),n.registerCommandContribution(this.toolbarId,"orion.edit.showTooltip",1,"orion.menuBarToolsGroup",!1,new a.KeyBinding(113),null,this),n.registerCommandContribution(this.toolbarId,"orion.edit.blame",2,"orion.menuBarToolsGroup",!1,new a.KeyBinding("b",!0,!0),new l.URLBinding("blame","blame"),this),n.registerCommandContribution(this.toolbarId,"orion.edit.diff",3,"orion.menuBarToolsGroup",!1,new a.KeyBinding("d",!0,!0),new l.URLBinding("diff","diff"),this);var i=0;n.addCommandGroup(this.toolbarId,"orion.editorMenuBarMenuDelimitersGroup",999,e["Convert Line Delimiters"],"orion.menuBarToolsGroup"),n.registerCommandContribution(this.toolbarId,"orion.edit.convert.crlf",i++,"orion.menuBarToolsGroup/orion.editorMenuBarMenuDelimitersGroup",!1,null,null,this),n.registerCommandContribution(this.toolbarId,"orion.edit.convert.lf",i++,"orion.menuBarToolsGroup/orion.editorMenuBarMenuDelimitersGroup",!1,null,null,this),n.registerCommandContribution(this.toolbarId,"orion.edit.reloadWithEncoding",1e3,"orion.menuBarToolsGroup"),this._registerCommandGroups(this.toolbarId,"orion.menuBarToolsGroup");for(var r=this.getEditCommands(),o=0,s=100;o<r.length;o++,s++){var c=r[o],h=c.editInfo;if(h.scopeId)n.registerCommandContribution(h.scopeId,c.id,s,h.scopeId+"Group",h.bindingOnly,t(h.key),null,this);else{var d="orion.menuBarToolsGroup";h.parentPath&&(d+="/"+h.parentPath),n.registerCommandContribution(this.toolbarId,c.id,s,d,h.bindingOnly,t(h.key),null,this);
}}},registerContextMenuCommands:function(){var t=this.commandService;t.addCommandGroup(this.editorContextMenuId,"orion.editorContextMenuGroup",100,null,null,null,null,null,"dropdownSelection");var n=1;t.registerCommandContribution(this.editorContextMenuId,"orion.edit.copy",n++,"orion.editorContextMenuGroup/orion.edit.copyGroup",!1,new a.KeyBinding("c",!0)),t.registerCommandContribution(this.editorContextMenuId,"orion.edit.cut",n++,"orion.editorContextMenuGroup/orion.edit.copyGroup",!1,new a.KeyBinding("x",!0)),t.registerCommandContribution(this.editorContextMenuId,"orion.edit.paste",n++,"orion.editorContextMenuGroup/orion.edit.copyGroup",!1,new a.KeyBinding("v",!0)),t.registerCommandContribution(this.editorContextMenuId,"orion.edit.undo",n++,"orion.editorContextMenuGroup/orion.edit.undoGroup",!1),t.registerCommandContribution(this.editorContextMenuId,"orion.edit.redo",n++,"orion.editorContextMenuGroup/orion.edit.undoGroup",!1),t.registerCommandContribution(this.editorContextMenuId,"orion.edit.find",n++,"orion.editorContextMenuGroup/orion.findGroup",!1),t.registerCommandContribution(this.editorContextMenuId,"orion.edit.gotoLine",n++,"orion.editorContextMenuGroup/orion.findGroup",!1),t.registerCommandContribution(this.editorContextMenuId,"orion.quickSearch",n++,"orion.editorContextMenuGroup/orion.findGroup",!1),t.registerCommandContribution(this.editorContextMenuId,"orion.openSearch",n++,"orion.editorContextMenuGroup/orion.findGroup",!1),t.addCommandGroup(this.editorContextMenuId,"orion.editorContextMenuToolsGroup",400,e.Tools,"orion.editorContextMenuGroup"),t.registerCommandContribution(this.editorContextMenuId,"orion.edit.reloadWithEncoding",1e3,"orion.editorContextMenuGroup/orion.editorContextMenuToolsGroup"),t.registerCommandContribution(this.editorContextMenuId,"orion.edit.blame",1,"orion.editorContextMenuGroup/orion.editorContextMenuToolsGroup",!1),t.registerCommandContribution(this.editorContextMenuId,"orion.edit.diff",2,"orion.editorContextMenuGroup/orion.editorContextMenuToolsGroup",!1),t.addCommandGroup(this.editorContextMenuId,"orion.editorContextMenuDelimitersGroup",999,e["Convert Line Delimiters"],"orion.editorContextMenuGroup/orion.editorContextMenuToolsGroup"),t.registerCommandContribution(this.editorContextMenuId,"orion.edit.convert.crlf",n++,"orion.editorContextMenuGroup/orion.editorContextMenuToolsGroup/orion.editorContextMenuDelimitersGroup"),t.registerCommandContribution(this.editorContextMenuId,"orion.edit.convert.lf",n++,"orion.editorContextMenuGroup/orion.editorContextMenuToolsGroup/orion.editorContextMenuDelimitersGroup"),this._registerCommandGroups(this.editorContextMenuId,"orion.editorContextMenuGroup/orion.editorContextMenuToolsGroup");for(var i=this.getEditCommands(),r=0,o=100;r<i.length;r++,o++){var s=i[r],l=s.editInfo,c="orion.editorContextMenuGroup/orion.editorContextMenuToolsGroup";l.parentPath&&(c+="/"+l.parentPath),this.commandService.registerCommandContribution(this.editorContextMenuId,s.id,o,c)}},overwriteKeyBindings:function(e){var t=this;if(this.editor=e,e.getTextView&&e.getTextView()){var n=e.getTextView();n.setKeyBinding(new a.KeyBinding("s",!0),"save");var i=t.commandService.findCommand("orion.edit.save");i&&n.setAction("save",function(){return i.callback.call({inputManager:t.inputManager}),!0},i),n.setAction("gotoLine",function(n){return n?(e.onGotoLine(n.line-1,0,void 0,n.callback),!0):(t.commandService.runCommand("orion.edit.gotoLine"),!0)},t.commandService.findCommand("orion.edit.gotoLine")),this.textSearcher&&n.setAction("find",function(e){return e?(t.textSearcher.show(e),!0):(t.commandService.runCommand("orion.edit.find"),!0)},t.commandService.findCommand("orion.edit.find"));var r=t.commandService.findCommand("orion.keyAssist");r&&(n.setKeyBinding(new a.KeyStroke(191,!1,!0,!y.isMac,y.isMac),r.id),n.setAction(r.id,r.callback,r)),this.bindingChangeListener=function(e){this._handleBindingChanges(n,e)}.bind(this),this.commandService.addEventListener("bindingChanged",this.bindingChangeListener)}},_handleBindingChanges:function(e,t){var n=e.getActions(!0);-1!==n.indexOf(t.id)&&(t.prevBinding&&e.setKeyBinding(t.prevBinding,null),e.setKeyBinding(t.newBinding,t.id))},showKeyBindings:function(t){var n=this.editor;if(n&&n.getTextView&&n.getTextView()){var i=n.getTextView(),r=i.getActions(!0).filter(function(e){var t=i.getActionDescription(e);return t&&t.name});r.sort(function(e,t){return i.getActionDescription(e).name.localeCompare(i.getActionDescription(t).name)}),t.createHeader(e.Editor);for(var o,s=function(e){return function(){return i.focus(),i.invokeAction(e)}},a={},l=0;l<r.length;l++){var c=r[l],h=i.getActionDescription(c),d=i.getKeyBindings(c);if(d.length>0)for(var u=0;u<d.length;u++){o=d[u];var p=_.getUserKeyString(o);o.scopeName?(a[o.scopeName]||(a[o.scopeName]=[]),a[o.scopeName].push({bindingString:p,name:h.name,execute:s(c)})):t.createItem(o,h.name,c,s(c))}else t.createItem(null,h.name,c,s(c))}for(var f in a)if(a[f].length){t.createHeader(f);for(var g=0;g<a[f].length;g++)o=a[f][g],t.createItem(o,o.name,o.name,o.execute)}}},_createSettingsCommand:function(){var t=this,n=new s.Command({imageClass:"core-sprite-wrench",tooltip:e.LocalEditorSettings,id:"orion.edit.settings",visibleWhen:function(e,n){var i=n.handler.editor||t.editor;return i&&i.installed&&n.handler.localSettings},callback:function(e){var r=this.localSettings||t.localSettings,o=n.settingsDropDown;if(!o||o.isDestroyed()){o=n.settingsDropDown=new i(e.domNode.parentNode,e.domNode,{noClick:!0,selectionClass:"dropdownSelection",onShow:function(){o.focus()},onHide:function(){t.editor.focus()}}),o.updateContent=r.show.bind(r);var s=o.getContentNode();s.tabIndex=s.style.marginTop=0}o.click()}});this.commandService.addCommand(n)},_createDelimiterCommands:function(){var t=this,n=function(n){var i=t.editor;if(i&&i.getModel()){var r=i.getModel();r.setLineDelimiter(n,!0);var o=t.serviceRegistry.getService("orion.page.progress");if(o){var s=e["\r\n"===n?"ConversionCompleteCRLF":"ConversionCompleteLF"];o.setProgressResult({Message:s})}i.focus()}},i=new s.Command({name:e["Windows (CR/LF)"],id:"orion.edit.convert.crlf",visibleWhen:function(e,n){var i=n.handler.editor||t.editor;return i&&i.installed},callback:function(){n("\r\n")}});this.commandService.addCommand(i);var r=new s.Command({name:e["Unix (LF)"],id:"orion.edit.convert.lf",visibleWhen:function(e,n){var i=n.handler.editor||t.editor;return i&&i.installed},callback:function(){n("\n")}});this.commandService.addCommand(r)},_createClipboardCommands:function(){if(y.isIE||y.isElectron){var t=this,n=new s.Command({name:e.Copy,id:"orion.edit.copy",visibleWhen:function(e,n){var i=n.handler.editor||t.editor;return i&&i.installed},callback:function(){var e=this.editor||t.editor;if(e&&e.getTextView&&e.getTextView()){var n=e.getTextView();n.copy(),e.focus()}}});this.commandService.addCommand(n);var i=new s.Command({name:e.Cut,id:"orion.edit.cut",visibleWhen:function(e,n){var i=n.handler.editor||t.editor;return i&&i.installed},callback:function(){var e=this.editor||t.editor;if(e&&e.getTextView&&e.getTextView()){var n=e.getTextView();n.cut(),e.focus()}}});this.commandService.addCommand(i);var r=new s.Command({name:e.Paste,id:"orion.edit.paste",visibleWhen:function(e,n){var i=n.handler.editor||t.editor;return i&&i.installed},callback:function(){var e=this.editor||t.editor;if(e&&e.getTextView&&e.getTextView()){var n=e.getTextView();n.paste(),e.focus()}}});this.commandService.addCommand(r)}},_createUndoStackCommands:function(){var t=this,n=new s.Command({name:e.Undo,id:"orion.edit.undo",visibleWhen:function(e,n){var i=n.handler.editor||t.editor;return i&&i.installed},callback:function(){var e=this.editor||t.editor;e.getUndoStack().undo()}});this.commandService.addCommand(n);var i=new s.Command({name:e.Redo,id:"orion.edit.redo",visibleWhen:function(e,n){var i=n.handler.editor||t.editor;return i&&i.installed},callback:function(){var e=this.editor||t.editor;e.getUndoStack().redo()}});this.commandService.addCommand(i)},_createSaveCommand:function(){var t=this,n=new s.Command({name:e.Save,tooltip:e.saveFile,imageClass:"core-sprite-save",id:"orion.edit.save",visibleWhen:function(e,n){var i=n.handler.inputManager||t.inputManager,r=n.handler.editor||t.editor||i&&i.getEditor();return r&&r.installed&&i&&i.isSaveEnabled()?!0:!1},callback:function(){var e=this.inputManager||t.inputManager;e.save()}});this.commandService.addCommand(n)},_createOpenFolderCommand:function(){var t=this,n=new s.Command({name:e.OpenFolder,tooltip:e.OpenFolderTip,id:"orion.edit.openFolder",visibleWhen:function(e,t){return!!window.__dialogModule},callback:function(){window.__dialogModule.showOpenDialog({properties:["openDirectory"]},function(e){e&&t.fileClient.changeWorkspace(e[0]).then(function(){return t.updateWorkspacePrefs(e[0])}).then(function(){delete sessionStorage.lastFile,window.location.hash="",window.location.reload()})})}});this.commandService.addCommand(n)},_createOpenRecentCommand:function(){var t=this;this.preferences&&this.preferences.get("/workspace").then(function(e){return e.recentWorkspaces}).then(function(n){var i=new s.Command({name:e.OpenRecent,selectionClass:"dropdownSelection",id:"orion.edit.openRecent",visibleWhen:function(e,t){return!!window.__dialogModule&&!!n},choiceCallback:function(){return n.map(function(e){return{name:e,callback:function(){t.fileClient.changeWorkspace(e).then(function(){return t.updateWorkspacePrefs(e)}).then(function(){delete sessionStorage.lastFile,window.location.hash="",window.location.reload()})}}})}});t.commandService.addCommand(i)})},_createEncodingCommand:function(){var t=this,n=["UTF-8","UTF-16LE","iso-8859-1","iso-8859-2","iso-8859-3","iso-8859-4","iso-8859-5","iso-8859-6","iso-8859-7","iso-8859-8","iso-8859-9","iso-8859-10","iso-8859-11","iso-8859-12","iso-8859-13","iso-8859-14","iso-8859-15","iso-8859-16","windows-1250","windows-1251","windows-1252","windows-1253","windows-1254","windows-1255","windows-1256","windows-1258","gb18030","gb2312","gbk","Big5","Big5-HKSCS","koi8-r","koi8-u","euc-jp","euc-tw","shift-jis","iso-2022-jp","iso-2022-kr","iso-2022-cn","hz","MacRoman"],i=new o("#{,resource,params*}"),r=new s.Command({name:e.ReloadWith,selectionClass:"dropdownSelection",id:"orion.edit.reloadWithEncoding",visibleWhen:function(){var e=t.editor;return e&&e.installed},choiceCallback:function(){return n.map(function(e){return{name:e,callback:function(){var e=v.matchResourceParameters(),t=e.resource;delete e.resource,delete e.encoding,"UTF-8"!==this.name&&(e.encoding=this.name),window.location.href=i.expand({resource:t,params:e})}}})}});this.commandService.addCommand(r)},_createGotoLineCommnand:function(){var t=this,n=new l.ParametersDescription([new l.CommandParameter("line","number",e.gotoLinePrompt)],{hasOptionalParameters:!1},function(n){var i=n.handler.editor||t.editor,r=i.getModel().getLineAtOffset(i.getCaretOffset())+1;return[new l.CommandParameter("line","number",e.gotoLinePrompt,r.toString())]}),i=new s.Command({name:e.gotoLine,tooltip:e.gotoLineTooltip,id:"orion.edit.gotoLine",visibleWhen:function(e,n){var i=n.handler.editor||t.editor;return i&&i.installed},parameters:n,callback:function(n){var i,r=this.editor||t.editor,o=r.getModel();n.parameters&&n.parameters.valueFor("line")?i=n.parameters.valueFor("line"):(i=o.getLineAtOffset(r.getCaretOffset()),i=prompt(e.gotoLinePrompt,i+1),i&&(i=parseInt(i,10))),i&&r.onGotoLine(i-1,0)}});this.commandService.addCommand(i)},_createFindCommnand:function(){var t=this,i=new l.ParametersDescription([new l.CommandParameter("find","text","Find:")],{clientCollect:!0},function(e){var n=e.handler.editor||t.editor,i=e.handler.textSearcher||t.textSearcher,r=n.getSelection(),o="";if(r.end>r.start){var s=n.getModel();o=s.getText(r.start,r.end),i&&i.getOptions().regex&&(o=m.escape(o))}return[new l.CommandParameter("find","text","Find:",o)]}),r=new s.Command({name:e.Find,tooltip:e.Find,id:"orion.edit.find",visibleWhen:function(e,n){var i=n.handler.editor||t.editor,r=n.handler.textSearcher||t.textSearcher;return i&&i.installed&&r},parameters:i,callback:function(e){var i=n.node("replaceCompareDiv");if(i&&i.classList.contains("replaceCompareDivVisible"))return!1;var o=this.editor||t.editor,s=this.textSearcher||t.textSearcher;r.textSearcher&&r.textSearcher!==s&&r.textSearcher.hide(),r.textSearcher=s;var a="",l=null,c=o.getSelection();if(e.parameters&&e.parameters.valueFor("find"))a=e.parameters.valueFor("find"),l=p.matchResourceParameters(),d.convertFindURLBinding(l);else if(c.end>c.start){var h=o.getModel();a=h.getText(c.start,c.end),s.getOptions().regex&&(a=m.escape(a))}if(l){var u=(this.inputManager||t.inputManager).getFileMetadata();if(!u||l.resource!==u.Location)return;s.setOptions({regex:l.regEx,caseInsensitive:!l.caseSensitive,wholeWord:l.wholeWord});var f={};l.atLine&&(f.start=o.getModel().getLineStart(l.atLine-1)),s.show({findString:a,replaceString:l.replaceWith}),s.find(!0,f),t.commandService.closeParameterCollector()}else s.show({findString:a})}});this.commandService.addCommand(r)},_createBlameCommand:function(){var t=this,n=new s.Command({name:e.Blame,tooltip:e.BlameTooltip,id:"orion.edit.blame",parameters:new l.ParametersDescription([new l.CommandParameter("blame","boolean")],{clientCollect:!0}),visibleWhen:function(e,n){var i=n.handler.editor||t.editor,r=n.handler.blamer||t.blamer;return i&&i.installed&&r&&r.isVisible()},callback:function(e){for(var n=!1,i=this.editor||t.editor,r=this.blamer||t.blamer,o=i.getAnnotationModel().getAnnotations();o.hasNext();){var s=o.next();if(s.type===g.AnnotationType.ANNOTATION_BLAME){n=!0;break}}n=!n,e.parameters&&e.parameters.valueFor("blame")&&(n="true"===e.parameters.valueFor("blame")),n?r.doBlame():i.showBlame([]),i.focus()}});this.commandService.addCommand(n)},_createDiffCommand:function(){var t=this,n=new s.Command({name:e.Diff,tooltip:e.DiffTooltip,id:"orion.edit.diff",visibleWhen:function(e,n){var i=n.handler.editor||t.editor,r=n.handler.differ||t.differ;return i&&i.installed&&r&&r.isVisible()},callback:function(){var e=this.editor||t.editor,n=this.differ||t.differ;n.toggleEnabled();var i=this.editorPreferences;i.getPrefs(function(e){e.diffService=n.isEnabled(),i.setPrefs(e)}),e.focus()}});this.commandService.addCommand(n)},_createShowTooltipCommand:function(){var t=this,n=new s.Command({name:e.showTooltip,tooltip:e.showTooltipTooltip,id:"orion.edit.showTooltip",visibleWhen:function(e,n){var i=n.handler.editor||t.editor;return i&&i.installed},callback:function(){var e=this.editor||t.editor,n=e.getTooltip(),i=e.getTextView(),r=i.getCaretOffset(),o=i.getLocationAtOffset(r);n.show({x:o.x,y:o.y,getTooltipInfo:function(){return e._getTooltipInfo(this.x,this.y)}},!1,!0)}});this.commandService.addCommand(n)},_onServiceRemoved:function(e){-1!==e.getProperty("objectClass").indexOf("orion.edit.command")&&(this._recreateEditCommands=!0)},_onServiceAdded:function(e){-1!==e.getProperty("objectClass").indexOf("orion.edit.command")&&(this._recreateEditCommands=!0),-1!==e.getProperty("objectClass").indexOf("orion.core.contenttype")&&(T=null)},_createEditCommands:function(){function n(e){if(T)return T;var t=e.getService("orion.core.contentTypeRegistry");return t||(t=new h.ContentTypeRegistry(e),t=e.getService("orion.core.contentTypeRegistry")),t.getContentTypes().then(function(e){return T=e})}var i=this;this._recreateEditCommands=!1;var o=this.serviceRegistry,a=this.commandService,l=o.getServiceReferences("orion.edit.command"),d=o.getService("orion.page.progress"),p=o.getService("orion.page.message"),f=w.bind(null,o),g=function(n,r,o){var a=o.visibleWhen;return o.visibleWhen=function(e,t){var r=t.handler.editor||i.editor,o=t.handler.inputManager||i.inputManager;return r&&r.installed&&o?n.editor&&r.id&&n.editor!==r.id?!1:i.inputManager.getReadOnly()?!1:!a||a(e):!1},o.callback=function(s){var a,l,c=this.editor||i.editor,h=this.inputManager||i.inputManager,g=c.getSelection?c.getSelection():{start:0,end:0},m=c.getModel(),v=function(e){"object"==typeof e&&e?(e.text&&c.setText(e.text),e.selection&&(c.setSelection&&c.setSelection(e.selection.start,e.selection.end,!0),c.focus())):"string"==typeof e&&(c.setText(e,g.start,g.end,!0),c.setSelection&&c.setSelection(g.start,g.start+e.length),c.focus())};if(r.execute){var _={contentType:h.getContentType(),input:h.getInput(),offset:c.getCaretOffset()};if("orion.edit.quickfix"===n.scopeId&&(_.annotation={start:s.userData.start,end:s.userData.end,title:s.userData.title,id:s.userData.id,data:s.userData.data},s.userData.doFixAll&&s.userData._annotationModel)){_.doFixAll=!0,_.annotations=[];for(var y=s.userData._annotationModel._annotations,w=0;w<y.length;w++)y[w].id===s.userData.id&&_.annotations.push({start:y[w].start,end:y[w].end,title:y[w].title,id:y[w].id,data:y[w].data})}var b=c.getEditorContext();b.openDelegatedUI=function(){var e=arguments[0];e=e||{},e.done=v,e.status=f,e.params=e.params||{},u.mixin(e.params,h.getFileMetadata()),x.apply(null,Array.prototype.slice.call(arguments))},b.setStatus=f,c.focus(),a=r.execute(b,_)}else a=r.run(m.getText(g.start,g.end),m.getText(),g,h.getInput());l=function(e){if(e&&e.uriTemplate){var t={};t.uriTemplate=e.uriTemplate,t.params=h.getFileMetadata(),t.id=n.id,t.width=e.width,t.height=e.height,t.done=v,t.status=f,x(t)}else e&&e.searchParams?i.sideBar&&i.sideBar.fillSearchPane(e.searchParams,e.refResult?e:null):e&&(e.Status||e.status)?f(e.Status||e.status):v(e)};var C=t.formatMessage(e.running,o.name);return p&&p.createProgressMonitor(a,C),d.showWhile(a,C).then(l),!0},new s.Command(o)};return r.when(n(this.serviceRegistry),function(){var e=[];return l.forEach(function(t){for(var n=i.serviceRegistry.getService(t),r={},o=t.getPropertyKeys(),s=0;s<o.length;s++)r[o[s]]=t.getProperty(o[s]);r.forceSingleItem=!0;var l=c._createCommandOptions(r,t,i.serviceRegistry,T,!1,function(e){return i.inputManager.getFileMetadata()}).then(function(e){var t=g(r,n,e);return t.editInfo=r,a.addCommand(t),t});e.push(l)}),r.all(e,b)})}},E.EditorCommandFactory=C,E.handleStatusMessage=w,E}),n("embeddedEditor/helper/memoryFileSysConst",[],function(){var e="/in_memory_fs/",t="/in_memory_fs/project/";return{MEMORY_FILE_PATTERN:e,MEMORY_FILE_PROJECT_PATTERN:t}}),function(e){function t(){Error.apply(this,arguments)}function n(e,t,n){return e>=t&&n>=e}function i(e,t){var n=e||"utf-8";if("utf-8"!==n&&"utf8"!==n&&"unicode-1-1-utf-8"!==n)throw new TypeError("only utf-8 supported");Object.defineProperties(this,{encoding:{value:n,enumerable:!0},_fatal:{value:t&&t.fatal},_saved:{value:[],writable:!0},_checkBOM:{value:!0,writable:!0}})}function r(e){var t=e||"utf-8";if("utf-8"!==t&&"utf8"!==t&&"unicode-1-1-utf-8"!==t)throw new TypeError("only utf-8 supported");Object.defineProperties(this,{encoding:{value:t,enumerable:!0},_saved:{value:null,writable:!0}})}t.prototype=new Error,t.prototype.constructor=t,t.prototype.name="EncodingError",i.prototype.decode=function(e,i){function r(){if(this._fatal)throw this._saved.length=d=0,f=p,this._checkBOM=this._checkBOM||!h,new t;g[m++]=65533}e=e instanceof Uint8Array?e:new Uint8Array(e);var o,s,a,l,c,h=i&&i.stream,d=this._saved.length,u=e.length,p=0,f=0,g=new Uint16Array(u+d),m=0;if(this._checkBOM&&u)if(d+u>2){for(var v=d;3>v;v++)this._saved.push(e[p++]);239!==this._saved[0]||187!==this._saved[1]||191!==this._saved[2]?(p=0,this._saved.length=d):d=this._saved.length-=3,this._checkBOM=!1}else if(h)for(;u>p;)this._saved.push(e[p++]);for(;u>p;){if(o=d>0?this._saved[0]:e[p++],128>o)g[m++]=o;else if(n(o,194,223)){if(p===u)break;if(s=d>1?this._saved[1]:e[p++],!n(s,128,191)){r();continue}g[m++]=(31&o)<<6|63&s}else if(n(o,224,239)){if(p===u)break;if(s=d>1?this._saved[1]:e[p++],224===o&&!n(s,160,191)||237===o&&!n(s,128,159)||!n(s,128,191)){r();continue}if(p===u)break;if(a=d>2?this._saved[2]:e[p++],!n(a,128,191)){r();continue}g[m++]=(15&o)<<12|(63&s)<<6|63&a}else if(n(o,240,244)){if(p===u)break;if(s=d>1?this._saved[1]:e[p++],240===o&&!n(s,144,191)||244===o&&!n(s,128,143)||!n(s,128,191)){r();continue}if(p===u)break;if(a=d>2?this._saved[2]:e[p++],!n(a,128,191)){r();continue}if(p===u)break;if(l=e[p++],!n(l,128,191)){r();continue}c=65535&((7&o)<<18|(63&s)<<12|(63&a)<<6|63&l),g[m++]=c>>10|55296,g[m++]=1023&c|56320}else r();f=p,d&&(this._saved.length=d=0)}for(;f!==p;)this._saved.push(e[f++]);if(this._checkBOM=this._checkBOM||!h,!h&&0!==this._saved.length)throw new t;for(var _=[],y=0;m>y;y+=65536)_.push(String.fromCharCode.apply(null,g.subarray(y,Math.min(m,y+65536))));return _.join("")},r.prototype.encode=function(e,i){e=String(void 0!==e?e:"");for(var r,o,s,a=i&&i.stream,l=e.length,c=0,h=new Uint8Array(3*(l+(null===this._saved?0:1))),d=0;l>c;)if(null===this._saved?r=e.charCodeAt(c++):(r=this._saved,this._saved=null),128>r)h[d++]=r;else if(2048>r)h[d++]=192|r>>6,h[d++]=128|63&r;else if(55296>r||r>56319)h[d++]=224|r>>12,h[d++]=128|r>>6&63,h[d++]=128|63&r;else{if(!(l>c)){if(a){this._saved=r;break}throw new t}if(o=e.charCodeAt(c++),!n(o,56320,57343))throw new t;s=65536|(1023&r)<<10|1023&o,h[d++]=240|s>>18,h[d++]=128|s>>12&63,h[d++]=128|s>>6&63,h[d++]=128|63&s}if(!a&&null!==this._saved)throw new t;return h.buffer.slice?new Uint8Array(h.buffer.slice(0,d)):h.subarray(0,d)},e.TextDecoder=e.TextDecoder||i,e.TextEncoder=e.TextEncoder||r}("undefined"==typeof global?this||self:global),n("orion/encoding-shim",function(){}),n("embeddedEditor/helper/embeddedFileImpl",["orion/Deferred","embeddedEditor/helper/memoryFileSysConst","orion/encoding-shim","orion/URL-shim"],function(e,t){function n(e){this.fileBase=e,this.fileRoot={},this.fileRoot[t.MEMORY_FILE_PROJECT_PATTERN]={Location:t.MEMORY_FILE_PROJECT_PATTERN,Directory:!0}}return n.prototype={fetchChildren:function(){return(new e).resolve([])},loadWorkspaces:function(){return(new e).resolve([])},loadWorkspace:function(){return(new e).resolve([])},createProject:function(){throw new Error("Not supported")},createFolder:function(){throw new Error("Not supported")},createFile:function(e,t){var n=e+t;return this._getFile(n,!0),this.read(n,!0)},moveFile:function(){throw new Error("Not supported")},copyFile:function(){throw new Error("Not supported")},remoteImport:function(){throw new Error("Not supported")},remoteExport:function(){throw new Error("Not supported")},writeBlob:function(){throw new Error("Not supported")},_getFile:function(e,t){var n=new URL(e),i=n.pathname;return void 0===this.fileRoot[i]&&t&&(this.fileRoot[i]={Name:n.pathname.split("/").pop(),Location:i,LocalTimeStamp:Date.now(),ETag:0}),this.fileRoot[i]},read:function(n,i){var r=this._getFile(n);if(void 0===r)return(new e).resolve(i?{}:"");if(i){var o=n===t.MEMORY_FILE_PROJECT_PATTERN?[]:[this.fileRoot[t.MEMORY_FILE_PROJECT_PATTERN]],s={Length:r.length,Directory:!!r.Directory,LocalTimeStamp:r.LocalTimeStamp,ETag:r.ETag,Location:r.Location,Name:r.Name,Parents:o};return(new e).resolve(s)}return(new e).resolve(r.contents)},write:function(e,t,n){var i=this._getFile(e,!0);return"string"==typeof t&&(i.ETag++,i.LocalTimeStamp=Date.now(),i.contents=t),this.read(e,!0)},deleteFile:function(t){var n=new URL(t),i=n.pathname;return delete this.fileRoot[i],(new e).resolve()}},n.prototype.constructor=n,n}),n("orion/pluginregistry",["orion/Deferred","orion/EventTarget","orion/URL-shim"],function(e,t){function n(e,t){var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;n.sort(),i.sort();for(var r=0,o=n.length;o>r;r++){var s=n[r];if(s!==i[r])return!1;var a=e[s],l=t[s];if(a!==l&&JSON.stringify(a)!==JSON.stringify(l))return!1}return!0}function i(e){for(var t=Object.prototype.hasOwnProperty,n=1,i=arguments.length;i>n;n++){var r=arguments[n];for(var o in r)t.call(r,o)&&(e[o]=r[o])}return e}function r(e){if(-1===e.indexOf("://"))try{return new URL(e,location.href).href}catch(t){}return e}function o(e){function t(){return n=n||Object.keys(e)}var n=null,i={key:function(e){return t()[e]},getItem:function(t){return e[t]},setItem:function(t,i){e[t]=i,n=null},removeItem:function(t){delete e[t],n=null},clear:function(){t().forEach(function(t){delete e[t]}.bind(this)),n=null}};return Object.defineProperty(i,"length",{get:function(){return t().length}}),i}function s(e,t){if(t&&t instanceof XMLHttpRequest){var n,i;try{n=t.status,i=t.statusText}catch(r){n=0,i=""}return{status:n||0,statusText:i}}return t}function a(e){var t=e?JSON.parse(JSON.stringify(e,s)):e;return e instanceof Error&&(t.__isError=!0,t.message=t.message||e.message,t.name=t.name||e.name),t}function l(e,t){this.type=e,this.plugin=t}function c(e,t){this.__objectId=e,this.__methods=t}function h(i,r,o){function s(e){T&&o.postMessage(e,T)}function h(t){if(!T)return(new e).reject(new Error("plugin not connected"));t.id=String(V++);var n=new e;H[t.id]=n,n.then(null,function(e){"active"===B&&e instanceof Error&&"Cancel"===e.name&&s({requestId:t.id,method:"cancel",params:e.message?[e.message]:[]})});var i=Object.prototype.toString;return t.params.forEach(function(e,r){if("[object Object]"===i.call(e)&&!(e instanceof c)){var o,s;for(o in e)"[object Function]"===i.call(e[o])&&(s=s||[],s.push(o));if(s){var a=K++;U[a]=e;var l=function(){delete U[a]};n.then(l,l),t.params[r]=new c(a,s)}}}),o.postMessage(t,T),n.promise}function d(e,t){e||0===e?s({id:e,result:null,error:t}):console.log(t)}function u(e,t,n,i){i.forEach(function(e,t){if(e&&"undefined"!=typeof e.__objectId){var n={};e.__methods.forEach(function(t){n[t]=function(){return h({objectId:e.__objectId,method:t,params:Array.prototype.slice.call(arguments)})}}),i[t]=n}});var r="undefined"==typeof e?null:{id:e,result:null,error:null};try{var o=n.apply(t,i);if(!r)return;o&&"function"==typeof o.then?(j[e]=o,o.then(function(t){delete j[e],r.result=t,s(r)},function(t){j[e]&&(delete j[e],r.error=a(t),s(r))},function(){s({responseId:e,method:"progress",params:Array.prototype.slice.call(arguments)})})):(r.result=o,s(r))}catch(l){r&&(r.error=a(l),s(r))}}function p(e){try{if(e.method){var t=e.method,n=e.params||[];if("serviceId"in e){var i=k[e.serviceId];if(i)if(_(i)){var r=o.serviceRegistry;i=r.getService(i),t in i?u(e.id,i,i[t],n):d(e.id,"method not found")}else d(e.id,"not trusted");else d(e.id,"service not found")}else if("objectId"in e){var s=U[e.objectId];s?t in s?u(e.id,s,s[t],n):d(e.id,"method not found"):d(e.id,"object not found")}else if("requestId"in e){var a=j[e.requestId];a&&"cancel"===t&&a.cancel&&a.cancel.apply(a,n)}else if("responseId"in e){var l=H[e.responseId];l&&"progress"===t&&l.progress&&l.progress.apply(l,n)}else if("loading"===e.method)T.loading();else if("plugin"===e.method){T.connected();var c=e.params[0];A({headers:c.headers,services:c.services}).then(function(){E&&E.resolve(b)}),c.updateRegistry&&y()}else{if("timeout"!==e.method&&"error"!==e.method)throw new Error("Bad method: "+e.method);E&&E.reject(e.error)}}else if(e.id){var h=H[String(e.id)];if(h)if(delete H[String(e.id)],e.error){var p=o.handleServiceError(b,e.error);h.reject(p)}else h.resolve(e.result)}}catch(f){console.log("Plugin._messageHandler "+f)}}function f(e){var n={};if(e.methods&&(e.methods.forEach(function(t){n[t]=function(){var n={serviceId:e.serviceId,method:t,params:Array.prototype.slice.call(arguments)};return"active"===B?h(n):b.start({"transient":!0}).then(function(){return h(n)})}}),n.addEventListener&&n.removeEventListener)){var i=new t,r=K++;U[r]={handleEvent:i.dispatchEvent.bind(i)};var o=new c(r,["handleEvent"]),s=n.addEventListener;n.addEventListener=function(e,t){i._namedListeners[e]||s(e,o),i.addEventListener(e,t)};var a=n.removeEventListener;n.removeEventListener=function(e,t){i.removeEventListener(e,t),i._namedListeners[e]||a(e,o)}}return n}function g(e){var t=JSON.parse(JSON.stringify(e.properties));t.__plugin__=i;var n=e.names||e.type||[];return Array.isArray(n)||(n=[n]),t.objectClass=n,t}function m(e){var t=f(e),n=g(e),i=o.registerService(e.names||e.type,t,n);F[e.serviceId]={registration:i,proxy:t}}function v(){var e=[];return Object.keys(k).forEach(function(t){var n=k[t],i={};n.getPropertyKeys().forEach(function(e){i[e]=n.getProperty(e)}),["service.id","service.names","objectClass","__plugin__"].forEach(function(e){delete i[e]});var r=[],s=o.serviceRegistry,a=s.getService(n);for(var l in a)"function"==typeof a[l]&&r.push(l);e.push({serviceId:String(n.getProperty("service.id")),names:n.getProperty("service.names"),methods:r,properties:i})}),{services:e}}function _(e){var t=new URL(i),n=t.hostname.split("."),r=n[n.length-2]+"."+n[n.length-1],o=location.hostname.split("."),s=o[o.length-2]+"."+o[o.length-1];if(r===s)return!0;var a=e.getProperty("__plugin__");return t.origin===(a?new URL(a):location).origin}function y(){function e(e,t,n){var i=n.serviceReference,r=i.getProperty("service.id");!k[r]&&_(i)&&(e&&(k[r]=i),t&&delete k[r],y())}if(!k){k={};var t=o.serviceRegistry;t.getServiceReferences().forEach(function(e){_(e)&&(k[e.getProperty("service.id")]=e)}),t.addEventListener("registered",L=e.bind(null,!0,!1)),t.addEventListener("unregistered",M=e.bind(null,!1,!0)),t.addEventListener("modified",N=e.bind(null,!1,!1))}h({method:"plugin",params:[v()]})}function x(){var e=o.serviceRegistry;L&&e.removeEventListener("registered",L),M&&e.removeEventListener("unregistered",M),N&&e.removeEventListener("modified",N),L=M=N=null}function w(){o.persist(i,{created:O,headers:D,services:R,autostart:I,lastModified:P})}var b=this;r=r||{};var C,E,T,S,k,A,L,M,N,O=r.created||(new Date).getTime(),D=r.headers||{},R=r.services||[],I=r.autostart,P=r.lastModified||0,B="installed",F={},V=0,K=0,j={},H={},U={};this._default=!1,this._persist=w,this._resolve=function(){B="resolved",o.dispatchEvent(new l("resolved",b))},this._getAutostart=function(){return I},this._getCreated=function(){return O},this.getLocation=function(){return i},this.getHeaders=function(){return JSON.parse(JSON.stringify(D))},this.getName=function(){var e=this.getHeaders();return e?e.name||"":null},this.getVersion=function(){var e=this.getHeaders();return e?e.version||"0.0.0":null},this.getLastModified=function(){return P},this.getServiceReferences=function(){var e=[];return Object.keys(F).forEach(function(t){e.push(F[t].registration.getReference())}),e},this.setParent=function(t){return S!==t?(S=t,b.stop({"transient":!0}).then(function(){return"started"===I?b.start({"transient":!0}):"lazy"===I?b.start({lazy:!0,"transient":!0}):void 0})):(new e).resolve()},this.getState=function(){return B},this.getProblemLoading=function(){return b._problemLoading?!0:!1},this.start=function(t){if("uninstalled"===B)return(new e).reject(new Error("Plugin is uninstalled"));if(C)return C.promise.then(this.start.bind(this,t));if("active"===B)return(new e).resolve();if(!t||!t["transient"]){var n=t&&t.lazy?"lazy":"started";n!==I&&(I=n,w())}var r=o.getState();if("starting"!==r&&"active"!==r)return t["transient"]?(new e).reject(new Error("start transient error")):(new e).resolve();if("installed"===B)try{this._resolve()}catch(s){return(new e).reject(s)}if("resolved"===B&&R.forEach(function(e){m(e)}),t&&t.lazy){"starting"!==B&&(B="starting",o.dispatchEvent(new l("lazy activation",b)));var a=(new Date).getTime();return!this.getLastModified()||a>this.getLastModified()+864e5?this.update():(new e).resolve()}var c=new e;return C=c,B="starting",b._problemLoading=null,o.dispatchEvent(new l("starting",b)),E=new e,T=o.connect(i,p,S),E.then(function(){E=null,B="active",o.dispatchEvent(new l("started",b)),C=null,c.resolve()},function(e){E=null,B="stopping",o.dispatchEvent(new l("stopping",b)),Object.keys(F).forEach(function(e){F[e].registration.unregister(),delete F[e]}),o.disconnect(T),T=null,B="resolved",C=null,o.dispatchEvent(new l("stopped",b)),b._problemLoading=!0,c.reject(new Error("Failed to load plugin: "+i+(e&&e.message?"\n    Reason: "+e.message:""))),b._default&&(P=0,w())}),c.promise},this.stop=function(t){if("uninstalled"===B)return(new e).reject(new Error("Plugin is uninstalled"));if(C)return C.promise.then(this.stop.bind(this,t));if(t&&t["transient"]||"stopped"!==I&&(I="stopped",w()),"active"!==B&&"starting"!==B)return(new e).resolve();var n=new e;return C=n,B="stopping",o.dispatchEvent(new l("stopping",b)),Object.keys(F).forEach(function(e){
F[e].registration.unregister(),delete F[e]}),T&&(o.disconnect(T),T=null,x()),B="resolved",C=null,o.dispatchEvent(new l("stopped",b)),n.resolve(),n.promise},A=function(t){if(b.problemLoading=null,"uninstalled"===B)return(new e).reject(new Error("Plugin is uninstalled"));if(!t)return 0===P&&(P=(new Date).getTime(),w()),o.loadManifest(i).then(A,function(){b._problemLoading=!0,b._default&&(P=0,w()),console.log("Failed to load plugin: "+i)});var r=D,s=R,a=I;if(D=t.headers||{},R=t.services||[],I=t.autostart||I,t.lastModified?P=t.lastModified:(P=(new Date).getTime(),w()),n(D,r)&&n(R,s)&&I===a)return(new e).resolve();if("active"===B||"starting"===B){var c=[];Object.keys(R).forEach(function(e){var t=R[e];c.push(e);var i=F[e];if(i){if(n(t.methods,Object.keys(i.proxy))){var r=g(t),o=i.registration.getReference(),s={};return o.getPropertyKeys().forEach(function(e){s[e]=o.getProperty(e)}),void(n(r,s)||i.registration.setProperties(r))}i.registration.unregister(),delete F[e]}m(t)}),Object.keys(F).forEach(function(e){-1===c.indexOf(e)&&(F[e].registration.unregister(),delete F[e])})}return"active"===B&&(o.disconnect(T),E=new e,T=o.connect(i,p,S),E.then(function(){E=null},function(){E=null,B="stopping",o.dispatchEvent(new l("stopping"),b),Object.keys(F).forEach(function(e){F[e].registration.unregister(),delete F[e]}),o.disconnect(T),T=null,B="resolved",o.dispatchEvent(new l("stopped",b))})),(new e).resolve()},this.update=function(e){return A(e).then(function(){o.dispatchEvent(new l("updated",b))})},this.uninstall=function(){return"uninstalled"===B?(new e).reject(new Error("Plugin is uninstalled")):"active"===B||"starting"===B||"stopping"===B?this.stop().then(this.uninstall.bind(this),this.uninstall.bind(this)):(o.removePlugin(this),B="uninstalled",o.dispatchEvent(new l("uninstalled",b)),(new e).resolve())}}function d(n,s){function a(e,t){try{var n;if("undefined"==typeof e.useStructuredClone){var i="string"!=typeof t.data;n=i?t.data:JSON.parse(t.data),e.useStructuredClone=i}else n=e.useStructuredClone?t.data:JSON.parse(t.data);e.handler(n)}catch(r){}}function c(e){var t=e.source;w.some(function(n){return t===n.target?(a(n,e),!0):void 0})}s=s||{};var d=s.storage||localStorage;d.getItem||(d=o(d));var v,_=parseInt(d.getItem("pluginregistry.default.timeout"),10)||void 0,y="installed",x=[],w=[],b=new t,C={},E={serviceRegistry:n,registerService:n.registerService.bind(n),connect:function(e,t,n,i){function r(t){localStorage.pluginLogging&&console.log(t+"("+((new Date).getTime()-s._startTime)+"ms)="+e)}function o(e){r("timeout");var n=new Error(e);n.name="timeout",t({method:"timeout",error:n})}var s={handler:t,url:e};i=i||_,s._updateTimeout=function(){var t,n;if(!this._connected&&!this._closed)if(this._handshake){var r=0;w.forEach(function(e){e._connected||e._closed||(r+=1e3)}),t="Plugin handshake timeout for: "+e,n=this._loading?5e3:(i||6e4)+r}else t="Plugin load timeout for: "+e,n=i||15e3;this._loadTimeout&&clearTimeout(this._loadTimeout),this._loadTimeout=0,n&&(this._loadTimeout=setTimeout(o.bind(null,t),n))};var l=!(!e.match(p)||"undefined"==typeof Worker),c=!(!e.match(f)||"undefined"==typeof SharedWorker);if(localStorage.useSharedWorkers&&c||!e.match(f)||(e=e.replace(f,m),c=!1),localStorage.useWorkers&&l||!e.match(p)||(e=e.replace(p,g),l=c=!1),s.url=e,s._updateTimeout(),s._startTime=(new Date).getTime(),l){var h;c?(h=new SharedWorker(e),s.target=h.port,h.port.start(),s._close=function(){h.port.close()}):(h=new Worker(e),s.target=h,s._close=function(){h.terminate()}),s.postMessage=function(e){this.target.postMessage(this.useStructuredClone?e:JSON.stringify(e),[])},s.target.addEventListener("message",function(e){a(s,e)})}else{var d=document.createElement("iframe");d.name=e+"_"+s._startTime,d.src=e,d.onload=function(){r("handshake"),s._handshake=!0,s._updateTimeout()},d.sandbox="allow-scripts allow-same-origin allow-forms allow-popups",d.style.width=d.style.height="100%",d.frameBorder=0,(n||v).appendChild(d),s.target=d.contentWindow,s.postMessage=function(e){this.target.postMessage(this.useStructuredClone?e:JSON.stringify(e),this.url)},s._close=function(){if(d){var e=d.parentNode;e&&e.removeChild(d),d=null}}}return s.connected=function(){r("connected"),this._connected=!0,this._updateTimeout()},s.loading=function(){r("loading"),this._loading=!0,this._updateTimeout()},s.close=function(){r("closed"),this._closed=!0,this._updateTimeout(),this._close()},w.push(s),s},disconnect:function(e){for(var t=0;t<w.length;t++)if(e===w[t]){w.splice(t,1);try{e.close()}catch(n){}break}},removePlugin:function(e){for(var t=0;t<x.length;t++)if(e===x[t]){x.splice(t,1);break}d.removeItem("plugin."+e.getLocation())},getPersisted:function(e){var t="plugin."+e,n=d.getItem(t);return n&&(n=JSON.parse(n),n.created)?n:null},persist:function(e,t){d.setItem("plugin."+e,JSON.stringify(t))},postMessage:function(e,t){t.postMessage(e)},dispatchEvent:function(e){try{b.dispatchEvent(e)}catch(t){console&&console.log("PluginRegistry.dispatchEvent "+t)}},loadManifest:function(t){var n=new e,i=E.connect(t,function(e){if(i&&e.method)if("manifest"===e.method||"plugin"===e.method){var t=e.params[0];E.disconnect(i),i=null,n.resolve(t)}else"timeout"===e.method||"error"===e.method?(E.disconnect(i),i=null,n.reject(e.error)):"loading"===e.method&&i.loading()});return n.promise},getState:function(){return y},handleServiceError:function(e,t){if(t&&401===t.status){var n=e.getHeaders(),i=e.getName()||e.getLocation(),r=document.createElement("span");if(r.appendChild(document.createTextNode("Authentication required for: "+i+".")),n.login){r.appendChild(document.createTextNode(" "));var o=document.createElement("a");o.target="_blank",o.textContent="Login",o.href=n.login,u.test(o.href)?(r.appendChild(o),r.appendChild(document.createTextNode(" and re-try the request."))):console.log("Illegal Login URL: "+n.login)}var s=new XMLSerializer;return{Severity:"Error",HTML:!0,Message:s.serializeToString(r)}}if(t.__isError){var a=t;t=new Error(a.message),Object.keys(a).forEach(function(e){t[e]=a[e]}),delete t.__isError}return t}};this.getLocation=function(){return"System"},this.getHeaders=function(){return{}},this.getName=function(){return"System"},this.getVersion=function(){return"0.0.0"},this.getLastModified=function(){return 0},this.getState=E.getState,this.init=function(){"starting"!==y&&"active"!==y&&"stopping"!==y&&(addEventListener("message",c,!1),s.parent?v=s.parent:(v=document.createElement("div"),s.visible||(v.style.display="none",v.style.visibility="hidden"),document.body.appendChild(v)),s.plugins&&Object.keys(s.plugins).forEach(function(e){e=r(e);var t=this.getPlugin(e);if(t)t._default=!0;else{var n=s.plugins[e];"object"!=typeof n&&(n=E.getPersisted(e)||{}),n.autostart=n.autostart||s.defaultAutostart||"lazy",t=new h(e,n,E),t._default=!0,x.push(t)}}.bind(this)),x.sort(function(e,t){return e._getCreated()<t._getCreated()?-1:1}),y="starting")},this.start=function(){if("starting"!==y&&this.init(),"starting"!==y)return(new e).reject("Cannot start framework. Framework is already "+y+".");var t=[];return x.forEach(function(e){var n=e._getAutostart();"started"===n?t.push(e.start({"transient":!0})):"lazy"===n?t.push(e.start({lazy:!0,"transient":!0})):e._resolve()}),e.all(t,function(e){console.log("PluginRegistry.stop "+e)}).then(function(){y="active"})},this.stop=function(){if("starting"!==y&&"active"!==y)return(new e).reject("Cannot stop registry. Registry is already "+y+".");y="stopping";var t=[];return x.forEach(function(e){t.push(e.stop({"transient":!0}))}),e.all(t,function(e){console.log("PluginRegistry.stop "+e)}).then(function(){if(!s.parent){var e=v.parentNode;e&&e.removeChild(v)}v=null,removeEventListener("message",c),y="resolved"})},this.update=function(){this.stop().then(this.start.bind(this))},this.uninstall=function(){return(new e).reject("Cannot uninstall registry")},this.installPlugin=function(t,n){t=r(t);var o=this.getPlugin(t);if(o)return(new e).resolve(o);if(C[t])return C[t];if(n)return"lazy"===n.autostart&&(n=i({},E.getPersisted(t),n)),o=new h(t,n,E),x.push(o),o._persist(),E.dispatchEvent(new l("installed",o)),(new e).resolve(o);var s=E.loadManifest(t).then(function(e){return o=new h(t,e,E),x.push(o),o._persist(),delete C[t],E.dispatchEvent(new l("installed",o)),o},function(e){throw delete C[t],e});return C[t]=s,s},this.getPlugins=function(){return x.slice()},this.getPlugin=function(e){var t=null;return e=r(e),x.some(function(n){return e===n.getLocation()?(t=n,!0):void 0}),t},this.addEventListener=b.addEventListener.bind(b),this.removeEventListener=b.removeEventListener.bind(b),this.resolvePlugins=function(){var e=!0;return x.forEach(function(t){e=e&&t._resolve()}),e}}var u=new RegExp("^http[s]?","i"),p=/Worker\.js$/,f=/SharedWorker\.js$/,g="Plugin.html",m="Worker.js";return{Plugin:h,PluginRegistry:d}});var i=null,r=document.getElementsByTagName("script");if(r&&r.length&&r.length>0){for(var o=0;2>o;o++){for(var s=0;s<r.length;s++)if(0===o){if("orion.codeEdit"===r[s].id){i=r[s].src;break}}else{var a=/.*built-codeEdit.*.js/;if(r[s].src&&a.exec(r[s].src)){i=r[s].src;break}}if(i)break}i||(i=r[r.length-1].src)}n("embeddedEditor/helper/bootstrap",["embeddedEditor/helper/embeddedFileImpl","embeddedEditor/helper/memoryFileSysConst","orion/pluginregistry","orion/Deferred","orion/URL-shim"],function(e,t,n,r){function o(t,o,c){if(s)return s;var h;if(h=c&&c._defaultPlugins?c._defaultPlugins:l,c&&c.defaultPlugins){var d=[];c.defaultPlugins.forEach(function(e){var t=e.split("/").pop();h.some(function(e){return-1!==e.indexOf(t)?(d.push(e),!0):!1})}),h=d}s=new r;var u=new e(a);t.registerService("orion.core.file",u,{Name:"Embedded File System",top:a,pattern:a});var p={};h.forEach(function(e){var t=new URL(e,i);p[t.href]={autostart:"lazy"}}),h=c&&c.userPlugins?c.userPlugins:[],h.forEach(function(e){p[e]={autostart:"lazy"}});var f=new n.PluginRegistry(t,{storage:{},plugins:p});return f.start().then(function(){var e={serviceRegistry:t,pluginRegistry:f};return o.getContentType("text/plain")||t.registerService("orion.core.contenttype",{},{contentTypes:[{id:"text/plain",name:"Text",extension:["txt"]}]}),s.resolve(e),e})}var s,a=t.MEMORY_FILE_PATTERN,l=["../javascript/plugins/javascriptPlugin.html","../webtools/plugins/webToolsPlugin.html","../plugins/embeddedToolingPlugin.html"];return{startup:o}}),n("orion/editor/undoStack",[],function(){function e(e,t,n,i,r){this.model=e,this.offset=t,this.text=n,this.previousText=i,this.type=r}function t(e){this.owner=e,this.changes=[]}function n(e,t){this.size=void 0!==t?t:100,this.reset();var n=this;if(this._listener={onChanging:function(e){n._onChanging(e)},onDestroy:function(e){n._onDestroy(e)}},e.getModel){var i=e.getModel();i.getBaseModel&&(i=i.getBaseModel()),this.model=i,this.setView(e)}else this.shared=!0,this.model=e;this.model.addEventListener("Changing",this._listener.onChanging)}return e.prototype={getRedoChanges:function(){return[{start:this.offset,end:this.offset+this.previousText.length,text:this.text}]},getUndoChanges:function(){return[{start:this.offset,end:this.offset+this.text.length,text:this.previousText}]},undo:function(e,t){return this._doUndoRedo(this.offset,this.previousText,this.text,e,t),!0},redo:function(e,t){return this._doUndoRedo(this.offset,this.text,this.previousText,e,t),!0},merge:function(e,t,n,i,r){if(i===this.type){if(1===i&&e===this.offset+this.text.length)return this.text+=t,!0;if(-1===i&&r===this.offset)return this.offset=e,this.previousText=n+this.previousText,!0;if(-1===i&&e===this.offset)return this.previousText=this.previousText+n,!0}return!1},_doUndoRedo:function(e,t,n,i,r){if(this.model.setText(t,e,e+n.length),r&&i){var o=i.getModel();o!==this.model&&(e=o.mapOffset(e,!0)),i.setSelection(e,e+t.length)}}},t.prototype={getRedoChanges:function(){for(var e=[],t=0;t<this.changes.length;t++)e=e.concat(this.changes[t].getRedoChanges());return e},getUndoChanges:function(){for(var e=[],t=this.changes.length-1;t>=0;t--)e=e.concat(this.changes[t].getUndoChanges());return e},add:function(e){this.changes.push(e)},end:function(e){e&&(this.endSelection=e.getSelections());var t=this.owner;t&&t.end&&t.end()},undo:function(e,t){this.changes.length>1&&e&&e.setRedraw(!1);for(var n=this.changes.length-1;n>=0;n--)this.changes[n].undo(e,!1);t&&e&&e.setSelections(this.startSelection),this.changes.length>1&&e&&e.setRedraw(!0);var i=this.owner;return i&&i.undo&&i.undo(),this.changes.length>0},redo:function(e,t){this.changes.length>1&&e&&e.setRedraw(!1);for(var n=0;n<this.changes.length;n++)this.changes[n].redo(e,!1);t&&e&&e.setSelections(this.endSelection),this.changes.length>1,e&&e.setRedraw(!0);var i=this.owner;return i&&i.redo&&i.redo(),this.changes.length>0},merge:function(e,t,n,i,r,o){var s=this.changes.length;return s>0&&this===o?this.changes[s-1].merge(e,t,n,i,r):!1},start:function(e){e&&(this.startSelection=e.getSelections());var t=this.owner;t&&t.start&&t.start()}},n.prototype={destroy:function(){this._onDestroy()},add:function(e){if(this.compoundChange)this.compoundChange.add(e);else{var t=this.stack.length;this.stack.splice(this.index,t-this.index,e),this.index++,this.stack.length>this.size&&(this.stack.shift(),this.index--)}},markClean:function(){this._commitUndo(),this.cleanChange=this.stack[this.index-1],this.cleanChange&&(this.cleanChange.type=2)},isClean:function(){return this.cleanChange===this.stack[this.index-1]},canUndo:function(){return this.index>0},canRedo:function(){return this.stack.length-this.index>0},endCompoundChange:function(){this.compoundChange&&this.compoundChange.end(this.view),this.compoundChange=void 0},getSize:function(){return{undo:this.index,redo:this.stack.length-this.index}},getRedoChanges:function(){this._commitUndo();for(var e=[],t=this.index;t<this.stack.length;t++)e=e.concat(this.stack[t].getRedoChanges());return e},getUndoChanges:function(){this._commitUndo();for(var e=[],t=this.index;t>=0;t--)e=e.concat(this.stack[t].getUndoChanges());return e},undo:function(){this._commitUndo();var e,t=!1;this._ignoreUndo=!0;do{if(this.index<=0)break;e=this.stack[--this.index]}while(!(t=e.undo(this.view,!0)));return this._ignoreUndo=!1,t},redo:function(){this._commitUndo();var e,t=!1;this._ignoreUndo=!0;do{if(this.index>=this.stack.length)break;e=this.stack[this.index++]}while(!(t=e.redo(this.view,!0)));return this._ignoreUndo=!1,t},reset:function(){this.index=0,this.cleanChange=void 0,this.stack=[],this._ignoreUndo=!1,this._compoundChange=void 0},setView:function(e){this.view!==e&&(this.view&&e.removeEventListener("Destroy",this._listener.onDestroy),this.view=e,this.view&&e.addEventListener("Destroy",this._listener.onDestroy))},startCompoundChange:function(e){this._commitUndo();var n=new t(e);return this.add(n),this.compoundChange=n,this.compoundChange.start(this.view),this.compoundChange},_commitUndo:function(){this.endCompoundChange()},_onDestroy:function(e){e&&this.shared||this.model.removeEventListener("Changing",this._listener.onChanging),this.view&&(this.view.removeEventListener("Destroy",this._listener.onDestroy),this.view=null)},_trackUnsavedChanges:function(e){if(this._unsavedChanges){var t=this._unsavedChanges.length,n=e.addedCharCount,i=e.removedCharCount,r=e.start,o=e.start+i,s=0;if(0===n?s=-1:0===i&&(s=1),t>0&&s===this._previousChangeType){var a=this._unsavedChanges[t-1];if(0===i&&r===a.end+a.text.length)return void(a.text+=e.text);if(0===e.addedCharCount&&o===a.start)return void(a.start=r)}this._previousChangeType=s,this._unsavedChanges.push({start:r,end:o,text:e.text})}},_onChanging:function(t){if(this._trackUnsavedChanges(t),!this._ignoreUndo){var n=t.text,i=t.start,r=t.addedCharCount,o=t.removedCharCount,s=i+o,a=0;0===r&&1===o?a=-1:1===r&&0===o&&(a=1);var l=this.stack.length,c=this.model.getText(i,s);if(l>0&&this.index===l){var h=this.stack[l-1];if(h.merge(i,n,c,a,s,this.compoundChange))return}this.add(new e(this.model,i,n,c,a))}}},{UndoStack:n}}),n("orion/explorers/navigatorRenderer",[],function(){return{getClickedItem:function(){return null}}}),n("orion/editor/projectionTextModel",["orion/editor/textModel","orion/editor/eventTarget"],function(e,t){function n(e){this._model=e,this._projections=[];var t=this;this._listener={onChanged:function(e){t._onChanged(e)},onChanging:function(e){t._onChanging(e)}},e.addEventListener("postChanged",this._listener.onChanged),e.addEventListener("preChanging",this._listener.onChanging)}return n.prototype={destroy:function(){this._model&&(this._model.removeEventListener("postChanged",this._listener.onChanged),this._model.removeEventListener("preChanging",this._listener.onChanging),this._model=null)},addProjection:function(t){if(t){var n=this._model,i=this._projections;t._lineIndex=n.getLineAtOffset(t.start),t._lineCount=n.getLineAtOffset(t.end)-t._lineIndex;var r=t.text;r||(r=""),"string"==typeof r?t._model=new e.TextModel(r,n.getLineDelimiter()):t._model=r;var o=this.mapOffset(t.start,!0),s=t.end-t.start,a=t._lineCount,l=t._model.getCharCount(),c=t._model.getLineCount()-1,h={type:"Changing",text:t._model.getText(),start:o,removedCharCount:s,addedCharCount:l,removedLineCount:a,addedLineCount:c};this.onChanging(h);var d=this._binarySearch(i,t.start);i.splice(d,0,t);var u={type:"Changed",start:o,removedCharCount:s,addedCharCount:l,removedLineCount:a,addedLineCount:c};this.onChanged(u)}},getProjections:function(){return this._projections.slice(0)},getBaseModel:function(){return this._model},mapOffset:function(e,t){var n,i,r=this._projections,o=0;if(t){for(n=0;n<r.length&&(i=r[n],!(i.start>e));n++){if(i.end>e)return-1;o+=i._model.getCharCount()-(i.end-i.start)}return e+o}for(n=0;n<r.length&&(i=r[n],!(i.start>e-o));n++){var s=i._model.getCharCount();if(i.start+s>e-o)return-1;o+=s-(i.end-i.start)}return e-o},removeProjection:function(e){this._removeProjection(e)},_removeProjection:function(e,t){var n,i=0;for(n=0;n<this._projections.length;n++){var r=this._projections[n];if(r===e){e=r;break}i+=r._model.getCharCount()-(r.end-r.start)}if(n<this._projections.length){var o=this._model,s=e.start+i,a=e.end-e.start,l=e._lineCount,c=e._model.getCharCount(),h=e._model.getLineCount()-1;if(!t){var d={type:"Changing",text:o.getText(e.start,e.end),start:s,removedCharCount:c,addedCharCount:a,removedLineCount:h,addedLineCount:l};this.onChanging(d)}if(this._projections.splice(n,1),!t){var u={type:"Changed",start:s,removedCharCount:c,addedCharCount:a,removedLineCount:h,addedLineCount:l};this.onChanged(u)}}},_binarySearch:function(e,t){for(var n,i=e.length,r=-1;i-r>1;)n=Math.floor((i+r)/2),t<=e[n].start?i=n:r=n;return i},getCharCount:function(){for(var e=this._model.getCharCount(),t=this._projections,n=0;n<t.length;n++){var i=t[n];e+=i._model.getCharCount()-(i.end-i.start)}return e},getLine:function(e,t){if(0>e)return null;var n,i,r,o=this._model,s=this._projections,a=0,l=[],c=0;for(n=0;n<s.length&&(r=s[n],!(r._lineIndex>=e-a));n++){if(i=r._model.getLineCount()-1,r._lineIndex+i>=e-a){var h=e-(r._lineIndex+a);if(i>h)return r._model.getLine(h,t);l.push(r._model.getLine(i))}c=r.end,a+=i-r._lineCount}for(c=Math.max(c,o.getLineStart(e-a));n<s.length&&(r=s[n],!(r._lineIndex>e-a));n++){if(l.push(o.getText(c,r.start)),i=r._model.getLineCount()-1,r._lineIndex+i>e-a)return l.push(r._model.getLine(0,t)),l.join("");l.push(r._model.getText()),c=r.end,a+=i-r._lineCount}var d=o.getLineEnd(e-a,t);return d>c&&l.push(o.getText(c,d)),l.join("")},getLineAtOffset:function(e){for(var t=this._model,n=this._projections,i=0,r=0,o=0;o<n.length;o++){var s=n[o];if(s.start>e-i)break;var a=s._model.getCharCount();if(s.start+a>e-i){var l=e-(s.start+i);r+=s._model.getLineAtOffset(l),i+=l;break}r+=s._model.getLineCount()-1-s._lineCount,i+=a-(s.end-s.start)}return t.getLineAtOffset(e-i)+r},getLineCount:function(){for(var e=this._model,t=this._projections,n=e.getLineCount(),i=0;i<t.length;i++){var r=t[i];n+=r._model.getLineCount()-1-r._lineCount}return n},getLineDelimiter:function(){return this._model.getLineDelimiter()},getLineEnd:function(e,t){if(0>e)return-1;for(var n=this._model,i=this._projections,r=0,o=0,s=0;s<i.length;s++){var a=i[s];if(a._lineIndex>e-r)break;var l=a._model.getLineCount()-1;if(a._lineIndex+l>e-r){var c=e-(a._lineIndex+r);return a._model.getLineEnd(c,t)+a.start+o}o+=a._model.getCharCount()-(a.end-a.start),r+=l-a._lineCount}return n.getLineEnd(e-r,t)+o},getLineStart:function(e){if(0>e)return-1;for(var t=this._model,n=this._projections,i=0,r=0,o=0;o<n.length;o++){var s=n[o];if(s._lineIndex>=e-i)break;var a=s._model.getLineCount()-1;if(s._lineIndex+a>=e-i){var l=e-(s._lineIndex+i);return s._model.getLineStart(l)+s.start+r}r+=s._model.getCharCount()-(s.end-s.start),i+=a-s._lineCount}return t.getLineStart(e-i)+r},getText:function(e,t){void 0===e&&(e=0);var n,i,r,o=this._model,s=this._projections,a=0,l=[];for(n=0;n<s.length&&(i=s[n],!(i.start>e-a));n++){if(r=i._model.getCharCount(),i.start+r>e-a){if(void 0!==t&&i.start+r>t-a)return i._model.getText(e-(i.start+a),t-(i.start+a));l.push(i._model.getText(e-(i.start+a))),e=i.end+a+r-(i.end-i.start)}a+=r-(i.end-i.start)}var c=e-a;if(void 0!==t){for(;n<s.length&&(i=s[n],!(i.start>t-a));n++){if(l.push(o.getText(c,i.start)),r=i._model.getCharCount(),i.start+r>t-a)return l.push(i._model.getText(0,t-(i.start+a))),l.join("");l.push(i._model.getText()),c=i.end,a+=r-(i.end-i.start)}l.push(o.getText(c,t-a))}else{for(;n<s.length;n++)i=s[n],l.push(o.getText(c,i.start)),l.push(i._model.getText()),c=i.end;l.push(o.getText(c))}return l.join("")},_onChanged:function(e){var t,n,i=this._change,r=i.baseStart,o=i.baseEnd,s=this._projections;for(t=0;t<s.length&&(n=s[t],!(n.end>r));t++);var a=t;for(t=0;t<s.length&&(n=s[t],!(n.start>=o));t++);var l=t,c=this._model,h=i.baseText.length-(o-r);for(t=l;t<s.length;t++)n=s[t],n.start+=h,n.end+=h,n._lineIndex=c.getLineAtOffset(n.start);var d=s.splice(a,l-a);for(t=0;t<d.length;t++)d[t].annotation&&d[t].annotation._expand();var u={type:"Changed",start:i.start,removedCharCount:i.removedCharCount,addedCharCount:i.addedCharCount,removedLineCount:i.removedLineCount,addedLineCount:i.addedLineCount};this.onChanged(u),this._change=void 0},_onChanging:function(e){function t(e){for(a=0,s=0;a<c.length&&(l=c[a],!(l.start>e));a++){if(l.end>e)return-1;s+=l._model.getCharCount()-(l.end-l.start)}return e+s}var n=!!this._change,i=this._change||{},r=e.start,o=r+e.removedCharCount;if(i.baseStart=r,i.baseEnd=o,i.baseText=e.text,i.addedLineCount=e.addedLineCount,!n){this._change=i,i.text=e.text;var s,a,l,c=this._projections;i.start=t(r),-1===i.start&&(i.text=this._model.getText(l.start,r)+i.text,i.addedLineCount+=this._model.getLineAtOffset(r)-this._model.getLineAtOffset(l.start),i.start=l.start+s),i.end=t(o),-1===i.end&&(i.text+=this._model.getText(o,l.end),i.addedLineCount+=this._model.getLineAtOffset(l.end)-this._model.getLineAtOffset(o),i.end=l.start+s)}i.addedCharCount=i.text.length,i.removedCharCount=i.end-i.start,i.removedLineCount=this.getLineAtOffset(i.end)-this.getLineAtOffset(i.start);var h={type:"Changing",text:i.text,start:i.start,removedCharCount:i.removedCharCount,addedCharCount:i.addedCharCount,removedLineCount:i.removedLineCount,addedLineCount:i.addedLineCount};this.onChanging(h)},onChanging:function(e){return this.dispatchEvent(e)},onChanged:function(e){return this.dispatchEvent(e)},setLineDelimiter:function(e){this._model.setLineDelimiter(e)},setText:function(e,t,n){function i(e){for(o=0,r=0;o<c.length&&(s=c[o],!(s.start>e-r));o++){var t=s._model.getCharCount();if(s.start+t>e-r)return-1;r+=t-(s.end-s.start)}return e-r}this._change={text:e||"",start:t||0,end:void 0===n?this.getCharCount():n};var r,o,s,a,l,c=this._projections,h=i(this._change.start);-1===h&&(a={projection:s,start:this._change.start-(s.start+r)},h=s.end);var d=i(this._change.end);-1===d&&(l={projection:s,end:this._change.end-(s.start+r)},d=s.start),a&&l&&a.projection===l.projection?s._model.setText(this._change.text,a.start,l.end):(this._model.setText(this._change.text,h,d),a&&(s=a.projection,s._model.setText("",a.start)),l&&(s=l.projection,s._model.setText("",0,l.end),s.start=s.end,s._lineCount=0)),this._change=void 0}},t.EventTarget.addMixin(n.prototype),{ProjectionTextModel:n}}),n("orion/editor/textModelFactory",["orion/editor/textModel","orion/editor/projectionTextModel"],function(e,t){function n(){}return n.prototype={createTextModel:function(){return new e.TextModel},createProjectionTextModel:function(e,n){return new t.ProjectionTextModel(e?e:this.createTextModel(n))}},{TextModelFactory:n}}),n("orion/inputManager",["i18n!orion/edit/nls/messages","orion/explorers/navigatorRenderer","orion/i18nUtil","orion/Deferred","orion/EventTarget","orion/objects","orion/PageUtil","orion/editor/textModelFactory","orion/metrics"],function(e,t,n,i,r,o,s,a,l){function c(e){this._document=e.document||document,this._timeout=e.timeout;for(var t=["mousedown","keypress","keydown","keyup"],n=function(){this._resetTimer()}.bind(this),i=0;i<t.length;i++){var o=t[i];this._document.addEventListener(o,n,!0)}r.attach(this)}function h(t){var n={Severity:"Error",Message:e.noResponse};if("Cancel"===t.name)return{Severity:"Warning",Message:t.name,Cancel:!0};if(0===t.status)return n.Cancel=!0,n;if(t.responseText){var i=t.responseText;try{var r=JSON.parse(i);n.Severity=r.Severity||n.Severity,n.Message=r.Message||n.Message}catch(o){n.Message=i}}else try{n.Message=JSON.stringify(t)}catch(o){}return n}function d(e,t){return e?(t.Severity||(t=h(t)),e.setProgressResult(t),t):void window.console.log(t)}function u(e,t,n,i){if(window.TextDecoder)n(new TextDecoder(t).decode(e));else{var r="text/plain; charset="+t,o=new Blob([e],{type:r}),s=new FileReader;s.onload=function(){n(s.result)}.bind(this),s.onerror=i,s.readAsText(o,t)}}function p(e){return!e||e===g}function f(e){r.attach(this),this.serviceRegistry=e.serviceRegistry,this.statusService=e.statusService,this.fileClient=e.fileClient,this.progressService=e.progressService,this.contentTypeRegistry=e.contentTypeRegistry,this.selection=e.selection,this._input=this._title="",this.fileClient&&this.fileClient.addEventListener("Changed",function(e){if((!this._fileMetadata||!this._fileMetadata._saving)&&e&&e.modified){var t=this.getFileMetadata();t&&t.Location&&e.modified.some(function(e){return t.Location===e})&&this.load(null,!0)}}.bind(this))}c.prototype={_resetTimer:function(){var e=this._document.defaultView||this._document.parentWindow;this._timer&&(e.clearTimeout(this._timer),this._timer=null),-1!==this._timeout&&(this._timer=e.setTimeout(function(){this.onIdle({type:"Idle"}),this._timer=null,this._resetTimer()}.bind(this),this._timeout))},onIdle:function(e){return this.dispatchEvent(e)},setTimeout:function(e){this._timeout=e,this._resetTimer()}};var g="UTF-8";return o.mixin(f.prototype,{_maybeLoadWorkspace:function(e){var t=this.fileClient,n=e;return n.indexOf("?")&&(n=n.split("?")[0]),n===t.fileServiceRootURL(n)?t.loadWorkspace(n).then(function(e){return e.Location}):(new i).resolve(e)},_read:function(e){var n=this.cachedMetadata||t.getClickedItem();if(n&&n.Location===e&&n.Parents&&n.Attributes&&n.ETag)return(new i).resolve(n);var r=this.fileClient,o=Array.prototype.slice.call(arguments,1);return this._maybeLoadWorkspace(e).then(function(e){return r.read.apply(r,[e].concat(o))})},_isSameParent:function(e){if(this._lastMetadata&&this._lastMetadata.Parents&&this._lastMetadata.Parents.length>0){var t=e.substring(0,e.lastIndexOf("/",e.length-("/"===e[e.length-1]?2:1))+1);return this._lastMetadata.Parents[0].Location===t}return!1},load:function(t,r){var s=this.getInput();if(s){var l=this.fileClient,c=this._parsedLocation.resource,h=this.progressService,f=function(e,t,i){return h?h.progress(e,n.formatMessage(t,i)):e},g=this.getEditor();if(this._fileMetadata)this._fileMetadata._saving||this._fileMetadata.Directory||this.getReadOnly()||f(l.read(c,!0),e.ReadingMetadata,s).then(function(t){this._fileMetadata&&!this._fileMetadata._saving&&this._fileMetadata.Location===t.Location&&this._fileMetadata.ETag!==t.ETag&&(this._fileMetadata=o.mixin(this._fileMetadata,t),(!g.isDirty()||window.confirm(e.loadOutOfSync))&&f(l.read(c),e.Reading,s).then(function(e){g.setInput(s,null,e,null,r),this._clearUnsavedChanges()}.bind(this)))}.bind(this));else{var m=window.setTimeout(function(){m=null,this.reportStatus(n.formatMessage(e.Fetching,s))}.bind(this),800),v=function(){this.reportStatus(""),m&&window.clearTimeout(m)}.bind(this),_=function(e){v();var t=null;this.serviceRegistry?t=this.serviceRegistry.getService("orion.page.message"):this.statusService&&(t=this.statusService),d(t,e),this._setNoInput(!0)}.bind(this);this._acceptPatch=null;var y=c;if(!this._isSameParent(y)){var x=new URL(y);x.query.set("tree",localStorage.useCompressedTree?"compressed":"decorated"),y=x.href}f(this._read(y,!0),e.ReadingMetadata,c).then(function(r){if(r)if(r.Directory)i.when(r.Children||f(l.fetchChildren(r.ChildrenLocation),e.Reading,s),function(e){v(),r.Children=e,this._setInputContents(this._parsedLocation,s,e,r)}.bind(this),_);else{t=t||this._charset;var o=this._isText(r);if(p(t)&&o){var h,d=new a.TextModelFactory;"function"==typeof d.getDefaultReadOptions&&(h=d.getDefaultReadOptions()),f(l.read(c,!1,!0,h),e.Reading,s).then(function(e){v(),"string"!=typeof e&&(this._acceptPatch=e.acceptPatch,e=e.result),this._setInputContents(this._parsedLocation,s,e,r)}.bind(this),_)}else f(l._getService(c).readBlob(c),e.Reading,s).then(function(e){return v(),o?void u(e,t,function(e){this._setInputContents(this._parsedLocation,s,e,r)}.bind(this),_):void this._setInputContents(this._parsedLocation,s,e,r)}.bind(this),_)}else _({responseText:n.formatMessage(e.ReadingMetadataError,c)})}.bind(this),_)}}},processParameters:function(e){var t=this.getEditor();return t&&t.processParameters?t.processParameters(e):!1},getAutoLoadEnabled:function(){return this._autoLoadEnabled},getAutoSaveEnabled:function(){return this._autoSaveEnabled},getEditor:function(){return this.editor},getEncodingCharset:function(){return this._charset||g},getInput:function(){return this._input},getLocation:function(){return this._location},getTitle:function(){return this._title},getFileMetadata:function(){return this._fileMetadata},isSaveEnabled:function(){return!this.getReadOnly()},getReadOnly:function(){var e=this._fileMetadata;return this._readonly||!e||e.Attributes&&e.Attributes.ReadOnly},getContentType:function(){return this._contentType},onFocus:function(){return this._autoSaveEnabled&&this._errorSaving?void this.save():void(this._autoLoadEnabled&&this._fileMetadata&&this.load())},reportStatus:function(e){this.statusReporter?this.statusReporter(e):this.editor&&this.editor.reportStatus(e)},save:function(t){function r(e){var t=a._savingDeferred;return t.resolve(e),a._savingDeferred=null,a._saving=!1,t}function o(n){return p===c.getInput()&&(a.ETag=n.ETag,h.setInput(p,null,f,!0)),c.reportStatus(""),u&&E&&E.setProgressResult({Message:e.Saved,Severity:"Normal"}),c.postSave&&c.postSave(t),r(n)}function s(e){c.reportStatus("");var t=d(E,e);return l.logEvent("status","exception",(c._autoSaveActive?"Auto-save: ":"Save: ")+t.Message),c._errorSaving=!0,r()}var a=this.getFileMetadata();if(!a)return(new i).reject();if(a._saving)return a._savingDeferred;var c=this;a._savingDeferred=new i,a._saving=!0;var h=this.getEditor();if(!h||!h.isDirty()||this.getReadOnly())return r();var u=this._errorSaving,p=this.getInput();this.reportStatus(e["Saving..."]),this._saveEventLogged||(this._logMetrics("save"),this._saveEventLogged=!0),this.dispatchEvent({type:"Saving",inputManager:this}),h.markClean();var f=h.getText(),g=f;if(this._getSaveDiffsEnabled()&&!this._errorSaving){var m=this._getUnsavedChanges();if(m){for(var v=0,_=0;_<m.length;_++)v+=m[_].text.length;f.length>v&&(g={diff:m})}}this._clearUnsavedChanges(),this._errorSaving=!1;var y=a.ETag,x={ETag:y},w=this._parsedLocation.resource,b=this.fileClient.write(w,g,x),C=this.progressService,E=null;return this.serviceRegistry&&(E=this.serviceRegistry.getService("orion.page.message")),C&&(b=C.progress(b,n.formatMessage(e.savingFile,p))),b.then(o,function(t){if(412===t.status){var i=window.confirm(e.saveOutOfSync);
if(!i)return r();var a=c.fileClient.write(w,f);C&&(a=C.progress(a,n.formatMessage(e.savingFile,p))),a.then(o,s)}else s(t)}),a._savingDeferred},setAutoLoadEnabled:function(e){this._autoLoadEnabled=e},setAutoSaveTimeout:function(e){if(this._autoSaveEnabled=-1!==e,this._autoSaveActive=!1,this._idle)this._idle.setTimeout(e);else{var t={document:document,timeout:e};this._idle=new c(t),this._idle.addEventListener("Idle",function(){this._errorSaving||(this._autoSaveActive=!0,this.save().then(function(){this._autoSaveActive=!1}))}.bind(this))}},setContentType:function(e){this._contentType=e},setEncodingCharset:function(e){this._charset=e},setInput:function(t){function n(){u.session&&u.session.save()}if(!this._ignoreInput&&(t||(t=s.hash()),"string"==typeof t)){var i=this.getEditor();t&&"#"!==t[0]&&(t="#"+t);var r=s.matchResourceParameters(t),o=this._parsedLocation||{},a=o.encoding!==r.encoding;if(i&&i.isDirty()){var l=this._location,c=o.resource,h=r.resource;if(c!==h||a)if(this._autoSaveEnabled)this.save();else if(!window.confirm(e.confirmUnsavedChanges))return void(window.location.hash=l)}var d=i&&o.editor!==r.editor;this._location=t,this._parsedLocation=r,this._ignoreInput=!0,this.selection&&this.selection.setSelections(t),this._ignoreInput=!1;var u={type:"InputChanging",input:r};this.dispatchEvent(u);var p=r.resource;if(u.metadata){n(),this.reportStatus(""),this._input=p;var f=u.metadata;return void this._setInputContents(r,p,null,f)}p?p!==this._input||a?(n(),this._input=p,this._readonly=!1,this._lastMetadata=this._fileMetadata,this._fileMetadata=null,this.load(r.encoding)):d?(this.reportStatus(""),this._setInputContents(r,p,null,this._fileMetadata,this._isText(this._fileMetadata))):this.processParameters(r)||u.session&&u.session.apply(!0):(n(),this._setNoInput(!0))}},setTitle:function(e){var t=e.lastIndexOf("/"),n=e;-1!==t&&(n=n.substring(t+1)),this._title=n},setSaveDiffsEnabled:function(e){this._saveDiffsEnabled=e;var t=this.editor;t&&!t.isDirty()&&this._clearUnsavedChanges()},_getSaveDiffsEnabled:function(){return this._saveDiffsEnabled&&this._acceptPatch&&-1!==this._acceptPatch.indexOf("application/json-patch")},_logMetrics:function(e){var t="(none)",n=this.getContentType(),i=this.getFileMetadata();if(n)t=n.id;else if(i){var r=i.Name,o=r.lastIndexOf(".");if(o>=0)t="unregistered: "+r.substring(o);else switch(r){case"AUTHORS":case"config":case"LICENSE":case"make":case"Makefile":t="unregistered: "+r}}l.logEvent("editor",e,t,null,{path:i.Location})},_unknownContentTypeAsText:function(){return!0},_isText:function(e){var t=this.contentTypeRegistry.getFileContentType(e);if(!t)return this._unknownContentTypeAsText();var n=this.contentTypeRegistry.getContentType("text/plain");return this.contentTypeRegistry.isExtensionOf(t,n)},_setNoInput:function(e){return e?void this.fileClient.loadWorkspace("").then(function(e){this._input=e.ChildrenLocation,this._setInputContents(e.ChildrenLocation,null,e,e)}.bind(this)):(this._input=this._title=this._fileMetadata=null,this.setContentType(null),void this.dispatchEvent({type:"InputChanged",input:null}))},_setInputContents:function(e,t,n,i,r){var o,s=!1;i?(this._fileMetadata=i,this.setTitle(i.Location||String(i)),this.setContentType(this.contentTypeRegistry.getFileContentType(i)),o=i.Name,s=i.Directory):(this._fileMetadata=null,this.setTitle(t),this.setContentType(this.contentTypeRegistry.getFilenameContentType(this.getTitle())),o=this.getTitle());var a=this.getEditor();this._focusListener&&(a&&a.getTextView&&a.getTextView()&&a.getTextView().removeEventListener("Focus",this._focusListener),this._focusListener=null);var c={type:"InputChanged",input:e,name:o,title:t,contentType:this.getContentType(),metadata:i,location:window.location,contents:n};if(this._logMetrics("open"),this.dispatchEvent(c),this.editor=a=c.editor,!s){if(r||a.setInput(t,null,n),a&&a.getTextView&&a.getTextView()){var h=a.getTextView();h.addEventListener("Focus",this._focusListener=this.onFocus.bind(this)),a.getModel()&&"function"==typeof a.getModel().setModelData&&a.getModel().setModelData({metadata:i})}this._clearUnsavedChanges(),this.processParameters(e)||c.session&&c.session.apply()}this._saveEventLogged=!1,l.logPageLoadTiming("interactive",window.location.pathname)},_getUnsavedChanges:function(){var e=this.editor;return e&&e.getUndoStack&&e.getUndoStack()?e.getUndoStack()._unsavedChanges:null},_clearUnsavedChanges:function(){var e=this.editor;e&&e.getUndoStack&&e.getUndoStack()&&(e.getUndoStack()._unsavedChanges=this._getSaveDiffsEnabled()?[]:null)}}),{handleError:d,InputManager:f}}),n("orion/editor/keyModes",["orion/keyBinding","orion/util"],function(e,t){function n(e){e&&(this._view=e,this._keyBindings=this.createKeyBindings(),this._keyBindingIndex=0)}function i(e){n.call(this,e)}return n.prototype={createKeyBindings:function(){return[]},getKeyBindings:function(e){for(var t=[],n=this._keyBindings,i=0;i<n.length;i++)n[i].actionID===e&&t.push(n[i].keyBinding);return t},getView:function(){return this._view},isActive:function(){return-1!==this._view.getKeyModes().indexOf(this)},match:function(e){if("keydown"===e.type)switch(e.keyCode){case 16:case 17:case 18:case 91:return}for(var t=this._keyBindingIndex,n=this._matchingKeyBindings||this._keyBindings,i=[],r=0;r<n.length;r++){var o=n[r],s=o.keyBinding,a=s.match(e,t);if(a===!0)return this._keyBindingIndex=0,this._matchingKeyBindings=null,o.actionID;"number"==typeof a&&i.push(o)}return 0!==i.length?(this._keyBindingIndex++,this._matchingKeyBindings=i,"noop"):(this._keyBindingIndex=0,void(this._matchingKeyBindings=null))},setKeyBinding:function(e,t){for(var n=this._keyBindings,i=0;i<n.length;i++){var r=n[i];if(r.keyBinding.equals(e))return void(t?r.actionID=t:r.predefined?r.actionID="noop":n.splice(i,1))}t&&n.push({keyBinding:e,actionID:t})},setView:function(e){this._view=e}},i.prototype=new n,i.prototype.createKeyBindings=function(){var n=e.KeyBinding,i=[];if(i.push({actionID:"lineUp",keyBinding:new n(38),predefined:!0}),i.push({actionID:"lineDown",keyBinding:new n(40),predefined:!0}),i.push({actionID:"charPrevious",keyBinding:new n(37),predefined:!0}),i.push({actionID:"charNext",keyBinding:new n(39),predefined:!0}),t.isMac?(i.push({actionID:"scrollPageUp",keyBinding:new n(33),predefined:!0}),i.push({actionID:"scrollPageDown",keyBinding:new n(34),predefined:!0}),i.push({actionID:"pageUp",keyBinding:new n(33,null,null,!0),predefined:!0}),i.push({actionID:"pageDown",keyBinding:new n(34,null,null,!0),predefined:!0}),i.push({actionID:"lineStart",keyBinding:new n(37,!0),predefined:!0}),i.push({actionID:"lineEnd",keyBinding:new n(39,!0),predefined:!0}),i.push({actionID:"wordPrevious",keyBinding:new n(37,null,null,!0),predefined:!0}),i.push({actionID:"wordNext",keyBinding:new n(39,null,null,!0),predefined:!0}),i.push({actionID:"scrollTextStart",keyBinding:new n(36),predefined:!0}),i.push({actionID:"scrollTextEnd",keyBinding:new n(35),predefined:!0}),i.push({actionID:"textStart",keyBinding:new n(38,!0),predefined:!0}),i.push({actionID:"textEnd",keyBinding:new n(40,!0),predefined:!0}),i.push({actionID:"scrollPageUp",keyBinding:new n(38,null,null,null,!0),predefined:!0}),i.push({actionID:"scrollPageDown",keyBinding:new n(40,null,null,null,!0),predefined:!0}),i.push({actionID:"lineStart",keyBinding:new n(37,null,null,null,!0),predefined:!0}),i.push({actionID:"lineEnd",keyBinding:new n(39,null,null,null,!0),predefined:!0}),i.push({actionID:"lineStart",keyBinding:new n(38,null,null,!0),predefined:!0}),i.push({actionID:"lineEnd",keyBinding:new n(40,null,null,!0),predefined:!0})):(i.push({actionID:"pageUp",keyBinding:new n(33),predefined:!0}),i.push({actionID:"pageDown",keyBinding:new n(34),predefined:!0}),i.push({actionID:"lineStart",keyBinding:new n(36),predefined:!0}),i.push({actionID:"lineEnd",keyBinding:new n(35),predefined:!0}),i.push({actionID:"wordPrevious",keyBinding:new n(37,!0),predefined:!0}),i.push({actionID:"wordNext",keyBinding:new n(39,!0),predefined:!0}),i.push({actionID:"textStart",keyBinding:new n(36,!0),predefined:!0}),i.push({actionID:"textEnd",keyBinding:new n(35,!0),predefined:!0})),t.isFirefox&&t.isLinux&&(i.push({actionID:"lineUp",keyBinding:new n(38,!0),predefined:!0}),i.push({actionID:"lineDown",keyBinding:new n(40,!0),predefined:!0})),t.isWindows&&(i.push({actionID:"scrollLineUp",keyBinding:new n(38,!0),predefined:!0}),i.push({actionID:"scrollLineDown",keyBinding:new n(40,!0),predefined:!0})),i.push({actionID:"selectLineUp",keyBinding:new n(38,null,!0),predefined:!0}),i.push({actionID:"selectLineDown",keyBinding:new n(40,null,!0),predefined:!0}),i.push({actionID:"selectCharPrevious",keyBinding:new n(37,null,!0),predefined:!0}),i.push({actionID:"selectCharNext",keyBinding:new n(39,null,!0),predefined:!0}),i.push({actionID:"selectPageUp",keyBinding:new n(33,null,!0),predefined:!0}),i.push({actionID:"selectPageDown",keyBinding:new n(34,null,!0),predefined:!0}),t.isMac?(i.push({actionID:"selectLineStart",keyBinding:new n(37,!0,!0),predefined:!0}),i.push({actionID:"selectLineEnd",keyBinding:new n(39,!0,!0),predefined:!0}),i.push({actionID:"selectWordPrevious",keyBinding:new n(37,null,!0,!0),predefined:!0}),i.push({actionID:"selectWordNext",keyBinding:new n(39,null,!0,!0),predefined:!0}),i.push({actionID:"selectTextStart",keyBinding:new n(36,null,!0),predefined:!0}),i.push({actionID:"selectTextEnd",keyBinding:new n(35,null,!0),predefined:!0}),i.push({actionID:"selectTextStart",keyBinding:new n(38,!0,!0),predefined:!0}),i.push({actionID:"selectTextEnd",keyBinding:new n(40,!0,!0),predefined:!0}),i.push({actionID:"selectLineStart",keyBinding:new n(37,null,!0,null,!0),predefined:!0}),i.push({actionID:"selectLineEnd",keyBinding:new n(39,null,!0,null,!0),predefined:!0}),i.push({actionID:"selectLineStart",keyBinding:new n(38,null,!0,!0),predefined:!0}),i.push({actionID:"selectLineEnd",keyBinding:new n(40,null,!0,!0),predefined:!0})):(t.isLinux&&(i.push({actionID:"selectWholeLineUp",keyBinding:new n(38,!0,!0),predefined:!0}),i.push({actionID:"selectWholeLineDown",keyBinding:new n(40,!0,!0),predefined:!0})),i.push({actionID:"selectLineStart",keyBinding:new n(36,null,!0),predefined:!0}),i.push({actionID:"selectLineEnd",keyBinding:new n(35,null,!0),predefined:!0}),i.push({actionID:"selectWordPrevious",keyBinding:new n(37,!0,!0),predefined:!0}),i.push({actionID:"selectWordNext",keyBinding:new n(39,!0,!0),predefined:!0}),i.push({actionID:"selectTextStart",keyBinding:new n(36,!0,!0),predefined:!0}),i.push({actionID:"selectTextEnd",keyBinding:new n(35,!0,!0),predefined:!0})),i.push({actionID:"undo",keyBinding:new e.KeyBinding("z",!0),predefined:!0}),t.isMac?i.push({actionID:"redo",keyBinding:new e.KeyBinding("z",!0,!0),predefined:!0}):i.push({actionID:"redo",keyBinding:new e.KeyBinding("y",!0),predefined:!0}),i.push({actionID:"deletePrevious",keyBinding:new n(8),predefined:!0}),i.push({actionID:"deletePrevious",keyBinding:new n(8,null,!0),predefined:!0}),i.push({actionID:"deleteNext",keyBinding:new n(46),predefined:!0}),i.push({actionID:"deleteWordPrevious",keyBinding:new n(8,!0),predefined:!0}),i.push({actionID:"deleteWordPrevious",keyBinding:new n(8,!0,!0),predefined:!0}),i.push({actionID:"deleteWordNext",keyBinding:new n(46,!0),predefined:!0}),i.push({actionID:"tab",keyBinding:new n(9),predefined:!0}),i.push({actionID:"shiftTab",keyBinding:new n(9,null,!0),predefined:!0}),i.push({actionID:"enter",keyBinding:new n(13),predefined:!0}),i.push({actionID:"enter",keyBinding:new n(13,null,!0),predefined:!0}),i.push({actionID:"escape",keyBinding:new n(27),predefined:!0}),i.push({actionID:"selectAll",keyBinding:new n("a",!0),predefined:!0}),i.push({actionID:"toggleTabMode",keyBinding:new n("m",!0),predefined:!0}),t.isMac&&(i.push({actionID:"deleteNext",keyBinding:new n(46,null,!0),predefined:!0}),i.push({actionID:"deleteWordPrevious",keyBinding:new n(8,null,null,!0),predefined:!0}),i.push({actionID:"deleteWordNext",keyBinding:new n(46,null,null,!0),predefined:!0})),i.push({actionID:"toggleWrapMode",keyBinding:new e.KeyBinding("w",!0,!1,!0)}),i.push({actionID:"toggleOverwriteMode",keyBinding:new e.KeyBinding(45)}),!t.isFirefox){var r=t.isMac&&t.isChrome;i.push({actionID:"noop",keyBinding:new n("u",!r,!1,!1,r),predefined:!0}),i.push({actionID:"noop",keyBinding:new n("i",!r,!1,!1,r),predefined:!0}),i.push({actionID:"noop",keyBinding:new n("b",!r,!1,!1,r),predefined:!0})}return t.isFirefox&&(i.push({actionID:"copy",keyBinding:new n(45,!0),predefined:!0}),i.push({actionID:"paste",keyBinding:new n(45,null,!0),predefined:!0}),i.push({actionID:"cut",keyBinding:new n(46,null,!0),predefined:!0})),t.isMac&&(i.push({actionID:"lineStart",keyBinding:new n("a",!1,!1,!1,!0),predefined:!0}),i.push({actionID:"lineEnd",keyBinding:new n("e",!1,!1,!1,!0),predefined:!0}),i.push({actionID:"lineUp",keyBinding:new n("p",!1,!1,!1,!0),predefined:!0}),i.push({actionID:"lineDown",keyBinding:new n("n",!1,!1,!1,!0),predefined:!0}),i.push({actionID:"charPrevious",keyBinding:new n("b",!1,!1,!1,!0),predefined:!0}),i.push({actionID:"charNext",keyBinding:new n("f",!1,!1,!1,!0),predefined:!0}),i.push({actionID:"deletePrevious",keyBinding:new n("h",!1,!1,!1,!0),predefined:!0}),i.push({actionID:"deleteNext",keyBinding:new n("d",!1,!1,!1,!0),predefined:!0}),i.push({actionID:"deleteLineEnd",keyBinding:new n("k",!1,!1,!1,!0),predefined:!0}),t.isFirefox?(i.push({actionID:"scrollPageDown",keyBinding:new n("v",!1,!1,!1,!0),predefined:!0}),i.push({actionID:"deleteLineStart",keyBinding:new n("u",!1,!1,!1,!0),predefined:!0}),i.push({actionID:"deleteWordPrevious",keyBinding:new n("w",!1,!1,!1,!0),predefined:!0})):(i.push({actionID:"pageDown",keyBinding:new n("v",!1,!1,!1,!0),predefined:!0}),i.push({actionID:"centerLine",keyBinding:new n("l",!1,!1,!1,!0),predefined:!0}),i.push({actionID:"enterNoCursor",keyBinding:new n("o",!1,!1,!1,!0),predefined:!0}))),i},{KeyMode:n,DefaultKeyMode:i}}),n("orion/editor/textTheme",["require","orion/editor/eventTarget","orion/util"],function(e,t,n){function i(e){e=e||{},this._document=e.document||document}var r="orion-theme-",o={};return i.getTheme=function(e){e=e||"default";var t=o[e];return t||(t=o[e]=new i),t},i.prototype={getThemeClass:function(){return this._themeClass},setThemeClass:function(e,t){var n=this,i=n._themeClass;n._themeClass=e,this._load(e,t,function(){n.onThemeChanged({type:"ThemeChanged",oldValue:i,newValue:n.getThemeClass()})})},onThemeChanged:function(e){return this.dispatchEvent(e)},buildStyleSheet:function(e,t){var n=function(e){return e.replace(this._capitalRegEx,function(e){return"-"+e}.bind(this)).toLowerCase()}.bind(this),i=function(e,t,r,o,s){var a=[],l=Object.keys(e);l.forEach(function(l){var c=e[l];"string"==typeof c?a.push("	"+n(l)+": "+c+";"):i(c,r===l?t:t+(o?" .":".")+l,r,!1,s)}),a.length&&(s.push(t+(o?".textview":"")+" {"),s.push.apply(s,a),s.push("}"))},r=[""];return i(t.styles,"."+e,t.className,!0,r),r.join("\n")},_createStyle:function(e,t,i,o){var s=this._document,a=r+e,l=s.getElementById(a);if(l){if(o||l.firstChild.data===t)return;l.removeChild(l.firstChild),l.appendChild(s.createTextNode(t))}else{o?(l=n.createElement(s,"link"),l.rel="stylesheet",l.type="text/css",l.href=t,l.addEventListener("load",function(){i()})):(l=n.createElement(s,"style"),l.appendChild(s.createTextNode(t))),l.id=a;var c=s.getElementsByTagName("head")[0]||s.documentElement;c.appendChild(l)}o||i()},_load:function(t,n,i){if(!t)return void i();if("string"==typeof n)return void this._createStyle(t,n,i);var r=n.href,o=".css";if(r.substring(r.length-o.length)!==o&&(r+=o),/^\//.test(r)||/[a-zA-Z0-9]+:\/\//i.test(r)||!e.toUrl)this._createStyle(t,r,i,!0);else{var s=this;e(["text!"+r],function(e){s._createStyle(t,e,i,!1)})}},_capitalRegEx:/[A-Z]/g},t.EventTarget.addMixin(i.prototype),{TextTheme:i}}),n("orion/editor/util",[],function(){function e(e,t,n,i){"function"==typeof e.addEventListener?e.addEventListener(t,n,i===!0):e.attachEvent("on"+t,n)}function t(e,t,n,i){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,i===!0):e.detachEvent("on"+t,n)}function n(e,t){if(!t)return!1;if(!e.compareDocumentPosition){for(var n=t;n;){if(e===n)return!0;n=n.parentNode}return!1}return e===t||0!==(16&e.compareDocumentPosition(t))}function i(e,t,n){var i;if(e&&(i=e.style[t],!i))if(e.currentStyle){for(var r=0,o=t;-1!==(r=o.indexOf("-",r));)o=o.substring(0,r)+o.substring(r+1,r+2).toUpperCase()+o.substring(r+2);i=e.currentStyle[o]}else{var s=e.ownerDocument.defaultView.getComputedStyle(e,null);i=s?s.getPropertyValue(t):null}return i||n}var r=function(){function e(e){this.options=e}return e.prototype.play=function(){function e(){c=-1===c?(new Date).getTime():c;var e=(new Date).getTime(),i=(e-c)/n;if(1>i){var d=r(i);t=s+d*l,o(t)}else o(a),h.stop()}var t,n="number"==typeof this.options.duration?this.options.duration:350,i="number"==typeof this.options.rate?this.options.rate:20,r=this.options.easing||this.defaultEasing,o=this.options.onAnimate||function(){},s=this.options.curve[0],a=this.options.curve[1],l=a-s,c=-1,h=this;this.interval=this.options.window.setInterval(e,i)},e.prototype.stop=function(){this.options.window.clearInterval(this.interval);var e=this.options.onEnd||function(){};e()},e.prototype.defaultEasing=function(e){return Math.sin(e*(Math.PI/2))},e}();return{contains:n,getNodeStyle:i,addEventListener:e,removeEventListener:t,Animation:r}}),n("orion/bidiUtils",["orion/util"],function(e){function t(){var e=localStorage.getItem(c);return e&&"true"==e?!0:!1}function n(){var e=localStorage.getItem(h);return!e||"rtl"!=e&&"ltr"!=e&&"auto"!=e?"ltr":e}function i(i){return f=n(),t()?"auto"==f&&e.isIE?o(i):f:""}function r(e){if(t()&&e.trim()){f=n();var i="auto"==f?o(e):f;return("ltr"==i?d:p)+e+u}return e}function o(e){var t=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(e);return t?t[0]<="z"?"ltr":"rtl":"ltr"}function s(e){if(!e._hasBidiEventListeners){e._hasBidiEventListeners=!0;for(var t=["keyup","cut","paste"],n=0;n<t.length;++n)e.addEventListener(t[n],a.bind(this),!1)}}function a(e){var t=e.target;t&&(t.dir=i(t.value||t.textContent))}function l(n){t()&&n&&(n.dir=i(n.value||n.textContent),e.isIE&&s(n))}var c="/orion/preferences/bidi/bidiEnabled",h="/orion/preferences/bidi/bidiLayout",d="‪",u="‬",p="‫",f=(t(),n());return{bidiEnabled:t,getTextDirection:i,enforceTextDirWithUcc:r,initInputField:l}}),n("orion/editor/textView",["i18n!orion/editor/nls/messages","orion/editor/textModel","orion/editor/keyModes","orion/editor/eventTarget","orion/editor/textTheme","orion/editor/util","orion/util","orion/bidiUtils","orion/metrics"],function(e,t,n,i,r,o,s,a,l){function c(e){return e.defaultView||e.parentWindow}function h(e){return new Array(e)}function d(e,t,n){if(n){t.className="";for(var i=t.attributes,r=i.length;r-- >0;)(!s.isIE||s.isIE>=9||s.isIE<9&&i[r].specified)&&t.removeAttribute(i[r].name)}if(e){e.styleClass&&(t.className=e.styleClass);var o=e.style;if(o)for(var a in o)o.hasOwnProperty(a)&&(t.style[a]=o[a]);var l=e.attributes;if(l)for(var c in l)l.hasOwnProperty(c)&&t.setAttribute(c,l[c])}}function u(e){return e instanceof Array?e.slice(0):e}function p(e,t){if(!e)return t;if(!t)return e;for(var n in t)t.hasOwnProperty(n)&&(e.hasOwnProperty(n)||(e[n]=t[n]));return e}function f(e,t){if(e===t)return!0;if(e&&!t||!e&&t)return!1;if(e&&e.constructor===String||t&&t.constructor===String)return!1;if(e instanceof Array||t instanceof Array){if(!(e instanceof Array&&t instanceof Array))return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!f(e[n],t[n]))return!1;return!0}if(!(e instanceof Object&&t instanceof Object))return!1;var i;for(i in e)if(e.hasOwnProperty(i)){if(!t.hasOwnProperty(i))return!1;if(!f(e[i],t[i]))return!1}for(i in t)if(!e.hasOwnProperty(i))return!1;return!0}function g(e,t,n){for(var i=0,r=0,o=0,s=e.length;s>o;){-1!==i&&o>=i&&(i=e.indexOf("\r",o)),-1!==r&&o>=r&&(r=e.indexOf("\n",o));var a,l=o;if(-1===r&&-1===i){t(e.substring(o));break}-1!==i&&-1!==r?i+1===r?(a=i,o=r+1):(a=r>i?i:r,o=(r>i?i:r)+1):-1!==i?(a=i,o=i+1):(a=r,o=r+1),t(e.substring(l,a)),n?n():o===s&&t("")}}function m(e){var t,n,i,r,o=c(e.ownerDocument);if(o.getComputedStyle){var s=o.getComputedStyle(e,null);t=s.getPropertyValue("border-left-width"),n=s.getPropertyValue("border-top-width"),i=s.getPropertyValue("border-right-width"),r=s.getPropertyValue("border-bottom-width")}else e.currentStyle&&(t=e.currentStyle.borderLeftWidth,n=e.currentStyle.borderTopWidth,i=e.currentStyle.borderRightWidth,r=e.currentStyle.borderBottomWidth);return{left:parseInt(t,10)||0,top:parseInt(n,10)||0,right:parseInt(i,10)||0,bottom:parseInt(r,10)||0}}function v(e){var t,n,i,r,o=c(e.ownerDocument);if(o.getComputedStyle){var s=o.getComputedStyle(e,null);t=s.getPropertyValue("padding-left"),n=s.getPropertyValue("padding-top"),i=s.getPropertyValue("padding-right"),r=s.getPropertyValue("padding-bottom")}else e.currentStyle&&(t=e.currentStyle.paddingLeft,n=e.currentStyle.paddingTop,i=e.currentStyle.paddingRight,r=e.currentStyle.paddingBottom);return{left:parseInt(t,10)||0,top:parseInt(n,10)||0,right:parseInt(i,10)||0,bottom:parseInt(r,10)||0}}function _(e){var t=e._trim;if(!t){t=v(e);var n=m(e);t.left+=n.left,t.top+=n.top,t.right+=n.right,t.bottom+=n.bottom,e._trim=t}return t}function y(e,t,n,i){function r(t){if(t.animationName===a){var n=t.target;"function"==typeof n.__DOMReady&&c(e).setTimeout(function(){n.__DOMReady()},0)}}function o(e,t){for(var n=["","-webkit-","-moz-","-ms-","-o-"],i="",r="body ."+e+" {\n",o=0;o<n.length;o++)i+="@"+n[o]+"keyframes "+t+" {\nfrom { opacity: 0.99; }\nto { opacity: 1; }\n}\n",r+=n[o]+"animation-duration: 0.001s;\n"+n[o]+"animation-name: "+t+";\n";return r+="}",i+r}n="_"+n+"DOMReady",t.className=t.className?t.className+" "+n:n,t.__DOMReady=i;var s=n+"Style";if(!e.getElementById(s)){var a=n+"Animation";T(e,"animationstart",r,!1),T(e,"MSAnimationStart",r,!1),T(e,"webkitAnimationStart",r,!1);var l=e.createElement("style");l.id=s;var h=e.getElementsByTagName("head")[0]||e.documentElement;l.appendChild(e.createTextNode(o(n,a))),h.insertBefore(l,h.firstChild)}}function x(e,t,n){this.start=e,this.end=t,this.caret=n,this._columnX=-1}function w(e){this._view=e,this._divs=[];for(var t=e._clipDiv||e._rootDiv,n=0;3>n;n++){var i=e._createSelectionDiv();t.appendChild(i),this._divs.push(i)}}function b(e){this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom}function C(e,t,n){this.view=e,this.lineIndex=t,this._lineDiv=n}function E(e){this._init(e||{})}var T=o.addEventListener,S=o.removeEventListener,k=o.Animation;return x.compare=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0},x.editing=function(e,t){var n;if(t){for(n=e.length-1;n>=0;n--)if(e[n]._editing)return e[n];return e[e.length-1]}for(n=0;n<e.length;n++)if(e[n]._editing)return e[n];return e[0]},x.convert=function(e){return 1===e.length?e[0]:e},x.contains=function(e,t){return e.some(function(e){return e.contains(t)})},x.merge=function(e){if(e.length<=1)return e;e.sort(function(e,t){return e.start-t.start});for(var t=[],n=e[0],i=1;i<e.length;i++)e[i].start>=n.end||n._editing||e[i]._editing?(t.push(n),n=e[i]):n.end=Math.max(n.end,e[i].end);return t.push(n),t},x.prototype={clone:function(){var e=new x(this.start,this.end,this.caret);return e._columnX=this._columnX,e._editing=this._editing,e._docX=this._docX,e},contains:function(e){return this.start<=e&&e<this.end?!0:!1},collapse:function(){this.caret?this.end=this.start:this.start=this.end},extend:function(e){if(this.caret?this.start=e:this.end=e,this.start>this.end){var t=this.start;this.start=this.end,this.end=t,this.caret=!this.caret}},setCaret:function(e){this.start=e,this.end=e,this.caret=!1},getCaret:function(){return this.caret?this.start:this.end},getAnchor:function(){return this.caret?this.end:this.start},getOrientedSelection:function(){return{start:this.getAnchor(),end:this.getCaret()}},toString:function(){return"start="+this.start+" end="+this.end+(this.caret?" caret is at start":" caret is at end")},isEmpty:function(){return this.start===this.end},equals:function(e){return this.caret===e.caret&&this.start===e.start&&this.end===e.end&&this._editing===e._editing}},w.prototype={destroy:function(){this._divs&&(this._divs.forEach(function(e){e.parentNode.removeChild(e)}),this._divs=null)},setPrimary:function(e){this.primary=e},update:function(){var e,t=this._view,n=this.primary,i=t._hasFocus,r=t._cursorVisible,o=!this.primary&&this._selection&&this._selection.isEmpty();e=o?"textviewSelectionCaret":i?"textviewSelection":"textviewSelectionUnfocused",this._divs[0].style.visibility=o&&r&&i||!o?"visible":"hidden",this._divs[0].style.zIndex=r&&o?"2":"0",this._divs.forEach(function(t){t.className=e,s.isWebkit<537.36&&n&&(t.style.background=i?"transparent":"")})},setSelection:function(e){this._selection=e,this.update();var t=this._view,n=t._model,i=n.getLineAtOffset(e.start),r=n.getLineAtOffset(e.end),o=t._getLineNext();if(o){var s,a,l,c,h=t._getLinePrevious();i<o.lineIndex?(s=o,l=n.getLineStart(o.lineIndex)):i>h.lineIndex?(s=h,l=n.getLineStart(h.lineIndex)):(s=t._getLineNode(i),l=e.start),r<o.lineIndex?(a=o,c=n.getLineStart(o.lineIndex)):r>h.lineIndex?(a=h,c=n.getLineStart(h.lineIndex)):(a=t._getLineNode(r),c=e.end),this._setDOMSelection(s,l,a,c,e.caret)}},_setDOMSelection:function(e,t,n,i,r){if(this._setDOMFullSelection(e,t,n,i),this.primary){var o=this._view,a=e._line.getNodeOffset(t),l=n._line.getNodeOffset(i);if(a.node&&l.node){var c,h=o._getWindow(),d=o._parent.ownerDocument;if(h.getSelection){var u=h.getSelection();if(c=d.createRange(),c.setStart(a.node,a.offset),c.setEnd(l.node,l.offset),!o._hasFocus||u.anchorNode===a.node&&u.anchorOffset===a.offset&&u.focusNode===l.node&&u.focusOffset===l.offset&&u.anchorNode===l.node&&u.anchorOffset===l.offset&&u.focusNode===a.node&&u.focusOffset===a.offset||(o._anchorNode=a.node,o._anchorOffset=a.offset,o._focusNode=l.node,o._focusOffset=l.offset,o._ignoreSelect=!1,u.rangeCount>0&&u.removeAllRanges(),u.addRange(c),o._ignoreSelect=!0),o._cursorDiv){c=d.createRange(),r?(c.setStart(a.node,a.offset),c.setEnd(a.node,a.offset)):(c.setStart(l.node,l.offset),c.setEnd(l.node,l.offset));var p=c.getClientRects()[0],f=o._cursorDiv.parentNode,g=f.getBoundingClientRect();p&&g&&(o._cursorDiv.style.top=p.top-g.top+f.scrollTop+"px",o._cursorDiv.style.left=p.left-g.left+f.scrollLeft+"px")}}else if(d.selection){if(!o._hasFocus)return;var m=d.body,v=s.createElement(d,"div");m.appendChild(v),m.removeChild(v),c=m.createTextRange(),c.moveToElementText(a.node.parentNode),c.moveStart("character",a.offset);var _=m.createTextRange();_.moveToElementText(l.node.parentNode),_.moveStart("character",l.offset),c.setEndPoint("EndToStart",_),o._ignoreSelect=!1,c.select(),o._ignoreSelect=!0}}}},_setDOMFullSelection:function(e,t,n,i){this._divs.forEach(function(e){e.style.width=e.style.height="0px"});var r=this._view;if(r._fullSelection&&!(s.isIOS||e===n&&t===i&&this.primary)){var o=r._getViewPadding(),a=r._clientDiv.getBoundingClientRect(),l=r._viewDiv.getBoundingClientRect(),c=l.left+o.left,h=a.right,d=l.top+o.top,u=a.bottom,p=0,f=0;if(r._clipDiv){var g=r._clipDiv.getBoundingClientRect();p=g.left-r._clipDiv.scrollLeft,f=g.top}else{var m=r._rootDiv.getBoundingClientRect();p=m.left,f=m.top}r._ignoreDOMSelection=!0;var v,_,y=new C(r,e.lineIndex,e),x=y.getBoundingClientRect(t,!1),w=x.left;e===n&&t===i?(v=y,_=x):(v=new C(r,n.lineIndex,n),_=v.getBoundingClientRect(i,!1));var b=_.left;r._ignoreDOMSelection=!1;var E=this._divs[0],T=Math.min(h,Math.max(c,w)),S=Math.min(u,Math.max(d,x.top)),k=h,A=Math.min(u,Math.max(d,x.bottom));if(E.style.left=T-p+"px",E.style.top=S-f+"px",E.style.width=Math.max(0,k-T)+"px",E.style.height=Math.max(0,A-S)+"px",e.lineIndex===n.lineIndex)k=Math.min(b,h),E.style.width=Math.max(this.primary?0:1,k-T)+"px";else{var L=c,M=Math.min(u,Math.max(d,_.top)),N=Math.min(h,Math.max(c,b)),O=Math.min(u,Math.max(d,_.bottom)),D=this._divs[2];if(D.style.left=L-p+"px",D.style.top=M-f+"px",D.style.width=Math.max(0,N-L)+"px",D.style.height=Math.max(0,O-M)+"px",Math.abs(e.lineIndex-n.lineIndex)>1){var R=this._divs[1];R.style.left=c-p+"px",R.style.top=A-f+"px",R.style.width=Math.max(0,h-c)+"px",R.style.height=Math.max(0,M-A)+"px"}}}}},b.prototype={toString:function(){return"{l="+this.left+", t="+this.top+", r="+this.right+", b="+this.bottom+"}"}},C.prototype={create:function(e,t){if(!this._lineDiv){var n=this._lineDiv=this._createLine(e,t,this.lineIndex);return n._line=this,n}},_createLine:function(e,t,n){var i=this.view,r=i._model,o=r.getLine(n),a=r.getLineStart(n),l={type:"LineStyle",textView:i,lineIndex:n,lineText:o,lineStart:a};i.onLineStyle(l);var c=e.ownerDocument,h=t||s.createElement(c,"div");if(t&&f(t.viewStyle,l.style)||(d(l.style,h,t),t&&(t._trim=null),h.viewStyle=l.style),h.lineIndex=n,t&&h.viewLineText===o&&f(l.ranges,h.viewRanges))return h;h.viewRanges=l.ranges,h.viewLineText=o;var u=[],p={tabOffset:0,ranges:u};this._createRanges(l.ranges,o,0,o.length,a,p);var g=" ";!i._fullSelection&&s.isIE<9&&(g="\ufeff");var m={text:g,style:i._metrics.largestFontStyle,ignoreChars:1};0!==u.length&&u[u.length-1].style&&"div"===u[u.length-1].style.tagName?u.splice(u.length-1,0,m):u.push(m);var v,_,y,x,w,b,C,E,T=0,S=0;if(s.isFirefox&&o.length>2e3){t&&(h.innerHTML="",t.lineWidth=void 0);var k=c.createDocumentFragment();for(E=0;E<u.length;E++)m=u[E],w=m.text,_=m.style,v=this._createSpan(h,w,_,m.ignoreChars),k.appendChild(v);h.appendChild(k)}else{var A,L;if(t){var M=t.modelChangedEvent;M&&(0===M.removedLineCount&&0===M.addedLineCount?(L=M.start-a,A=M.addedCharCount-M.removedCharCount):L=-1,t.modelChangedEvent=void 0),y=t.firstChild}for(E=0;E<u.length;E++){if(m=u[E],w=m.text,T+=w.length,_=m.style,y){if(b=y.firstChild.data,x=y.viewStyle,b===w&&f(_,x)){S+=b.length,y._rectsCache=void 0,v=y=y.nextSibling;continue}for(;y;){if(-1!==L){var N=T;N>=L&&(N-=A);var O=y.firstChild.data,D=O?O.length:0;if(S+D>N)break;S+=D}C=y.nextSibling,h.removeChild(y),y=C}}v=this._createSpan(h,w,_,m.ignoreChars),y?h.insertBefore(v,y):h.appendChild(v),t&&(t.lineWidth=void 0)}if(t)for(var R=v?v.nextSibling:null;R;)C=R.nextSibling,t.removeChild(R),R=C}return h.parentNode||e.appendChild(h),h},_createRanges:function(e,t,n,i,r,o){if(!(n>i)){if(e)for(var s=0;s<e.length;s++){var a=e[s];if(!(a.end<r+n)){var l=Math.max(r+n,a.start)-r;if(l>i)break;var c=Math.min(r+i,a.end)-r;if(c>=l){if(l=Math.max(n,l),c=Math.min(i,c),l>n&&this._createRange(t,n,l,null,o),!a.style||!a.style.unmergeable)for(;s+1<e.length&&e[s+1].start-r===c&&f(a.style,e[s+1].style);)a=e[s+1],c=Math.min(r+i,a.end)-r,s++;this._createRange(t,l,c,a.style,o),n=c}}}i>n&&this._createRange(t,n,i,null,o)}},_createRange:function(e,t,n,i,r){if(!(t>n)){var o,s=this.view._customTabSize,l={tagName:"span",bidi:!0,style:{unicodeBidi:"embed",direction:"ltr"}},c={text:"‎",style:l};if(s&&8!==s)for(var h=e.indexOf("	",t);-1!==h&&n>h;){h>t&&(o={text:e.substring(t,h),style:i},r.ranges.push(o),a.isBidiEnabled&&r.ranges.push(c),r.tabOffset+=o.text.length);var d=s-r.tabOffset%s;if(d>0){for(var u=" ",p=1;d>p;p++)u+=" ";o={text:u,style:i,ignoreChars:d-1},r.ranges.push(o),a.isBidiEnabled&&r.ranges.push(c),r.tabOffset+=o.text.length}if(t=h+1,t===n)return;h=e.indexOf("	",t)}n>=t&&(o={text:e.substring(t,n),style:i},r.ranges.push(o),a.isBidiEnabled&&r.ranges.push(c),r.tabOffset+=o.text.length)}},_createSpan:function(e,t,n,i){var r=this.view,o="span";n&&n.tagName&&(o=n.tagName.toLowerCase());var a="a"===o;a&&(this.hasLink=!0),a&&!r._linksVisible&&(o="span");var l=e.ownerDocument,c=s.createElement(e.ownerDocument,o);if(c.appendChild(l.createTextNode(n&&n.text?n.text:t)),n&&n.html?(c.innerHTML=n.html,c.ignore=!0):n&&n.node?(c.appendChild(n.node),c.ignore=!0):n&&n.bidi&&(c.ignore=!0),d(n,c),"a"===o){var h=r._getWindow();T(c,"click",function(e){return r._handleLinkClick(e?e:h.event)},!1)}return c.viewStyle=n,i&&(c.ignoreChars=i),c},_ensureCreated:function(){return this._lineDiv?this._lineDiv:this._createdDiv=this.create(this.view._clientDiv,null)},getBoundingClientRect:function(e,t){var n=this._ensureCreated(),i=this.view;
if(void 0===e)return this._getLineBoundingClientRect(n,!0);var r=i._model,o=n.ownerDocument,a=this.lineIndex,l=null;if(e<r.getLineEnd(a)){var h=r.getLineStart(a);this.forEach(function(t){var r=t.firstChild,a=this._nodeLength(t);if(h+a>e){var d,u=e-h;if(1===r.length)l=new b(t.getBoundingClientRect());else if(i._isRangeRects)d=o.createRange(),d.setStart(r,u),d.setEnd(r,u+1),l=new b(d.getBoundingClientRect());else if(s.isIE){d=o.body.createTextRange(),d.moveToElementText(t),d.collapse();var p=0===u&&8===s.isIE;p&&(u=1),d.moveEnd("character",u+1),d.moveStart("character",u),l=new b(d.getBoundingClientRect()),p&&(l.left=t.getClientRects()[0].left)}else{var f=r.data;t.removeChild(r),t.appendChild(o.createTextNode(f.substring(0,u)));var g=s.createElement(o,"span");if(g.appendChild(o.createTextNode(f.substring(u,u+1))),t.appendChild(g),t.appendChild(o.createTextNode(f.substring(u+1))),l=new b(g.getBoundingClientRect()),t.innerHTML="",t.appendChild(r),!this._createdDiv){var m=i._getSelections()[0];(h<=m.start&&m.start<h+a||h<=m.end&&m.end<h+a)&&i._updateDOMSelection()}}if(s.isIE<11){var v=c(n.ownerDocument),_=v.screen.logicalXDPI/v.screen.deviceXDPI,y=v.screen.logicalYDPI/v.screen.deviceYDPI;l.left=l.left*_,l.right=l.right*_,l.top=l.top*y,l.bottom=l.bottom*y}return!1}return h+=a,!0})}var d=this.getBoundingClientRect();if(!l)if(i._wrapMode){var u=this.getClientRects();l=u[u.length-1],l.left=l.right,l.left+=d.left,l.top+=d.top,l.right+=d.left,l.bottom+=d.top}else l=new b(d),l.left=l.right;return(t||void 0===t)&&(l.left-=d.left,l.top-=d.top,l.right-=d.left,l.bottom-=d.top),l},forEach:function(e){for(var t=this._ensureCreated(),n=t.firstChild;n;){var i=n.nextSibling;if(!n.ignore&&!e.call(this,n))break;n=i}},_getClientRects:function(e,t){var n,i,r,o;if(!e._rectsCache){for(n=e.getClientRects(),i=h(n.length),o=0;o<n.length;o++)r=i[o]=new b(n[o]),r.left-=t.left,r.top-=t.top,r.right-=t.left,r.bottom-=t.top;e._rectsCache=i}for(n=e._rectsCache,i=[n.length],o=0;o<n.length;o++)i[o]=new b(n[o]);return i},getClientRects:function(e){if(!this.view._wrapMode)return[this.getBoundingClientRect()];var t=this._ensureCreated(),n=[],i=t.getBoundingClientRect();return this.forEach(function(e){for(var t=this._getClientRects(e,i),r=0;r<t.length;r++){var o,s,a=t[r];if(a.top!==a.bottom){var l=a.top+(a.bottom-a.top)/2;for(o=0;o<n.length&&(s=n[o],!(s.top<=l&&l<s.bottom));o++);o===n.length?n.push(a):(a.left<s.left&&(s.left=a.left),a.top<s.top&&(s.top=a.top),a.right>s.right&&(s.right=a.right),a.bottom>s.bottom&&(s.bottom=a.bottom))}}return!0}),void 0!==e?n[e]:n},_getLineBoundingClientRect:function(e,t){var n=new b(e.getBoundingClientRect());if(this.view._wrapMode);else{n.right=n.left;for(var i=e.lastChild;i&&i.ignoreChars===i.firstChild.length;)i=i.previousSibling;if(i){var r=i.getBoundingClientRect();n.right=r.right+_(e).right}}if(t){var o=_(e);n.left=n.left+o.left,n.right=n.right-o.right}return n},getLineCount:function(){return this.view._wrapMode?this.getClientRects().length:1},getLineIndex:function(e){if(!this.view._wrapMode)return 0;for(var t=this.getClientRects(),n=this.getBoundingClientRect(e),i=n.top+(n.bottom-n.top)/2,r=0;r<t.length;r++)if(t[r].top<=i&&i<t[r].bottom)return r;return t.length-1},getLineStart:function(e){if(!this.view._wrapMode||0===e)return this.view._model.getLineStart(this.lineIndex);var t=this.getClientRects();return this.getOffset(t[e].left+1,t[e].top+1)},_nodeLength:function(e){if(!e||e.ignore)return 0;var t=e.firstChild.length;return e.ignoreChars&&(t-=e.ignoreChars),t},getModelOffset:function(e,t){if(!e)return 0;var n=0;return this.forEach(function(i){var r=i.firstChild;return r===e?(i.ignoreChars&&(n-=i.ignoreChars),n+=t,!1):(i.ignoreChars&&(n-=i.ignoreChars),n+=r.data.length,!0)}),Math.max(0,n)+this.view._model.getLineStart(this.lineIndex)},getNodeOffset:function(e){var t,n,i=0,r=this.view._model,o=r.getLineStart(this.lineIndex),s=e-o,a=r.getLineEnd(this.lineIndex)-o;return this.forEach(function(e){var r=e.firstChild,o=this._nodeLength(e);return o+i>s||i+o>=a?(t=r,n=s-i,e.ignoreChars&&o>0&&n===o&&(n+=e.ignoreChars),!1):(i+=o,!0)}),{node:t,offset:n}},getText:function(e){var t="",n=0;return this.forEach(function(i){var r;if(i.ignoreChars){r=i.lastChild;for(var o=0,s=[],a=-1;r;){var l=r.data;if(l)for(var c=l.length-1;c>=0;c--){var h=l.substring(c,c+1);o<i.ignoreChars&&(" "===h||"\ufeff"===h)?o++:s.push(" "===h?"	":h)}e===r&&(a=s.length),r=r.previousSibling}s=s.reverse().join(""),-1!==a&&(n=t.length+s.length-a),t+=s}else for(r=i.firstChild;r;)e===r&&(n=t.length),t+=r.data,r=r.nextSibling;return!0}),{text:t,offset:n}},getOffset:function(e,t){function n(n,i,h){var d,u,m,v,_,y,x,w,b,C=n.firstChild,E=g._nodeLength(n),T=p.ownerDocument,S=c(T),k=s.isIE<11?S.screen.logicalXDPI/S.screen.deviceXDPI:1,A=s.isIE<11?S.screen.logicalYDPI/S.screen.deviceYDPI:1,L=h.left+f.left;if(s.isIE||r._isRangeRects){_=r._isRangeRects?T.createRange():T.body.createTextRange();for(var M=E,N=-1;M-N>1;){var O=Math.floor((M+N)/2);y=N+1,x=O===E-1&&n.ignoreChars?C.length:O+1,w=0===y&&8===s.isIE,r._isRangeRects?(_.setStart(C,y),_.setEnd(C,x)):(w&&(y=1),_.moveToElementText(n),_.move("character",y),_.moveEnd("character",x-y)),b=_.getClientRects();for(var D=!1,R=0;R<b.length;R++)if(h=b[R],d=(w?L:h.left)*k-f.left,m=h.right*k-f.left,u=h.top*A-f.top,v=h.bottom*A-f.top,e>=d&&m>e&&(!r._wrapMode||t>=u&&v>=t)){D=!0;break}D?M=O:N=O}i+=M,y=M,x=M===E-1&&n.ignoreChars?C.length:Math.min(M+1,C.length),r._isRangeRects?(_.setStart(C,y),_.setEnd(C,x)):(_.moveToElementText(n),_.move("character",y),_.moveEnd("character",x-y)),b=_.getClientRects();var I=!1;b.length>0&&(h=b[0],d=(w?L:h.left)*k-f.left,m=h.right*k-f.left,I=e>d+(m-d)/2);var P=i-l,B=o.getLine(a),F=B.charCodeAt(P);F>=55296&&56319>=F&&I?P<B.length&&(F=B.charCodeAt(P+1),F>=56320&&57343>=F&&(i+=1)):F>=56320&&57343>=F&&!I&&P>0&&(F=B.charCodeAt(P-1),F>=55296&&56319>=F&&(i-=1)),I&&i++}else{for(var V=[],K=0;E>K;K++)V.push("<span>"),K===E-1?V.push(C.data.substring(K)):V.push(C.data.substring(K,K+1)),V.push("</span>");n.innerHTML=V.join("");for(var j=n.firstChild;j;){if(h=j.getBoundingClientRect(),d=h.left-f.left,m=h.right-f.left,e>=d&&m>e){e>d+(m-d)/2&&i++;break}i++,j=j.nextSibling}if(!g._createdDiv){n.innerHTML="",n.appendChild(C);var H=r._getSelections()[0];(i<=H.start&&H.start<i+E||i<=H.end&&H.end<i+E)&&r._updateDOMSelection()}}return i}function i(n){if(n.ignore)return null;for(var i=g._getClientRects(n,f),o=0;o<i.length;o++){var s=i[o];if(s.left<=e&&e<s.right&&(!r._wrapMode||s.top<=t&&t<=s.bottom))return s}return null}var r=this.view,o=r._model,a=this.lineIndex,l=o.getLineStart(a),h=o.getLineEnd(a);if(l===h)return l;var d,u,p=this._ensureCreated(),f=this.getBoundingClientRect(),g=this;if(r._wrapMode){d=this.getClientRects(),t<d[0].top&&(t=d[0].top);for(var m=0;m<d.length&&(u=d[m],!(u.top<=t&&t<u.bottom));m++);e<u.left&&(e=u.left),e>u.right&&(e=u.right-1)}else 0>e&&(e=0),e>f.right-f.left&&(e=f.right-f.left);var v,_;if(this._lastHitChild&&this._lastHitChild.parentNode){if(v=this._lastHitOffset,_=this._lastHitChild,u=i(_),!u)for(var y=v,x=v+this._nodeLength(_),w=_.previousSibling,b=_.nextSibling;w||b;){if(w){if(y-=this._nodeLength(w),u=i(w)){_=w,v=y;break}w=w.previousSibling}if(b){if(u=i(b)){_=b,v=x;break}x+=this._nodeLength(b),b=b.nextSibling}}}else v=l,this.forEach(function(e){return _=e,(u=i(_))?!1:(v+=this._nodeLength(_),!0)});return _&&u&&(this._lastHitChild=_,this._lastHitOffset=v,v=n(_,v,u)),Math.min(h,Math.max(l,v))},getNextOffset:function(e,t){if("line"===t.unit){var n=this.view,i=n._model,r=i.getLineAtOffset(e);return t.count>0?(t.count--,i.getLineEnd(r)):(t.count++,i.getLineStart(r))}return"wordend"===t.unit||"wordWS"===t.unit||"wordendWS"===t.unit?this._getNextOffset_W3C(e,t):s.isIE?this._getNextOffset_IE(e,t):this._getNextOffset_W3C(e,t)},_getNextOffset_W3C:function(e,t){function n(e){return e>=33&&47>=e||e>=58&&64>=e||e>=91&&94>=e||96===e||e>=123&&126>=e}function i(e){return 32===e||9===e}var r,o=this.view,s=o._model,a=s.getLineAtOffset(e),l=s.getLine(a),c=s.getLineStart(a),h=s.getLineEnd(a),d=l.length,u=e-c,p=t.count<0?-1:1;if("word"===t.unit||"wordend"===t.unit||"wordWS"===t.unit||"wordendWS"===t.unit)for(var f,g,m,v;0!==t.count;){if(t.count>0){if(u===d)return h;for(r=l.charCodeAt(u),f=n(r),g=!f&&!i(r),u++;d>u;){if(r=l.charCodeAt(u),"wordWS"!==t.unit&&"wordendWS"!==t.unit){if(m=n(r),"wordend"===t.unit){if(!m&&f)break}else if(m&&!f)break;v=!m&&!i(r)}else v=!i(r);if("wordend"===t.unit||"wordendWS"===t.unit){if(!v&&g)break}else if(v&&!g)break;g=v,f=m,u++}}else{if(0===u)return c;for(u--,r=l.charCodeAt(u),f=n(r),g=!f&&!i(r);u>0;){if(r=l.charCodeAt(u-1),"wordWS"!==t.unit&&"wordendWS"!==t.unit){if(m=n(r),"wordend"===t.unit){if(m&&!f)break}else if(!m&&f)break;v=!m&&!i(r)}else v=!i(r);if("wordend"===t.unit||"wordendWS"===t.unit){if(v&&!g)break}else if(!v&&g)break;g=v,f=m,u--}}t.count-=p}else for(;0!==t.count&&u+p>=0&&d>=u+p;)u+=p,r=l.charCodeAt(u),r>=56320&&57343>=r&&u>0&&(r=l.charCodeAt(u-1),r>=55296&&56319>=r&&(u+=p)),t.count-=p;return c+u},_getNextOffset_IE:function(e,t){var n,i,r,o=this._ensureCreated(),s=this.view,a=s._model,l=this.lineIndex,c=0,h=a.getLineStart(l),d=a.getLine(l),u=a.getLineStart(l),p=o.ownerDocument,f=t.count<0?-1:1;if(e===a.getLineEnd(l)){for(r=o.lastChild;r&&r.ignoreChars===r.firstChild.length;)r=r.previousSibling;if(!r)return h;n=p.body.createTextRange(),n.moveToElementText(r),i=n.text.length,n.moveEnd(t.unit,f),c=e+n.text.length-i}else if(e===h&&t.count<0)c=h;else for(r=o.firstChild;r;){var g=this._nodeLength(r);if(h+g>e){if(n=p.body.createTextRange(),e===h&&t.count<0){for(var m=r.previousSibling;m&&(!m.firstChild||!m.firstChild.length);)m=m.previousSibling;n.moveToElementText(m?m:r.previousSibling)}else n.moveToElementText(r),n.collapse(),n.moveEnd("character",e-h);i=n.text.length,n.moveEnd(t.unit,f),c=e+n.text.length-i;break}h=g+h,r=r.nextSibling}var v=c-u,_=d.charCodeAt(v);return _>=56320&&57343>=_&&v>0&&(_=d.charCodeAt(v-1),_>=55296&&56319>=_&&(v+=f)),c=v+u,t.count-=f,c},updateLinks:function(){var e=this._ensureCreated();if(this.hasLink){var t=this;this.forEach(function(n){var i=n.viewStyle;return i&&i.tagName&&"a"===i.tagName.toLowerCase()&&e.replaceChild(t._createSpan(e,n.firstChild.data,i),n),!0})}},destroy:function(){var e=this._createdDiv;e&&(e.parentNode.removeChild(e),this._createdDiv=null)}},E.prototype={addKeyMode:function(e,t){var n=this._keyModes;void 0!==t?n.splice(t,0,e):n.push(e),e._modeAdded&&e._modeAdded()},addRuler:function(e,t){var n=this._rulers;if(void 0!==t){var i,r;for(i=0,r=0;i<n.length&&t>r;i++)e.getLocation()===n[i].getLocation()&&r++;n.splice(r,0,e),t=r}else n.push(e);this._createRuler(e,t),e.setView(this),this._update()},computeSize:function(){var e=0,t=0,n=this._model,i=this._clientDiv;if(!i)return{width:e,height:t};var r=i.style.width;s.isWebkit&&(i.style.width="0x7fffffffpx");for(var o=n.getLineCount(),a=0;o>a;a++){var l=this._getLine(a),c=l.getBoundingClientRect();e=Math.max(e,c.right-c.left),t+=c.bottom-c.top,l.destroy()}s.isWebkit&&(i.style.width=r);var h=this._getViewPadding();return e+=h.right+h.left+this._metrics.scrollWidth,t+=h.bottom+h.top+this._metrics.scrollWidth,{width:e,height:t}},convert:function(e,t,n){if(!this._clientDiv)return e;var i=this._getScroll(),r=this._getViewPadding(),o=this._viewDiv.getBoundingClientRect();return"document"===t&&(void 0!==e.x&&(e.x+=-i.x+o.left+r.left),void 0!==e.y&&(e.y+=-i.y+o.top+r.top)),"document"===n&&(void 0!==e.x&&(e.x+=i.x-o.left-r.left),void 0!==e.y&&(e.y+=i.y-o.top-r.top)),e},copy:function(){return this._clientDiv?this._doCopy():!1},cut:function(){return this._clientDiv?this._doCut():!1},destroy:function(){for(var e=0;e<this._rulers.length;e++)this._rulers[e].setView(null);this.rulers=null,this._destroyView();var t={type:"Destroy"};this.onDestroy(t),this._parent=null,this._model&&this._model.destroy&&this._model.destroy(),this._model=null,this._theme=null,this._selection=null,this._doubleClickSelection=null,this._keyModes=null,this._actions=null},focus:function(){this._clientDiv&&(this._updateDOMSelection(),this._clientDiv.focus(),this._updateDOMSelection())},hasFocus:function(){return this._hasFocus},getActionDescription:function(e){var t=this._actions[e];return t?t.actionDescription:void 0},getActions:function(e){var t=[],n=this._actions;for(var i in n)if(n.hasOwnProperty(i)){if(!e&&n[i].defaultHandler)continue;t.push(i)}return t},getBottomIndex:function(e){return this._clientDiv?this._getBottomIndex(e):0},getBottomPixel:function(){return this._clientDiv?this._getScroll().y+this._getClientHeight():0},getCaretOffset:function(){var e=this._getSelection();return e.getCaret()},getClientArea:function(){if(!this._clientDiv)return{x:0,y:0,width:0,height:0};var e=this._getScroll();return{x:e.x,y:e.y,width:this._getClientWidth(),height:this._getClientHeight()}},getHorizontalPixel:function(){return this._clientDiv?this._getScroll().x:0},getKeyBindings:function(e){for(var t=[],n=this._keyModes,i=0;i<n.length;i++)t=t.concat(n[i].getKeyBindings(e));return t},getKeyModes:function(){return this._keyModes.slice(0)},getLineHeight:function(e){return this._clientDiv?this._getLineHeight(e):0},getLineIndex:function(e){return this._clientDiv?this._getLineIndex(e):0},isValidTextPosition:function(e,t){if(!this._clientDiv)return!1;var n=this._getLineIndex(t,!0);if(0>n)return!1;var i=this._getLine(n),r=this.getOffsetAtLocation(e,t),o=i.getBoundingClientRect(r);return i.destroy(),e>o.right?!1:!0},getLinePixel:function(e){return this._clientDiv?this._getLinePixel(e):0},getLocationAtOffset:function(e){if(!this._clientDiv)return{x:0,y:0};var t=this._model;e=Math.min(Math.max(0,e),t.getCharCount());var n=t.getLineAtOffset(e),i=this._getLine(n),r=i.getBoundingClientRect(e);i.destroy();var o=r.left,s=this._getLinePixel(n)+r.top;return{x:o,y:s}},getNextOffset:function(e,t){var n=new x(e,e,!1);return this._doMove(t,n),n.getCaret()},getOptions:function(){var e;if(0===arguments.length)e=this._defaultOptions();else if(1===arguments.length){var t=arguments[0];if("string"==typeof t)return u(this["_"+t]);e=t}else{e={};for(var n in arguments)arguments.hasOwnProperty(n)&&(e[arguments[n]]=void 0)}for(var i in e)e.hasOwnProperty(i)&&(e[i]=u(this["_"+i]));return e},getModel:function(){return this._model},getOffsetAtLocation:function(e,t){if(!this._clientDiv)return 0;var n=this._getLineIndex(t),i=this._getLine(n),r=i.getOffset(e,t-this._getLinePixel(n));return i.destroy(),r},getLineAtOffset:function(e){return this.getModel().getLineAtOffset(e)},getLineStart:function(e){return this.getModel().getLineStart(e)},getRulers:function(){return this._rulers.slice(0)},getSelection:function(){return this._getSelection()},getSelections:function(){return this._getSelections()},getSelectionText:function(e){var t=[],n=this,i=this._getSelections();return i.forEach(function(e){e.isEmpty()||t.push(n._getBaseText(e.start,e.end))}),t.join(void 0!==e?e:this._model.getLineDelimiter())},getText:function(e,t){var n=this._model;return n.getText(e,t)},getTopIndex:function(e){return this._clientDiv?this._getTopIndex(e):0},getTopPixel:function(){return this._clientDiv?this._getScroll().y:0},invokeAction:function(e,t,n){if(this._clientDiv){var i=this._actions[e];if(i){if(i.actionDescription&&i.actionDescription.id&&l.logEvent("editor","action",i.actionDescription.id),!t&&i.handler&&i.handler(n))return!0;if(i.defaultHandler)return"boolean"==typeof i.defaultHandler(n)}return!1}},isDestroyed:function(){return!this._clientDiv},onContextMenu:function(e){return this.dispatchEvent(e)},onDragStart:function(e){return this.dispatchEvent(e)},onDrag:function(e){return this.dispatchEvent(e)},onDragEnd:function(e){return this.dispatchEvent(e)},onDragEnter:function(e){return this.dispatchEvent(e)},onDragOver:function(e){return this.dispatchEvent(e)},onDragLeave:function(e){return this.dispatchEvent(e)},onDrop:function(e){return this.dispatchEvent(e)},onDestroy:function(e){return this.dispatchEvent(e)},onSaving:function(e){return this.dispatchEvent(e)},onInputChanged:function(e){return this.dispatchEvent(e)},onLineStyle:function(e){return this.dispatchEvent(e)},onKeyDown:function(e){return this.dispatchEvent(e)},onKeyPress:function(e){return this.dispatchEvent(e)},onKeyUp:function(e){return this.dispatchEvent(e)},onModelChanged:function(e){return this.dispatchEvent(e)},onModelChanging:function(e){return this.dispatchEvent(e)},onModify:function(e){return this.dispatchEvent(e)},onMouseDown:function(e){return this.dispatchEvent(e)},onMouseUp:function(e){return this.dispatchEvent(e)},onMouseMove:function(e){return this.dispatchEvent(e)},onMouseOver:function(e){return this.dispatchEvent(e)},onMouseOut:function(e){return this.dispatchEvent(e)},onTouchStart:function(e){return this.dispatchEvent(e)},onTouchMove:function(e){return this.dispatchEvent(e)},onTouchEnd:function(e){return this.dispatchEvent(e)},onOptions:function(e){return this.dispatchEvent(e)},onSelection:function(e){return this.dispatchEvent(e)},onScroll:function(e){return this.dispatchEvent(e)},onVerify:function(e){return this.dispatchEvent(e)},onFocus:function(e){return this.dispatchEvent(e)},onBlur:function(e){return this.dispatchEvent(e)},paste:function(){return this._clientDiv?this._doPaste():!1},redraw:function(){if(!(this._redrawCount>0)){var e=this._model.getLineCount();this.redrawRulers(0,e),this.redrawLines(0,e)}},redrawRulers:function(e,t){if(!(this._redrawCount>0))for(var n=this.getRulers(),i=0;i<n.length;i++)this.redrawLines(e,t,n[i])},redrawLines:function(e,t,n){if(!(this._redrawCount>0)&&(void 0===e&&(e=0),void 0===t&&(t=this._model.getLineCount()),e!==t)){var i=this._clientDiv;if(i){if(n){var r=this._getRulerParent(n);for(i=r.firstChild;i&&i._ruler!==n;)i=i.nextSibling}n?i.rulerChanged=!0:this._lineHeight&&this._resetLineHeight(e,t);var o=-1;if(n||-1===this._imeOffset||(o=this._model.getLineAtOffset(this._imeOffset)),!n||"page"===n.getOverview())for(var s=i.firstChild;s;){var a=s.lineIndex;a>=e&&t>a&&a!==o&&(s.lineChanged=!0),s=s.nextSibling}n||this._wrapMode||e<=this._maxLineIndex&&this._maxLineIndex<t&&(this._checkMaxLineIndex=this._maxLineIndex,this._maxLineIndex=-1,this._maxLineWidth=0),this.dispatchEvent({type:"Redraw",startLine:e,endLine:t,ruler:n}),this._queueUpdate()}}},redrawRange:function(e,t){if(!(this._redrawCount>0)){var n=this._model;void 0===e&&(e=0),void 0===t&&(t=n.getCharCount());var i=n.getLineAtOffset(e),r=n.getLineAtOffset(Math.max(e,t-1))+1;this.redrawLines(i,r)}},removeKeyMode:function(e){for(var t=this._keyModes,n=0;n<t.length;n++)if(t[n]===e){t.splice(n,1);break}e._modeRemoved&&e._modeRemoved()},removeRuler:function(e){for(var t=this._rulers,n=0;n<t.length;n++)if(t[n]===e){t.splice(n,1),e.setView(null),this._destroyRuler(e),this._update();break}},resize:function(){this._clientDiv&&this._handleResize(null)},setAction:function(e,t,n){if(e){var i=this._actions,r=i[e];r||(r=i[e]={}),r.handler=t,void 0!==n&&(r.actionDescription=n)}},setKeyBinding:function(e,t){this._keyModes[0].setKeyBinding(e,t)},setCaretOffset:function(e,t,n){var i=this._model.getCharCount();e=Math.max(0,Math.min(e,i));var r=new x(e,e,!1);this._setSelection(r,void 0===t||t,!0,n)},setHorizontalPixel:function(e){this._clientDiv&&(e=Math.max(0,e),this._scrollView(e-this._getScroll().x,0))},setRedraw:function(e){e?0===--this._redrawCount&&this.redraw():this._redrawCount++},setModel:function(e){if(e!==this._model){e=e||new t.TextModel,this._model.removeEventListener("preChanging",this._modelListener.onChanging),this._model.removeEventListener("postChanged",this._modelListener.onChanged);var n=this._model.getLineCount(),i=this._model.getCharCount(),r=e.getLineCount(),o=e.getCharCount(),s=e.getText(),a={type:"ModelChanging",text:s,start:0,removedCharCount:i,addedCharCount:o,removedLineCount:n,addedLineCount:r};this.onModelChanging(a),this._model=e,a={type:"ModelChanged",start:0,removedCharCount:i,addedCharCount:o,removedLineCount:n,addedLineCount:r},this.onModelChanged(a),this._model.addEventListener("preChanging",this._modelListener.onChanging),this._model.addEventListener("postChanged",this._modelListener.onChanged),this._reset(),this._update()}},setOptions:function(e){var t=this._defaultOptions();for(var n in e)if(e.hasOwnProperty(n)){var i=e[n],r=this["_"+n];if(f(r,i))continue;var o=t[n]?t[n].update:null;if(o){o.call(this,i);continue}this["_"+n]=u(i)}this.onOptions({type:"Options",options:e})},setSelection:function(e,t,n,i){var r=e>t;if(r){var o=e;e=t,t=o}var s=this._model.getCharCount();e=Math.max(0,Math.min(e,s)),t=Math.max(0,Math.min(t,s));var a=new x(e,t,r);this._setSelection(a,void 0===n||n,!0,i)},setSelections:function(e,t,n){var i=this._rangesToSelections(e);this._setSelection(i,void 0===t||t,!0,n)},setText:function(e,t,n,i,r){var o,a="string"==typeof e,l=void 0===t&&void 0===n&&a;a?(void 0===t&&(t=0),void 0===n&&(n=this._model.getCharCount()),o={text:e,selection:[new x(t,n,!1)]}):(o=e,o.selection=this._rangesToSelections(o.selection)),o._code=!0,l&&(this._variableLineHeight=!1),this._modifyContent(o,!l,void 0===i||i,r),l&&s.isFirefox<13&&this._fixCaret()},setTopIndex:function(e,t){this._clientDiv&&this._scrollViewAnimated(0,this._getLinePixel(Math.max(0,e))-this._getScroll().y,t)},setTopPixel:function(e,t){this._clientDiv&&this._scrollViewAnimated(0,Math.max(0,e)-this._getScroll().y,t)},showSelection:function(e,t){return this._showCaret(e?!1:!0,t,e)},update:function(e,t){this._clientDiv&&((e||this._metrics.invalid)&&this._updateStyle(),void 0===t||t?this._update():this._queueUpdate())},_handleRootMouseDown:function(e){if(this._cancelCheckSelection(),!this._ignoreEvent(e)){s.isFirefox<13&&1===e.which&&(this._clientDiv.contentEditable=!1,(this._overlayDiv||this._clientDiv).draggable=!0,this._ignoreBlur=!0);var t=this._overlayDiv||this._clientDiv;s.isIE<9&&(t=this._viewDiv);for(var n=e.target?e.target:e.srcElement;n;){if(t===n)return;if(n.className&&-1!==n.className.indexOf("textViewFind"))return;n=n.parentNode}if(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),!this._isW3CEvents){var i=this,r=this._getWindow();r.setTimeout(function(){i._clientDiv.focus()},0)}}},_handleRootMouseUp:function(e){this._ignoreEvent(e)||(s.isFirefox<13&&1===e.which&&(this._clientDiv.contentEditable=!0,(this._overlayDiv||this._clientDiv).draggable=!1),s.isFirefox&&1===e.which&&(this._fixCaret(),this._ignoreBlur=!1))},_handleBlur:function(){if(this._cancelCheckSelection(),!this._ignoreBlur){if(this._commitIME(),this._hasFocus=!1,s.isIE<9&&!this._getSelections()[0].isEmpty()){var e=this._rootDiv,t=s.createElement(e.ownerDocument,"div");e.appendChild(t),e.removeChild(t)}if(this._cursorDiv&&(this._cursorDiv.style.display="none"),this._domSelection){this._domSelection.forEach(function(e){e.update()});var n,i=this._getWindow(),r=this._parent.ownerDocument;if(i.getSelection){var o=i.getSelection();for(n=o.anchorNode;n;){if(n===this._clientDiv){o.rangeCount>0&&o.removeAllRanges();break}n=n.parentNode}}else if(r.selection){for(this._ignoreSelect=!1,n=r.selection.createRange().parentElement();n;){if(n===this._clientDiv){r.selection.empty();break}n=n.parentNode}this._ignoreSelect=!0}}this._ignoreFocus||this.onBlur({type:"Blur"})}},_handleCompositionStart:function(e){if(!this._ignoreEvent(e)){if(this._imeTimeout){var t=this._getWindow();t.clearTimeout(this._imeTimeout),this._imeTimeout=null}this._imeText&&(this._commitIME(this._imeText),this._imeText=null),this._startIME(),this._mutationObserver&&(this._mutationObserver.disconnect(),this._mutationObserver=null)}},_handleCompositionUpdate:function(e){this._ignoreEvent(e)||(this._imeText=e.data)},_handleCompositionEnd:function(e){if(!this._ignoreEvent(e)){this._imeText=e.data;var t=this._getWindow();this._imeTimeout=t.setTimeout(function(){this._commitIME(this._imeText),this._imeText=this._imeTimeout=null}.bind(this),0)}},_handleContextMenu:function(e){if(!this._ignoreEvent(e)){s.isIE&&3===this._lastMouseButton&&this._updateDOMSelection();var t=!1;if(this.isListening("ContextMenu")){var n=this._createMouseEvent("ContextMenu",e);n.screenX=e.screenX,n.screenY=e.screenY,this.onContextMenu(n),t=n.defaultPrevented}else s.isMac&&s.isFirefox&&0===e.button&&(t=!0);return t?(e.preventDefault&&e.preventDefault(),!1):(this._contextMenuOpen=!0,void(s.isFirefox&&(this._checkSelectionChange=!0,this._pollSelectionChange(!0))))}},_handleCopy:function(e){return this._cancelCheckSelection(),this._ignoreEvent(e)||this._ignoreCopy?void 0:this._doCopy(e)?(e.preventDefault&&e.preventDefault(),!1):void 0},_handleCut:function(e){return this._cancelCheckSelection(),this._ignoreEvent(e)?void 0:this._doCut(e)?(e.preventDefault&&e.preventDefault(),!1):void 0},_handleDataModified:function(e){this._ignoreEvent(e)||this._startIME()},_handleDblclick:function(e){if(!this._ignoreEvent(e)){var t=e.timeStamp?e.timeStamp:(new Date).getTime();this._lastMouseTime=t,2!==this._clickCount&&(this._clickCount=2,this._handleMouse(e))}},_handleDragStart:function(e){if(!this._ignoreEvent(e)){if(s.isFirefox<13){var t=this,n=this._getWindow();n.setTimeout(function(){t._clientDiv.contentEditable=!0,t._clientDiv.draggable=!1,t._ignoreBlur=!1},0)}return this.isListening("DragStart")&&-1!==this._dragOffset?(this._isMouseDown=!1,this.onDragStart(this._createMouseEvent("DragStart",e)),this._dragOffset=-1,void 0):(e.preventDefault&&e.preventDefault(),!1)}},_handleDrag:function(e){this._ignoreEvent(e)||this.isListening("Drag")&&this.onDrag(this._createMouseEvent("Drag",e))},_handleDragEnd:function(e){this._ignoreEvent(e)||(this._dropTarget=!1,this._dragOffset=-1,this.isListening("DragEnd")&&this.onDragEnd(this._createMouseEvent("DragEnd",e)),s.isFirefox<13&&(this._fixCaret(),"none"!==e.dataTransfer.dropEffect||e.dataTransfer.mozUserCancelled||this._fixCaret()))},_handleDragEnter:function(e){if(!this._ignoreEvent(e)){var t=!0;return this._dropTarget=!0,this.isListening("DragEnter")&&(t=!1,this.onDragEnter(this._createMouseEvent("DragEnter",e))),s.isWebkit||t?(e.preventDefault&&e.preventDefault(),!1):void 0}},_handleDragOver:function(e){if(!this._ignoreEvent(e)){var t=!0;return this.isListening("DragOver")&&(t=!1,this.onDragOver(this._createMouseEvent("DragOver",e))),s.isWebkit||t?(t&&(e.dataTransfer.dropEffect="none"),e.preventDefault&&e.preventDefault(),!1):void 0}},_handleDragLeave:function(e){this._ignoreEvent(e)||(this._dropTarget=!1,this.isListening("DragLeave")&&this.onDragLeave(this._createMouseEvent("DragLeave",e)))},_handleDrop:function(e){return this._ignoreEvent(e)?void 0:(this._dropTarget=!1,this.isListening("Drop")&&this.onDrop(this._createMouseEvent("Drop",e)),e.preventDefault&&e.preventDefault(),!1)},_handleFocus:function(){this._hasFocus=!0,s.isIOS&&void 0!==this._lastTouchOffset?(this.setCaretOffset(this._lastTouchOffset,!0),this._lastTouchOffset=void 0):this._updateDOMSelection(),this._cursorDiv&&(this._cursorDiv.style.display="block"),this._domSelection&&this._domSelection.forEach(function(e){e.update()}),this._ignoreFocus||this.onFocus({type:"Focus"})},_handleKeyDown:function(e){if(this._cancelCheckSelection(),!this._ignoreEvent(e)){if(this.isListening("KeyDown")){var t=this._createKeyEvent("KeyDown",e);if(this.onKeyDown(t),t.defaultPrevented)return s.isFirefox&&(this._keyDownPrevented=!0),void e.preventDefault()}var n=!1;switch(e.keyCode){case 16:case 17:case 18:case 91:n=!0;break;default:this._setLinksVisible(!1)}if(229===e.keyCode){if(this._readonly)return e.preventDefault&&e.preventDefault(),!1;var i=!0;s.isSafari&&s.isMac&&e.ctrlKey&&(i=!1,e.keyCode=129),i&&this._startIME()}else n||this._commitIME();return(s.isMac||s.isLinux)&&s.isFirefox<4||s.isOpera<12.16?(this._keyDownEvent=e,!0):this._doAction(e)?(e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.cancelBubble=!0,e.returnValue=!1,e.keyCode=0),!1):void 0}},_handleKeyPress:function(e){if(!this._ignoreEvent(e)){if(this._keyDownPrevented)return e.preventDefault&&(e.preventDefault(),e.stopPropagation()),void(this._keyDownPrevented=void 0);if(s.isMac&&s.isWebkit&&(63232<=e.keyCode&&e.keyCode<=63487||13===e.keyCode||8===e.keyCode))return e.preventDefault&&e.preventDefault(),!1;if(((s.isMac||s.isLinux)&&s.isFirefox<4||s.isOpera<12.16)&&this._doAction(this._keyDownEvent))return e.preventDefault&&e.preventDefault(),!1;var t=s.isMac?e.metaKey:e.ctrlKey;if(void 0!==e.charCode&&t)switch(e.charCode){case 99:case 118:case 120:return!0}if(this.isListening("KeyPress")){var n=this._createKeyEvent("KeyPress",e);if(this.onKeyPress(n),n.defaultPrevented)return void e.preventDefault()}if(this._doAction(e))return e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.cancelBubble=!0,e.returnValue=!1,e.keyCode=0),!1;var i=!1;if(s.isMac?(e.ctrlKey||e.metaKey)&&(i=!0):s.isFirefox?(e.ctrlKey||e.altKey)&&(i=!0):e.ctrlKey^e.altKey&&(i=!0),!i){var r=s.isOpera?e.which:void 0!==e.charCode?e.charCode:e.keyCode;if(r>31)return this._doContent(String.fromCharCode(r)),e.preventDefault&&e.preventDefault(),!1}}},_handleDocKeyUp:function(e){var t=s.isMac?e.metaKey:e.ctrlKey;t||this._setLinksVisible(!1)},_handleKeyUp:function(e){if(!this._ignoreEvent(e)){if(this.isListening("KeyUp")){var t=this._createKeyEvent("KeyUp",e);if(this.onKeyUp(t),t.defaultPrevented)return void e.preventDefault()}this._handleDocKeyUp(e),13===e.keyCode&&this._commitIME()}},_handleLinkClick:function(e){var t=s.isMac?e.metaKey:e.ctrlKey;return t?void 0:(e.preventDefault&&e.preventDefault(),!1)},_handleMouse:function(e){var t=this._getWindow(),n=!0,i=t;if((s.isIE||s.isFirefox&&!this._overlayDiv)&&(i=this._clientDiv),this._overlayDiv){this._hasFocus&&(this._ignoreFocus=!0);var r=this;t.setTimeout(function(){r.focus(),r._ignoreFocus=!1},0)}var o=e.shiftKey,a=e.altKey,l=s.isMac?e.metaKey:e.ctrlKey;if(this._blockSelection=this._doubleClickSelection=null,1===this._clickCount){var c=(!s.isOpera||s.isOpera>=12.16)&&this._hasFocus&&this.isListening("DragStart");n=this._setSelectionTo(e.clientX,e.clientY,!0,o,l,c),n&&this._setGrab(i)}else this._isW3CEvents&&this._setGrab(i),this._setSelectionTo(e.clientX,e.clientY,!0,o,l,!1),this._doubleClickSelection=x.editing(this._getSelections());return a&&(this._blockSelection=x.editing(this._getSelections())),n},_handleMouseDown:function(e){if(!this._ignoreEvent(e)){if(this._linksVisible){var t=e.target||e.srcElement;if("A"===t.tagName)return;this._setLinksVisible(!1)}this._commitIME();var n=e.which;n||(4===e.button&&(n=2),2===e.button&&(n=3),1===e.button&&(n=1));var i=2!==n&&e.timeStamp?e.timeStamp:(new Date).getTime(),r=i-this._lastMouseTime,o=Math.abs(this._lastMouseX-e.clientX),a=Math.abs(this._lastMouseY-e.clientY),l=this._lastMouseButton===n;if(this._lastMouseX=e.clientX,this._lastMouseY=e.clientY,this._lastMouseTime=i,this._lastMouseButton=n,1===n&&(this._isMouseDown=!0,l&&r<=this._clickTime&&o<=this._clickDist&&a<=this._clickDist?this._clickCount++:this._clickCount=1),this.isListening("MouseDown")){var c=this._createMouseEvent("MouseDown",e);if(this.onMouseDown(c),c.defaultPrevented)return void e.preventDefault()}1===n&&this._handleMouse(e)&&(s.isIE>=9||s.isOpera||s.isChrome||s.isSafari||s.isFirefox&&!this._overlayDiv)&&(this._hasFocus||this.focus(),e.preventDefault()),s.isFirefox&&3===this._lastMouseButton&&this._updateDOMSelection()}},_handleMouseOver:function(e){this._ignoreEvent(e)||this._animation||this.isListening("MouseOver")&&this.onMouseOver(this._createMouseEvent("MouseOver",e))},_handleMouseOut:function(e){this._ignoreEvent(e)||this._animation||this.isListening("MouseOut")&&this.onMouseOut(this._createMouseEvent("MouseOut",e))},_handleMouseMove:function(e){if(!this._animation){var t=this._isClientDiv(e);if(this.isListening("MouseMove")&&(t||this._isMouseDown)){var n=this._createMouseEvent("MouseMove",e);if(this.onMouseMove(n),n.defaultPrevented)return void e.preventDefault()}if(!this._dropTarget){var i=this._linksVisible||this._lastMouseMoveX!==e.clientX||this._lastMouseMoveY!==e.clientY;if(this._lastMouseMoveX=e.clientX,this._lastMouseMoveY=e.clientY,this._setLinksVisible(i&&!this._isMouseDown&&e.altKey&&(s.isMac?e.metaKey:e.ctrlKey)),this._checkOverlayScroll(),
!this._isW3CEvents){if(0===e.button)return this._setGrab(null),!0;if(!this._isMouseDown&&1===e.button&&0!==(1&this._clickCount)&&t)return this._clickCount=2,this._handleMouse(e,this._clickCount)}if(this._isMouseDown&&-1===this._dragOffset){var r=e.clientX,o=e.clientY,a=this._getViewPadding(),l=this._viewDiv.getBoundingClientRect(),c=this._getClientWidth(),h=this._getClientHeight(),d=l.left+a.left,u=l.top+a.top,p=l.left+a.left+c,f=l.top+a.top+h;u>o?this._doAutoScroll("up",r,o-u):o>f?this._doAutoScroll("down",r,o-f):d>r&&!this._wrapMode?this._doAutoScroll("left",r-d,o):r>p&&!this._wrapMode?this._doAutoScroll("right",r-p,o):(this._endAutoScroll(),this._setSelectionTo(r,o,!1,!0))}}}},_isClientDiv:function(e){for(var t=this._overlayDiv||this._clientDiv,n=e.target?e.target:e.srcElement;n;){if(t===n)return!0;n=n.parentNode}return!1},_createKeyEvent:function(e,t){return{type:e,event:t,preventDefault:function(){this.defaultPrevented=!0}}},_createMouseEvent:function(e,t){var n=this.convert({x:t.clientX,y:t.clientY},"page","document");return{type:e,event:t,clickCount:this._clickCount,x:n.x,y:n.y,preventDefault:function(){this.defaultPrevented=!0}}},_createTouchEvent:function(e,t){var n=t.touches.length?this.convert({x:t.touches[0].clientX,y:t.touches[0].clientY},"page","document"):{};return{type:e,event:t,touchCount:t.touches.length,x:n.x,y:n.y,preventDefault:function(){this.defaultPrevented=!0}}},_handleMouseUp:function(e){var t=e.which?0===e.button:1===e.button;if(this.isListening("MouseUp")&&(this._isClientDiv(e)||t&&this._isMouseDown)){var n=this._createMouseEvent("MouseUp",e);if(this.onMouseUp(n),n.defaultPrevented)return e.preventDefault(),void(this._isMouseDown=!1)}if(!this._linksVisible){if(t&&this._isMouseDown){var i=this._getSelections(),r=x.editing(i);i.forEach(function(e){e._editing=!1}),-1!==this._dragOffset&&(r.extend(this._dragOffset),r.collapse(),i=r,this._dragOffset=-1),this._setSelection(i,!1),this._isMouseDown=!1,this._endAutoScroll(),this._isW3CEvents&&this._setGrab(null)}t&&this._isMouseDown&&s.isFirefox&&(this._updateDOMSelection(),e.preventDefault())}},_handleMouseWheel:function(e){if(!this._noScroll){var t=this._getLineHeight(),n=0,i=0;if(s.isIE||s.isOpera)i=-e.wheelDelta/40*t;else if(s.isFirefox){var r=256;if("wheel"===e.type)e.deltaMode?(n=Math.max(-r,Math.min(r,e.deltaX))*t,i=Math.max(-r,Math.min(r,e.deltaY))*t):(n=e.deltaX,i=e.deltaY);else{var o;o=s.isMac?3*e.detail:Math.max(-r,Math.min(r,e.detail))*t,e.axis===e.HORIZONTAL_AXIS?n=o:i=o}}else if(s.isMac){var a,l,c=e.timeStamp-this._wheelTimeStamp;this._wheelTimeStamp=e.timeStamp,a=e.wheelDeltaX%120!==0?1:40>c?40/(40-c):40,l=e.wheelDeltaY%120!==0?1:40>c?40/(40-c):40,n=Math.ceil(-e.wheelDeltaX/a),n>-1&&0>n&&(n=-1),n>0&&1>n&&(n=1),i=Math.ceil(-e.wheelDeltaY/l),i>-1&&0>i&&(i=-1),i>0&&1>i&&(i=1)}else{n=-e.wheelDeltaX;var h=8;i=-e.wheelDeltaY/120*h*t}if(s.isSafari||s.isChrome&&s.isMac){for(var d=e.target;d&&void 0===d.lineIndex;)d=d.parentNode;this._mouseWheelLine=d}var u=this._getScroll();this._scrollView(n,i);var p=this._getScroll();return u.x!==p.x||u.y!==p.y?(e.preventDefault&&e.preventDefault(),!1):void 0}},_handlePaste:function(e){if(this._cancelCheckSelection(),!this._ignoreEvent(e)&&!this._ignorePaste&&this._doPaste(e)){if(s.isIE){var t=this;this._ignoreFocus=!0;var n=this._getWindow();n.setTimeout(function(){t._updateDOMSelection(),t._ignoreFocus=!1},0)}return e.preventDefault&&e.preventDefault(),!1}},_handleResize:function(){var e=this._rootDiv.clientWidth,t=this._rootDiv.clientHeight;if(this._rootWidth!==e||this._rootHeight!==t){this._rootWidth!==e&&this._wrapMode&&this._resetLineHeight(),this._rootWidth=e,this._rootHeight=t;var n=s.isIE<9,i=this._calculateMetrics();f(i,this._metrics)||(this._metrics.invalid&&!i.invalid?this._updateStyle(!1,i):(this._variableLineHeight&&(this._variableLineHeight=!1,this._resetLineHeight()),this._metrics=i),n=!0),n?this._queueUpdate():this._update(),this.dispatchEvent({type:"Resize"})}},_handleRulerEvent:function(e){for(var t=e.target?e.target:e.srcElement,n=t.lineIndex,i=t;i&&!i._ruler;)void 0===n&&void 0!==i.lineIndex&&(n=i.lineIndex),i=i.parentNode;var r=i?i._ruler:null;if(void 0===n&&r&&"document"===r.getOverview()){var o,s,a=this._getClientHeight(),l=this._model.getLineCount(),c=this._getViewPadding(),h=this._viewDiv.getBoundingClientRect(),d=this._getLineHeight(),u=d*l,p=a+c.top+c.bottom-2*this._metrics.scrollWidth;p>u?(o=d,s=c.top):(o=p/l,s=this._metrics.scrollWidth),n=Math.floor((e.clientY-h.top-s)/o),n>=0&&l>n||(n=void 0)}if(r)switch(e.type){case"click":r.onClick&&r.onClick(n,e);break;case"dblclick":r.onDblClick&&r.onDblClick(n,e);break;case"mousemove":r.onMouseMove&&r.onMouseMove(n,e);break;case"mouseover":r.onMouseOver&&r.onMouseOver(n,e);break;case"mouseout":if(r.onMouseOut){for(var f=e.relatedTarget;f&&f!==this._rootDiv;){if(f===i)return;f=f.parentNode}r.onMouseOut(n,e)}}},_handleScroll:function(){this._lastScrollTime=(new Date).getTime();var e=this._getScroll(!1),t=this._hScroll,n=this._vScroll;if(t!==e.x||n!==e.y){this._hScroll=e.x,this._vScroll=e.y,this._commitIME(),this._update(n===e.y);var i={type:"Scroll",oldValue:{x:t,y:n},newValue:e};this.onScroll(i)}},_handleSelectStart:function(e){var t=this._contextMenuOpen;return this._contextMenuOpen=!1,t?void(this._checkSelectionChange=!0):this._ignoreSelect?(e&&e.preventDefault&&e.preventDefault(),!1):void 0},_getModelOffset:function(e,t){if(e){var n;return n="DIV"===e.tagName?e:e.parentNode.parentNode,n._line?n._line.getModelOffset(e,t):0}},_updateSelectionFromDOM:function(){if(!(s.isIOS||s.isAndroid||this._checkSelectionChange))return!1;var e=this._getWindow(),t=e.getSelection(),n=this._getModelOffset(t.anchorNode,t.anchorOffset),i=this._getModelOffset(t.focusNode,t.focusOffset),r=this._getSelections()[0];if(void 0===n||void 0===i||r.start===n&&r.end===i)return!1;if(this._checkSelectionChange){var o=this._getLineNext(),a=this._getLinePrevious();if(t.anchorNode===o.firstChild.firstChild&&0===t.anchorOffset&&t.focusNode===a.firstChild.firstChild&&0===t.focusOffset)return!1;(t.anchorNode===o.firstChild.firstChild&&0===t.anchorOffset&&t.focusNode===a.lastChild.firstChild||t.anchorNode===this._clientDiv&&t.focusNode===this._clientDiv)&&(n=0,i=this.getModel().getCharCount())}return this._setSelection(new x(n,i),!1,!1),this._checkSelectionChange=!1,!0},_cancelCheckSelection:function(){this._checkSelectionChange&&(this._checkSelectionChange=!1,this._cancelPollSelectionChange())},_cancelPollSelectionChange:function(){if(this._selPollTimer){var e=this._getWindow();e.clearTimeout(this._selPollTimer),this._selPollTimer=null}},_pollSelectionChange:function(e){var t=this,n=this._getWindow();this._cancelPollSelectionChange(),this._selPollTimer=n.setTimeout(function(){if(t._selPollTimer=null,t._clientDiv){var n=t._updateSelectionFromDOM();!n&&e&&t._pollSelectionChange(e)}},100)},_handleSelectionChange:function(){-1===this._imeOffset&&(s.isAndroid?this._pollSelectionChange():this._updateSelectionFromDOM())},_handleTextInput:function(e){if(!this._ignoreEvent(e)&&-1===this._imeOffset){var t=this._getWindow().getSelection();if(t.anchorNode!==this._anchorNode||t.focusNode!==this._focusNode||t.anchorOffset!==this._anchorOffset||t.focusOffset!==this._focusOffset){for(var n=t.anchorNode;n&&void 0===n.lineIndex;)n=n.parentNode;if(n){var i=this._model,r=n.lineIndex,o=i.getLine(r),s=o,a=0,l=i.getLineStart(r);if(t.rangeCount>0){t.getRangeAt(0).deleteContents();var c=n.ownerDocument.createTextNode(e.data);t.getRangeAt(0).insertNode(c);var h=this._getDOMText(n,c);s=h.text,a=h.offset,c.parentNode.removeChild(c)}n.lineRemoved=!0;for(var d=0;o.charCodeAt(d)===s.charCodeAt(d)&&a>d;)d++;for(var u=o.length-1,p=s.length-o.length;o.charCodeAt(u)===s.charCodeAt(u+p)&&u+p>=a+e.data.length;)u--;u++;var f=s.substring(d,u+p);d+=l,u+=l;var g=this._getSelections(),m=g[0].start-d,v=g[0].end-u;g[0].start=d,g[0].end=u;for(var _=1;_<g.length;_++)g[_].start-=m,g[_].end-=v;this._modifyContent({text:f,selection:g,_ignoreDOMSelection:!0},!0)}}else this._doContent(e.data);e.preventDefault()}},_handleTouchStart:function(e){if(this.isListening("TouchStart")){var t=this._createTouchEvent("TouchStart",e);if(this.onTouchStart(t),t.defaultPrevented)return void e.preventDefault();if(this._noScroll)return}this._commitIME();var n=this._getWindow();this._touchScrollTimer&&(this._vScrollDiv.style.display="none",this._hScrollDiv.style.display="none",n.clearInterval(this._touchScrollTimer),this._touchScrollTimer=null);var i=e.touches;if(1===i.length){var r=i[0],o=r.clientX,a=r.clientY;this._touchStartX=o,this._touchStartY=a,s.isAndroid&&(a<r.pageY-n.pageYOffset||o<r.pageX-n.pageXOffset)&&(o=r.pageX-n.pageXOffset,a=r.pageY-n.pageYOffset);var l=this.convert({x:o,y:a},"page","document");this._lastTouchOffset=this.getOffsetAtLocation(l.x,l.y),this._touchStartTime=e.timeStamp,this._touching=!0}},_handleTouchMove:function(e){if(this.isListening("TouchMove")){var t=this._createTouchEvent("TouchMove",e);if(this.onTouchMove(t),t.defaultPrevented)return void e.preventDefault();if(this._noScroll)return}var n=e.touches;if(1===n.length){var i=n[0];this._touchCurrentX=i.clientX,this._touchCurrentY=i.clientY;var r=10;if(!this._touchScrollTimer&&e.timeStamp-this._touchStartTime<20*r){this._vScrollDiv.style.display="block",this._wrapMode||(this._hScrollDiv.style.display="block");var o=this,s=this._getWindow();this._touchScrollTimer=s.setInterval(function(){var e=0,t=0;if(o._touching)e=o._touchStartX-o._touchCurrentX,t=o._touchStartY-o._touchCurrentY,o._touchSpeedX=e/r,o._touchSpeedY=t/r,o._touchStartX=o._touchCurrentX,o._touchStartY=o._touchCurrentY;else{if(Math.abs(o._touchSpeedX)<.1&&Math.abs(o._touchSpeedY)<.1)return o._vScrollDiv.style.display="none",o._hScrollDiv.style.display="none",s.clearInterval(o._touchScrollTimer),void(o._touchScrollTimer=null);e=o._touchSpeedX*r,t=o._touchSpeedY*r,o._touchSpeedX*=.95,o._touchSpeedY*=.95}o._scrollView(e,t)},r)}this._touchScrollTimer&&e.preventDefault()}},_handleTouchEnd:function(e){if(this.isListening("TouchEnd")){var t=this._createTouchEvent("TouchEnd",e);if(this.onTouchEnd(t),t.defaultPrevented)return void e.preventDefault();if(this._noScroll)return}var n=e.touches;0===n.length&&(this._touching=!1)},_doAction:function(e){var t,n,i=this._keyModes;for(n=i.length-1;n>=0;n--)if(t=i[n],"function"==typeof t.match){var r=t.match(e);if(void 0!==r)return this.invokeAction(r)}return!1},_doMove:function(e,t){var n=this._model,i=t.getCaret(),r=n.getLineAtOffset(i);for(e.count||(e.count=1);0!==e.count;){var o=n.getLineStart(r);if(e.count<0&&i===o){if(!(r>0))break;"character"===e.unit&&e.count++,r--,t.extend(n.getLineEnd(r))}else if(e.count>0&&i===n.getLineEnd(r)){if(!(r+1<n.getLineCount()))break;"character"===e.unit&&e.count--,r++,t.extend(n.getLineStart(r))}else{var s=!1;if(e.expandTab&&"character"===e.unit&&(i-o)%this._tabSize===0){var a=n.getText(o,i);s=!/[^ ]/.test(a)}if(s)t.extend(i-this._tabSize),e.count+=e.count<0?1:-1;else{var l=this._getLine(r);t.extend(l.getNextOffset(i,e)),l.destroy()}}i=t.getCaret()}return t},_doBackspace:function(e){var t=this,n=this._getSelections();return n.forEach(function(n){n.isEmpty()&&(e.count||(e.count=1),e.count*=-1,e.expandTab=t._expandTab,t._doMove(e,n))}),this._modifyContent({text:"",selection:n},!0),!0},_doCase:function(e){var t=this,n=this._getSelections(),i=[];return n.forEach(function(n){t._doMove(e,n);var r=t.getText(n.start,n.end);switch(e.type){case"lower":r=r.toLowerCase();break;case"capitalize":r=r.replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()});break;case"reverse":for(var o="",s=0;s<r.length;s++){var a=r[s],l=a.toLowerCase();a=l!==a?l:a.toUpperCase(),o+=a}r=o;break;default:r=r.toUpperCase()}i.push(r)}),this._modifyContent({text:i,selection:n,_ignoreDOMSelection:!0},!0)},_doContent:function(e){var t=this,n=this._getSelections();return n.forEach(function(e){if(t._overwriteMode&&e.isEmpty()){var n=t._model,i=n.getLineAtOffset(e.end);if(e.end<n.getLineEnd(i)){var r=t._getLine(i);e.extend(r.getNextOffset(e.getCaret(),{unit:"character",count:1})),r.destroy()}}}),this._modifyContent({text:e,selection:n,_ignoreDOMSelection:!0},!0)},_doCopy:function(e){var t=this.getSelectionText();return t?this._setClipboardText(t,e):!0},_doCursorNext:function(e){var t=this,n=this._getSelections();return n.forEach(function(n){n.isEmpty()||e.select?t._doMove(e,n):n.start=n.end,e.select||n.collapse()}),this._setSelection(n,!0),!0},_doCursorPrevious:function(e){var t=this,n=this._getSelections();return n.forEach(function(n){n.isEmpty()||e.select?(e.count||(e.count=1),e.count*=-1,t._doMove(e,n)):n.end=n.start,e.select||n.collapse()}),this._setSelection(n,!0),!0},_doCut:function(e){var t=this.getSelectionText();if(t){if(!this._setClipboardText(t,e))return!1;this._doContent("")}return!0},_doDelete:function(e){var t=this,n=this._getSelections();return n.forEach(function(n){n.isEmpty()&&t._doMove(e,n)}),this._modifyContent({text:"",selection:n},!0),!0},_doEnd:function(e){var t=this._model,n=this,i=this._getSelections();return i.forEach(function(i){if(e.ctrl)i.extend(t.getCharCount());else{var r=i.getCaret(),o=t.getLineAtOffset(r);if(n._wrapMode){var s=n._getLine(o),a=s.getLineIndex(r);r=a===s.getLineCount()-1?t.getLineEnd(o):s.getLineStart(a+1)-1,s.destroy()}else e.count&&e.count>0&&(o=Math.min(o+e.count-1,t.getLineCount()-1)),r=t.getLineEnd(o);i.extend(r)}e.select||i.collapse()}),this._setSelection(i,!0,!0,e.ctrl?function(){}:null),!0},_doEnter:function(e){if(this._singleMode)return!0;var t=this._model,n=this._getSelections();return this._doContent(t.getLineDelimiter()),e&&e.noCursor&&(n.forEach(function(e){e.end=e.start}),this._setSelection(n,!0)),!0},_doEscape:function(){var e=this._getSelections();return e.length>1&&this._setSelection(e[0],!0),!0},_doHome:function(e){var t=this._model,n=this,i=this._getSelections();return i.forEach(function(i){if(e.ctrl)i.extend(0);else{var r=i.getCaret(),o=t.getLineAtOffset(r);if(n._wrapMode){var s=n._getLine(o),a=s.getLineIndex(r);r=s.getLineStart(a),s.destroy()}else r=t.getLineStart(o);i.extend(r)}e.select||i.collapse()}),this._setSelection(i,!0,!0,e.ctrl?function(){}:null),!0},_doLineDown:function(e){var t=this._model,n=this,i=this._getSelections();return i.forEach(function(i){var r,o=i.getCaret(),a=t.getLineAtOffset(o),l=n._getLine(a),c=i._columnX,h=1,d=!1;if(-1===c||e.wholeLine||e.select&&s.isIE){var u=e.wholeLine?t.getLineEnd(a+1):o;c=i._columnX=l.getBoundingClientRect(u).left}if((r=l.getLineIndex(o))<l.getLineCount()-1)h=l.getClientRects(r+1).top+1;else{var p=t.getLineCount()-1;d=a===p,e.count&&e.count>0?a=Math.min(a+e.count,p):a++}var f=!1;d?(e.select||s.isMac||s.isLinux)&&(i.extend(t.getCharCount()),f=!0):(l.lineIndex!==a&&(l.destroy(),l=n._getLine(a)),i.extend(l.getOffset(c,h)),f=!0),f&&(e.select||i.collapse()),l.destroy()}),n._setSelection(i,!0,!0,null,0,!1,!0),!0},_doLineUp:function(e){var t=this._model,n=this,i=this._getSelections();return i.forEach(function(i){var r,o,a=i.getCaret(),l=t.getLineAtOffset(a),c=n._getLine(l),h=i._columnX,d=!1;if(-1===h||e.wholeLine||e.select&&s.isIE){var u=e.wholeLine?t.getLineStart(l-1):a;h=i._columnX=c.getBoundingClientRect(u).left}(r=c.getLineIndex(a))>0?o=c.getClientRects(r-1).top+1:(d=0===l,d||(e.count&&e.count>0?l=Math.max(l-e.count,0):l--,o=n._getLineHeight(l)-1));var p=!1;d?(e.select||s.isMac||s.isLinux)&&(i.extend(0),p=!0):(c.lineIndex!==l&&(c.destroy(),c=n._getLine(l)),i.extend(c.getOffset(h,o)),p=!0),p&&(e.select||i.collapse()),c.destroy()}),n._setSelection(i,!0,!0,null,0,!1,!0),!0},_doNoop:function(){return!0},_doPageDown:function(e){var t,n,i,r=this,o=this._model,a=this._getSelections(),l=o.getLineCount(),c=this._getScroll(),h=this._getClientHeight(),d=this._getLineHeight(),u=Math.floor(h/d);return a.forEach(function(a){var p=a.getCaret(),f=o.getLineAtOffset(p);if(r._lineHeight){t=a._columnX;var g=r._getBoundsAtOffset(p);(-1===t||e.select&&s.isIE)&&(t=a._columnX=g.left);var m=r._getLineIndex(g.top+h);n=r._getLine(m);var v=r._getLinePixel(m),_=g.top+h-v;p=n.getOffset(t,_);var y=n.getBoundingClientRect(p);n.destroy(),a.extend(p),e.select||a.collapse(),i=void 0!==i?Math.min(i,y.top+v-g.top):y.top+v-g.top}else if(l-1>f){var x=Math.min(l-f-1,u);x=Math.max(1,x),t=a._columnX,(-1===t||e.select&&s.isIE)&&(n=r._getLine(f),t=a._columnX=n.getBoundingClientRect(p).left,n.destroy()),n=r._getLine(f+x),a.extend(n.getOffset(t,0)),n.destroy(),e.select||a.collapse();var w=l*d,b=c.y+x*d;b+h>w&&(b=w-h),i=void 0!==i?Math.min(i,b-c.y):b-c.y}}),this._setSelection(a,!0,!0,function(){},i,!1,!0),!0},_doPageUp:function(e){var t,n,i,r=this,o=this._model,a=this._getSelections(),l=this._getScroll(),c=this._getClientHeight(),h=this._getLineHeight(),d=Math.floor(c/h);return a.forEach(function(a){var u=a.getCaret(),p=o.getLineAtOffset(u);if(r._lineHeight){t=a._columnX;var f=r._getBoundsAtOffset(u);(-1===t||e.select&&s.isIE)&&(t=a._columnX=f.left);var g=r._getLineIndex(f.bottom-c);n=r._getLine(g);var m=r._getLinePixel(g),v=f.bottom-c-m;u=n.getOffset(t,v);var _=n.getBoundingClientRect(u);n.destroy(),a.extend(u),e.select||a.collapse(),i=void 0!==i?Math.max(i,_.top+m-f.top):_.top+m-f.top}else if(p>0){var y=Math.max(1,Math.min(p,d));t=a._columnX,(-1===t||e.select&&s.isIE)&&(n=r._getLine(p),t=a._columnX=n.getBoundingClientRect(u).left,n.destroy()),n=r._getLine(p-y),a.extend(n.getOffset(t,r._getLineHeight(p-y)-1)),n.destroy(),e.select||a.collapse();var x=Math.max(0,l.y-y*h);i=void 0!==i?Math.max(i,x-l.y):x-l.y}}),this._setSelection(a,!0,!0,function(){},i,!1,!0),!0},_doPaste:function(e){var t=this,n=this._getClipboardText(e,function(e){if(e.length){if(s.isLinux&&2===t._lastMouseButton){var n=(new Date).getTime()-t._lastMouseTime;n<=t._clickTime&&t._setSelectionTo(t._lastMouseX,t._lastMouseY,!0)}var i=t._getSelections(),r=t._singleMode?"":t._model.getLineDelimiter();t._doContent(i.length>1&&i.length===e.length?e:e.join(r))}});return null!==n},_doScroll:function(e){var t,n=e.type,i=this._model,r=i.getLineCount(),o=this._getClientHeight(),s=this._getLineHeight(),a=this._lineHeight?this._scrollHeight:r*s,l=this._getScroll().y;switch(n){case"textStart":t=0;break;case"textEnd":t=a-o;break;case"pageDown":t=l+o;break;case"pageUp":t=l-o;break;case"lineDown":t=l+s;break;case"lineUp":t=l-s;break;case"centerLine":var c=this._getSelections()[0],h=i.getLineAtOffset(c.start),d=i.getLineAtOffset(c.end),u=(d-h+1)*s;t=h*s-o/2+u/2}return void 0!==t&&(t=Math.min(Math.max(0,t),a-o),this._scrollViewAnimated(0,t-l,function(){})),!0},_doSelectAll:function(){var e=this._model;return this._setSelection(new x(0,e.getCharCount()),!1),!0},_doTab:function(){if(this._tabMode&&!this._readonly){var e="	",t=this._getSelections();if(this._expandTab){e=[];var n=this._model,i=this._tabSize;t.forEach(function(t){var r=t.getCaret(),o=n.getLineAtOffset(r),s=n.getLineStart(o),a=i-(r-s)%i;e.push(h(a+1).join(" "))})}return this._modifyContent({text:e,selection:t,_ignoreDOMSelection:!0},!0)}},_doShiftTab:function(){return this._tabMode&&!this._readonly?!0:void 0},_doOverwriteMode:function(){return this._readonly?void 0:(this.setOptions({overwriteMode:!this.getOptions("overwriteMode")}),!0)},_doTabMode:function(){return this.setOptions({tabMode:!this.getOptions("tabMode")}),!0},_doWrapMode:function(){return this.setOptions({wrapMode:!this.getOptions("wrapMode")}),!0},_autoScroll:function(){var e,t,n=this._model,i=this._getSelections(),r=x.editing(i,"down"===this._autoScrollDir),o=this.convert({x:this._autoScrollX,y:this._autoScrollY},"page","document"),a=r.getCaret(),l=n.getLineCount(),c=n.getLineAtOffset(a);if("up"===this._autoScrollDir||"down"===this._autoScrollDir){var h=this._autoScrollY/this._getLineHeight();h=0>h?Math.floor(h):Math.ceil(h),e=c,e=Math.max(0,Math.min(l-1,e+h))}else("left"===this._autoScrollDir||"right"===this._autoScrollDir)&&(e=this._getLineIndex(o.y),t=this._getLine(c),o.x+=t.getBoundingClientRect(a,!1).left,t.destroy());this._blockSelection?i=this._getBlockSelections(i,e,o):0===e&&(s.isMac||s.isLinux)?r.extend(0):e===l-1&&(s.isMac||s.isLinux)?r.extend(n.getCharCount()):(t=this._getLine(e),r.extend(t.getOffset(o.x,o.y-this._getLinePixel(e))),t.destroy()),this._setSelection(i,!0)},_autoScrollTimer:function(){this._autoScroll();var e=this,t=this._getWindow();this._autoScrollTimerID=t.setTimeout(function(){e._autoScrollTimer()},this._AUTO_SCROLL_RATE)},_calculateLineHeightTimer:function(e){if(this._lineHeight&&!this._calculateLHTimer){var t=this._model.getLineCount(),n=0;if(e){for(var i=0,r=100,o=(new Date).getTime(),s=0;t>n&&(this._lineHeight[n]||(i++,s||(s=n),this._lineHeight[n]=this._calculateLineHeight(n)),n++,!((new Date).getTime()-o>r)););this.redrawRulers(0,t),this._queueUpdate()}var a=this._getWindow();if(n!==t){var l=this;return void(this._calculateLHTimer=a.setTimeout(function(){l._calculateLHTimer=null,l._calculateLineHeightTimer(!0)},0))}this._calculateLHTimer&&(a.clearTimeout(this._calculateLHTimer),this._calculateLHTimer=void 0)}},_calculateLineHeight:function(e){var t=this._getLine(e),n=t.getBoundingClientRect();return t.destroy(),Math.max(1,n.bottom-n.top)},_calculateMetrics:function(){var e=this._clientDiv,t=e.ownerDocument,n=" ",i=s.createElement(t,"div");i.style.lineHeight="normal";var r=this._model,o=r.getLine(0),a={type:"LineStyle",textView:this,0:0,lineText:o,lineStart:0};this.onLineStyle(a),d(a.style,i),i.style.position="fixed",i.style.left="-1000px";var l=s.createElement(t,"span");l.appendChild(t.createTextNode(n)),i.appendChild(l);var c=s.createElement(t,"span");c.style.fontStyle="italic",c.appendChild(t.createTextNode(n)),i.appendChild(c);var u=s.createElement(t,"span");u.style.fontWeight="bold",u.appendChild(t.createTextNode(n)),i.appendChild(u);var p=s.createElement(t,"span");p.style.fontWeight="bold",p.style.fontStyle="italic",p.appendChild(t.createTextNode(n)),i.appendChild(p),e.appendChild(i);var f=i.getBoundingClientRect(),g=l.getBoundingClientRect(),m=c.getBoundingClientRect(),y=u.getBoundingClientRect(),x=p.getBoundingClientRect(),w=g.bottom-g.top,b=m.bottom-m.top,C=y.bottom-y.top,E=x.bottom-x.top,T=0,S=f.bottom-f.top<=0,k=Math.max(1,f.bottom-f.top);b>w&&(T=1),C>b&&(T=2),E>C&&(T=3);var A;0!==T&&(A={style:{}},0!==(1&T)&&(A.style.fontStyle="italic"),0!==(2&T)&&(A.style.fontWeight="bold"));var L=_(i);e.removeChild(i);var M=v(this._viewDiv),N=s.createElement(t,"div");N.style.position="fixed",N.style.left="-1000px",N.style.paddingLeft=M.left+"px",N.style.paddingTop=M.top+"px",N.style.paddingRight=M.right+"px",N.style.paddingBottom=M.bottom+"px",N.style.width="100px",N.style.height="100px";var O=s.createElement(t,"div");O.style.width="100%",O.style.height="100%",N.appendChild(O),e.appendChild(N);var D=N.getBoundingClientRect(),R=O.getBoundingClientRect(),I=0;if(!this._singleMode&&!this._noScroll){N.style.overflow="hidden",O.style.height="200px";var P=N.clientWidth;N.style.overflow="scroll";var B=N.clientWidth;I=P-B}e.removeChild(N),M={left:R.left-D.left,top:R.top-D.top,right:D.right-R.right,bottom:D.bottom-R.bottom};var F=0,V=0,K=0;return S||(N=s.createElement(t,"div"),N.style.position="fixed",N.style.left="-1000px",e.appendChild(N),N.innerHTML=h(2).join("a"),D=N.getBoundingClientRect(),K=Math.ceil(D.right-D.left),(this._wrapOffset||this._marginOffset)&&(N.innerHTML=h(this._wrapOffset+1+(s.isWebkit?0:1)).join(" "),D=N.getBoundingClientRect(),F=Math.ceil(D.right-D.left),N.innerHTML=h(this._marginOffset+1).join(" "),R=N.getBoundingClientRect(),V=Math.ceil(R.right-R.left)),e.removeChild(N)),{lineHeight:k,largestFontStyle:A,lineTrim:L,viewPadding:M,scrollWidth:I,wrapWidth:F,marginWidth:V,charWidth:K,invalid:S}},_cancelAnimation:function(){this._animation&&(this._animation.stop(),this._animation=null)},_clearSelection:function(e){var t=this._getSelections();return t.forEach(function(t){"next"===e?t.start=t.end:t.end=t.start}),this._setSelection(t,!0),!0},_commitIME:function(e){if(-1!==this._imeOffset){var t=this._model,n=t.getLineAtOffset(this._imeOffset),i=t.getLineStart(n),r=this._getLineNode(n);if(!e){this._scrollDiv.focus(),this._clientDiv.focus();var o=this._getDOMText(r).text,a=t.getLine(n),l=this._imeOffset-i,c=l+o.length-a.length;l!==c&&(e=o.substring(l,c))}this._imeOffset=-1,e&&(this._doContent(e)||s.isWebkit||(r.lineRemoved=!0,this._queueUpdate()))}},_createActions:function(){this.addKeyMode(new n.DefaultKeyMode(this));var t=this;this._actions={noop:{defaultHandler:function(){return t._doNoop()}},lineUp:{defaultHandler:function(e){return t._doLineUp(p(e,{select:!1}))},actionDescription:{name:e.lineUp}},lineDown:{defaultHandler:function(e){return t._doLineDown(p(e,{select:!1}))},actionDescription:{name:e.lineDown}},lineStart:{defaultHandler:function(e){return t._doHome(p(e,{select:!1,ctrl:!1}))},actionDescription:{name:e.lineStart}},lineEnd:{defaultHandler:function(e){return t._doEnd(p(e,{select:!1,ctrl:!1}))},actionDescription:{name:e.lineEnd}},charPrevious:{defaultHandler:function(e){return t._doCursorPrevious(p(e,{select:!1,unit:"character"}))},actionDescription:{name:e.charPrevious}},charNext:{defaultHandler:function(e){return t._doCursorNext(p(e,{select:!1,unit:"character"}))},actionDescription:{name:e.charNext}},pageUp:{defaultHandler:function(e){return t._doPageUp(p(e,{select:!1}))},actionDescription:{name:e.pageUp}},pageDown:{defaultHandler:function(e){return t._doPageDown(p(e,{select:!1}))},actionDescription:{name:e.pageDown}},scrollPageUp:{defaultHandler:function(e){return t._doScroll(p(e,{type:"pageUp"}))},actionDescription:{name:e.scrollPageUp}},scrollPageDown:{defaultHandler:function(e){return t._doScroll(p(e,{type:"pageDown"}))},actionDescription:{name:e.scrollPageDown}},scrollLineUp:{defaultHandler:function(e){return t._doScroll(p(e,{type:"lineUp"}))},actionDescription:{name:e.scrollLineUp}},scrollLineDown:{defaultHandler:function(e){return t._doScroll(p(e,{type:"lineDown"}))},actionDescription:{name:e.scrollLineDown}},wordPrevious:{defaultHandler:function(e){return t._doCursorPrevious(p(e,{select:!1,unit:"word"}))},actionDescription:{name:e.wordPrevious}},wordNext:{defaultHandler:function(e){return t._doCursorNext(p(e,{select:!1,unit:"word"}))},actionDescription:{name:e.wordNext}},textStart:{defaultHandler:function(e){return t._doHome(p(e,{select:!1,ctrl:!0}))},actionDescription:{name:e.textStart}},textEnd:{defaultHandler:function(e){return t._doEnd(p(e,{select:!1,ctrl:!0}))},actionDescription:{name:e.textEnd}},scrollTextStart:{defaultHandler:function(e){return t._doScroll(p(e,{type:"textStart"}))},actionDescription:{name:e.scrollTextStart}},scrollTextEnd:{defaultHandler:function(e){return t._doScroll(p(e,{type:"textEnd"}))},actionDescription:{name:e.scrollTextEnd}},centerLine:{defaultHandler:function(e){return t._doScroll(p(e,{type:"centerLine"}))},actionDescription:{name:e.centerLine}},selectLineUp:{defaultHandler:function(e){return t._doLineUp(p(e,{select:!0}))},actionDescription:{name:e.selectLineUp}},selectLineDown:{defaultHandler:function(e){return t._doLineDown(p(e,{select:!0}))},actionDescription:{name:e.selectLineDown}},selectWholeLineUp:{defaultHandler:function(e){return t._doLineUp(p(e,{select:!0,wholeLine:!0}))},actionDescription:{name:e.selectWholeLineUp}},selectWholeLineDown:{defaultHandler:function(e){return t._doLineDown(p(e,{select:!0,wholeLine:!0}))},actionDescription:{name:e.selectWholeLineDown}},selectLineStart:{defaultHandler:function(e){return t._doHome(p(e,{select:!0,ctrl:!1}))},actionDescription:{name:e.selectLineStart}},selectLineEnd:{defaultHandler:function(e){return t._doEnd(p(e,{select:!0,ctrl:!1}))},actionDescription:{name:e.selectLineEnd}},selectCharPrevious:{defaultHandler:function(e){return t._doCursorPrevious(p(e,{select:!0,unit:"character"}))},actionDescription:{name:e.selectCharPrevious}},selectCharNext:{defaultHandler:function(e){return t._doCursorNext(p(e,{select:!0,unit:"character"}))},actionDescription:{name:e.selectCharNext}},selectPageUp:{defaultHandler:function(e){return t._doPageUp(p(e,{select:!0}))},actionDescription:{name:e.selectPageUp}},selectPageDown:{defaultHandler:function(e){return t._doPageDown(p(e,{select:!0}))},actionDescription:{name:e.selectPageDown}},selectWordPrevious:{defaultHandler:function(e){return t._doCursorPrevious(p(e,{select:!0,unit:"word"}))},actionDescription:{name:e.selectWordPrevious}},selectWordNext:{defaultHandler:function(e){return t._doCursorNext(p(e,{select:!0,unit:"word"}))},actionDescription:{name:e.selectWordNext}},selectTextStart:{defaultHandler:function(e){return t._doHome(p(e,{select:!0,ctrl:!0}))},actionDescription:{name:e.selectTextStart}},selectTextEnd:{defaultHandler:function(e){return t._doEnd(p(e,{select:!0,ctrl:!0}))},actionDescription:{name:e.selectTextEnd}},deletePrevious:{defaultHandler:function(e){return t._doBackspace(p(e,{unit:"character"}))},actionDescription:{name:e.deletePrevious}},deleteNext:{defaultHandler:function(e){return t._doDelete(p(e,{unit:"character"}))},actionDescription:{name:e.deleteNext}},deleteWordPrevious:{defaultHandler:function(e){return t._doBackspace(p(e,{unit:"word"}))},actionDescription:{name:e.deleteWordPrevious}},deleteWordNext:{defaultHandler:function(e){return t._doDelete(p(e,{unit:"word"}))},actionDescription:{name:e.deleteWordNext}},deleteLineStart:{defaultHandler:function(e){return t._doBackspace(p(e,{unit:"line"}))},actionDescription:{name:e.deleteLineStart}},deleteLineEnd:{defaultHandler:function(e){return t._doDelete(p(e,{unit:"line"}))},actionDescription:{name:e.deleteLineEnd}},tab:{defaultHandler:function(e){return t._doTab(p(e,{}))},actionDescription:{name:e.tab}},shiftTab:{defaultHandler:function(e){return t._doShiftTab(p(e,{}))},actionDescription:{name:e.shiftTab}},enter:{defaultHandler:function(e){return t._doEnter(p(e,{}))},actionDescription:{name:e.enter}},enterNoCursor:{defaultHandler:function(e){return t._doEnter(p(e,{noCursor:!0}))},actionDescription:{name:e.enterNoCursor}},escape:{defaultHandler:function(e){return t._doEscape(p(e,{}))},actionDescription:{name:e.escape}},selectAll:{defaultHandler:function(e){return t._doSelectAll(p(e,{}))},actionDescription:{name:e.selectAll}},copy:{defaultHandler:function(e){return t._doCopy(p(e,{}))},actionDescription:{name:e.copy}},cut:{defaultHandler:function(e){return t._doCut(p(e,{}))},actionDescription:{name:e.cut}},paste:{defaultHandler:function(e){return t._doPaste(p(e,{}))},actionDescription:{name:e.paste}},uppercase:{defaultHandler:function(e){return t._doCase(p(e,{type:"upper"}))},actionDescription:{name:e.uppercase}},lowercase:{defaultHandler:function(e){return t._doCase(p(e,{type:"lower"}))},actionDescription:{name:e.lowercase}},capitalize:{defaultHandler:function(e){return t._doCase(p(e,{unit:"word",type:"capitalize"}))},actionDescription:{name:e.capitalize}},reversecase:{defaultHandler:function(e){return t._doCase(p(e,{type:"reverse"}))},actionDescription:{name:e.reversecase}},toggleOverwriteMode:{defaultHandler:function(e){return t._doOverwriteMode(p(e,{}))},actionDescription:{name:e.toggleOverwriteMode}},toggleTabMode:{defaultHandler:function(e){return t._doTabMode(p(e,{}))},actionDescription:{name:e.toggleTabMode}},toggleWrapMode:{defaultHandler:function(e){return t._doWrapMode(p(e,{}))},actionDescription:{name:e.toggleWrapMode}}}},_createRulerParent:function(e,t){var n=s.createElement(e,"div");return n.className=t,n.tabIndex=-1,n.style.overflow="hidden",n.style.MozUserSelect="none",n.style.WebkitUserSelect="none",n.style.position="absolute",n.style.top="0px",n.style.bottom="0px",n.style.cursor="default",n.style.display="none",n.setAttribute("aria-hidden","true"),this._rootDiv.appendChild(n),n},_createRuler:function(e,t){if(this._clientDiv){var n=this._getRulerParent(e);if(n){(n!==this._marginDiv||this._marginOffset)&&(n.style.display="block"),n.rulerWidth=void 0;var i=s.createElement(n.ownerDocument,"div");if(i._ruler=e,e.node=i,i.rulerChanged=!0,i.style.position="relative",i.style.cssFloat="left",i.style.styleFloat="left",i.style.outline="none",void 0===t||0>t||t>=n.children.length)n.appendChild(i);else{for(var r=n.firstChild;r&&t-- >0;)r=r.nextSibling;n.insertBefore(i,r);
}}}},_createSelectionDiv:function(){var e=s.createElement(this._parent.ownerDocument,"div");return e.className="textviewSelection",e.style.position="absolute",e.style.borderWidth="0px",e.style.margin="0px",e.style.padding="0px",e.style.outline="none",e.style.width="0px",e.style.height="0px",e.style.zIndex="0",e},_createView:function(){function e(){w._rootDiv&&(w.update(!0),w._metrics.invalid&&w._getWindow().setTimeout(function(){e()},100))}if(!this._clientDiv){for(var t=this._parent;t.hasChildNodes();)t.removeChild(t.lastChild);var n=t.ownerDocument,i=s.createElement(n,"div");this._rootDiv=i,i.tabIndex=-1,i.style.position="relative",i.style.overflow="hidden",i.style.width="100%",i.style.height="100%",i.style.overflow="hidden",i.style.WebkitTextSizeAdjust="100%",i.setAttribute("role","application"),t.appendChild(i);var r=this._createRulerParent(n,"textviewLeftRuler");this._leftDiv=r;var o=s.createElement(n,"div");o.className="textviewScroll",this._viewDiv=o,o.tabIndex=-1,o.style.position="absolute",o.style.top="0px",o.style.bottom="0px",o.style.borderWidth="0px",o.style.margin="0px",o.style.outline="none",o.style.background="transparent",i.appendChild(o);var l=this._createRulerParent(n,"textviewRightRuler");this._rightDiv=l,"rtl"==document.dir?l.style.left="0px":l.style.right="0px";var c=this._createRulerParent(n,"textviewInnerRightRuler");this._innerRightDiv=c,c.style.zIndex="1";var h=s.createElement(n,"div");this._scrollDiv=h,h.style.margin="0px",h.style.borderWidth="0px",h.style.padding="0px",o.appendChild(h);var d=this._marginDiv=this._createRulerParent(n,"textviewMarginRuler");if(d.style.zIndex="4",!s.isIE&&!s.isIOS){var u=s.createElement(n,"div");this._clipDiv=u,u.style.position="absolute",u.style.overflow="hidden",u.style.margin="0px",u.style.borderWidth="0px",u.style.padding="0px",u.style.background="transparent",i.appendChild(u);var p=s.createElement(n,"div");this._clipScrollDiv=p,p.style.position="absolute",p.style.height="1px",p.style.top="-1000px",p.style.background="transparent",u.appendChild(p)}var f=s.createElement(n,"div");if(f.className="textviewContent",this._clientDiv=f,f.tabIndex=0,f.style.position="absolute",f.style.borderWidth="0px",f.style.margin="0px",f.style.padding="0px",f.style.outline="none",f.style.zIndex="1",f.style.WebkitUserSelect="text",f.setAttribute("spellcheck","false"),(s.isIOS||s.isAndroid)&&(f.style.WebkitTapHighlightColor="transparent"),(this._clipDiv||i).appendChild(f),this._setFullSelection(this._fullSelection,!0),s.isIOS||s.isAndroid){var g=s.createElement(n,"div");this._vScrollDiv=g,g.style.position="absolute",g.style.borderWidth="1px",g.style.borderColor="white",g.style.borderStyle="solid",g.style.borderRadius="4px",g.style.backgroundColor="black",g.style.opacity="0.5",g.style.margin="0px",g.style.padding="0px",g.style.outline="none",g.style.zIndex="3",g.style.width="8px",g.style.display="none",i.appendChild(g);var m=s.createElement(n,"div");this._hScrollDiv=m,m.style.position="absolute",m.style.borderWidth="1px",m.style.borderColor="white",m.style.borderStyle="solid",m.style.borderRadius="4px",m.style.backgroundColor="black",m.style.opacity="0.5",m.style.margin="0px",m.style.padding="0px",m.style.outline="none",m.style.zIndex="3",m.style.height="8px",m.style.display="none",i.appendChild(m)}if(s.isFirefox&&!f.setCapture){var v=s.createElement(n,"div");this._overlayDiv=v,v.style.position=f.style.position,v.style.borderWidth=f.style.borderWidth,v.style.margin=f.style.margin,v.style.padding=f.style.padding,v.style.cursor="text",v.style.zIndex="2",(this._clipDiv||i).appendChild(v)}f.contentEditable="true",this._setWrapMode(this._wrapMode,!0),this._setReadOnly(this._readonly),this._setThemeClass(this._themeClass,!0),this._setTabSize(this._tabSize,!0),this._setMarginOffset(this._marginOffset,!0),this._hookEvents(),a.initInputField(f);for(var _=this._rulers,x=0;x<_.length;x++)this._createRuler(_[x]);this._update();var w=this;y(n,i,"textview",e)}},_defaultOptions:function(){return{parent:{value:void 0,update:null},model:{value:void 0,update:this.setModel},scrollAnimation:{value:0,update:null},readonly:{value:!1,update:this._setReadOnly},fullSelection:{value:!0,update:this._setFullSelection},tabMode:{value:!0,update:null},tabSize:{value:8,update:this._setTabSize},expandTab:{value:!1,update:null},singleMode:{value:!1,update:this._setSingleMode},noScroll:{value:!1,update:this._setNoScroll},overwriteMode:{value:!1,update:this._setOverwriteMode},blockCursorVisible:{value:!1,update:this._setBlockCursor},marginOffset:{value:0,update:this._setMarginOffset},wrapOffset:{value:0,update:this._setWrapOffset},wrapMode:{value:!1,update:this._setWrapMode},wrappable:{value:!1,update:null},undoStack:{value:null,update:this._setUndoStack},theme:{value:r.TextTheme.getTheme(),update:this._setTheme},themeClass:{value:void 0,update:this._setThemeClass}}},_destroyRuler:function(e){var t=this._getRulerParent(e);if(t)for(var n=t.firstChild;n;){if(n._ruler===e){n._ruler=void 0,t.removeChild(n),0!==t.children.length||t===this._marginDiv&&this._marginOffset||(t.style.display="none"),t.rulerWidth=void 0;break}n=n.nextSibling}},_destroyView:function(){var e=this._clientDiv;if(e){this._setGrab(null),this._unhookEvents();var t=this._getWindow();this._autoScrollTimerID&&(t.clearTimeout(this._autoScrollTimerID),this._autoScrollTimerID=null),this._updateTimer&&(t.clearTimeout(this._updateTimer),this._updateTimer=null),this._calculateLHTimer&&(t.clearTimeout(this._calculateLHTimer),this._calculateLHTimer=null),this._cursorTimer&&(t.clearInterval(this._cursorTimer),this._cursorTimer=null),this._imeTimeout&&(t.clearInterval(this._imeTimeout),this._imeTimeout=null);var n=this._rootDiv;n.parentNode.removeChild(n),this._domSelection=null,this._clipboardDiv=null,this._rootDiv=null,this._scrollDiv=null,this._viewDiv=null,this._clipDiv=null,this._clipScrollDiv=null,this._clientDiv=null,this._overlayDiv=null,this._leftDiv=null,this._rightDiv=null,this._innerRightDiv=null,this._marginDiv=null,this._cursorDiv=null,this._vScrollDiv=null,this._hScrollDiv=null}},_doAutoScroll:function(e,t,n){this._autoScrollDir=e,this._autoScrollX=t,this._autoScrollY=n,this._autoScrollTimerID||this._autoScrollTimer()},_endAutoScroll:function(){if(this._autoScrollTimerID){var e=this._getWindow();e.clearTimeout(this._autoScrollTimerID)}this._autoScrollDir=void 0,this._autoScrollTimerID=void 0},_fixCaret:function(){var e=this._clientDiv;if(e){var t=this._hasFocus;this._ignoreFocus=!0,t&&e.blur(),e.contentEditable=!1,e.contentEditable=!0,t&&e.focus(),this._ignoreFocus=!1}},_getBaseText:function(e,t){var n=this._model;return n.getBaseModel&&(e=n.mapOffset(e),t=n.mapOffset(t),n=n.getBaseModel()),n.getText(e,t)},_getBottomIndex:function(e){var t=this._bottomChild;if(e&&this._getClientHeight()>this._getLineHeight()){var n=t.getBoundingClientRect(),i=this._clientDiv.getBoundingClientRect();n.bottom>i.bottom&&(t=this._getLinePrevious(t)||t)}return t.lineIndex},_getBlockSelections:function(e,t,n){var i=this._model;e=e.filter(function(e){return!e._editing});var r,o=i.getLineAtOffset(this._blockSelection.getAnchor());t>o?r=t:(r=o,o=t);for(var s=o;r>=s;s++){var a=this._getLine(s),l=a.getOffset(n.x,1),c=a.getOffset(this._blockSelection._docX,1);if(a.destroy(),l!==c||l!==i.getLineEnd(s)){var h=c>l,d=new x(h?l:c,h?c:l,h);d._editing=!0,e.push(d)}}return e},_getBoundsAtOffset:function(e){var t=this._model,n=this._getLine(t.getLineAtOffset(e)),i=n.getBoundingClientRect(e),r=this._getLinePixel(n.lineIndex);return i.top+=r,i.bottom+=r,n.destroy(),i},_getClientHeight:function(){var e=this._getViewPadding();return Math.max(0,this._viewDiv.clientHeight-e.top-e.bottom)},_getInnerRightWidth:function(){var e=this._innerRightDiv.rulerWidth;if(void 0===e){var t=this._innerRightDiv.getBoundingClientRect();this._innerRightDiv.rulerWidth=e=t.right-t.left}return e},_getClientWidth:function(){var e=this._getViewPadding(),t=this._getInnerRightWidth();return Math.max(0,this._viewDiv.clientWidth-e.left-e.right-t)},_getClipboardText:function(e,t){function n(e){var n=[];return g(e,function(e){n.push(e)},null),t&&t(n),n}var i=this._getWindow(),r=i.clipboardData;if(!r&&e&&(r=e.clipboardData),r)return n(r.getData(s.isIE?"Text":"text/plain"));if(s.isElectron&&!e)return n(window.__clipboardModule.readText());if(s.isFirefox){this._ignoreFocus=!0;var o=this._clipboardDiv,a=this._rootDiv.ownerDocument;o||(o=s.createElement(a,"div"),this._clipboardDiv=o,o.style.position="fixed",o.style.whiteSpace="pre",o.style.left="-1000px",this._rootDiv.appendChild(o)),o.innerHTML="<pre contenteditable=''></pre>",o.firstChild.focus();var l=this,c=function(){var e=l._getTextFromElement(o);return o.innerHTML="",n(e)},h=!1;if(this._ignorePaste=!0,!s.isLinux||2!==this._lastMouseButton)try{h=a.execCommand("paste",!1,null)}catch(d){h=o.childNodes.length>1||o.firstChild&&o.firstChild.childNodes.length>0}return this._ignorePaste=!1,h?(this.focus(),this._ignoreFocus=!1,c()):e?(i.setTimeout(function(){l.focus(),c(),l._ignoreFocus=!1},0),null):(this.focus(),this._ignoreFocus=!1,"")}return""},_getDOMText:function(e,t){return e._line.getText(t)},_getTextFromElement:function(e){var t=e.ownerDocument,n=t.defaultView;if(!n.getSelection)return e.innerText||e.textContent;var i=t.createRange();i.selectNode(e);var r,o=n.getSelection(),s=[];for(r=0;r<o.rangeCount;r++)s.push(o.getRangeAt(r));this._ignoreSelect=!0,o.removeAllRanges(),o.addRange(i);var a=o.toString();for(o.removeAllRanges(),r=0;r<s.length;r++)o.addRange(s[r]);return this._ignoreSelect=!1,a},_getViewPadding:function(){return this._metrics.viewPadding},_getLine:function(e){var t=this._getLineNode(e);return!t||t.lineChanged||t.lineRemoved?new C(this,e):t._line},_getLineHeight:function(e,t){if(void 0!==e&&this._lineHeight){var n=this._lineHeight[e];if(n)return n;if(t||void 0===t){var i=this._lineHeight[e]=this._calculateLineHeight(e);return i}}return this._metrics.lineHeight},_getLineNode:function(e){for(var t=this._clientDiv,n=t.firstChild;n;){if(e===n.lineIndex)return n;n=n.nextSibling}},_getLineNext:function(e){for(var t=e?e.nextSibling:this._clientDiv.firstChild;t&&(-1===t.lineIndex||!t._line);)t=t.nextSibling;return t},_getLinePrevious:function(e){for(var t=e?e.previousSibling:this._clientDiv.lastChild;t&&(-1===t.lineIndex||!t._line);)t=t.previousSibling;return t},_getLinePixel:function(e){if(e=Math.min(Math.max(0,e),this._model.getLineCount()),this._lineHeight){var t,n=this._getTopIndex(),i=-this._topIndexY+this._getScroll().y;if(e>n)for(t=n;e>t;t++)i+=this._getLineHeight(t);else for(t=n-1;t>=e;t--)i-=this._getLineHeight(t);return i}var r=this._getLineHeight();return r*e},_getLineIndex:function(e,t){var n,i=0,r=this._model.getLineCount();if(this._lineHeight){i=this._getTopIndex();var o=-this._topIndexY+this._getScroll().y;if(e!==o)if(o>e)for(;o>e&&i>0;)e+=this._getLineHeight(--i);else for(n=this._getLineHeight(i);e-n>=o&&r-1>i;)e-=n,n=this._getLineHeight(++i)}else n=this._getLineHeight(),i=Math.floor(e/n);return t&&(0===r||0>i||i>r-1)?-1:Math.max(0,Math.min(r-1,i))},_getRulerParent:function(e){switch(e.getLocation()){case"left":return this._leftDiv;case"right":return this._rightDiv;case"innerRight":return this._innerRightDiv;case"margin":return this._marginDiv}return null},_getScroll:function(e){(void 0===e||e)&&this._cancelAnimation();var t=this._viewDiv;return{x:t.scrollLeft,y:t.scrollTop}},_getSelection:function(){return(Array.isArray(this._selection)?this._selection[0]:this._selection).clone()},_getSelections:function(){return(Array.isArray(this._selection)?this._selection:[this._selection]).map(function(e){return e.clone()})},_getTopIndex:function(e){var t=this._topChild;if(e&&this._getClientHeight()>this._getLineHeight()){var n=t.getBoundingClientRect(),i=this._getViewPadding(),r=this._viewDiv.getBoundingClientRect();n.top<r.top+i.top&&(t=this._getLineNext(t)||t)}return t.lineIndex},_hookEvents:function(){var e=this;this._modelListener={onChanging:function(t){e._onModelChanging(t)},onChanged:function(t){e._onModelChanged(t)}},this._model.addEventListener("preChanging",this._modelListener.onChanging),this._model.addEventListener("postChanged",this._modelListener.onChanged),this._themeListener={onChanged:function(){e._setThemeClass(e._themeClass)}},this._theme.addEventListener("ThemeChanged",this._themeListener.onChanged);var t=this._handlers=[],n=this._clientDiv,i=this._viewDiv,r=this._rootDiv,o=this._overlayDiv||n,a=n.ownerDocument,l=this._getWindow(),c=s.isIE?a:l;t.push({target:l,type:"resize",handler:function(t){return e._handleResize(t?t:l.event)}}),t.push({target:n,type:"blur",handler:function(t){return e._handleBlur(t?t:l.event)}}),t.push({target:n,type:"focus",handler:function(t){return e._handleFocus(t?t:l.event)}}),t.push({target:i,type:"focus",handler:function(){n.focus()}});var h=e.getModel();if(h&&"function"==typeof h.deferScroll){var d=h.deferScroll(e,e._handleScroll.bind(e));t.push({target:i,type:"scroll",handler:function(e){return d(e?e:l.event)}})}else t.push({target:i,type:"scroll",handler:function(t){return e._handleScroll(t?t:l.event)}});if(t.push({target:n,type:"textInput",handler:function(t){return e._handleTextInput(t?t:l.event)}}),t.push({target:n,type:"keydown",handler:function(t){return e._handleKeyDown(t?t:l.event)}}),t.push({target:n,type:"keypress",handler:function(t){return e._handleKeyPress(t?t:l.event)}}),t.push({target:n,type:"keyup",handler:function(t){return e._handleKeyUp(t?t:l.event)}}),s.isIE&&t.push({target:a,type:"keyup",handler:function(t){return e._handleDocKeyUp(t?t:l.event)}}),t.push({target:n,type:"contextmenu",handler:function(t){return e._handleContextMenu(t?t:l.event)}}),t.push({target:n,type:"copy",handler:function(t){return e._handleCopy(t?t:l.event)}}),t.push({target:n,type:"cut",handler:function(t){return e._handleCut(t?t:l.event)}}),t.push({target:n,type:"paste",handler:function(t){return e._handlePaste(t?t:l.event)}}),t.push({target:a,type:"selectionchange",handler:function(t){return e._handleSelectionChange(t?t:l.event)}}),s.isIOS||s.isAndroid)t.push({target:n,type:"touchstart",handler:function(t){return e._handleTouchStart(t?t:l.event)}}),t.push({target:n,type:"touchmove",handler:function(t){return e._handleTouchMove(t?t:l.event)}}),t.push({target:n,type:"touchend",handler:function(t){return e._handleTouchEnd(t?t:l.event)}});else{if(t.push({target:n,type:"selectstart",handler:function(t){return e._handleSelectStart(t?t:l.event)}}),t.push({target:n,type:"mousedown",handler:function(t){return e._handleMouseDown(t?t:l.event)}}),t.push({target:n,type:"mouseover",handler:function(t){return e._handleMouseOver(t?t:l.event)}}),t.push({target:n,type:"mouseout",handler:function(t){return e._handleMouseOut(t?t:l.event)}}),t.push({target:c,type:"mouseup",handler:function(t){return e._handleMouseUp(t?t:l.event)}}),t.push({target:c,type:"mousemove",handler:function(t){return e._handleMouseMove(t?t:l.event)}}),t.push({target:r,type:"mousedown",handler:function(t){return e._handleRootMouseDown(t?t:l.event)}}),t.push({target:r,type:"mouseup",handler:function(t){return e._handleRootMouseUp(t?t:l.event)}}),t.push({target:o,type:"dragstart",handler:function(t){return e._handleDragStart(t?t:l.event)}}),t.push({target:o,type:"drag",handler:function(t){return e._handleDrag(t?t:l.event)}}),t.push({target:o,type:"dragend",handler:function(t){return e._handleDragEnd(t?t:l.event)}}),t.push({target:o,type:"dragenter",handler:function(t){return e._handleDragEnter(t?t:l.event)}}),t.push({target:o,type:"dragover",handler:function(t){return e._handleDragOver(t?t:l.event)}}),t.push({target:o,type:"dragleave",handler:function(t){return e._handleDragLeave(t?t:l.event)}}),t.push({target:o,type:"drop",handler:function(t){return e._handleDrop(t?t:l.event)}}),t.push({target:this._clientDiv,type:s.isFirefox>26?"wheel":s.isFirefox?"DOMMouseScroll":"mousewheel",handler:function(t){return e._handleMouseWheel(t?t:l.event)}}),this._clipDiv&&t.push({target:this._clipDiv,type:s.isFirefox>26?"wheel":s.isFirefox?"DOMMouseScroll":"mousewheel",handler:function(t){return e._handleMouseWheel(t?t:l.event)}}),s.isFirefox&&(!s.isWindows||s.isFirefox>=15)){var u=l.MutationObserver||l.MozMutationObserver;u?(this._mutationObserver=new u(function(t){e._handleDataModified(t)}),this._mutationObserver.observe(n,{subtree:!0,characterData:!0})):t.push({target:this._clientDiv,type:"DOMCharacterDataModified",handler:function(t){return e._handleDataModified(t?t:l.event)}})}(s.isFirefox&&(!s.isWindows||s.isFirefox>=15)||s.isIE||s.isWebkit)&&(t.push({target:this._clientDiv,type:"compositionstart",handler:function(t){return e._handleCompositionStart(t?t:l.event)}}),t.push({target:this._clientDiv,type:"compositionend",handler:function(t){return e._handleCompositionEnd(t?t:l.event)}}),t.push({target:this._clientDiv,type:"compositionupdate",handler:function(t){return e._handleCompositionUpdate(t?t:l.event)}})),this._overlayDiv&&(t.push({target:this._overlayDiv,type:"mousedown",handler:function(t){return e._handleMouseDown(t?t:l.event)}}),t.push({target:this._overlayDiv,type:"mouseover",handler:function(t){return e._handleMouseOver(t?t:l.event)}}),t.push({target:this._overlayDiv,type:"mouseout",handler:function(t){return e._handleMouseOut(t?t:l.event)}}),t.push({target:this._overlayDiv,type:"contextmenu",handler:function(t){return e._handleContextMenu(t?t:l.event)}})),this._isW3CEvents||t.push({target:this._clientDiv,type:"dblclick",handler:function(t){return e._handleDblclick(t?t:l.event)}})}this._hookRulerEvents(this._leftDiv,t),this._hookRulerEvents(this._rightDiv,t),this._hookRulerEvents(this._innerRightDiv,t),this._hookRulerEvents(this._marginDiv,t);for(var p=0;p<t.length;p++){var f=t[p];T(f.target,f.type,f.handler,f.capture)}},_hookRulerEvents:function(e,t){if(e){var n=this,i=this._getWindow();s.isIE&&t.push({target:e,type:"selectstart",handler:function(){return!1}}),t.push({target:e,type:s.isFirefox>26?"wheel":s.isFirefox?"DOMMouseScroll":"mousewheel",handler:function(e){return n._handleMouseWheel(e?e:i.event)}}),t.push({target:e,type:"click",handler:function(e){n._handleRulerEvent(e?e:i.event)}}),t.push({target:e,type:"dblclick",handler:function(e){n._handleRulerEvent(e?e:i.event)}}),t.push({target:e,type:"mousemove",handler:function(e){n._handleRulerEvent(e?e:i.event)}}),t.push({target:e,type:"mouseover",handler:function(e){n._handleRulerEvent(e?e:i.event)}}),t.push({target:e,type:"mouseout",handler:function(e){n._handleRulerEvent(e?e:i.event)}})}},_getWindow:function(){return c(this._parent.ownerDocument)},_ignoreEvent:function(e){for(var t=e.target;t&&t!==this._clientDiv;){if(t.ignore)return!0;t=t.parentNode}return!1},_init:function(e){var n=e.parent;if("string"==typeof n&&(n=(e.document||document).getElementById(n)),!n)throw new Error("no parent");e.parent=n,e.model=e.model||new t.TextModel;var i=this._defaultOptions();for(var r in i)if(i.hasOwnProperty(r)){var o;o=void 0!==e[r]?e[r]:i[r].value,this["_"+r]=o}this._keyModes=[],this._rulers=[],this._selection=[new x(0,0,!1)],this._linksVisible=!1,this._redrawCount=0,this._maxLineWidth=0,this._maxLineIndex=-1,this._ignoreSelect=!0,this._ignoreFocus=!1,this._hasFocus=!1,this._dragOffset=-1,this._isRangeRects=(!s.isIE||s.isIE>=9)&&"function"==typeof n.ownerDocument.createRange().getBoundingClientRect,this._isW3CEvents=n.addEventListener,this._autoScrollX=null,this._autoScrollY=null,this._autoScrollTimerID=null,this._AUTO_SCROLL_RATE=50,this._grabControl=null,this._moseMoveClosure=null,this._mouseUpClosure=null,this._lastMouseX=0,this._lastMouseY=0,this._lastMouseTime=0,this._clickCount=0,this._clickTime=250,this._clickDist=5,this._isMouseDown=!1,this._doubleClickSelection=null,this._hScroll=0,this._vScroll=0,this._imeOffset=-1,this._createActions(),this._createView()},_checkOverlayScroll:function(){if(s.isMac&&s.isWebkit&&!this._metrics.invalid&&0===this._metrics.scrollWidth){var e=this._viewDiv,t=this._isOverOverlayScroll();t.vertical||t.horizontal?e.style.pointerEvents="":e.style.pointerEvents="none"}},_isOverOverlayScroll:function(){var e=(new Date).getTime()-this._lastScrollTime<200;if(!e)return{};var t=this._viewDiv.getBoundingClientRect(),n=this._lastMouseMoveX,i=this._lastMouseMoveY,r=15;return{vertical:t.top<=i&&i<t.bottom&&t.right-r<=n&&n<t.right,horizontal:t.bottom-r<=i&&i<t.bottom&&t.left<=n&&n<t.right}},_startUndo:function(){if(this._undoStack){var e=this;this._compoundChange=this._undoStack.startCompoundChange({end:function(){e._compoundChange=null}})}},_endUndo:function(){this._undoStack&&this._undoStack.endCompoundChange()},_modifyContent:function(e,t,n,i){if(this._readonly&&!e._code)return!1;e.type="Verify";var r=e.start=e.selection[0].start,o=e.end=e.selection[0].end;if(this.onVerify(e),r!==e.start&&(e.selection[0].start=e.start),o!==e.end&&(e.selection[0].end=e.end),null===e.text||void 0===e.text)return!1;e.selection.length>1&&this.setRedraw(!1);var s=this._compoundChange;s?x.compare(this._getSelections(),s.owner.selection)||(this._endUndo(),e.selection.length>1&&this._startUndo()):e.selection.length>1&&this._startUndo();var a=this._model;try{e._ignoreDOMSelection&&(this._ignoreDOMSelection=!0);var l=0,c=0;e.selection.forEach(function(n){n.start+=l,n.end+=l;var i=Array.isArray(e.text)?e.text[c]:e.text;a.setText(i,n.start,n.end),l+=n.start-n.end+i.length,n.setCaret(t?n.start+i.length:n.start),c++})}finally{e._ignoreDOMSelection&&(this._ignoreDOMSelection=!1)}return this._setSelection(e.selection,n,!0,i),s=this._compoundChange,s&&(s.owner.selection=e.selection),e.selection.length>1&&this.setRedraw(!0),this.onModify({type:"Modify"}),!0},_onModelChanged:function(e){e.type="ModelChanged",this.onModelChanged(e),e.type="Changed";var t=e.start,n=e.addedCharCount,i=e.removedCharCount,r=e.addedLineCount,o=e.removedLineCount,s=this._getSelections();s.forEach(function(e){e.end>t&&(e.end>t&&e.start<t+i?e.setCaret(t+n):(e.start+=n-i,e.end+=n-i))}),this._setSelection(s,!1,!1);for(var a=this._model,l=a.getLineAtOffset(t),c=this._getLineNext();c;){var d=c.lineIndex;d>=l&&l+o>=d&&(l!==d||c.modelChangedEvent||c.lineRemoved?(c.lineRemoved=!0,c.lineChanged=!1,c.modelChangedEvent=null):(c.modelChangedEvent=e,c.lineChanged=!0)),d>l+o&&(c.lineIndex=d+r-o,c._line.lineIndex=c.lineIndex),c=this._getLineNext(c)}if(this._lineHeight){var u=[l,o].concat(h(r));Array.prototype.splice.apply(this._lineHeight,u)}this._wrapMode||l<=this._maxLineIndex&&this._maxLineIndex<=l+o&&(this._checkMaxLineIndex=this._maxLineIndex,this._maxLineIndex=-1,this._maxLineWidth=0),this._update()},_onModelChanging:function(e){e.type="ModelChanging",this.onModelChanging(e),e.type="Changing"},_queueUpdate:function(){if(!this._updateTimer&&!this._ignoreQueueUpdate){var e=this,t=this._getWindow();this._updateTimer=t.setTimeout(function(){e._updateTimer=null,e._update()},0)}},_rangesToSelections:function(e){var t=[],n=this._model.getCharCount();return e.forEach(function(e){var i;if(e instanceof x)i=e.clone();else{var r=e.start,o=e.end,s=r>o;if(s){var a=r;r=o,o=a}r=Math.max(0,Math.min(r,n)),o=Math.max(0,Math.min(o,n)),i=new x(r,o,s)}t.push(i)}),t},_resetLineHeight:function(e,t){if(this._wrapMode||this._variableLineHeight){if(void 0!==e&&void 0!==t)for(var n=e;t>n;n++)this._lineHeight[n]=void 0;else this._lineHeight=h(this._model.getLineCount());this._calculateLineHeightTimer()}else this._lineHeight=null},_resetLineWidth:function(){var e=this._clientDiv;if(e)for(var t=e.firstChild;t;)t.lineWidth=void 0,t=t.nextSibling},_reset:function(){this._maxLineIndex=-1,this._maxLineWidth=0,this._topChild=null,this._bottomChild=null,this._topIndexY=0,this._variableLineHeight=!1,this._resetLineHeight(),this._setSelection(new x(0,0,!1),!1,!1),this._viewDiv&&(this._viewDiv.scrollLeft=0,this._viewDiv.scrollTop=0);var e=this._clientDiv;if(e){for(var t=e.firstChild;t;)t.lineRemoved=!0,t=t.nextSibling;s.isFirefox<13&&this._fixCaret()}},_scrollViewAnimated:function(e,t,n){var i=this._getWindow();if(n&&this._scrollAnimation){var r=this;this._animation=new k({window:i,duration:this._scrollAnimation,curve:[t,0],onAnimate:function(e){var n=t-Math.floor(e);r._scrollView(0,n),t-=n},onEnd:function(){r._animation=null,r._scrollView(e,t),n&&i.setTimeout(n,0)}}),this._animation.play()}else this._scrollView(e,t),n&&i.setTimeout(n,0)},_scrollView:function(e,t){this._ensureCaretVisible=!1;var n=this._viewDiv;e&&(n.scrollLeft+=e),t&&(n.scrollTop+=t)},_setClipboardText:function(e,t){if(s.isElectron&&!t)return window.__clipboardModule.writeText(e),!0;var n,i=this._getWindow(),r=i.clipboardData;if(!r&&t&&(r=t.clipboardData),r){n=[],g(e,function(e){n.push(e)},function(){n.push(s.platformDelimiter)});var o=r.setData(s.isIE?"Text":"text/plain",n.join(""));if(o||t&&(s.isFirefox>21||s.isWebkit))return!0;if(!t)return!1}var a=this._parent.ownerDocument,l=s.createElement(a,"pre");l.style.position="fixed",l.style.left="-1000px",g(e,function(e){l.appendChild(a.createTextNode(e))},function(){l.appendChild(s.createElement(a,"br"))}),l.appendChild(a.createTextNode(" ")),this._clientDiv.appendChild(l);var c=a.createRange();c.setStart(l.firstChild,0),c.setEndBefore(l.lastChild);var h=i.getSelection();h.rangeCount>0&&h.removeAllRanges(),h.addRange(c);var d=this,u=function(){l&&l.parentNode===d._clientDiv&&d._clientDiv.removeChild(l),d._updateDOMSelection()},p=!1;this._ignoreCopy=!0;try{p=a.execCommand("copy",!1,null)}catch(f){}return this._ignoreCopy=!1,!p&&t?(i.setTimeout(u,0),!1):(u(),!0)},_setGrab:function(e){e!==this._grabControl&&(e?(e.setCapture&&e.setCapture(),this._grabControl=e):(this._grabControl.releaseCapture&&this._grabControl.releaseCapture(),this._grabControl=null))},_setLinksVisible:function(e){if(this._linksVisible!==e){this._linksVisible=e,s.isIE&&e&&(this._hadFocus=this._hasFocus);var t=this._clientDiv;t.contentEditable=!e,this._hadFocus&&!e&&t.focus(),this._overlayDiv&&(this._overlayDiv.style.zIndex=e?"-1":"1");for(var n=this._getLineNext();n;)n._line.updateLinks(),n=this._getLineNext(n);this._updateDOMSelection()}},_setSelection:function(e,t,n,i,r,o,s){if(e){void 0===n&&(n=!0);var a,l=this._getSelections();if(a=Array.isArray(e)?e:o?l.concat([e]):[e],this._selection=x.merge(a),s||a.forEach(function(e){e._columnX=-1}),t!==!1&&this._showCaret(!1,i,t,r),n&&this._updateDOMSelection(),!x.compare(l,a)){var c={type:"Selection",oldValue:x.convert(l),newValue:x.convert(a)};this.onSelection(c)}}},_setSelectionTo:function(e,t,n,i,r,o){var s=this._model,a=this._getSelections(),l=this.convert({x:e,y:t},"page","document"),c=this._getLineIndex(l.y),h=this._getLine(c),d=h.getOffset(l.x,l.y-this._getLinePixel(c));if(o&&!i&&x.contains(a,d))return this._dragOffset=d,h.destroy(),!1;if(this._blockSelection)a=this._getBlockSelections(a,c,l);else{var u;if(n?i?(u=a[a.length-1],u._editing=!0):(u=new x(0,0),u._editing=!0,r?a.push(u):a=[u],u._docX=l.x):u=x.editing(a),1===this._clickCount)u.extend(d),i||u.collapse();else{var p,f,g=0===(1&this._clickCount);if(g)this._doubleClickSelection?d>=this._doubleClickSelection.start?(p=this._doubleClickSelection.start,f=h.getNextOffset(d,{unit:"wordend",count:1})):(p=h.getNextOffset(d,{unit:"word",count:-1}),f=this._doubleClickSelection.end):(p=h.getNextOffset(d,{unit:"word",count:-1}),f=h.getNextOffset(p,{unit:"wordend",count:1}));else if(this._doubleClickSelection){var m=s.getLineAtOffset(this._doubleClickSelection.start);c>=m?(p=s.getLineStart(m),f=s.getLineEnd(c)):(p=s.getLineStart(c),f=s.getLineEnd(m))}else p=s.getLineStart(c),f=s.getLineEnd(c);u.setCaret(p),u.extend(f)}}return this._setSelection(a,!0,!0,null,!1),h.destroy(),!0},_setFullSelection:function(e,t){this._fullSelection=e,s.isWebkit<537.36&&(this._fullSelection=e=!0),this._domSelection||(this._domSelection=[],this._cursorVisible=!0),t||this._updateDOMSelection()},_setBlockCursor:function(e){this._blockCursorVisible=e,this._updateBlockCursorVisible()},_setOverwriteMode:function(e){this._overwriteMode=e,this._updateBlockCursorVisible()},_updateBlockCursorVisible:function(){if(this._blockCursorVisible||this._overwriteMode){if(!this._cursorDiv){var e=this._viewDiv,t=s.createElement(e.ownerDocument,"div");t.className="textviewBlockCursor",this._cursorDiv=t,t.tabIndex=-1,t.style.zIndex="2",t.style.color="transparent",t.style.position="absolute",t.style.pointerEvents="none",t.innerHTML="&nbsp;",e.appendChild(t),this._updateDOMSelection()}}else this._cursorDiv&&(this._cursorDiv.parentNode.removeChild(this._cursorDiv),this._cursorDiv=null)},_setMarginOffset:function(e,t){this._marginOffset=e,this._marginDiv.style.display=e?"block":"none",t||(this._metrics=this._calculateMetrics(),this._queueUpdate())},_setWrapOffset:function(e,t){this._wrapOffset=e,t||(this._metrics=this._calculateMetrics(),this._queueUpdate())},_setReadOnly:function(e){this._readonly=e},_setSingleMode:function(e,t){this._singleMode=e,this._updateOverflow(),this._updateStyle(t)},_setNoScroll:function(e,t){this._noScroll=e,this._updateOverflow(),this._updateStyle(t)},_setTabSize:function(e,t){this._tabSize=e,this._customTabSize=void 0;var n=this._clientDiv;s.isOpera?n&&(n.style.OTabSize=this._tabSize+""):s.isWebkit>=537.1?n&&(n.style.tabSize=this._tabSize+""):s.isFirefox>=4?n&&(n.style.MozTabSize=this._tabSize+""):8!==this._tabSize&&(this._customTabSize=this._tabSize),t||(this.redrawLines(),this._resetLineWidth())},_setTheme:function(e){this._theme&&this._theme.removeEventListener("ThemeChanged",this._themeListener.onChanged),this._theme=e,this._theme&&this._theme.addEventListener("ThemeChanged",this._themeListener.onChanged),this._setThemeClass(this._themeClass)},_setThemeClass:function(e,t){this._themeClass=e;var n="textview",i=this._theme.getThemeClass();i&&(n+=" "+i),this._themeClass&&i!==this._themeClass&&(n+=" "+this._themeClass),this._rootDiv.className=n,this._updateStyle(t)},_setUndoStack:function(e){this._undoStack=e},_setWrapMode:function(e,t){this._wrapMode=e&&this._wrappable;var n=this._clientDiv;this._wrapMode?(n.style.whiteSpace="pre-wrap",n.style.wordWrap="break-word"):(n.style.whiteSpace="pre",n.style.wordWrap="normal"),this._updateOverflow(),t||(this.redraw(),this._resetLineWidth()),this._resetLineHeight()},_showCaret:function(e,t,n,i){if(this._clientDiv&&!(this._redrawCount>0||this._ignoreDOMSelection||-1!==this._imeOffset)){var r=this._model,o=this._getSelections(),s=x.editing(o,"down"===this._autoScrollDir),a=this._getScroll(),l=s.getCaret(),c=s.start,h=s.end,d=r.getLineAtOffset(c),u=r.getLineAtOffset(h),p=Math.max(Math.max(c,r.getLineStart(u)),h-1),f=this._getClientWidth(),g=this._getClientHeight(),m=f/4,v=this._getBoundsAtOffset(l===c?c:p),_=v.left,y=v.right,w=v.top,b=v.bottom,C=0,E="object"==typeof n;!e&&!E||s.isEmpty()||(v=this._getBoundsAtOffset(l===h?c:p),C=(v.bottom>b?v.bottom:b)-(v.top<w?v.top:w),e&&(v.top===w?l===c?y=_+Math.min(v.right-_,f):_=y-Math.min(y-v.left,f):l===c?b=w+Math.min(v.bottom-w,g):w=b-Math.min(b-v.top,g)));var T=0;_<a.x&&(T=Math.min(_-a.x,-m)),y>a.x+f&&(T=Math.max(y-a.x-f,m));var S=0;w<a.y?S=w-a.y:b>a.y+g&&(S=b-a.y-g),i&&(i>0?S>0&&(S=Math.max(S,i)):0>S&&(S=Math.min(S,i)));var k=E&&"always"===n.scrollPolicy;if(0!==T||0!==S||k){if(E){var A=S>0;0===S&&(S=w-a.y);var L=n.viewAnchor,M=n.selectionAnchor,N=Math.min(Math.max(0,n.viewAnchorOffset||0));S+="top"===L?Math.floor(A?(1-N)*g:-N*g):"bottom"===L?Math.floor(A?N*g:-(1-N)*g):"center"===L?Math.floor(A?g/2+N*g:g/2-(1-N)*g):Math.floor(A?N*g:-N*g),d!==u&&("top"===M&&l!==c?S+=Math.floor(-C):"bottom"===M&&l!==h?S+=Math.floor(C):"center"===M&&(S+=Math.floor(C/2)))}else 0!==S&&"number"==typeof n&&(0>n&&(n=0),n>1&&(n=1),S+=Math.floor(S>0?n*g:-n*g));return this._scrollViewAnimated(T,S,t),g!==this._getClientHeight()||f!==this._getClientWidth()?this._showCaret():this._ensureCaretVisible=!0,!0}return t&&t(),!1}},_startIME:function(){if(-1===this._imeOffset){for(var e=!1,t=this._getSelections(),n=0;n<t.length&&!e;n++)e=!t[n].isEmpty();e&&this._modifyContent({text:"",selection:t},!0),this._imeOffset=t[0].start}},_unhookEvents:function(){this._model.removeEventListener("preChanging",this._modelListener.onChanging),this._model.removeEventListener("postChanged",this._modelListener.onChanged),
this._theme.removeEventListener("ThemeChanged",this._themeListener.onChanged),this._modelListener=null;for(var e=0;e<this._handlers.length;e++){var t=this._handlers[e];S(t.target,t.type,t.handler)}this._handlers=null,this._mutationObserver&&this._mutationObserver.disconnect()},_updateDOMSelection:function(){if(!(this._redrawCount>0)&&!this._ignoreDOMSelection&&-1===this._imeOffset&&this._clientDiv){var e,t=this._getSelections(),n=this._domSelection;if(n.length<t.length)for(e=n.length;e<t.length;e++)n.push(new w(this));else n.length>t.length&&n.splice(t.length).forEach(function(e){e.destroy()});for(e=0;e<n.length;e++)n[e].setPrimary(0===e),n[e].setSelection(t[e]);var i=this._getWindow(),r=this;n.length>1?this._cursorTimer||(this._cursorTimer=i.setInterval(function(){r._cursorVisible=!r._cursorVisible,r._domSelection.forEach(function(e){e.update()})},500)):this._cursorTimer&&(i.clearInterval(this._cursorTimer),this._cursorTimer=null)}},_update:function(e){if(!(this._redrawCount>0)){if(this._updateTimer){var t=this._getWindow();t.clearTimeout(this._updateTimer),this._updateTimer=null,e=!1}var n=this._clientDiv,i=this._viewDiv;if(n){this._metrics.invalid&&(this._ignoreQueueUpdate=!0,this._updateStyle(),this._ignoreQueueUpdate=!1);var r=this._model,o=this._getScroll(!1),a=this._getViewPadding(),l=r.getLineCount(),c=this._getLineHeight(),h=!1,d=!1,u=!1,p=this._metrics.scrollWidth;this._wrapMode&&(n.style.width=(this._metrics.wrapWidth||this._getClientWidth())+"px");var f,g,m,v,_,y,x,w,b,E,T,S=0,k=0;if(this._lineHeight){for(;l>k&&(T=this._getLineHeight(k),!(S+T>o.y));)S+=T,k++;f=k,g=Math.max(0,f-1),v=m=o.y-S,f>0&&(m+=this._getLineHeight(f-1))}else{var A=Math.max(0,o.y)/c;f=Math.floor(A),g=Math.max(0,f-1),m=Math.round((A-g)*c),v=Math.round((A-f)*c),E=l*c}this._topIndexY=v;var L=this._rootDiv,M=L.clientWidth,N=L.clientHeight;if(e){for(_=0,this._leftDiv&&(y=this._leftDiv.getBoundingClientRect(),_=y.right-y.left),x=this._getClientWidth(),w=this._getClientHeight(),b=x,this._wrapMode?this._metrics.wrapWidth&&(b=this._metrics.wrapWidth):b=Math.max(this._maxLineWidth,b);l>k;)T=this._getLineHeight(k,!1),S+=T,k++;E=S}else{w=this._getClientHeight();for(var O,D,R=Math.floor((w+v)/c),I=Math.min(f+R,l-1),P=Math.min(I+1,l-1),B=n.firstChild;B;){O=B.lineIndex;var F=B.nextSibling;O>=g&&P>=O&&!B.lineRemoved&&-1!==B.lineIndex||(this._mouseWheelLine===B?(B.style.display="none",B.lineIndex=-1):n.removeChild(B)),B=F}B=this._getLineNext();var V=i.ownerDocument,K=V.createDocumentFragment();for(O=g;P>=O;O++)!B||B.lineIndex>O?new C(this,O).create(K,null):(K.firstChild&&(n.insertBefore(K,B),K=V.createDocumentFragment()),B&&B.lineChanged&&(B=new C(this,O).create(K,B),B.lineChanged=!1),B=this._getLineNext(B));K.firstChild&&n.insertBefore(K,B),s.isWebkit&&!this._wrapMode&&(n.style.width="0x7fffffffpx");var j;B=this._getLineNext();for(var H=w+m,U=!1;B;){if(D=B.lineWidth,void 0===D){j=B._line.getBoundingClientRect(),D=B.lineWidth=Math.ceil(j.right-j.left);var W=j.bottom-j.top;this._lineHeight?this._lineHeight[B.lineIndex]=W:0!==c&&0!==W&&Math.ceil(c)!==Math.ceil(W)&&(this._variableLineHeight=!0,this._lineHeight=[],this._lineHeight[B.lineIndex]=W)}this._lineHeight&&!U&&(H-=this._lineHeight[B.lineIndex],0>H&&(I=B.lineIndex,U=!0)),this._wrapMode||(D>=this._maxLineWidth&&(this._maxLineWidth=D,this._maxLineIndex=B.lineIndex),this._checkMaxLineIndex===B.lineIndex&&(this._checkMaxLineIndex=-1)),B.lineIndex===f&&(this._topChild=B),B.lineIndex===I&&(this._bottomChild=B),B=this._getLineNext(B)}if(-1!==this._checkMaxLineIndex&&(O=this._checkMaxLineIndex,this._checkMaxLineIndex=-1,O>=0&&l>O)){var G=new C(this,O);j=G.getBoundingClientRect(),D=j.right-j.left,D>=this._maxLineWidth&&(this._maxLineWidth=D,this._maxLineIndex=O),G.destroy()}for(;l>k;)T=this._getLineHeight(k,I>=k),S+=T,k++;E=S,this._updateRuler(this._leftDiv,f,P,N),this._updateRuler(this._rightDiv,f,P,N),this._updateRuler(this._innerRightDiv,f,P,N),this._updateRuler(this._marginDiv,f,P,N),_=0,this._leftDiv&&(y=this._leftDiv.getBoundingClientRect(),_=y.right-y.left);var $=0;if(this._rightDiv){var z=this._rightDiv.getBoundingClientRect();$=z.right-z.left}i.style.left=_+"px",i.style.right=$+"px";var X=this._scrollDiv;if(X.style.height=E+(s.isWebkit?0:a.bottom)+"px",x=this._getClientWidth(),!this._singleMode&&!this._wrapMode&&!this._noScroll){var q=w,Y=w,J="scroll"===i.style.overflowX;J?q+=p:Y-=p;var Q=x,Z=x,ee="scroll"===i.style.overflowY;ee?Q+=p:Z-=p,w=q,x=Q,E>w&&(u=!0,x=Z),this._maxLineWidth>x&&(d=!0,w=Y,E>w&&(u=!0,x=Z)),J!==d&&(i.style.overflowX=d?"scroll":"hidden"),ee!==u&&(i.style.overflowY=u?"scroll":"hidden"),h=J!==d||ee!==u}var te=x;this._wrapMode?this._metrics.wrapWidth&&(te=this._metrics.wrapWidth):te=Math.max(this._maxLineWidth+this._getInnerRightWidth(),te),b=te,(!s.isIE||s.isIE>=9)&&this._maxLineWidth>x&&(te+=a.right+a.left),X.style.width=te+"px",this._clipScrollDiv&&(this._clipScrollDiv.style.width=te+"px"),o=this._getScroll(!1);var ne=this._innerRightDiv;ne&&(ne.style.right=$+("scroll"===i.style.overflowY?this._metrics.scrollWidth:0)+"px",ne.style.bottom=("scroll"===i.style.overflowX?p:0)+"px")}if(this._scrollHeight=E,this._vScrollDiv){var ie=w-8,re=Math.max(15,Math.ceil(Math.min(1,ie/(E+a.top+a.bottom))*ie));this._vScrollDiv.style.left=_+x-8+"px",this._vScrollDiv.style.top=Math.floor(Math.max(0,o.y*ie/E))+"px",this._vScrollDiv.style.height=re+"px"}if(!this._wrapMode&&this._hScrollDiv){var oe=x-8,se=Math.max(15,Math.ceil(Math.min(1,oe/(this._maxLineWidth+a.left+a.right))*oe));this._hScrollDiv.style.left=_+Math.floor(Math.max(0,Math.floor(o.x*oe/this._maxLineWidth)))+"px",this._hScrollDiv.style.top=w-9+"px",this._hScrollDiv.style.width=se+"px"}var ae,le,ce=o.x,he=this._clipDiv,de=this._overlayDiv,ue=this._marginDiv;if(ue&&(ue.style.left=-ce+_+this._metrics.marginWidth+a.left+"px",ue.style.bottom=("scroll"===i.style.overflowX?p:0)+"px"),he){he.scrollLeft=ce,he.scrollTop=0,ae=_+a.left,le=a.top;var pe=x,fe=w,ge=0,me=-m;0===o.x&&(ae-=a.left,pe+=a.left,ge=a.left),o.x+x===b&&(pe+=a.right),0===o.y&&(le-=a.top,fe+=a.top,me+=a.top),o.y+w===E&&(fe+=a.bottom),he.style.left=ae+"px",he.style.top=le+"px",he.style.right=M-pe-ae+"px",he.style.bottom=N-fe-le+"px",n.style.left=ge+"px",n.style.top=me+"px",n.style.width=b+"px",n.style.height=w+m+"px",de&&(de.style.left=n.style.left,de.style.top=n.style.top,de.style.width=n.style.width,de.style.height=n.style.height)}else{ae=ce,le=m;var ve=ce+x,_e=m+w;0===ae&&(ae-=a.left),0===le&&(le-=a.top),ve===b&&(ve+=a.right),o.y+w===E&&(_e+=a.bottom),n.style.clip="rect("+le+"px,"+ve+"px,"+_e+"px,"+ae+"px)","rtl"==document.dir?n.style.right=-ce+_+a.left+"px":n.style.left=-ce+_+a.left+"px",n.style.width=(this._wrapMode||s.isWebkit?b:x+ce)+"px",e||(n.style.top=-m+a.top+"px",n.style.height=w+m+"px"),de&&(de.style.clip=n.style.clip,de.style.left=n.style.left,de.style.width=n.style.width,e||(de.style.top=n.style.top,de.style.height=n.style.height))}if(this._updateDOMSelection(),h){var ye=this._ensureCaretVisible;this._ensureCaretVisible=!1,ye&&this._showCaret(),this._queueUpdate()}}}},_updateOverflow:function(){var e=this._viewDiv;this._noScroll?e.style.overflow="hidden":this._wrapMode?(e.style.overflowX="hidden",e.style.overflowY="scroll"):e.style.overflow="hidden"},_updateRuler:function(e,t,n,i){if(e)for(var r=this._parent.ownerDocument,o=this._getLineHeight(),a=this._getViewPadding(),l=e.firstChild;l;){var c=l._ruler,h=c.getOverview();if(l.rulerChanged&&(d(c.getRulerStyle(),l),e.rulerWidth=void 0),"fixed"!==h){var u=o;"page"===h&&(u+=this._topIndexY),l.style.top=-u+"px",l.style.height=i+u+"px";var p,f=l.firstChild;f?(p=f,f=f.nextSibling):(p=s.createElement(r,"div"),p.style.visibility="hidden",l.appendChild(p));var g,m;l.rulerChanged&&p&&(g=-1,m=c.getWidestAnnotation(),m&&(d(m.style,p),m.html&&(p.innerHTML=m.html)),p.lineIndex=g,p.style.height=o+a.top+"px");var v,_,y;if("page"===h){for(y=c.getAnnotations(t,n+1);f;){g=f.lineIndex;var x=f.nextSibling;g>=t&&n>=g&&!f.lineChanged||l.removeChild(f),f=x}for(f=l.firstChild.nextSibling,_=r.createDocumentFragment(),g=t;n>=g;g++)!f||f.lineIndex>g?(v=s.createElement(r,"div"),m=y[g],m&&(d(m.style,v),m.html&&(v.innerHTML=m.html),v.annotation=m),v.lineIndex=g,v.style.height=this._getLineHeight(g)+"px",_.appendChild(v)):(_.firstChild&&(l.insertBefore(_,f),_=r.createDocumentFragment()),f&&(f=f.nextSibling));_.firstChild&&l.insertBefore(_,f)}else{var w,b,C=this._getClientHeight(),E=this._model.getLineCount(),T=o*E,S=C+a.top+a.bottom-2*this._metrics.scrollWidth;if(S>T?(w=o,b=a.top):(w=S/E,b=this._metrics.scrollWidth),l.rulerChanged){for(var k=l.childNodes.length;k>1;)l.removeChild(l.lastChild),k--;y=c.getAnnotations(0,E),_=r.createDocumentFragment();for(var A in y)g=A>>>0,0>g||(v=s.createElement(r,"div"),m=y[A],d(m.style,v),v.style.position="absolute",v.style.top=b+o+Math.floor(g*w)+"px",m.html&&(v.innerHTML=m.html),v.annotation=m,v.lineIndex=g,_.appendChild(v));l.appendChild(_)}else if(l._oldTrackHeight!==S)for(v=l.firstChild?l.firstChild.nextSibling:null;v;)v.style.top=this._metrics.scrollWidth+o+Math.floor(v.lineIndex*w)+"px",v=v.nextSibling;l._oldTrackHeight=S}l.rulerChanged=!1,l=l.nextSibling}else l.rulerChanged=!1,l=l.nextSibling}},_updateStyleSheet:function(){var e="";if(s.isWebkit&&this._metrics.scrollWidth>0&&(e+="\n.textview ::-webkit-scrollbar-corner {background: #eeeeee;}"),e){var t=this._clientDiv.ownerDocument,n=t.getElementById("_textviewStyle");if(n)n.removeChild(n.firstChild),n.appendChild(t.createTextNode(e));else{n=s.createElement(t,"style"),n.id="_textviewStyle";var i=t.getElementsByTagName("head")[0]||t.documentElement;n.appendChild(t.createTextNode(e)),i.insertBefore(n,i.firstChild)}}},_updateStyle:function(e,t){if(!e&&s.isIE&&(this._rootDiv.style.lineHeight="normal"),t=this._metrics=t||this._calculateMetrics(),this._variableLineHeight&&(this._variableLineHeight=!1,this._resetLineHeight()),s.isIE?this._rootDiv.style.lineHeight=t.lineHeight-(t.lineTrim.top+t.lineTrim.bottom)+"px":this._rootDiv.style.lineHeight="normal",this._updateStyleSheet(),s.isMac&&s.isWebkit){var n=this._viewDiv;t.invalid||0!==t.scrollWidth?(n.style.pointerEvents="",n.style.zIndex=""):(n.style.pointerEvents="none",n.style.zIndex="2")}e||(this.redraw(),this._resetLineWidth())}},i.EventTarget.addMixin(E.prototype),{TextView:E}}),n("orion/editor/tooltip",["i18n!orion/editor/nls/messages","orion/editor/textView","orion/editor/projectionTextModel","orion/Deferred","orion/editor/util","orion/webui/littlelib","orion/util"],function(e,t,n,i,r,o,s){function a(e,t){this._view=e,this._editor=t;var n=e.getOptions("parent");this._create(n?n.ownerDocument:document)}return a.getTooltip=function(e,t){return e._tooltip||(e._tooltip=new a(e,t)),e._tooltip},a.prototype={_create:function(e){if(!this._tooltipDiv){var t=this._tooltipDiv=s.createElement(e,"div");t.tabIndex=0,t.className="textviewTooltip",t.setAttribute("aria-live","assertive"),t.setAttribute("aria-atomic","true"),this._tooltipDiv.style.visibility="hidden",this._tipShowing=!1,e.body.appendChild(t);var n=this;r.addEventListener(e,"mousedown",this._mouseDownHandler=function(e){n.isVisible()&&(r.contains(t,e.target||e.srcElement)||n._locked||n.hide())},!0),r.addEventListener(e,"scroll",this._scrollHandler=function(e){n.isVisible()&&(r.contains(t,e.target||e.srcElement)||(n._topPixel!==n._view.getTopPixel()||n._leftPixel!==n._view.getHorizontalPixel())&&n.hide())},!0),r.addEventListener(e,"mousemove",this._mouseMoveHandler=function(e){n._prevX&&n._prevX===e.clientX&&n._prevY&&n._prevY===e.clientY||(n._prevX=e.clientX,n._prevY=e.clientY,!n.isVisible()||n._locked||n._hasFocus()||n._isInRect(n._outerArea,e.clientX,e.clientY)||n.hide())},!0),r.addEventListener(t,"focus",function(e){n._locked||n._tooltipDiv.classList.add("textViewTooltipOnFocus")},!1),r.addEventListener(t,"blur",function(e){n._tooltipDiv.classList.remove("textViewTooltipOnFocus")},!1),r.addEventListener(t,"mouseenter",function(e){n._locked||n._tooltipDiv.classList.add("textViewTooltipOnHover")},!1),r.addEventListener(t,"mouseleave",function(e){n._hasFocus()||n._tooltipDiv.classList.remove("textViewTooltipOnHover")},!1),r.addEventListener(t,"keydown",function(e){27===e.keyCode&&(n._locked||n.hide())},!1),this._view.addEventListener("Destroy",function(){n.destroy()})}},destroy:function(){if(this._tooltipDiv){this.hide();var e=this._tooltipDiv.parentNode;e&&e.removeChild(this._tooltipDiv);var t=this._tooltipDiv.ownerDocument;r.removeEventListener(t,"mousedown",this._mouseDownHandler,!0),r.removeEventListener(t,"scroll",this._scrollHandler,!0),r.removeEventListener(t,"mousemove",this._mouseMoveHandler,!0),this._tooltipDiv=null}},show:function(e,t,n){this._locked=t,this._giveFocus=n,this._topPixel=this._view.getTopPixel(),this._leftPixel=this._view.getHorizontalPixel(),this._processInfo(e.getTooltipInfo())},update:function(e,t){e&&(t?this._showContents(null,e.getTooltipInfo(),!0):this._processInfo(e.getTooltipInfo(),!0))},onHover:function(e,t,n){e&&(this._isInRect(this._anchorArea,t,n)||this._isInRect(this._tooltipArea,t,n)||this._locked||this._hasFocus()||this._processInfo(e.getTooltipInfo()))},hide:function(e){e&&(this._locked=void 0),!this._locked&&this.isVisible()&&(this.hover&&this.hover.clearQuickFixes(),this._hasFocus()&&this._view.focus(),this._tooltipContents&&(this._tooltipDiv.removeChild(this._tooltipContents),this._tooltipContents=null),this._tooltipDiv.classList.remove("textviewTooltipCodeProjection"),this._tooltipDiv.classList.remove("textviewTooltipOnHover"),this._tooltipDiv.classList.remove("textviewTooltipOnFocus"),this._tooltipDiv.style.visibility="hidden",this._tipShowing=!1,this._tooltipDiv.style.left="",this._tooltipDiv.style.right="",this._tooltipDiv.style.top="",this._tooltipDiv.style.bottom="",this._tooltipDiv.style.width="auto",this._tooltipDiv.style.maxWidth="",this._tooltipDiv.style.height="auto",this._tooltipDiv.style.maxHeight="",this._tooltipDiv.style.overflowX="",this._tooltipDiv.style.overflowY="",this._giveFocus=void 0,this._anchorArea=void 0,this._tooltipArea=void 0,this._outerArea=void 0,this._hoverPromises&&this._hoverPromises.forEach(function(e){e.resolved||e.cancel()}),this._hoverPromises=void 0,this._tipRect=void 0)},isVisible:function(){return this._tipShowing},_processInfo:function(e,t){if(this._tooltipDiv){var n;if(t&&this._tooltipContents?(this._tooltipContents.innerHTML="",n=this._tooltipContents):n=s.createElement(this._tooltipDiv.ownerDocument,"div"),e){if(e.contents&&this._renderImmediateInfo(n,e.contents,e.context))return this._showContents(n,e,t),!0;if(this.hover&&e.context&&(this._hoverPromises=this.hover.computeHoverInfo(e.context),this._hoverPromises)){var r=this,o=this._hoverPromises.slice(0);return o.forEach(function(o){i.when(o,function(i){if(r._hoverPromises){var s=r._hoverPromises.indexOf(o);s>=0&&r._hoverPromises.splice(s,1)}i&&r._renderPluginContent(n,i)&&(i.offsetStart&&(e.context.offsetStart=i.offsetStart),i.offsetEnd&&(e.context.offsetEnd=i.offsetEnd),i.allowFullWidth&&(e.allowFullWidth=i.allowFullWidth),r._showContents(n,e,t))},function(e){console&&e&&"Cancel"!==e.name&&(console.log("Error computing hover tooltip"),console.log(e&&e.stack))})}),!0}}}},_showContents:function(e,t,n){n?this._tooltipArea&&t.tooltipArea&&(this._tooltipArea.left!==t.tooltipArea.left||this._tooltipArea.top!==t.tooltipArea.top||this._tooltipArea.width!==t.tooltipArea.width||this._tooltipArea.height!==t.tooltipArea.height)&&(this._anchorArea=null,this._tooltipArea=null,this._outerArea=null):this.hide(),e&&(this._tooltipContents&&this._tooltipDiv.removeChild(this._tooltipContents),this._tooltipContents=e,this._tooltipDiv.appendChild(e)),this._anchorArea||(this._anchorArea=this._computeAnchorArea(t)),this._tooltipArea||(this._tooltipArea=this._computeTooltipArea(t,this._anchorArea,this._tooltipDiv)),this._outerArea||(this._outerArea=this._computeOuterArea(this._anchorArea,this._tooltipArea)),this._tooltipDiv.style.visibility="visible",this._tipShowing=!0,this._giveFocus&&(this._setInitialFocus(this._tooltipDiv),this._giveFocus=void 0)},_computeAnchorArea:function(e){if(e.anchorArea&&e.anchorArea.top&&e.anchorArea.left&&e.anchorArea.height&&e.anchorArea.width)return e.anchorArea;if(e.context){if(e.context.offsetStart&&e.context.offsetEnd){var t=this.mapOffset(e.context.offsetStart,!1),n=this.mapOffset(e.context.offsetEnd,!1);return this._computeRectangleFromOffset(t,n)}if(e.context.offset>=0){var i=this.mapOffset(e.context.offset,!1),r=this._view.getNextOffset(i,{unit:"wordend",count:0}),o=this._view.getNextOffset(r,{unit:"word",count:-1});return this._computeRectangleFromOffset(o,r)}}return{top:0,left:0,height:0,width:0}},_computeTooltipArea:function(e,t,n){var i=n.ownerDocument.documentElement,r=16;if(e.tooltipArea&&e.tooltipArea.top&&e.tooltipArea.left&&e.tooltipArea.height&&e.tooltipArea.width)return n.style.overflowY="auto",n.style.resize="none",n.style.top=e.tooltipArea.top+"px",n.style.left=e.tooltipArea.left+"px",n.style.height=e.tooltipArea.height-r+"px",n.style.width=e.tooltipArea.width-r+"px",e.tooltipArea;var o=n.getBoundingClientRect(),s={width:o.width,height:o.height},a=n.getElementsByTagName("img")[0];a&&!a.complete&&0===a.width&&(s.width+=30);var l=e.position?e.position:"below",c=(this._view._rootDiv?this._view._rootDiv:i).getBoundingClientRect(),h=c.left,d=c.top,u=c.width,p=c.height,f=u,g=p;e.allowFullWidth?s.width>u&&(s.width=u):(f=Math.min(u/2,600),g=Math.min(p/2,400),s.width=Math.min(s.width,f),s.height=Math.min(s.height,g)),n.style.width=s.width-r+"px",s.height=Math.min(n.getBoundingClientRect().height,g),25+r>s.height&&s.width>f-r&&(s.height=40+r);var m=p-(t.top+t.height-d),v=t.top-d,_=u-(t.left+t.width-h);"above"===l&&s.height>v&&s.height<=m?l="below":"below"===l&&s.height>m&&s.height<=v&&(l="above");var y=e.tooltipOffsetX?e.tooltipOffsetX:0,x=e.tooltipOffsetY?e.tooltipOffsetY:0;switch(l){case"left":s.height+x>m+t.height?s.top=p+d-s.height:s.top=t.top+x,s.top=Math.max(s.top,d),s.left=Math.max(t.left-s.width+y,h);break;case"right":s.height+x>m+t.height?s.top=p+d-s.height:s.top=t.top+x,s.top=Math.max(s.top,d),s.left=Math.max(t.left+t.width+y,h);break;case"above":s.width+y>_+t.width?s.left=u+h-s.width:s.left=t.left+y,s.left=Math.max(s.left,h),s.top=Math.max(t.top-s.height+x,d);break;case"below":s.width+y>_+t.width?s.left=u+h-s.width:s.left=t.left+y,s.left=Math.max(s.left,h),s.top=Math.max(t.top+t.height+x,d)}return s.maxWidth=Math.min(u+h-s.left,u),s.maxHeight=Math.min(p+d-s.top,p),n.style.maxWidth=s.maxWidth-r+"px",n.style.maxHeight=s.maxHeight-r+"px",n.style.width=s.width-r+"px",n.style.height=s.height-r+"px",n.style.left=s.left+"px",n.style.top=s.top+"px",s},_computeOuterArea:function(e,t){var n=Math.min(e.left,t.left),i=Math.min(e.top,t.top),r=e.left+e.width,o=t.left+t.width,s=Math.max(r,o),a=e.top+e.height,l=t.top+t.height,c=Math.max(a,l);return{left:n,top:i,width:s-n,height:c-i}},_hasFocus:function(){var e=this._tooltipDiv;return e?r.contains(e,e.ownerDocument.activeElement):!1},_isNode:function(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},_setInitialFocus:function(e){var t=o.$("button",e);if(t)return void t.focus();var n=o.$("a",e);if(n){n.focus();var i=this;return void n.addEventListener("click",function(){i.hide()})}var r=o.firstTabbable(e);r&&r.focus()},_isInRect:function(e,t,n){if(!e)return!1;var i=t>=e.left&&t<=e.left+e.width,r=n>=e.top&&n<=e.top+e.height;return i&&r},mapOffset:function(e){var t=this._view,n=t.getModel();return n.getBaseModel&&(e=n.mapOffset(e,!0)),e},_computeRectangleFromOffset:function(e,t){var n,i,r=this._view,o=r.getLineAtOffset(e),s=r.getLineAtOffset(t);if(o!==s){var a=r.getLocationAtOffset(e).y;n=0;for(var l=0;s>=o;){n+=r.getLineHeight(o);var c=r.getModel().getLineEnd(o),h=r.getLocationAtOffset(c).x;h>t&&(l=h),o++}var d=r.getModel().getLineStart(s),u=r.getLocationAtOffset(d).x;i={x:u,y:a,width:l-u,height:n}}else{var p=r.getLocationAtOffset(e),f=r.getLocationAtOffset(t);n=r.getLineHeight(o),i={x:p.x,y:p.y,width:f.x-p.x,height:n}}return i=this._view.convert(i,"document","page"),{left:i.x,top:i.y,width:i.width,height:i.height}},_renderPluginContent:function(e,t){var n=this._tooltipDiv.ownerDocument;if("string"!=typeof t&&"undefined"==typeof t.content)return!1;var i=s.createElement(n,"div");if(t.title){var r=s.createElement(n,"div");this.hover.renderMarkDown?r.innerHTML=this.hover.renderMarkDown(t.title):r.textContent=t.title,r.classList.add("hoverTooltipTitle"),i.appendChild(r)}var o=s.createElement(n,"div");if("string"==typeof t)o.appendChild(n.createTextNode(t));else switch(t.type){case"delegatedUI":case"html":if(t.content){var a=n.createElement("iframe");a.id="HtmlHover",a.name="HTML Hover",a.type="text/html",a.sandbox="allow-scripts allow-same-origin allow-forms",a.style.border="none",a.style.width="100%",a.style.height="100%",this._tooltipDiv.style.paddingBottom="5px",a.srcdoc=t.content,t.width&&(a.style.width=t.width),t.height&&(a.style.height=t.height),i.style.height="100%",e.style.height="100%",i.appendChild(a)}break;case"markdown":this.hover.renderMarkDown&&(o.innerHTML=this.hover.renderMarkDown(t.content));break;default:o.appendChild(n.createTextNode(t.content))}return i.appendChild(o),e.appendChild(i),!0},_renderImmediateInfo:function(e,i,r){if(i instanceof Array&&(i=this._getAnnotationContents(i,r),!i))return!1;if("string"==typeof i)return e.textContent=i,!0;if(this._isNode(i))return e.appendChild(i),!0;if(i instanceof n.ProjectionTextModel){var o=this._view,s=o.getOptions();s.wrapMode=!1,s.parent=e;var a="tooltipTheme",l=s.themeClass;l?(l=l.replace(a,""),l&&(l=" "+l),l=a+l):l=a,s.themeClass=l;var c=this._contentsView=new t.TextView(s),h={onLineStyle:function(e){o.onLineStyle(e)}};c.addEventListener("LineStyle",h.onLineStyle),c.setModel(i),this._tooltipDiv.appendChild(e),this._tooltipDiv.classList.add("textviewTooltipCodeProjection");var d=c.computeSize();return e.style.width=d.width+8+"px",e.style.height=d.height+8+"px",c.resize(),this._tooltipDiv.removeChild(e),!0}return!1},_getAnnotationContents:function(t,i){function o(e,t,n){var o=e.title,l=s.createElement(p,"div");if(l.className="tooltipRow",e.html){var c=s.createElement(p,"div");c.className="tooltipImage",c.innerHTML=e.html,c.lastChild&&r.addEventListener(c.lastChild,"click",function(){var t=e.start,n=e.end;g.getBaseModel&&(t=g.mapOffset(t,!0),n=g.mapOffset(n,!0)),f.setSelection(t,n,1/3,function(){a.hide()})},!1),l.appendChild(c)}if(!o){var h=m.getLineStart(m.getLineAtOffset(e.start)),d=m.getLineEnd(m.getLineAtOffset(e.end),!0);o=m.getText(h,d)}if("function"==typeof o&&(o=e.title()),"string"==typeof o){var u=s.createElement(p,"span");u.className="tooltipTitle",u.appendChild(p.createTextNode(o)),o=u}return l.appendChild(o),n&&a.hover.renderQuickFixes(e,t,l),i&&(i.offsetStart=e.start,i.offsetEnd=e.end),l}var a=this,l=a.hover?!0:!1;l&&i&&i.source&&i.source.indexOf("ruler")>=0&&t.length>1&&(l=!1);for(var c,h=[],d=0;d<t.length;d++)c=t[d],""===c.title||c.groupAnnotation||(!l||c.title||"orion.annotation.folding"===c.type)&&h.push(c);if(t=h,0===t.length)return null;var u,p=this._tooltipDiv.ownerDocument,f=this._view,g=f.getModel(),m=g.getBaseModel?g.getBaseModel():g;if(1===t.length&&"orion.annotation.folding"===t[0].type){var v=new n.ProjectionTextModel(m),_=m.getLineStart(m.getLineAtOffset(t[0].start)),y=m.getCharCount();return t[0].end!==y&&v.addProjection({start:t[0].end,end:y}),_>0&&v.addProjection({start:0,end:_}),v}var x;if(t.length>0&&this._editor&&(x=this._editor.getAnnotationModel().getAnnotations()),1===t.length){if(u=o(t[0],x,l),u&&u.firstChild){var w=u.firstChild.className;w&&(w+=" "),w+="single",u.firstChild.className=w}return u}var b=s.createElement(p,"div"),C=s.createElement(p,"multi_anno");C.appendChild(p.createTextNode(e.multipleAnnotations)),b.appendChild(C);for(var E=0;E<t.length;E++)u=o(t[E],x,l),u&&b.appendChild(u);return b}},{Tooltip:a}}),n("wix-code/orion-overrides/orion/editor/tooltip",["orion/editor/tooltip","orion/util"],function(e,t){var n=e.Tooltip.prototype._renderPluginContent;e.Tooltip.prototype._renderPluginContent=function(e,i){if("wixhtml"===i.type){var r=this._tooltipDiv.ownerDocument,o=t.createElement(r,"div");return o.appendChild(i.getContent(r)),e.appendChild(o),!0}return n.call(this,e,i)};var i=e.Tooltip.prototype._computeTooltipArea;return e.Tooltip.prototype._computeTooltipArea=function(e,t,n){var r=i.call(this,e,t,n),o=32,s=n.getElementsByTagName("img")[0];return s&&(r.width-=o,n.style.width=r.width+"px"),r},e}),n("orion/editor/editor",["i18n!orion/editor/nls/messages","orion/editor/eventTarget","orion/editor/tooltip","orion/editor/annotations","orion/objects","orion/util"],function(e,t,n,i,r,o){function s(e){e=e||{},this._domNode=e.domNode,this._model=e.model,this._undoStack=e.undoStack,this._statusReporter=e.statusReporter,this._title=null;var t=this;this._listener={onChanged:function(e){t.onChanged(e)}},this._model&&this._model.addEventListener("Changed",this._listener.onChanged),this.checkDirty()}function a(e){e=e||{},s.call(this,e),this._textViewFactory=e.textViewFactory,this._undoStackFactory=e.undoStackFactory,this._textDNDFactory=e.textDNDFactory,this._annotationFactory=e.annotationFactory,this._zoomRulerFactory=e.zoomRulerFactory,this._foldingRulerFactory=e.foldingRulerFactory,this._lineNumberRulerFactory=e.lineNumberRulerFactory,this._contentAssistFactory=e.contentAssistFactory,this._keyBindingFactory=e.keyBindingFactory,this._hoverFactory=e.hoverFactory,this._syntaxHighlighter=e.syntaxHighlighter,this._annotationStyler=null,this._annotationModel=null,this._annotationRuler=null,this._lineNumberRuler=null,this._overviewRuler=null,this._zoomRuler=null,this._foldingRuler=null,this._contentAssist=null}var l=i.AnnotationType,c="orion.annotation.highlightError";return s.prototype={destroy:function(){this.uninstall(),this._statusReporter=this._domNode=null,this._model&&this._model.removeEventListener("Changed",this._listener.onChanged)},checkDirty:function(){this.setDirty(this._undoStack&&!this._undoStack.isClean())},focus:function(){},getModel:function(){return this._model},getText:function(e,t){return this.getModel().getText(e,t)},getTitle:function(){return this._title},getUndoStack:function(){return this._undoStack},install:function(){this.installed=!0},isDirty:function(){return this._undoStack?!this._undoStack.isClean():this._dirty},markClean:function(){this.getUndoStack().markClean(),this.setDirty(!1)},onDirtyChanged:function(e){return this.dispatchEvent(e)},onInputChanged:function(e){return this.dispatchEvent(e)},onChanged:function(e){this.checkDirty()},reportStatus:function(e,t,n){this._statusReporter&&this._statusReporter(e,t,n)},resize:function(){},setDirty:function(e){this._dirty!==e&&(this._dirty=e,this.onDirtyChanged({type:"DirtyChanged"}))},_setModelText:function(e){this._model&&this._model.setText(e)},setInput:function(e,t,n,i){this._title=e,i||(t?this.reportStatus(t,"error"):null!==n&&void 0!==n&&("string"==typeof n&&this._setModelText(n),this._undoStack&&this._undoStack.reset())),this.checkDirty(),this.onInputChanged({type:"InputChanged",title:e,message:t,contents:n,contentsSaved:i})},setText:function(e,t,n){this.getModel().setText(e,t,n)},uninstall:function(){this.installed=!1}},t.EventTarget.addMixin(s.prototype),a.prototype=new s,r.mixin(a.prototype,{destroy:function(){s.prototype.destroy.call(this),this._textViewFactory=this._undoStackFactory=this._textDNDFactory=this._annotationFactory=this._foldingRulerFactory=this._lineNumberRulerFactory=this._contentAssistFactory=this._keyBindingFactory=this._hoverFactory=this._zoomRulerFactory=null},getAnnotationModel:function(){return this._annotationModel},getAnnotationRuler:function(){return this._annotationRuler},getAnnotationRulerVisible:function(){return this._annotationRulerVisible},getAnnotationStyler:function(){return this._annotationStyler},getContentAssist:function(){return this._contentAssist},getFoldingRuler:function(){return this._foldingRuler},getFoldingRulerVisible:function(){return this._foldingRulerVisible},getLineNumberRuler:function(){return this._lineNumberRuler},getLineNumberRulerVisible:function(){return this._lineNumberRulerVisible},getTooltip:function(){return n.Tooltip.getTooltip(this._textView,this)},getZoomRuler:function(){return this._zoomRuler},getZoomRulerVisible:function(){return this._zoomRulerVisible},getModel:function(){if(!this._textView)return null;var e=this._textView.getModel();return e.getBaseModel&&(e=e.getBaseModel()),e},getOverviewRuler:function(){return this._overviewRuler},getTextView:function(){return this._textView},getKeyModes:function(){return this._textView.getKeyModes()},getSourceCodeActions:function(){return this._sourceCodeActions},getLinkedMode:function(){return this._linkedMode},getTextActions:function(){return this._textActions},focus:function(){this._textView&&this._textView.focus()},resize:function(){this._textView&&this._textView.resize()},setAnnotationRulerVisible:function(e,t){if((this._annotationRulerVisible!==e||t)&&(this._annotationRulerVisible=e,this._annotationRuler)){var n=this._textView;e?n.addRuler(this._annotationRuler,0):n.removeRuler(this._annotationRuler)}},setFoldingRulerVisible:function(e,t){if(this._foldingRulerVisible!==e||t){if(!e){var n=this.getTextActions();n&&n.expandAnnotations(!0)}if(this._foldingRulerVisible=e,this._foldingRuler){var i=this._textView;i.getModel().getBaseModel&&(e?i.addRuler(this._foldingRuler):i.removeRuler(this._foldingRuler))}}},setLineNumberRulerVisible:function(e,t){if((this._lineNumberRulerVisible!==e||t)&&(this._lineNumberRulerVisible=e,this._lineNumberRuler)){var n=this._textView;e?n.addRuler(this._lineNumberRuler,this._annotationRulerVisible?1:0):n.removeRuler(this._lineNumberRuler)}},setOverviewRulerVisible:function(e,t){if((this._overviewRulerVisible!==e||t)&&(this._overviewRulerVisible=e,this._overviewRuler)){var n=this._textView;e?n.addRuler(this._overviewRuler):n.removeRuler(this._overviewRuler)}},setZoomRulerVisible:function(e,t){if((this._zoomRulerVisible!==e||t)&&(this._zoomRulerVisible=e,this._zoomRuler)){var n=this._textView;e?n.addRuler(this._zoomRuler):n.removeRuler(this._zoomRuler)}},mapOffset:function(e,t){var n=this._textView,i=n.getModel();return i.getBaseModel&&(e=i.mapOffset(e,t)),e},getLineAtOffset:function(e){return this.getModel().getLineAtOffset(this.mapOffset(e))},getLineStart:function(e){return this.getModel().getLineStart(e)},getCaretOffset:function(){return this.mapOffset(this._textView.getCaretOffset())},getSelectionText:function(e){var t=this._textView;return t.getSelectionText(e)},getSelection:function(){var e=this._textView,t=e.getSelection(),n=e.getModel();return n.getBaseModel&&(t.start=n.mapOffset(t.start),t.end=n.mapOffset(t.end)),t},getSelections:function(){var e=this._textView,t=e.getModel(),n=e.getSelections();return n.forEach(function(e){t.getBaseModel&&(e.start=t.mapOffset(e.start),e.end=t.mapOffset(e.end))}),n},getStyleAccessor:function(){var e=null;if(this._syntaxHighlighter){var t=this._syntaxHighlighter.getStyler();t&&t.getStyleAccessor&&(e=t.getStyleAccessor())}return e},_expandOffset:function(e){var t=this._textView.getModel(),n=this._annotationModel;if(n&&t.getBaseModel)for(var i=n.getAnnotations(e,e+1);i.hasNext();){var r=i.next();r.type===l.ANNOTATION_FOLDING&&r.expand&&r.expand()}},setCaretOffset:function(e,t,n){var i=this._textView,r=i.getModel();r.getBaseModel&&(this._expandOffset(e),e=r.mapOffset(e,!0)),i.setCaretOffset(e,t,n)},setText:function(e,t,n,i,r){var o=this._textView,s=o.getModel();s.getBaseModel&&(void 0!==t&&(this._expandOffset(t),t=s.mapOffset(t,!0)),void 0!==n&&(this._expandOffset(n),n=s.mapOffset(n,!0))),o.setText(e,t,n,i,r)},setSelection:function(e,t,n,i){var r=this._textView,o=r.getModel();o.getBaseModel&&(this._expandOffset(e),this._expandOffset(t),e=o.mapOffset(e,!0),t=o.mapOffset(t,!0)),r.setSelection(e,t,n,i)},setSelections:function(e,t,n){var i=this,r=this._textView,o=r.getModel();e.forEach(function(e){var t=e.start,n=e.end;
o.getBaseModel&&(i._expandOffset(t),i._expandOffset(n),t=o.mapOffset(t,!0),n=o.mapOffset(n,!0)),e.start=t,e.end=n}),r.setSelections(e,t,n)},moveSelection:function(e,t,n,i){t=t||e;var r=this._textView;this.setSelection(e,t,1/3,function(){(void 0===i||i)&&r.focus(),n&&n()})},_getTooltipInfo:function(e,t){var n=this._textView,i=this.getAnnotationModel();if(!i)return null;var r=this._annotationStyler;if(!r)return null;if(!n.isValidTextPosition(e,t))return null;var o=n.getOffsetAtLocation(e,t);if(-1===o)return null;o=this.mapOffset(o);for(var s=r.getAnnotationsByType(i,o,o+1),a=[],l=0;l<s.length;l++)s[l].rangeStyle&&a.push(s[l]);var c={contents:a,position:"below",context:{source:"editor",offset:o}};return c},_highlightCurrentLine:function(e,t){function n(e){var t={};return e&&e.some(function(e){return e&&e.isEmpty()?(t[s.getLineAtOffset(e.start).toString()]=!0,!1):!0})?{}:t}function i(e,t){for(var n in e)if(!t[n])return!0;return!1}var r=this._annotationModel;if(r){var o=this._textView;if(!o.getOptions("singleMode")){t=Array.isArray(t)?t:[t],e=Array.isArray(e)?e:[e];var s=o.getModel(),a=n(t),c=n(e);if(i(a,c)||i(c,a)){var h=this._currentLineAnnotations,d=[];for(var u in c){var p=u>>0,f=s.getLineStart(p),g=s.getLineEnd(p);s.getBaseModel&&(f=s.mapOffset(f),g=s.mapOffset(g));var m=l.ANNOTATION_CURRENT_LINE,v=l.createAnnotation(m,f,g);d.push(v)}this._currentLineAnnotations=d,r.replaceAnnotations(h,d)}}}},installTextView:function(){this.install()},install:function(){if(!this._textView){if(this._textView=this._textViewFactory(),this._undoStackFactory&&(this._undoStack=this._undoStackFactory.createUndoStack(this),this._textView.setOptions({undoStack:this._undoStack}),this.checkDirty()),this._textDNDFactory&&(this._textDND=this._textDNDFactory.createTextDND(this,this._undoStack)),this._contentAssistFactory){var e=this._contentAssistFactory.createContentAssistMode(this);this._contentAssist=e.getContentAssist()}var t=n.Tooltip.getTooltip(this._textView,this);this._hoverFactory&&(this._hover=this._hoverFactory.createHover(this),t.hover=this._hover);var i=this,r=this._textView,o=this;if(this._listener={onModelChanged:function(e){o.checkDirty()},onMouseOver:function(e){o._listener.onMouseMove(e)},onMouseDown:function(e){o._listener.mouseDown=!0},onMouseUp:function(e){o._listener.mouseDown=!1},onMouseMove:function(e){t&&!o._listener.mouseDown&&(e.event.clientX!==o._listener.lastMouseX||e.event.clientY!==o._listener.lastMouseY)&&(o._listener.lastMouseX=e.event.clientX,o._listener.lastMouseY=e.event.clientY,o._hoverTimeout&&(window.clearTimeout(o._hoverTimeout),o._hoverTimeout=null),o._hoverTimeout=window.setTimeout(function(){o._hoverTimeout=null,o._listener&&t.onHover({y:e.y,x:e.x,getTooltipInfo:function(){return o._getTooltipInfo(this.x,this.y)}},e.x,e.y)},175))},onMouseOut:function(e){o._hoverTimeout&&(window.clearTimeout(o._hoverTimeout),o._hoverTimeout=null)},onSelection:function(e){t&&t.hide(),o._updateCursorStatus(),o._highlightCurrentLine(e.newValue,e.oldValue)}},r.addEventListener("ModelChanged",this._listener.onModelChanged),r.addEventListener("Selection",this._listener.onSelection),r.addEventListener("MouseOver",this._listener.onMouseOver),r.addEventListener("MouseOut",this._listener.onMouseOut),r.addEventListener("MouseDown",this._listener.onMouseDown),r.addEventListener("MouseUp",this._listener.onMouseUp),r.addEventListener("MouseMove",this._listener.onMouseMove),this._keyBindingFactory){var a;a="function"==typeof this._keyBindingFactory?this._keyBindingFactory(this,this.getKeyModes(),this._undoStack,this._contentAssist):this._keyBindingFactory.createKeyBindings(i,this._undoStack,this._contentAssist),a&&(this._textActions=a.textActions,this._linkedMode=a.linkedMode,this._sourceCodeActions=a.sourceCodeActions)}var h=function(e,t){if(void 0!==e&&-1!==e){for(var n=this.getView(),r=n.getModel(),o=this.getAnnotationModel(),s=i.mapOffset(r.getLineStart(e)),a=i.mapOffset(r.getLineEnd(e)),c=o.getAnnotations(s,a),h=null;c.hasNext();){var d=c.next();if(d.type===l.ANNOTATION_BOOKMARK){h=d;break}}h?o.removeAnnotation(h):(h=l.createAnnotation(l.ANNOTATION_BOOKMARK,s,a,i.getText(s,a)),o.addAnnotation(h))}};if(this._annotationFactory){var d=r.getModel();if(d.getBaseModel&&(d=d.getBaseModel()),this._annotationModel=this._annotationFactory.createAnnotationModel(d),this._annotationModel){var u=this._annotationStyler=this._annotationFactory.createAnnotationStyler(r,this._annotationModel);u&&(u.addAnnotationType(l.ANNOTATION_CURRENT_SEARCH),u.addAnnotationType(l.ANNOTATION_MATCHING_SEARCH),u.addAnnotationType(l.ANNOTATION_ERROR),u.addAnnotationType(l.ANNOTATION_WARNING),u.addAnnotationType(l.ANNOTATION_MATCHING_BRACKET),u.addAnnotationType(l.ANNOTATION_CURRENT_BRACKET),u.addAnnotationType(l.ANNOTATION_CURRENT_LINE),u.addAnnotationType(l.ANNOTATION_READ_OCCURRENCE),u.addAnnotationType(l.ANNOTATION_WRITE_OCCURRENCE),u.addAnnotationType(l.ANNOTATION_SELECTED_LINKED_GROUP),u.addAnnotationType(l.ANNOTATION_CURRENT_LINKED_GROUP),u.addAnnotationType(l.ANNOTATION_LINKED_GROUP),u.addAnnotationType(c))}var p=this._annotationFactory.createAnnotationRulers(this._annotationModel),f=this._annotationRuler=p.annotationRuler;f&&(f.onDblClick=h,f.setMultiAnnotationOverlay({html:"<div class='annotationHTML overlay'></div>"}),f.addAnnotationType(l.ANNOTATION_ERROR),f.addAnnotationType(l.ANNOTATION_WARNING),f.addAnnotationType(l.ANNOTATION_TASK),f.addAnnotationType(l.ANNOTATION_BOOKMARK),f.addAnnotationType(l.ANNOTATION_DIFF_ADDED),f.addAnnotationType(l.ANNOTATION_DIFF_DELETED),f.addAnnotationType(l.ANNOTATION_DIFF_MODIFIED)),this.setAnnotationRulerVisible(this._annotationRulerVisible||void 0===this._annotationRulerVisible,!0),f=this._overviewRuler=p.overviewRuler,f&&(f.addAnnotationType(l.ANNOTATION_CURRENT_SEARCH),f.addAnnotationType(l.ANNOTATION_MATCHING_SEARCH),f.addAnnotationType(l.ANNOTATION_READ_OCCURRENCE),f.addAnnotationType(l.ANNOTATION_WRITE_OCCURRENCE),f.addAnnotationType(l.ANNOTATION_CURRENT_BLAME),f.addAnnotationType(l.ANNOTATION_ERROR),f.addAnnotationType(l.ANNOTATION_WARNING),f.addAnnotationType(l.ANNOTATION_TASK),f.addAnnotationType(l.ANNOTATION_BOOKMARK),f.addAnnotationType(l.ANNOTATION_MATCHING_BRACKET),f.addAnnotationType(l.ANNOTATION_CURRENT_BRACKET),f.addAnnotationType(l.ANNOTATION_CURRENT_LINE),f.addAnnotationType(l.ANNOTATION_DIFF_ADDED),f.addAnnotationType(l.ANNOTATION_DIFF_DELETED),f.addAnnotationType(l.ANNOTATION_DIFF_MODIFIED)),this.setOverviewRulerVisible(this._overviewRulerVisible||void 0===this._overviewRulerVisible,!0)}this._zoomRulerFactory&&(this._zoomRuler=this._zoomRulerFactory.createZoomRuler(this._annotationModel),this.setZoomRulerVisible(this._zoomRulerVisible,!0)),this._lineNumberRulerFactory&&(this._lineNumberRuler=this._lineNumberRulerFactory.createLineNumberRuler(this._annotationModel),this._lineNumberRuler.addAnnotationType(l.ANNOTATION_CURRENT_BLAME),this._lineNumberRuler.addAnnotationType(l.ANNOTATION_BLAME),this._lineNumberRuler.addAnnotationType(l.ANNOTATION_DIFF_ADDED),this._lineNumberRuler.addAnnotationType(l.ANNOTATION_DIFF_MODIFIED),this._lineNumberRuler.addAnnotationType(l.ANNOTATION_DIFF_DELETED),this._lineNumberRuler.onDblClick=h,this.setLineNumberRulerVisible(this._lineNumberRulerVisible||void 0===this._lineNumberRulerVisible,!0)),this._foldingRulerFactory&&(this._foldingRuler=this._foldingRulerFactory.createFoldingRuler(this._annotationModel),this._foldingRuler.addAnnotationType(l.ANNOTATION_FOLDING),this.setFoldingRulerVisible(this._foldingRulerVisible||void 0===this._foldingRulerVisible,!0));var g={type:"TextViewInstalled",textView:r};this.dispatchEvent(g),s.prototype.install.call(this)}},uninstallTextView:function(){this.uninstall()},uninstall:function(){var e=this._textView;if(e){e.destroy(),this._annotationModel&&this._annotationModel.setTextModel(null),this._textView=this._undoStack=this._textDND=this._contentAssist=this._listener=this._annotationModel=this._annotationStyler=this._annotationRuler=this._overviewRuler=this._zoomRuler=this._lineNumberRuler=this._foldingRuler=this._currentLineAnnotations=this._title=null,this._dirty=!1,this._foldingRulerVisible=this._overviewRulerVisible=this._zoomRulerVisible=this._lineNumberRulerVisible=this._annotationRulerVisible=void 0;var t={type:"TextViewUninstalled",textView:e};this.dispatchEvent(t),s.prototype.uninstall.call(this)}},_updateCursorStatus:function(){for(var t=this.getKeyModes(),n=0;n<t.length;n++){var i=t[n];if(i.isActive()&&i.isStatusActive&&i.isStatusActive())return}var r,s=this.getModel(),a=this.getSelections();if(a.length>1)r=o.formatMessage(e.multiSelections,a.length);else{var l=a[0].getCaret(),c=s.getLineAtOffset(l),h=s.getLineStart(c),d=l-h;r=localStorage.languageTools?o.formatMessage(e.lineColumnOffset,c+1,d+1,l):o.formatMessage(e.lineColumn,c+1,d+1)}this.reportStatus(r)},showAnnotations:function(e,t,n,i){var r=this._annotationModel;if(r){for(var o,s=[],a=[],c=r.getTextModel(),h=r.getAnnotations();h.hasNext();)o=h.next(),-1!==t.indexOf(o.type)&&o.creatorID===this&&s.push(o);if(e)for(var d=0;d<e.length;d++)if(o=e[d]){if(n)o=n(o);else{var u,p;if(o.lineStart&&o.lineEnd)u=c.getLineStart(o.lineStart),p=c.getLineCount()===o.lineEnd?c.getLineEnd(o.lineEnd-1):c.getLineStart(o.lineEnd);else if("number"==typeof o.line){var f=o.line-1,g=c.getLineStart(f);u=g+o.start-1,p=g+o.end-1}else u=o.start,p=o.end;var m=i(o);if(!m)continue;o=l.createAnnotation(m,u,p,o.description)}o.id=e[d].id,e[d].data&&(o.data=e[d].data),o.creatorID=this,a.push(o)}r.replaceAnnotations(s,a)}},showProblems:function(e){this.showAnnotations(e,[l.ANNOTATION_ERROR,l.ANNOTATION_WARNING,l.ANNOTATION_TASK],null,function(e){switch(e.severity){case"error":return l.ANNOTATION_ERROR;case"warning":return l.ANNOTATION_WARNING;case"task":return l.ANNOTATION_TASK}return null})},showOccurrences:function(e){this.showAnnotations(e,[l.ANNOTATION_READ_OCCURRENCE,l.ANNOTATION_WRITE_OCCURRENCE],null,function(e){return e.readAccess?l.ANNOTATION_READ_OCCURRENCE:l.ANNOTATION_WRITE_OCCURRENCE})},showBlame:function(t){var n=this._blameRGB,s=this.getTextView().getOptions("parent").ownerDocument;if(!n){var a=o.createElement(s,"div");a.className="annotation blame",s.body.appendChild(a);var c=s.defaultView||s.parentWindow,h=c.getComputedStyle(a),d=h.getPropertyValue("background-color");a.parentNode.removeChild(a);var u=d.indexOf("("),p=d.indexOf(")");d=d.substring(u+1,p),this._blameRGB=n=d.split(",").slice(0,3)}var f=function(){var e=i.AnnotationType.createAnnotation(this.groupType,this.start,this.end,this.title);return e.style=r.mixin({},e.style),e.style.style=r.mixin({},e.style.style),e.style.style.backgroundColor="",this.groupAnnotation=e,e.blame=this.blame,e.html=this.html,e.creatorID=this.creatorID,e},g=function(){var t=o.createElement(s,"div");t.className="tooltipTitle";var n=this.blame.Message.indexOf("\n");-1===n&&(n=this.blame.Message.length);var i=o.createElement(s,"a");return i.href=this.blame.CommitLink,i.appendChild(s.createTextNode(this.blame.Message.substring(0,n))),t.appendChild(i),t.appendChild(o.createElement(s,"br")),t.appendChild(s.createTextNode(o.formatMessage(e.committerOnTime,this.blame.AuthorName,this.blame.Time))),t},m=this.getModel();this.showAnnotations(t,[l.ANNOTATION_BLAME,l.ANNOTATION_CURRENT_BLAME],function(e){var t=m.getLineStart(e.Start-1),o=m.getLineEnd(e.End-1,!0),s=i.AnnotationType.createAnnotation(l.ANNOTATION_BLAME,t,o,g),a=n.slice(0);return a.push(e.Shade),s.style=r.mixin({},s.style),s.style.style=r.mixin({},s.style.style),s.style.style.backgroundColor="rgba("+a.join()+")",s.groupId=e.Name,s.groupType=l.ANNOTATION_CURRENT_BLAME,s.createGroupAnnotation=f,s.html='<img class="annotationHTML blame" src="'+e.AuthorImage+'"/>',s.blame=e,s})},showDiffAnnotations:function(e){this.showAnnotations(e,[l.ANNOTATION_DIFF_ADDED,l.ANNOTATION_DIFF_MODIFIED,l.ANNOTATION_DIFF_DELETED],null,function(e){return"added"===e.type?l.ANNOTATION_DIFF_ADDED:"modified"===e.type?l.ANNOTATION_DIFF_MODIFIED:l.ANNOTATION_DIFF_DELETED})},showSelection:function(e,t,n,i,r){if("number"==typeof e)return"number"!=typeof t&&(t=e),this.moveSelection(e,t),!0;if("number"==typeof n){var o=this.getModel(),s=o.getLineStart(n-1);return"number"==typeof i&&(s+=i),"number"!=typeof r&&(r=0),this.moveSelection(s,s+r),!0}return!1},_setModelText:function(e){this._textView&&(this._textView.setText(e),this._textView.getModel().setLineDelimiter("auto"),this._highlightCurrentLine(this._textView.getSelections()))},setInput:function(e,t,n,i,r){s.prototype.setInput.call(this,e,t,n,i),!this._textView||i||r||this._textView.focus()},onGotoLine:function(e,t,n,i){if(this._textView){var r=this.getModel();e=Math.max(0,Math.min(e,r.getLineCount()-1));var o=r.getLineStart(e),s=0;if(void 0===n&&(n=0),"string"==typeof t){var a=r.getLine(e).indexOf(t);-1!==a&&(s=a,n=s+t.length)}else{s=t;var l=r.getLineEnd(e)-o;s=Math.min(s,l),n=Math.min(n,l)}this.moveSelection(o+s,o+n,i)}}}),{BaseEditor:s,Editor:a}}),n("wix-code/orion-overrides/orion/editor/editor",["orion/editor/editor","orion/editor/tooltip"],function(e,t){var n=e.Editor.prototype.install;e.Editor.prototype.install=function(){n.call(this);var e=t.Tooltip.getTooltip(this._textView,this);this._hoverFactory&&(this._hover=this._hoverFactory.createHover(this),e.hover=this._hover);var i=this._textView,r=this;i.removeEventListener("MouseMove",this._listener.onMouseMove),this._listener.onMouseMove=function(t){e&&!r._listener.mouseDown&&(t.event.clientX!==r._listener.lastMouseX||t.event.clientY!==r._listener.lastMouseY)&&(r._listener.lastMouseX=t.event.clientX,r._listener.lastMouseY=t.event.clientY,r._hoverTimeout&&(window.clearTimeout(r._hoverTimeout),r._hoverTimeout=null),r._hoverTimeout=window.setTimeout(function(){r._hoverTimeout=null,r._listener&&e.onHover({y:t.y,x:t.x,getTooltipInfo:function(){return r._getTooltipInfo(this.x,this.y)}},t.x,t.y)},850))},i.addEventListener("MouseMove",this._listener.onMouseMove)};var i=e.Editor.prototype.setInput;return e.Editor.prototype.setInput=function(e,t,n,r){i.call(this,e,t,n,r,!0)},e}),n("orion/editor/find",["i18n!orion/editor/nls/messages","orion/keyBinding","orion/editor/keyModes","orion/editor/annotations","orion/regex","orion/objects","orion/Deferred","orion/util"],function(e,t,n,i,r,o,s,a){function l(e){var t=e.getTextView();n.KeyMode.call(this,t),this.editor=e,this._active=!1,this._success=!0,this._ignoreSelection=!1,this._prefix="",t.setAction("incrementalFindCancel",function(){return this.setActive(!1),!0}.bind(this)),t.setAction("incrementalFindBackspace",function(){return this._backspace()}.bind(this));var i=this;this._listener={onVerify:function(e){var t=i.editor,n=t.getModel(),o=t.mapOffset(e.start),s=t.mapOffset(e.end),a=n.getText(o,s),l=i._prefix,c=l.match(new RegExp("^"+r.escape(a),"i"));c&&c.length>0&&(l=i._prefix+=e.text,i._success=!0,i._status(),i.find(i._forward,!0),e.text=null)},onSelection:function(){i._ignoreSelection||i.setActive(!1)}}}function c(e,t,n){if(e){this._editor=e,this._undoStack=t,this._showAll=!0,this._visible=!1,this._caseInsensitive=!0,this._wrap=!0,this._wholeWord=!1,this._incremental=!0,this._regex=!1,this._findAfterReplace=!0,this._hideAfterFind=!1,this._reverse=!1,this._start=void 0,this._end=void 0,this._timer=void 0,this._lastString="";var i=this;this._listeners={onEditorFocus:function(e){i._removeCurrentAnnotation(e)}},this.setOptions(n)}}var h={};return l.prototype=new n.KeyMode,o.mixin(l.prototype,{createKeyBindings:function(){var e=t.KeyBinding,n=[];return n.push({actionID:"incrementalFindBackspace",keyBinding:new e(8)}),n.push({actionID:"incrementalFindCancel",keyBinding:new e(13)}),n.push({actionID:"incrementalFindCancel",keyBinding:new e(27)}),n.push({actionID:"incrementalFindReverse",keyBinding:new e(38)}),n.push({actionID:"incrementalFind",keyBinding:new e(40)}),n.push({actionID:"incrementalFindReverse",keyBinding:new e("k",!0,!0)}),n.push({actionID:"incrementalFind",keyBinding:new e("k",!0)}),n},find:function(e,t){if(this._forward=e,!this.isActive())return this.setActive(!0),!1;var n=this._prefix;if(0===n.length)return!1;var i,r=this.editor,o=r.getModel();return i=e?this._success?t?this._start:r.getCaretOffset()+1:0:this._success?t?this._start:r.getCaretOffset():o.getCharCount()-1,s.when(r.getModel().find({string:n,start:i,reverse:!e,caseInsensitive:n.toLowerCase()===n}),function(n){var o=n.next();o?(t||(this._start=i),this._success=!0,this._ignoreSelection=!0,r.moveSelection(e?o.start:o.end,e?o.end:o.start),this._ignoreSelection=!1):this._success=!1,this._status()}.bind(this)),!0},isActive:function(){return this._active},isStatusActive:function(){return this.isActive()},setActive:function(e){if(this._active!==e){this._active=e,this._prefix="",this._success=!0;var t=this.editor,n=t.getTextView();this._start=this.editor.getCaretOffset(),this.editor.setCaretOffset(this._start),this._active?(n.addEventListener("Verify",this._listener.onVerify),n.addEventListener("Selection",this._listener.onSelection),n.addKeyMode(this)):(n.removeEventListener("Verify",this._listener.onVerify),n.removeEventListener("Selection",this._listener.onSelection),n.removeKeyMode(this)),this._status()}},_backspace:function(){var e=this._prefix;return e=this._prefix=e.substring(0,e.length-1),0===e.length?(this._success=!0,this._ignoreSelection=!0,this.editor.setCaretOffset(this.editor.getSelection().start),this._ignoreSelection=!1,this._status(),!0):this.find(this._forward,!0)},_status:function(){if(!this.isActive())return void this.editor.reportStatus("");var t;t=this._forward?this._success?e.incrementalFindStr:e.incrementalFindStrNotFound:this._success?e.incrementalFindReverseStr:e.incrementalFindReverseStrNotFound,t=a.formatMessage(t,this._prefix),this.editor.reportStatus(t,this._success?"":"error")}}),h.IncrementalFind=l,c.prototype={find:function(e,t,n){this.setOptions({reverse:!e});var i,r=this.getFindString();t&&(r=t.findString||r,i=t.count);var o=this.getOptions();this.setOptions(t);var s=n?this._startOffset:this.getStartOffset();return this._doFind(r,s,i).then(function(e){return e&&(n||(this._startOffset=e.start)),this.setOptions(o),this._hideAfterFind&&this.hide(),e}.bind(this))},getStartOffset:function(){return void 0!==this._start?this._start:this._reverse?this._editor.getSelection().start-1:this._editor.getCaretOffset()},getFindString:function(){var e=this._editor.getSelection(),t=this._editor.getText(e.start,e.end);return this._regex&&(t=r.escape(t)),t||this._lastString},getOptions:function(){return{showAll:this._showAll,caseInsensitive:this._caseInsensitive,wrap:this._wrap,wholeWord:this._wholeWord,incremental:this._incremental,regex:this._regex,findAfterReplace:this._findAfterReplace,hideAfterFind:this._hideAfterFind,reverse:this._reverse,findCallback:this._findCallback,start:this._start,end:this._end}},getReplaceString:function(){return""},hide:function(){this._visible=!1,this._savedOptions&&(this.setOptions(this._savedOptions.pop()),0===this._savedOptions.length&&(this._savedOptions=null)),this._removeAllAnnotations();var e=this._editor.getTextView();e&&(e.removeEventListener("Focus",this._listeners.onEditorFocus),e.focus())},_processReplaceString:function(e){var t=e;if(this._regex){t="";for(var n=!1,i=this._editor.getModel().getLineDelimiter(),r=0;r<e.length;r++){var o=e.substring(r,r+1);if(n){switch(o){case"R":t+=i;break;case"r":t+="\r";break;case"n":t+="\n";break;case"t":t+="	";break;case"\\":t+="\\";break;default:t+="\\"+o}n=!1}else"\\"===o?n=!0:t+=o}n&&(t+="\\")}return t},isVisible:function(){return this._visible},replace:function(){var e=this.getFindString();if(e){var t=this._editor,n=this._processReplaceString(this.getReplaceString()),i=t.getSelection(),r=i.start;s.when(this._editor.getModel().find({string:e,start:r,reverse:!1,wrap:this._wrap,regex:this._regex,wholeWord:this._wholeWord,caseInsensitive:this._caseInsensitive})).then(function(t){if(t){var i=t.next();i&&(this.startUndo(),this._doReplace(i.start,i.end,e,n),this.endUndo()),this._findAfterReplace&&this._doFind(e,this.getStartOffset())}}.bind(this))}},replaceAll:function(){var t=this.getFindString();if(t){this._replacingAll=!0;var n=this._editor,i=n.getTextView();n.reportStatus(e.replacingAll);var r=this._processReplaceString(this.getReplaceString()),o=this;window.setTimeout(function(){for(var s=0,l=0;;){var c=o._doFindForReplaceAll(t,s,null,!0);if(!c)break;l++,1===l&&(i.setRedraw(!1),o.startUndo()),o._doReplace(c.start,c.end,t,r),s=o.getStartOffset()}l>0&&(o.endUndo(),i.setRedraw(!0)),s>0?n.reportStatus(a.formatMessage(e.replacedMatches,l)):n.reportStatus(e.nothingReplaced,"error"),o._replacingAll=!1},100)}},setOptions:function(e){if(e){if((e.showAll===!0||e.showAll===!1)&&this._showAll!==e.showAll&&(this._showAll=e.showAll,this.isVisible()))if(this._showAll)this._markAllOccurrences();else{var t=this._editor.getAnnotationModel();t&&t.removeAnnotations(i.AnnotationType.ANNOTATION_MATCHING_SEARCH)}(e.caseInsensitive===!0||e.caseInsensitive===!1)&&(this._caseInsensitive=e.caseInsensitive),(e.wrap===!0||e.wrap===!1)&&(this._wrap=e.wrap),(e.wholeWord===!0||e.wholeWord===!1)&&(this._wholeWord=e.wholeWord),(e.incremental===!0||e.incremental===!1||"disabled"===e.incremental)&&("disabled"===e.incremental?(this._incremental=!1,this._incrementalDisabled=!0):this._incremental=e.incremental),(e.regex===!0||e.regex===!1)&&(this._regex=e.regex),(e.findAfterReplace===!0||e.findAfterReplace===!1)&&(this._findAfterReplace=e.findAfterReplace),(e.hideAfterFind===!0||e.hideAfterFind===!1)&&(this._hideAfterFind=e.hideAfterFind),(e.reverse===!0||e.reverse===!1)&&(this._reverse=e.reverse),e.hasOwnProperty("findCallback")&&(this._findCallback=e.findCallback),e.hasOwnProperty("start")&&(this._start=e.start),e.hasOwnProperty("end")&&(this._end=e.end)}},show:function(e){this._visible=!0,e&&(this._savedOptions||(this._savedOptions=[]),this._savedOptions.push(this.getOptions()),this.setOptions(e)),this._startOffset=this._editor.getSelection().start,this._editor.getTextView().addEventListener("Focus",this._listeners.onEditorFocus);var t=this;window.setTimeout(function(){t._incremental&&t.find(!0,null,!0)},0)},startUndo:function(){this._undoStack&&this._undoStack.startCompoundChange()},endUndo:function(){this._undoStack&&this._undoStack.endCompoundChange()},_findFromModel:function(e,t,n){return this._editor.getModel().find({string:e,start:t,end:this._end,reverse:this._reverse,wrap:n?!1:this._wrap,regex:this._regex,wholeWord:this._wholeWord,caseInsensitive:this._caseInsensitive})},_find:function(e,t,n,i){var r;if(this._regex)try{r=this._findFromModel(t,n,i)}catch(o){return e.reportStatus(o.message,"error"),null}else r=this._findFromModel(t,n,i);return r},_doFindForReplaceAll:function(e,t,n,i){n=n||1;var r=this._editor;if(!e)return this._removeAllAnnotations(),null;this._lastString=e;var o,s;if(s=this._find(r,e,t,i),!s)return null;if(!s.hasNext||!s.next)return null;for(var a=0;n>a&&s.hasNext();a++)o=s.next();return o},_doFind:function(t,n,r,o){r=r||1;var a=this._editor;if(!t)return this._removeAllAnnotations(),(new s).resolve();this._lastString=t;var l;return s.when(this._find(a,t,n,o)).then(function(t){if(t){for(var n=0;r>n&&t.hasNext();n++)l=t.next();if(!this._replacingAll){if(l?this._editor.reportStatus(""):this._editor.reportStatus(e.notFound,"error"),this.isVisible()){var o=i.AnnotationType.ANNOTATION_CURRENT_SEARCH,s=a.getAnnotationModel();if(s&&(s.removeAnnotations(o),l&&s.addAnnotation(i.AnnotationType.createAnnotation(o,l.start,l.end))),this._showAll){this._timer&&window.clearTimeout(this._timer);var c=this;this._timer=window.setTimeout(function(){c._markAllOccurrences(),c._timer=null},500)}}this._findCallback?this._findCallback(l):l&&a.moveSelection(l.start,l.end,null,!1)}return l}}.bind(this))},_doReplace:function(e,t,n,i){var r=this._editor;this._regex&&(i=r.getText(e,t).replace(new RegExp(n,this._caseInsensitive?"i":""),i)),r.setText(i,e,t),r.setSelection(e,e+i.length,!0)},_markAllOccurrences:function(){var e=this._editor.getAnnotationModel();if(e){for(var t,n=i.AnnotationType.ANNOTATION_MATCHING_SEARCH,r=e.getAnnotations(),o=[];r.hasNext();){var a=r.next();a.type===n&&o.push(a)}if(this.isVisible()){var l=this.getFindString();s.when(this._editor.getModel().find({string:l,regex:this._regex,wholeWord:this._wholeWord,caseInsensitive:this._caseInsensitive})).then(function(r){if(r){for(t=[];r.hasNext();){var s=r.next();t.push(i.AnnotationType.createAnnotation(n,s.start,s.end))}e.replaceAnnotations(o,t)}}.bind(this))}else e.replaceAnnotations(o,t)}},_removeAllAnnotations:function(){var e=this._editor.getAnnotationModel();e&&(e.removeAnnotations(i.AnnotationType.ANNOTATION_CURRENT_SEARCH),e.removeAnnotations(i.AnnotationType.ANNOTATION_MATCHING_SEARCH))},_removeCurrentAnnotation:function(e){var t=this._editor.getAnnotationModel();t&&t.removeAnnotations(i.AnnotationType.ANNOTATION_CURRENT_SEARCH)}},h.Find=c,h}),n("orion/editor/findUI",["i18n!orion/editor/nls/messages","orion/editor/find","orion/objects","orion/editor/util","orion/util"],function(e,t,n,i,r){function o(e,n,i){t.Find.call(this,e,n,i)}return o.prototype=new t.Find,n.mixin(o.prototype,{getFindString:function(){var e=this._findInput;return e?e.value:t.Find.prototype.getFindString.call(this)},getReplaceString:function(){var e=this._replaceInput;return e?e.value:t.Find.prototype.getReplaceString(this)},hide:function(){var e=this.isVisible();t.Find.prototype.hide.call(this),e&&(this._rootDiv.className="textViewFind")},show:function(e){t.Find.prototype.show.call(this,e);var n=e.findString,i=e.replaceString,r=this._findInput;if(r||(this._create(),r=this._findInput),n&&(r.value=n),i){var o=this._replaceInput;o.value=i}var s=this;window.setTimeout(function(){s._rootDiv.className="textViewFind show",r.select(),r.focus()},0)},_create:function(){var t=this,n=this._editor.getTextView(),o=n.getOptions("parent"),s=o.ownerDocument,a=r.createElement(s,"div");a.className="textViewFind",i.addEventListener(a,"keydown",function(e){t._handleKeyDown(e)}),this._rootDiv=a,a.setAttribute("role","dialog"),a.setAttribute("aria-label",e.findReplace),this._createContents(s,a),n._rootDiv.insertBefore(a,n._rootDiv.firstChild)},_createContents:function(t,n){var o=this,s=r.createElement(t,"input");s.className="textViewFindInput",this._findInput=s,s.type="text",s.placeholder=e.findWith,i.addEventListener(s,"input",function(e){return o._handleInput(e)}),n.appendChild(s);var a=r.createElement(t,"span");o._createButton(t,a,e.next,function(){o.find(!0)}),o._createButton(t,a,e.previous,function(){o.find(!1)}),n.appendChild(a);var l=o._editor.getTextView().getOptions("readonly");if(!l){var c=r.createElement(t,"input");c.className="textViewReplaceInput",this._replaceInput=c,c.type="text",c.placeholder=e.replaceWith,n.appendChild(c),a=r.createElement(t,"span"),o._createButton(t,a,e.replace,function(){o.replace()}),o._createButton(t,a,e.replaceAll,function(){o.replaceAll()}),n.appendChild(a)}a=r.createElement(t,"span"),o._createButton(t,a,e.regex,function(e){o._toggle("regex",e.target)},this._regex,e.regexTooltip,e.regexTooltip),o._createButton(t,a,e.caseInsensitive,function(e){o._toggle("caseInsensitive",e.target)},this._caseInsensitive,e.caseInsensitiveTooltip,e.caseInsensitiveTooltip),o._createButton(t,a,e.wholeWord,function(e){o._toggle("wholeWord",e.target)},this._wholeWord,e.wholeWordTooltip,e.wholeWordTooltip),n.appendChild(a);var h=o._createButton(t,n,"",function(){o.hide()});h.className="textViewFindCloseButton",h.title=e.closeTooltip,r.confineDialogTab(s,h)},_createButton:function(e,t,n,r,o,s,a){var l=e.createElement("button");return l.type="button",this._checked(o,l),s&&(l.title=s),i.addEventListener(l,"click",function(e){r.call(this,e)},!1),n&&l.appendChild(e.createTextNode(n)),a&&l.setAttribute("aria-label",a),t.appendChild(l),l},_toggle:function(e,t){var n={};n[e]=!this["_"+e],this.setOptions(n),this._checked(n[e],t)},_checked:function(e,t){t.className="textViewFindButton",e&&(t.className+=" checked")},_handleInput:function(){return this._incremental&&this.find(!0,null,!0),!0},_handleKeyDown:function(e){var t,n=(r.isMac?e.metaKey:e.ctrlKey)&&!e.altKey&&!e.shiftKey;return n&&70===e.keyCode&&(t=!0),((r.isMac?e.metaKey:e.ctrlKey)&&!e.altKey&&75===e.keyCode||13===e.keyCode)&&(13===e.keyCode?this.find(this._reverse?e.shiftKey:!e.shiftKey):this.find(!e.shiftKey),t=!0),n&&82===e.keyCode&&(this.replace(),t=!0),27===e.keyCode&&(this.hide(),t=!0),t?(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,!1):!0}}),{FindUI:o}}),n("orion/editor/actions",["i18n!orion/editor/nls/messages","orion/keyBinding","orion/editor/annotations","orion/editor/tooltip","orion/editor/find","orion/editor/findUI","orion/util"],function(e,t,n,i,r,o,s){function a(e,t,n,i){function r(e,t,n){s.setText(e,t,n),o+=t-n+e.length}var o=0,s=e.editor,a=s.getSelections();!i&&(t||a.length>1)&&e.startUndo(),a.forEach(function(e){e.start+=o,e.end+=o,n(e,r)}),s.setSelections(a),!i&&(t||a.length>1)&&e.endUndo()}function l(e,t,n){this.editor=e,this.undoStack=t,this._incrementalFind=new r.IncrementalFind(e),this._find=n?n:new o.FindUI(e,t),this._lastEditLocation=null,this.init()}function c(e,t,n,i){this.editor=e,this.undoStack=t,this.contentAssist=n,this.linkedMode=i,this.contentAssist&&this.contentAssist.addEventListener("ProposalApplied",this.contentAssistProposalApplied.bind(this)),this.init()}var h=n.AnnotationType,d={};return l.prototype={init:function(){var n=this.editor.getTextView();this._lastEditListener={onModelChanged:function(e){this.editor.isDirty()&&(this._lastEditLocation=e.start+e.addedCharCount)}.bind(this)},n.addEventListener("ModelChanged",this._lastEditListener.onModelChanged),n.setAction("undo",function(e){if(this.undoStack){var t=1;for(e&&e.count&&(t=e.count);t>0;)this.undoStack.undo(),--t;return!0}return!1}.bind(this),{name:e.undo}),n.setAction("redo",function(e){if(this.undoStack){var t=1;for(e&&e.count&&(t=e.count);t>0;)this.undoStack.redo(),--t;return!0}return!1}.bind(this),{name:e.redo}),n.setKeyBinding(new t.KeyBinding("f",!0),"find"),n.setAction("find",function(){if(this._find){var e=this.editor.getSelection();return this._find.show({findString:this.editor.getText(e.start,e.end)}),!0}return!1}.bind(this),{name:e.find}),n.setKeyBinding(new t.KeyBinding("k",!0),"findNext"),n.setAction("findNext",function(e){return this._find?(this._find.find(!0,e),!0):!1}.bind(this),{name:e.findNext}),n.setKeyBinding(new t.KeyBinding("k",!0,!0),"findPrevious"),n.setAction("findPrevious",function(e){return this._find?(this._find.find(!1,e),!0):!1}.bind(this),{name:e.findPrevious}),n.setKeyBinding(new t.KeyBinding("j",!0),"incrementalFind"),n.setAction("incrementalFind",function(){return this._incrementalFind&&this._incrementalFind.find(!0),!0}.bind(this),{name:e.incrementalFind}),n.setKeyBinding(new t.KeyBinding("j",!0,!0),"incrementalFindReverse"),n.setAction("incrementalFindReverse",function(){return this._incrementalFind&&this._incrementalFind.find(!1),!0}.bind(this),{name:e.incrementalFindReverse}),n.setAction("tab",function(){return this.indentLines()}.bind(this)),n.setAction("shiftTab",function(){return this.unindentLines()}.bind(this),{name:e.unindentLines}),n.setKeyBinding(new t.KeyBinding(38,!1,!1,!0),"moveLinesUp"),n.setAction("moveLinesUp",function(){return this.moveLinesUp()}.bind(this),{name:e.moveLinesUp}),n.setKeyBinding(new t.KeyBinding(40,!1,!1,!0),"moveLinesDown"),n.setAction("moveLinesDown",function(){return this.moveLinesDown()}.bind(this),{name:e.moveLinesDown}),n.setKeyBinding(new t.KeyBinding(38,!0,!1,!0),"copyLinesUp"),n.setAction("copyLinesUp",function(){return this.copyLinesUp()}.bind(this),{name:e.copyLinesUp}),n.setKeyBinding(new t.KeyBinding(40,!0,!1,!0),"copyLinesDown"),n.setAction("copyLinesDown",function(){return this.copyLinesDown()}.bind(this),{name:e.copyLinesDown}),n.setKeyBinding(new t.KeyBinding("d",!0,!1,!1),"deleteLines"),n.setAction("deleteLines",function(e){return this.deleteLines(e)}.bind(this),{name:e.deleteLines}),n.setKeyBinding(new t.KeyBinding("l",!s.isMac,!1,!1,s.isMac),"gotoLine"),
n.setAction("gotoLine",function(){return this.gotoLine()}.bind(this),{name:e.gotoLine}),n.setKeyBinding(new t.KeyBinding(190,!0),"nextAnnotation"),n.setAction("nextAnnotation",function(){return this.nextAnnotation(!0)}.bind(this),{name:e.nextAnnotation}),n.setKeyBinding(new t.KeyBinding(188,!0),"previousAnnotation"),n.setAction("previousAnnotation",function(){return this.nextAnnotation(!1)}.bind(this),{name:e.prevAnnotation}),n.setKeyBinding(new t.KeyBinding("e",!0,!1,!0,!1),"expand"),n.setAction("expand",function(){return this.expandAnnotation(!0)}.bind(this),{name:e.expand}),n.setKeyBinding(new t.KeyBinding("c",!0,!1,!0,!1),"collapse"),n.setAction("collapse",function(){return this.expandAnnotation(!1)}.bind(this),{name:e.collapse}),n.setKeyBinding(new t.KeyBinding("e",!0,!0,!0,!1),"expandAll"),n.setAction("expandAll",function(){return this.expandAnnotations(!0)}.bind(this),{name:e.expandAll}),n.setKeyBinding(new t.KeyBinding("c",!0,!0,!0,!1),"collapseAll"),n.setAction("collapseAll",function(){return this.expandAnnotations(!1)}.bind(this),{name:e.collapseAll}),n.setKeyBinding(new t.KeyBinding("q",!s.isMac,!1,!1,s.isMac),"lastEdit"),n.setAction("lastEdit",function(){return this.gotoLastEdit()}.bind(this),{name:e.lastEdit})},copyLinesDown:function(){var e=this.editor,t=e.getTextView();if(t.getOptions("readonly"))return!1;var n=e.getModel();return a(this,!1,function(e,t){var i=n.getLineAtOffset(e.start),r=n.getLineAtOffset(e.end>e.start?e.end-1:e.end),o=n.getLineStart(i),s=n.getLineEnd(r,!0),a=n.getLineCount(),l="",c=n.getText(o,s);r===a-1&&(c=(l=n.getLineDelimiter())+c);var h=s;t(c,h,h),e.start=h+l.length,e.end=h+c.length}),!0},copyLinesUp:function(){var e=this.editor,t=e.getTextView();if(t.getOptions("readonly"))return!1;var n=e.getModel();return a(this,!1,function(e,t){var i=n.getLineAtOffset(e.start),r=n.getLineAtOffset(e.end>e.start?e.end-1:e.end),o=n.getLineStart(i),s=n.getLineEnd(r,!0),a=n.getLineCount(),l="",c=n.getText(o,s);r===a-1&&(c+=l=n.getLineDelimiter());var h=o;t(c,h,h),e.start=h,e.end=h+c.length-l.length}),!0},deleteLines:function(e){var t=this.editor,n=t.getTextView();if(n.getOptions("readonly"))return!1;var i=1;e&&e.count&&(i=e.count);var r=t.getModel();return a(this,!1,function(e,t){var n,o=r.getLineAtOffset(e.start),s=r.getLineStart(o);n=e.start!==e.end||1===i?r.getLineAtOffset(e.end>e.start?e.end-1:e.end):Math.min(o+i-1,r.getLineCount()-1);var a=r.getLineEnd(n,!0);t("",s,a),e.start=e.end=s}),!0},expandAnnotation:function(e){var t=this.editor;if(!t.getFoldingRulerVisible())return!0;var i=t.getAnnotationModel();if(!i)return!0;var r=t.getModel(),o=t.getCaretOffset(),s=r.getLineAtOffset(o),a=r.getLineStart(s),l=r.getLineEnd(s,!0);r.getBaseModel&&(a=r.mapOffset(a),l=r.mapOffset(l),r=r.getBaseModel());for(var c,h=i.getAnnotations(a,l);!c&&h.hasNext();){var d=h.next();d.type===n.AnnotationType.ANNOTATION_FOLDING&&(c=d)}return c&&e!==c.expanded&&(e?c.expand():(t.setCaretOffset(c.start),c.collapse())),!0},expandAnnotations:function(e){var t=this.editor;if(!t.getFoldingRulerVisible())return!0;var i=t.getTextView(),r=t.getAnnotationModel();if(!r)return!0;var o,s=r.getAnnotations();for(i.setRedraw(!1);s.hasNext();)o=s.next(),o.type===n.AnnotationType.ANNOTATION_FOLDING&&e!==o.expanded&&(e?o.expand():o.collapse());return i.setRedraw(!0),!0},indentLines:function(){var e=this.editor,t=e.getTextView();if(t.getOptions("readonly"))return!1;if(t.getOptions("tabMode")){var n=e.getModel(),i=0,r=e.getSelections();return r.length>1&&this.startUndo(),r.some(function(o){o.start+=i,o.end+=i;var s=n.getLineAtOffset(o.start),a=n.getLineAtOffset(o.end>o.start?o.end-1:o.end);if(!(s!==a||r.length>1))return!0;var l=[];l.push("");for(var c=s;a>=c;c++)l.push(n.getLine(c,!0));var h=n.getLineStart(s),d=n.getLineEnd(a,!0),u=t.getOptions("tabSize","expandTab"),p=u.expandTab?new Array(u.tabSize+1).join(" "):"	",f=l.join(p);e.setText(f,h,d);var g=h===o.start?o.start:o.start+p.length,m=o.end+(a-s+1)*p.length;return i+=h-d+f.length,o.start=g,o.end=m,!1})?!1:(e.setSelections(r),r.length>1&&this.endUndo(),!0)}},gotoLastEdit:function(){return"number"==typeof this._lastEditLocation&&this.editor.showSelection(this._lastEditLocation),!0},gotoLine:function(){var t=this.editor,n=t.getModel(),i=n.getLineAtOffset(t.getCaretOffset());return i=prompt(e.gotoLinePrompty,i+1),i&&(i=parseInt(i,10),t.onGotoLine(i-1,0)),!0},moveLinesDown:function(){var e=this.editor,t=e.getTextView();if(t.getOptions("readonly"))return!1;var n=e.getModel();return a(this,!0,function(e,t){var i=n.getLineAtOffset(e.start),r=n.getLineAtOffset(e.end>e.start?e.end-1:e.end),o=n.getLineCount();if(r!==o-1){var s,a=n.getLineStart(i),l=n.getLineEnd(r,!0),c=n.getLineEnd(r+1,!0)-(l-a),h=0;if(r!==o-2)s=n.getText(a,l);else{var d=n.getLineEnd(r);s=n.getText(d,l)+n.getText(a,d),h+=l-d}t("",a,l),t(s,c,c),e.start=c+h,e.end=c+h+s.length}}),!0},moveLinesUp:function(){var e=this.editor,t=e.getTextView();if(t.getOptions("readonly"))return!1;var n=e.getModel();return a(this,!0,function(e,t){var i=n.getLineAtOffset(e.start);if(0!==i){var r=n.getLineAtOffset(e.end>e.start?e.end-1:e.end),o=n.getLineCount(),s=n.getLineStart(i-1),a=n.getLineStart(i),l=n.getLineEnd(r,!0),c=n.getText(a,l),h=0;if(r===o-1){var d=n.getLineEnd(i-1),u=n.getLineEnd(i-1,!0);c+=n.getText(d,u),a=d,h=u-d}t("",a,l),t(c,s,s),e.start=s,e.end=s+c.length-h}}),!0},nextAnnotation:function(e){function t(e){return!!e.lineStyle||e.type===h.ANNOTATION_MATCHING_BRACKET||e.type===h.ANNOTATION_CURRENT_BRACKET||!o.isAnnotationTypeVisible(e.type)}var n=this.editor,r=n.getAnnotationModel();if(!r)return!0;var o=n.getOverviewRuler()||n.getAnnotationStyler();if(!o)return!0;for(var s=n.getModel(),a=n.getCaretOffset(),l=r.getAnnotations(e?a:0,e?s.getCharCount():a),c=null;l.hasNext();){var d=l.next();if(e){if(d.start<=a)continue}else if(d.start>=a)continue;if(!t(d)&&(c=d,e))break}if(c){var u=[c];for(l=r.getAnnotations(c.start,c.start);l.hasNext();)d=l.next(),d===c||t(d)||u.push(d);var p=n.getTextView(),f=i.Tooltip.getTooltip(p,n);if(!f)return n.moveSelection(c.start),!0;n.moveSelection(c.start,c.start,function(){setTimeout(function(){var e=n.getTextView(),t=c.start,i=e.getLocationAtOffset(t);f.show({x:i.x,y:i.y,getTooltipInfo:function(){return n._getTooltipInfo(this.x,this.y)}},!1,!1)},0)})}return!0},unindentLines:function(){var e=this.editor,t=e.getTextView();if(t.getOptions("readonly"))return!1;if(t.getOptions("tabMode")){var n=e.getModel();return a(this,!1,function(e,i){for(var r=n.getLineAtOffset(e.start),o=n.getLineAtOffset(e.end>e.start?e.end-1:e.end),s=t.getOptions("tabSize"),a=new Array(s+1).join(" "),l=[],c=0,h=0,d=r;o>=d;d++){var u=n.getLine(d,!0);if(n.getLineStart(d)!==n.getLineEnd(d))if(0===u.indexOf("	"))u=u.substring(1),c++;else{if(0!==u.indexOf(a))return!0;u=u.substring(s),c+=s}d===r&&(h=c),l.push(u)}var p=n.getLineStart(r),f=n.getLineEnd(o,!0),g=n.getLineStart(o),m=l.join("");i(m,p,f);var v=p===e.start?e.start:e.start-h,_=Math.max(v,e.end-c+(e.end===g+1&&e.start!==e.end?1:0));e.start=v,e.end=_}),!0}},startUndo:function(){this.undoStack&&this.undoStack.startCompoundChange()},endUndo:function(){this.undoStack&&this.undoStack.endCompoundChange()}},d.TextActions=l,c.prototype={init:function(){var n=this.editor.getTextView();n.setAction("lineStart",function(){return this.lineStart()}.bind(this)),n.setAction("enter",function(){return this.autoIndent()}.bind(this)),n.setKeyBinding(new t.KeyBinding("t",!0,!1,!0),"trimTrailingWhitespaces"),n.setAction("trimTrailingWhitespaces",function(){return this.trimTrailingWhitespaces()}.bind(this),{name:e.trimTrailingWhitespaces}),n.setKeyBinding(new t.KeyBinding(191,!0),"toggleLineComment"),n.setAction("toggleLineComment",function(){return this.toggleLineComment()}.bind(this),{name:e.toggleLineComment}),n.setKeyBinding(new t.KeyBinding(191,!0,!s.isMac,!1,s.isMac),"addBlockComment"),n.setAction("addBlockComment",function(){return this.addBlockComment()}.bind(this),{name:e.addBlockComment}),n.setKeyBinding(new t.KeyBinding(220,!0,!s.isMac,!1,s.isMac),"removeBlockComment"),n.setAction("removeBlockComment",function(){return this.removeBlockComment()}.bind(this),{name:e.removeBlockComment}),n.setKeyBinding(new t.KeyBinding("[",!1,!1,!1,!1,"keypress"),"autoPairSquareBracket"),n.setAction("autoPairSquareBracket",function(){return this.autoPairBrackets("[","]")}.bind(this)),n.setKeyBinding(new t.KeyBinding("]",!1,!1,!1,!1,"keypress"),"skipClosingSquareBracket"),n.setAction("skipClosingSquareBracket",function(){return this.handleClosingBracket("]")}.bind(this)),n.setKeyBinding(new t.KeyBinding("<",!1,!1,!1,!1,"keypress"),"autoPairAngleBracket"),n.setAction("autoPairAngleBracket",function(){return this.autoPairBrackets("<",">")}.bind(this)),n.setKeyBinding(new t.KeyBinding(">",!1,!1,!1,!1,"keypress"),"skipClosingAngleBracket"),n.setAction("skipClosingAngleBracket",function(){return this.handleClosingBracket(">")}.bind(this)),n.setKeyBinding(new t.KeyBinding("(",!1,!1,!1,!1,"keypress"),"autoPairParentheses"),n.setAction("autoPairParentheses",function(){return this.autoPairBrackets("(",")")}.bind(this)),n.setKeyBinding(new t.KeyBinding(")",!1,!1,!1,!1,"keypress"),"skipClosingParenthesis"),n.setAction("skipClosingParenthesis",function(){return this.handleClosingBracket(")")}.bind(this)),n.setKeyBinding(new t.KeyBinding("{",!1,!1,!1,!1,"keypress"),"autoPairBraces"),n.setAction("autoPairBraces",function(){return this.autoPairBrackets("{","}")}.bind(this)),n.setKeyBinding(new t.KeyBinding("}",!1,!1,!1,!1,"keypress"),"skipClosingBrace"),n.setAction("skipClosingBrace",function(){return this.handleClosingBracket("}")}.bind(this)),n.setKeyBinding(new t.KeyBinding("'",!1,!1,!1,!1,"keypress"),"autoPairSingleQuotation"),n.setAction("autoPairSingleQuotation",function(){return this.autoPairQuotations("'")}.bind(this)),n.setKeyBinding(new t.KeyBinding('"',!1,!1,!1,!1,"keypress"),"autoPairDblQuotation"),n.setAction("autoPairDblQuotation",function(){return this.autoPairQuotations('"')}.bind(this)),n.setAction("deletePrevious",function(){return this.deletePrevious()}.bind(this))},autoIndent:function(){function e(e,t){if(e.start===e.end){for(var n,r=i.getLineAtOffset(e.start),a=i.getLine(r,!1),u=i.getLineStart(r),p=0,f=e.start-u;f>p&&(32===(n=a.charCodeAt(p))||9===n);)p++;var g,m,v=a.substring(0,p),_=a.substring(0,f),y=a.substring(f);if(d.smartIndentation&&123===a.charCodeAt(m=_.trimRight().length-1)){var x=f-m-1,w=y.length-y.trimLeft().length;return g=125===a.charCodeAt(f+w)?s+v+o+s+v:s+v+o,t(g,e.start-x,e.end+w),e.start=e.end=e.start+s.length+v.length+o.length-x,!0}if(d.autoCompleteComments&&!h.test(_)&&(l.test(_)||c.test(_))){var b,C=l.exec(_);if(C)return g=s+v+" * ",g+=h.test(y)?y.substring(0,y.length-2).trim():y.trim(),i.getLineCount()!==r+1&&c.test(i.getLine(r+1))||(g+=s+v+" */"),t(g,e.start,e.end+y.length),e.start=e.end=e.start+s.length+v.length+3,!0;if(C=c.exec(_))for(var E=r-1;E>=0;E--){var T=i.getLine(E,!1);if(l.test(T))return h.test(y)||47===a.charCodeAt(f)?(g=s+v+"*"+y,b=e.start+s.length+v.length+1):(g=s+v+"* "+y,b=e.start+s.length+v.length+2),t(g,e.start,e.end+y.length),e.start=e.end=b,!0;if(!c.test(T))return!1}return!1}if(h.test(_)&&32===v.charCodeAt(v.length-1))return g=s+v.substring(0,v.length-1),t(g,e.start,e.end),e.start=e.end=e.start+g.length,!0;if(p>0){for(p=f;p<a.length&&(32===(n=a.charCodeAt(p++))||9===n);)e.end++;return g=i.getLineDelimiter()+v,t(g,e.start,e.end),e.start=e.end=e.start+g.length,!0}}return!1}var t=this.editor,n=t.getTextView();if(n.getOptions("readonly"))return!1;if(n.getOptions("singleMode"))return!1;var i=t.getModel(),r=n.getOptions("tabSize","expandTab"),o=r.expandTab?new Array(r.tabSize+1).join(" "):"	",s=i.getLineDelimiter(),l=/^[\s]*\/\*[\*]*[\s]*$/,c=/^[\s]*\*/,h=/\*\/[\s]*$/,d=this;return a(this,!0,function(t,n){e(t,n)||(n(s,t.start,t.end),t.start=t.end=t.start+s.length)}),!0},addBlockComment:function(){var e=this.editor,t=e.getTextView();if(t.getOptions("readonly"))return!1;var n=e.getModel(),i=e.getStyleAccessor();return a(this,!1,function(e,t){var r,o;if(i){var s=i.getBlockCommentDelimiters(e.start);r=s[0],o=s[1]}else r="/*",o="*/";var a=this._findEnclosingComment(n,e.start,e.end,r,o);if(void 0===a.commentStart||void 0===a.commentEnd){var l=n.getText(e.start,e.end);if(0!==l.length){var c=l.length;l=l.replace(r,""),l=l.replace(o,"");var h=l.length;l=r+l+o,t(l,e.start,e.end),e.start+=r.length,e.end+=r.length+(h-c)}}}.bind(this)),!0},autoPairBrackets:function(e,t){if("["===e&&!this.autoPairSquareBrackets)return!1;if("{"===e&&!this.autoPairBraces)return!1;if("("===e&&!this.autoPairParentheses)return!1;if("<"===e&&!this.autoPairAngleBrackets)return!1;var n=this.editor,i=n.getTextView();if(i.getOptions("readonly"))return!1;var r=new RegExp("^$|[)}\\]>]"),o=n.getModel();return a(this,!1,function(n,i){var s,a=n.start===o.getCharCount()?"":o.getText(n.start,n.start+1).trim();n.start===n.end&&r.test(a)?(s=e+t,i(s,n.start,n.start),n.start=n.end=n.start+1):n.start!==n.end?(s=e+o.getText(n.start,n.end)+t,i(s,n.start,n.end),n.start+=1,n.end+=1):(i(e,n.start,n.end),n.start=n.end=n.start+e.length)}),!0},autoPairQuotations:function(e){if(!this.autoPairQuotation)return!1;var t=this.editor,n=t.getTextView();if(n.getOptions("readonly"))return!1;var i=new RegExp("^\"$|^'$"),r=new RegExp("\\w"),o=new RegExp("^$|[)}\\]>]"),s=t.getModel();return a(this,!1,function(t,n){function a(){n(e,t.start,t.end),t.start=t.end=t.start+e.length}var l=0===t.start?"":s.getText(t.start-1,t.start).trim(),c=t.start===s.getCharCount()?"":s.getText(t.start,t.start+1).trim();if(t.start!==t.end){var h=s.getText(t.start,t.end);i.test(h)?a():(n(e+h+e,t.start,t.end),t.start+=1,t.end+=1)}else c===e?t.start=t.end=t.start+1:l===e||i.test(c)||r.test(l)||!o.test(c)?a():(n(e+e,t.start,t.end),t.start=t.end=t.start+e.length)}),!0},contentAssistProposalApplied:function(e){function t(){return"number"==typeof n.escapePosition?n.escapePosition:e.data.start+n.proposal.length}var n=e.data.proposal;if(n.positions&&n.positions.length>0&&this.linkedMode){for(var i=[],r=0;r<n.positions.length;++r)i[r]={positions:[{offset:n.positions[r].offset,length:n.positions[r].length}]};this.linkedMode.enterLinkedMode({groups:i,escapePosition:t()})}else if(n.groups&&n.groups.length>0&&this.linkedMode)this.linkedMode.enterLinkedMode({groups:n.groups,escapePosition:t()});else if("number"==typeof n.escapePosition){var o=this.editor.getTextView();o.setCaretOffset(n.escapePosition)}return!0},deletePrevious:function(){var e=this.editor,t=e.getTextView();if(t.getOptions("readonly"))return!1;var n=e.getModel();return a(this,!1,function(e,t){if(e.start===e.end){var i=0===e.start?"":n.getText(e.start-1,e.start),r=e.start===n.getCharCount()?"":n.getText(e.start,e.start+1);("("===i&&")"===r||"["===i&&"]"===r||"{"===i&&"}"===r||"<"===i&&">"===r||'"'===i&&'"'===r||"'"===i&&"'"===r)&&t("",e.start,e.start+1)}},!0),!1},_findEnclosingComment:function(e,t,n,i,r){var o,s,a,l,c,h,d,u=e.getLineAtOffset(t),p=e.getLineAtOffset(n);for(o=u;o>=0&&(s=e.getLine(o),a=o===u?t-e.getLineStart(u):s.length,l=s.lastIndexOf(i,a),c=s.lastIndexOf(r,a),!(c>l));o--)if(-1!==l){h=e.getLineStart(o)+l;break}for(o=p;o<e.getLineCount()&&(s=e.getLine(o),a=o===p?n-e.getLineStart(p):0,l=s.indexOf(i,a),c=s.indexOf(r,a),!(-1!==l&&c>l));o++)if(-1!==c){d=e.getLineStart(o)+c;break}return{commentStart:h,commentEnd:d}},lineStart:function(){var e=this.editor,t=e.getModel();return a(this,!1,function(e){var n,i=e.getCaret(),r=t.getLineAtOffset(i),o=t.getLineStart(r),s=t.getLine(r);for(n=0;n<s.length;n++){var a=s.charCodeAt(n);if(32!==a&&9!==a)break}n+=o,i!==n?e.setCaret(n):e.setCaret(o)}),!0},removeBlockComment:function(){var e=this.editor,t=e.getTextView();if(t.getOptions("readonly"))return!1;var n=e.getModel(),i=e.getStyleAccessor();return a(this,!1,function(e,t){var r,o;if(i){var s=i.getBlockCommentDelimiters(e.start);r=s[0],o=s[1]}else r="/*",o="*/";var a,l,c,h=n.getText(e.start,e.end);for(c=0;c<h.length;c++)if(h.substring(c,c+r.length)===r){a=e.start+c;break}for(;c<h.length;c++)if(h.substring(c,c+o.length)===o){l=e.start+c;break}var d;if(void 0!==a&&void 0!==l)d=n.getText(a+r.length,l),t(d,a,l+o.length),e.start=a,e.end=l;else{var u=this._findEnclosingComment(n,e.start,e.end,r,o);void 0!==u.commentStart&&void 0!==u.commentEnd&&(d=n.getText(u.commentStart+r.length,u.commentEnd),t(d,u.commentStart,u.commentEnd+o.length),e.start=e.start-r.length,e.end=e.end-o.length)}}.bind(this)),!0},toggleLineComment:function(){var e=this.editor,t=e.getTextView();if(t.getOptions("readonly"))return!1;var n=e.getModel(),i=e.getStyleAccessor();return t.setRedraw(!1),a(this,!0,function(e,t){var r,o=n.getLineAtOffset(e.start),s=n.getLineAtOffset(e.end>e.start?e.end-1:e.end);r=i?i.getLineCommentDelimiter(n.getLineStart(o)):"//";for(var a,l=!0,c=[],h=o;s>=h;h++){var d=n.getLine(h,!0);if(a=d.indexOf(r),c.push(a),l&&-1!==a){if(0!==a){var u;for(u=0;a>u;u++){var p=d.charCodeAt(u);if(32!==p&&9!==p)break}l=u===a}}else l=!1}var f,g,m,v=r.length,_=n.getLineStart(o);if(l){for(m=c.length-1;m>=0;m--)a=c[m]+n.getLineStart(o+m),t("",a,a+v);var y=n.getLineStart(s);f=_===e.start?e.start:e.start-v,g=e.end-v*(s-o+1)+(e.end===y+1?v:0)}else{for(m=c.length-1;m>=0;m--)a=n.getLineStart(o+m),t(r,a,a);f=_===e.start?e.start:e.start+v,g=e.end+v*(s-o+1)}e.start=f,e.end=g}),t.setRedraw(!0),!0},trimTrailingWhitespaces:function(){var e=this.editor,t=e.getModel(),n=e.getSelections();e.getTextView().setRedraw(!1),this.startUndo();for(var i=/(\s+$)/,r=t.getLineCount(),o=0;r>o;o++){var s=t.getLine(o),a=i.exec(s);if(a){var l=t.getLineStart(o),c=a[0].length,h=l+a.index;t.setText("",h,h+c),n.forEach(function(e){e.start>h&&(e.start=Math.max(h,e.start-c)),e.start!==e.end&&e.end>h&&(e.end=Math.max(h,e.end-c))})}}this.endUndo(),e.setSelections(n,!1),e.getTextView().setRedraw(!0)},startUndo:function(){this.undoStack&&this.undoStack.startCompoundChange()},handleClosingBracket:function(e){var t=this.editor,n=t.getTextView();if(n.getOptions("readonly"))return!1;var i=t.getModel(),r=t.getSelections();if(1===r.length&&r[0].start===r[0].end){var o=r[0].start===i.getCharCount()?"":i.getText(r[0].start,r[0].start+1);if(o===e)return r[0].start=r[0].end=r[0].start+1,t.setSelections(r),!0;var s=i.getLineAtOffset(r[0].start),a=i.getLine(s,!0);if(a.match(/^\s*$/)&&n.getOptions("tabMode")){var l=n.getOptions("tabSize"),c=new Array(l+1).join(" "),h=i.getLineStart(s),d=i.getLineEnd(s);if(h!==d){if(0===a.indexOf("	"))return a=a.substring(1),i.setText(a,h,d),t.setSelection(r[0].start-1,r[0].end-1),!1;if(0===a.indexOf(c))return a=a.substring(l),i.setText(a,h,d),t.setSelection(r[0].start-l,r[0].end-l),!1}}}return!1},endUndo:function(){this.undoStack&&this.undoStack.endCompoundChange()},setAutoPairParentheses:function(e){this.autoPairParentheses=e},setAutoPairBraces:function(e){this.autoPairBraces=e},setAutoPairSquareBrackets:function(e){this.autoPairSquareBrackets=e},setAutoPairAngleBrackets:function(e){this.autoPairAngleBrackets=e},setAutoPairQuotations:function(e){this.autoPairQuotation=e},setAutoCompleteComments:function(e){this.autoCompleteComments=e},setSmartIndentation:function(e){this.smartIndentation=e}},d.SourceCodeActions=c,String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")}),d}),n("orion/editor/rulers",["i18n!orion/editor/nls/messages","orion/editor/textView","orion/editor/annotations","orion/editor/tooltip","orion/objects","orion/editor/util","orion/util"],function(e,t,n,i,r,o,s){function a(e,t,n){this._location=e||"left",this._overview=t||"page",this._rulerStyle=n,this._view=null}function l(e,t,n,i){a.call(this,t,n,i);var r=this;this._listener={onTextModelChanged:function(e){r._onTextModelChanged(e)},onAnnotationModelChanged:function(e){r._onAnnotationModelChanged(e)}},this.setAnnotationModel(e)}function c(e,t,n,i,r){l.call(this,e,t,"page",n),this._oddStyle=i||{style:{backgroundColor:"white"}},this._evenStyle=r||{style:{backgroundColor:"white"}},this._numOfDigits=0,this._firstLine=1}function h(e,t,n){l.call(this,e,t,"page",n)}function d(e,t,n){l.call(this,e,t,"document",n)}function u(e,t,n){h.call(this,e,t,n)}a.prototype={getLocation:function(){return this._location},getOverview:function(){return this._overview},getRulerStyle:function(){return this._rulerStyle},getView:function(){return this._view},setView:function(e){this._onTextModelChanged&&this._view&&this._view.removeEventListener("ModelChanged",this._listener.onTextModelChanged),this._view=e,this._onTextModelChanged&&this._view&&this._view.addEventListener("ModelChanged",this._listener.onTextModelChanged)}},l.prototype=r.mixin(new a,{getAnnotations:function(e,t){var n=this._annotationModel;if(!n)return[];var i=this._view.getModel(),r=i.getLineStart(e),o=i.getLineEnd(t-1),s=i;i.getBaseModel&&(s=i.getBaseModel(),r=i.mapOffset(r),o=i.mapOffset(o));for(var a=[],l=this.getAnnotationsByType(n,r,o),c=0;c<l.length;c++)for(var h=l[c],d=s.getLineAtOffset(h.start),u=s.getLineAtOffset(Math.max(h.start,h.end-1)),p=d;u>=p;p++){var f=p;if(i!==s){var g=s.getLineStart(p);if(g=i.mapOffset(g,!0),-1===g)continue;f=i.getLineAtOffset(g)}if(f>=e&&t>f){var m=this._mergeAnnotation(a[f],h,p-d,u-d+1);m&&(a[f]=m)}}if(!this._multiAnnotation&&this._multiAnnotationOverlay)for(var v in a)a[v]._multiple&&(a[v].html=a[v].html+this._multiAnnotationOverlay.html);return a},getAnnotationModel:function(){return this._annotationModel},getWidestAnnotation:function(){return null},setAnnotationModel:function(e){this._annotationModel&&this._annotationModel.removeEventListener("Changed",this._listener.onAnnotationModelChanged),this._annotationModel=e,this._annotationModel&&this._annotationModel.addEventListener("Changed",this._listener.onAnnotationModelChanged)},setMultiAnnotation:function(e){this._multiAnnotation=e},setMultiAnnotationOverlay:function(e){this._multiAnnotationOverlay=e},onClick:function(e,t){if(void 0!==e){var n,r,o,s=this._view,a=s.getModel(),l=a.getLineStart(e),c=a.getLineEnd(e,!0),h=s.getSelection().start,d=s.getSelection().end,u=this._annotationModel;if(u){a.getBaseModel&&(l=a.mapOffset(l),c=a.mapOffset(c),h=a.mapOffset(h),d=a.mapOffset(d));var p=this;n=this._findNextAnnotation(u,l,c,h,d,function(e){return p.isAnnotationTypeVisible(e)}),r=n?n.start:l,o=n?n.end:l,a.getBaseModel&&(r=a.mapOffset(r,!0),o=a.mapOffset(o,!0)),n&&void 0!==n.groupId&&(this._currentClickGroup===n.groupId?this._currentClickGroup=null:this._currentClickGroup=n.groupId,this._setCurrentGroup(e))}this._view.setSelection(o,r,1/3,function(){});var f=i.Tooltip.getTooltip(this._view);f&&(n&&"left"===this.getLocation()?f.show({getTooltipInfo:function(){return p._getTooltipInfo([n])}},!1,!1):f.hide())}},onDblClick:function(e,t){},onMouseMove:function(e,t){var n=i.Tooltip.getTooltip(this._view);if(n&&(!n.isVisible()||this._tooltipLineIndex!==e)&&(this._tooltipLineIndex=e,t.clientX!==this._lastMouseX||t.clientY!==this._lastMouseY)){this._lastMouseX=t.clientX,this._lastMouseY=t.clientY,this._hoverTimeout&&(window.clearTimeout(this._hoverTimeout),this._hoverTimeout=null);var r=t.target?t.target:t.srcElement,o=r.getBoundingClientRect();this._curElementBounds=Object.create(null),this._curElementBounds.top=o.top,this._curElementBounds.left=o.left,this._curElementBounds.height=o.height,this._curElementBounds.width=o.width,r===this.node&&(this._curElementBounds.top=t.clientY,this._curElementBounds.height=1);var s=this;s._hoverTimeout=window.setTimeout(function(){s._hoverTimeout=null,n.onHover({getTooltipInfo:function(){var e=s._getAnnotationsAtLineIndex(s._tooltipLineIndex),n=s._getTooltipContents(s._tooltipLineIndex,e);return s._getTooltipInfo(n,t.clientY,{source:"ruler",rulerLocation:s.getLocation()})}},t.clientX,t.clientY)},175)}},onMouseOver:function(e,t){this.onMouseMove(e,t),this._currentClickGroup||this._setCurrentGroup(e)},onMouseOut:function(e,t){this._currentClickGroup||this._setCurrentGroup(-1),this._hoverTimeout&&(window.clearTimeout(this._hoverTimeout),this._hoverTimeout=null)},_findNextAnnotation:function(e,t,n,i,r,o){var s,a=null,l=t;if(i>=0&&r>=0&&i>=t&&n>i){l=i;for(var c=e.getAnnotations(i,r);!s&&c.hasNext();){var h=c.next();(!o||o(h.type))&&h.start===i&&h.end===r&&(s=h)}}for(var d,u=e.getAnnotations(l,n);u.hasNext();)if(h=u.next(),!o||o(h.type)){if(a||(a=h),!s){a=h;break}if(d&&(s.start!==h.start||s.end!==h.end)){d=!1,a=h;break}s&&s===h&&(d=!0)}return d&&(a=null),a},_getAnnotationsAtLineIndex:function(e){if(void 0!==e){var t,n=this._view,i=this._annotationModel,r=[];if(!n)return[];if(t=n.getModel(),i&&t){var o=t.getLineStart(e),s=t.getLineEnd(e);t.getBaseModel&&(o=t.mapOffset(o),s=t.mapOffset(s)),r=this.getAnnotationsByType(i,o,s)}return r}},_getTooltipInfo:function(e,t,n){if(!e)return null;var i=Object.create(null);i.top=this._curElementBounds.top,i.left=this._curElementBounds.left,i.height=this._curElementBounds.height,i.width=this._curElementBounds.width,"string"==typeof e&&t&&(i.top=t,i.height=1);var r=this.getLocation(),o=this.getRulerStyle(),s="left"===r?"right":"left",a=0,l=0;if(this._view){var c=this._view._clientDiv.getBoundingClientRect();a=c.left-(i.left+i.width)}else a=i.width;l=i.height,"left"===s&&(a=-25,1===i.height&&(a+=2)),o.styleClass.indexOf("folding")>=0&&(l-=14);var h={contents:e,position:s,tooltipOffsetX:a,tooltipOffsetY:l,anchorArea:i,context:n};return h},_getTooltipContents:function(e,t){return t},_getOnClickTooltipInfo:function(e){var t=this._view,n=Object.create(null);n.top=this._curElementBounds.top,n.left=this._curElementBounds.left,n.height=this._curElementBounds.height,n.width=this._curElementBounds.width;var i=this.getLocation(),r="left"===i?"right":"left",o={contents:[e],position:r,anchorArea:n};if(t){var s=t._clientDiv.getBoundingClientRect();o.offsetX=s.left-(n.left+n.width)}else o.offsetX=n.width;return o.offsetY=n.height,"left"===o.position&&(o.offsetX=20),o},_onAnnotationModelChanged:function(e){function t(e){for(var t=0;t<e.length;t++)if(r.isAnnotationTypeVisible(e[t].type)){s=e[t].start;var o=e[t].end;i.getBaseModel&&(s=i.mapOffset(s,!0),o=i.mapOffset(o,!0)),-1!==s&&-1!==o&&n.redrawLines(i.getLineAtOffset(s),i.getLineAtOffset(Math.max(s,o-1))+1,r)}}var n=this._view;if(n){var i=n.getModel(),r=this,o=i.getLineCount();if(e.textModelChangedEvent){var s=e.textModelChangedEvent.start;i.getBaseModel&&(s=i.mapOffset(s,!0));var a=i.getLineAtOffset(s);return void n.redrawLines(a,o,r)}t(e.added),t(e.removed),t(e.changed)}},_mergeAnnotation:function(e,t,n,i){return e||(e={}),0===n&&(e.html&&t.html?(t.html!==e.html&&!e._multiple&&this._multiAnnotation&&(e.html=this._multiAnnotation.html),e._multiple=!0):e.html=t.html),e.style=this._mergeStyle(e.style,t.style),e},_mergeStyle:function(e,t){if(t){e||(e={}),e.styleClass&&t.styleClass&&e.styleClass!==t.styleClass?e.styleClass+=" "+t.styleClass:e.styleClass=t.styleClass;var n;if(t.style){e.style||(e.style={});for(n in t.style)void 0===e.style[n]&&(e.style[n]=t.style[n])}if(t.attributes){e.attributes||(e.attributes={});for(n in t.attributes)void 0===e.attributes[n]&&(e.attributes[n]=t.attributes[n])}}return e},_setCurrentGroup:function(e){var t,n,i=this._annotationModel,r=null,o=i.getTextModel(),s=this._currentGroupAnnotation;if(-1!==e){var a=o.getLineStart(e),l=o.getLineEnd(e);for(o.getBaseModel&&(a=o.mapOffset(a),l=o.mapOffset(l)),n=i.getAnnotations(a,l);n.hasNext();)if(t=n.next(),this.isAnnotationTypeVisible(t.type)&&t.start<=a&&t.end>=l&&void 0!==t.groupId){r=t;break}if(s&&r&&s.groupId===r.groupId)return}if(this._currentGroupAnnotation=null,s&&i.removeAnnotations(s.groupType),r&&-1!==e){this._currentGroupAnnotation=r,n=i.getAnnotations();for(var c=[];n.hasNext();)t=n.next(),delete t.groupAnnotation,t.groupId===r.groupId&&(t=t.createGroupAnnotation(),c.push(t));i.replaceAnnotations(null,c)}}}),n.AnnotationTypeList.addMixin(l.prototype),c.prototype=new l,c.prototype.getAnnotations=function(e,t){for(var n=l.prototype.getAnnotations.call(this,e,t),i=this._view.getModel(),r=e;t>r;r++){var o=r-this._firstLine&1?this._oddStyle:this._evenStyle,s=r;if(i.getBaseModel){var a=i.getLineStart(s);s=i.getBaseModel().getLineAtOffset(i.mapOffset(a))}n[r]||(n[r]={}),n[r].html=this._firstLine+s+"",n[r].style||(n[r].style=o)}return n},c.prototype.getWidestAnnotation=function(){var e=this._view.getModel().getLineCount();return this.getAnnotations(e-1,e)[e-1]},c.prototype.setFirstLine=function(e){this._firstLine=void 0!==e?e:1},c.prototype._onTextModelChanged=function(e){var t=e.start,n=this._view.getModel(),i=n.getBaseModel?n.getBaseModel().getLineCount():n.getLineCount(),r=(this._firstLine+i-1+"").length;if(this._numOfDigits!==r){this._numOfDigits=r;var o=n.getLineAtOffset(t);this._view.redrawLines(o,n.getLineCount(),this)}},h.prototype=new l,d.prototype=new l,d.prototype.getRulerStyle=function(){var e={style:{lineHeight:"1px",fontSize:"1px"}};return e=this._mergeStyle(e,this._rulerStyle)},d.prototype._getTooltipContents=function(t,n){if(n&&0===n.length){var i=this._view.getModel(),r=t;if(i.getBaseModel){var o=i.getLineStart(r);r=i.getBaseModel().getLineAtOffset(i.mapOffset(o))}return s.formatMessage(e.line,r+1)}return l.prototype._getTooltipContents.call(this,t,n)},d.prototype._mergeAnnotation=function(e,t,n,i){if(0===n){var r=e;if(!r){var o=3*i;r={html:"&nbsp;",style:{style:{height:o+"px"}}},r.style=this._mergeStyle(r.style,t.overviewStyle)}return r}},u.prototype=new h,u.prototype.onClick=function(e,t){if(void 0!==e){var n=this._annotationModel;if(n){var r=this._view,o=r.getModel(),s=o.getLineStart(e),a=o.getLineEnd(e,!0);o.getBaseModel&&(s=o.mapOffset(s),a=o.mapOffset(a),o=o.getBaseModel());for(var l,c=n.getAnnotations(s,a);!l&&c.hasNext();){var h=c.next();this.isAnnotationTypeVisible(h.type)&&o.getLineAtOffset(h.start)===o.getLineAtOffset(s)&&(l=h)}if(l){var d=i.Tooltip.getTooltip(this._view);d&&d.hide(),l.expanded?l.collapse():l.expand()}}}},u.prototype._getTooltipContents=function(e,t){if(t&&t.length>0){var n=this._view,i=n.getModel(),r=i.getLineStart(e);i.getBaseModel&&(r=i.mapOffset(r),i=i.getBaseModel());for(var o=i.getLineAtOffset(r),s=0;s<t.length;s++){var a=t[s];if(this.isAnnotationTypeVisible(a.type)&&i.getLineAtOffset(a.start)===o){if(t[s].expanded)break;return h.prototype._getTooltipContents.call(this,e,[a])}}}return null},u.prototype._onAnnotationModelChanged=function(e){function t(e){for(i=0;i<e.length;i++)if(o.isAnnotationTypeVisible(e[i].type)){var t=e[i].start;r.getBaseModel&&(t=r.mapOffset(t,!0)),-1!==t&&(a=Math.min(a,r.getLineAtOffset(t)))}}if(e.textModelChangedEvent)return void h.prototype._onAnnotationModelChanged.call(this,e);var n=this._view;if(n){var i,r=n.getModel(),o=this,s=r.getLineCount(),a=s;t(e.added),t(e.removed),t(e.changed);var l=n.getRulers();for(i=0;i<l.length;i++)n.redrawLines(a,s,l[i])}};var p=function(e,t){a.call(this,e,"fixed",t)};return p.prototype=r.mixin(new a,{setView:function(e){this._destroy(),a.prototype.setView.call(this,e),this._create()},_create:function(){function e(e){var t="textviewZoom",n=e.themeClass;return n?(n=n.replace(t,""),n&&(n=" "+n),n=t+n):n=t,e.themeClass=n,e.noScroll=!0,e.readonly=!0,e}function n(e,t){var n=e.y*t.zoomFactor,i=t.clientHeight*t.zoomFactor;y.top=n,y.bottom=n+i,n=g.convert({y:n},"document","page").y,n-=y.node.getBoundingClientRect().top,v.style.top=n+"px",v.style.height=i-_+"px"}function i(){var e=p._metrics.viewPadding,t=p._metrics.viewPadding,n=p.getLineHeight(),i=g.getLineHeight(),r=p.getModel().getLineCount(),o=p._lineHeight?p._scrollHeight:r*n,s=g._lineHeight?g._scrollHeight:r*i,a=s/o,l=p.getClientArea().height+e.top+e.bottom,c=g.getClientArea().height+t.top+t.bottom,h=l*a,d=p._metrics.scrollWidth;return{zoomFactor:a,documentHeight:o,zoomDocumentHeight:s,clientHeight:l,zoomClientHeight:c,scrollWidth:d,windowHeight:h,padding:e}}function r(e,t){return e.y*(t.zoomFactor+(t.windowHeight-t.clientHeight-t.scrollWidth)/t.documentHeight)}function a(e){e=e||{y:p.getTopPixel()};var t=i(),o=r(e,t);g.setTopPixel(o),n(e,t)}function l(e){var t;if(e.wrapMode&&!e.wrapOffset&&p._metrics.charWidth){
var n=s.createElement(m,"div");n.style.position="fixed",n.style.left="-1000px",g._clientDiv.appendChild(n),n.textContent=new Array(Math.ceil(p.getClientArea().width/p._metrics.charWidth)+1).join("a");var i=n.getBoundingClientRect();t=Math.min(150,Math.ceil(i.right-i.left))+"px"}else t="";var r=y.node.style.width;return y.node.style.width=t,r!==t}function c(e,t,n){if(n||y.top<=e.y&&e.y<=y.bottom)y.mouseDown=!0,y.delta=t-v.getBoundingClientRect().top+y.node.getBoundingClientRect().top;else{var i=g.getOffsetAtLocation(e.x,e.y);p.setSelection(i,i,.5,function(){})}}function h(){y.mouseDown=!1}function d(e){if(y.mouseDown){var t=i(),n=Math.min(t.zoomClientHeight-t.windowHeight,Math.max(0,e-y.delta));p.setTopPixel(n*(t.documentHeight-t.clientHeight)/Math.min(t.zoomDocumentHeight,t.zoomClientHeight-t.windowHeight))}}function u(e){e.preventDefault()}var p=this.getView();if(p){var f=e(p.getOptions());f.parent=this.node;var g=this._zoomView=new t.TextView(f);g._clientDiv.contentEditable=!1,g.setModel(p.getModel());var m=p.getOptions("parent").ownerDocument,v=this._windowDiv=s.createElement(m,"div");v.className="rulerZoomWindow",this.node.appendChild(v);var _=parseInt(o.getNodeStyle(v,"border-top-width",0))+parseInt(o.getNodeStyle(v,"border-bottom-width",0)),y=this;p.addEventListener("Scroll",this._scrollListener=function(e){a(e.newValue)}),p.addEventListener("Resize",this._resizeListener=function(){l(g.getOptions()),a()}),p.addEventListener("Redraw",this._redrawListener=function(e){e.ruler||g.redrawLines(e.startLine,e.endLine)}),p.addEventListener("Options",this._optionsListener=function(t){var n=e(t.options);g.setOptions(n),l(g.getOptions())}),g.addEventListener("LineStyle",this._lineListener=function(e){p.onLineStyle(e)}),s.isIOS||s.isAndroid?(v.addEventListener("touchstart",function(e){var t=e.touches;1===t.length&&(c(e,e.touches[0].clientY,!0),e.preventDefault())}),v.addEventListener("touchend",function(e){var t=e.touches;0===t.length&&h(e)}),v.addEventListener("touchmove",function(e){var t=e.touches;1===t.length&&d(e.touches[0].clientY)}),g.addEventListener("TouchStart",function(e){1===e.touchCount&&(c(e,e.event.touches[0].clientY),u(e))})):(v.style.pointerEvents="none",g.addEventListener("MouseDown",function(e){var t=e.event;(t.which?0===t.button:1===t.button)&&c(e,t.clientY),u(e)}),g.addEventListener("MouseUp",function(e){h(e),u(e)}),g.addEventListener("MouseMove",function(e){d(e.event.clientY),u(e)})),(m.defaultView||m.parentWindow).setTimeout(function(){a()},0)}},_destroy:function(){var e=this.getView();e&&(e.removeEventListener("Scroll",this._scrollListener),this._scrollListener=null,e.removeEventListener("Resize",this._resizeListener),this._resizeListener=null,e.removeEventListener("Redraw",this._redrawListener),this._redrawListener=null,e.removeEventListener("Options",this._optionsListener),this._optionsListener=null);var t=this._zoomView;t&&(t.removeEventListener("LineStyle",this._lineListener),t.setModel(null),t.destroy(),this._zoomView=null)}}),{BaseRuler:a,Ruler:l,AnnotationRuler:h,LineNumberRuler:c,OverviewRuler:d,FoldingRuler:u,ZoomRuler:p}}),n("orion/editor/textDND",["orion/util"],function(e){function t(e,t){this._view=e,this._undoStack=t,this._dragSelection=null,this._dropOffset=-1,this._dropText=null;var n=this;this._listener={onDragStart:function(e){n._onDragStart(e)},onDragEnd:function(e){n._onDragEnd(e)},onDragEnter:function(e){n._onDragEnter(e)},onDragOver:function(e){n._onDragOver(e)},onDrop:function(e){n._onDrop(e)},onDestroy:function(e){n._onDestroy(e)}},e.addEventListener("DragStart",this._listener.onDragStart),e.addEventListener("DragEnd",this._listener.onDragEnd),e.addEventListener("DragEnter",this._listener.onDragEnter),e.addEventListener("DragOver",this._listener.onDragOver),e.addEventListener("Drop",this._listener.onDrop),e.addEventListener("Destroy",this._listener.onDestroy)}return t.prototype={destroy:function(){var e=this._view;e&&(e.removeEventListener("DragStart",this._listener.onDragStart),e.removeEventListener("DragEnd",this._listener.onDragEnd),e.removeEventListener("DragEnter",this._listener.onDragEnter),e.removeEventListener("DragOver",this._listener.onDragOver),e.removeEventListener("Drop",this._listener.onDrop),e.removeEventListener("Destroy",this._listener.onDestroy),this._view=null)},_onDestroy:function(e){this.destroy()},_onDragStart:function(e){var t=this._view,n=t.getSelectionText();n&&(this._dragSelection=t.getSelections(),e.event.dataTransfer.effectAllowed="copyMove",e.event.dataTransfer.setData("Text",n))},_onDragEnd:function(t){if(this._dragSelection){var n=this._view,i=t.event.dataTransfer.dropEffect;e.isFirefox||("none"!==i||this._dropText)&&(i=t.event.dataTransfer.dropEffect=this._dropEffect),this._undoStack&&this._undoStack.startCompoundChange();var r="move"===i;if(r&&n.setText({text:"",selection:this._dragSelection}),this._dropText){var o=this._dropText,s=this._dropOffset;r&&this._dragSelection.forEach(function(e){s>=e.end?s-=e.end-e.start:s>=e.start&&(s=e.start)}),n.setText(o,s,s),n.setSelection(s,s+o.length),this._dropText=null,this._dropOffset=-1}this._undoStack&&this._undoStack.endCompoundChange(),this._dragSelection=null}},_onDragEnter:function(e){this._onDragOver(e)},_onDragOver:function(t){var n=t.event.dataTransfer.types,i=!this._view.getOptions("readonly");if(i&&n&&(i=n.contains?n.contains("text/plain")||n.contains("Text"):-1!==n.indexOf("text/plain")||-1!==n.indexOf("Text")),i){if(!e.isFirefox){var r=e.isMac?t.event.altKey:t.event.ctrlKey;this._dropEffect=t.event.dataTransfer.dropEffect=r?"copy":"move"}}else t.event.dataTransfer.dropEffect="none"},_onDrop:function(t){var n=this._view,i=t.event.dataTransfer.getData("Text");if(i){e.isFirefox||(t.event.dataTransfer.dropEffect=this._dropEffect);var r=n.getOffsetAtLocation(t.x,t.y);this._dragSelection?(this._dropOffset=r,this._dropText=i):(n.setText(i,r,r),n.setSelection(r,r+i.length))}}},{TextDND:t}}),n("orion/editor/linkedMode",["i18n!orion/editor/nls/messages","orion/keyBinding","orion/editor/keyModes","orion/editor/annotations","orion/objects","orion/util"],function(e,t,n,i,r){function o(e){this._data=e}function s(e,t,i){var r=e.getTextView();n.KeyMode.call(this,r),this.editor=e,this.undoStack=t,this.contentAssist=i,this.linkedModeModel=null,r.setAction("linkedModeEnter",function(){return this.exitLinkedMode(!0),!0}.bind(this)),r.setAction("linkedModeCancel",function(){return this.exitLinkedMode(!0),!0}.bind(this)),r.setAction("linkedModeNextGroup",function(){var e=this.linkedModeModel;return this.selectLinkedGroup((e.selectedGroupIndex+1)%e.groups.length),!0}.bind(this)),r.setAction("linkedModePreviousGroup",function(){var e=this.linkedModeModel;return this.selectLinkedGroup(e.selectedGroupIndex>0?e.selectedGroupIndex-1:e.groups.length-1),!0}.bind(this)),this.linkedModeListener={onActivating:function(e){this._groupContentAssistProvider&&(this.contentAssist.setProviders([this._groupContentAssistProvider]),this.contentAssist.setProgress(null))}.bind(this),onModelChanged:function(e){if(!this.ignoreVerify){for(var t,n,i=this.editor.mapOffset(e.start),r=this.linkedModeModel;r&&(t=this._getPositionChanged(r,i,i+e.removedCharCount),n=t.position,void 0===n||n.model!==r);)this.exitLinkedMode(!1),r=this.linkedModeModel;if(r){for(var o,s,a=0,l=e.addedCharCount-e.removedCharCount,c=t.positions,h=0;h<c.length;++h){s=c[h],o=s.position;var d=o.offset<=i&&i<=o.offset+o.length;d&&!s.ansestor?(o.offset+=a,o.length+=l,a+=l):(o.offset+=a,s.ansestor&&d&&(o.length+=l)),s.escape&&(s.model.escapePosition=o.offset)}this._updateAnnotations(c)}}}.bind(this),onVerify:function(e){if(!this.ignoreVerify){for(var t,n,i=this.editor.mapOffset(e.start),r=this.editor.mapOffset(e.end),o=this.linkedModeModel;o&&(t=this._getPositionChanged(o,i,r),n=t.position,void 0===n||n.model!==o);)this.exitLinkedMode(!1),o=this.linkedModeModel;if(o){var s=this._compoundChange;s?(s.owner.model!==o||s.owner.group!==n.group)&&(this.endUndo(),this.startUndo()):this.startUndo(),o.selectedGroupIndex=n.group;for(var a,l,c=0,h=e.text.length-(r-i),d=t.positions,u=i-n.position.offset,p=r-n.position.offset,f=0;f<d.length;++f)l=d[f],a=l.position,l.oldOffset=a.offset,l.model===o&&l.group===n.group?(a.offset+=c,a.length+=h,c+=h):(a.offset+=c,l.ansestor&&(a.length+=n.count*h)),l.escape&&(l.model.escapePosition=a.offset);for(this.ignoreVerify=!0,f=d.length-1;f>=0;f--)l=d[f],l.model===o&&l.group===n.group&&this.editor.setText(e.text,l.oldOffset+u,l.oldOffset+p,!1);this.ignoreVerify=!1,e.text=null,this._updateAnnotations(d)}}}.bind(this)}}var a={};return o.prototype={chop:function(e,t){return t.substring(e.length)},computeProposals:function(e,t,n){var i=n.prefix,r=[],o=this._data.style?this._data.style:null;o=o?o:"emphasis";for(var s=this._data.values,a=0;a<s.length;a++){var l=s[a];"string"==typeof l&&0===l.indexOf(i)?r.push({proposal:this.chop(i,l),description:l,hover:l,style:o}):"object"==typeof l&&l.proposal&&r.push({proposal:this.chop(i,l.proposal),description:l.description?l.description:l.proposal,hover:l.hover?l.hover:l.proposal,style:o})}var c=this._data.title?this._data.title:null;return 0<r.length&&r.splice(0,0,{proposal:"",description:c?c:"Options",style:"noemphasis_title",unselectable:!0}),r}},s.prototype=new n.KeyMode,r.mixin(s.prototype,{createKeyBindings:function(){var e=t.KeyBinding,n=[];return n.push({actionID:"linkedModeEnter",keyBinding:new e(13)}),n.push({actionID:"linkedModeCancel",keyBinding:new e(27)}),n.push({actionID:"linkedModeNextGroup",keyBinding:new e(9)}),n.push({actionID:"linkedModePreviousGroup",keyBinding:new e(9,!1,!0)}),n},enterLinkedMode:function(t){if(!this.linkedModeModel){var n=this.editor.getTextView();n.addKeyMode(this),n.addEventListener("Verify",this.linkedModeListener.onVerify),n.addEventListener("ModelChanged",this.linkedModeListener.onModelChanged);var i=this.contentAssist;i.addEventListener("Activating",this.linkedModeListener.onActivating),this.editor.reportStatus(e.linkedModeEntered,null,!0)}this._sortedPositions=null,this.linkedModeModel&&(t.previousModel=this.linkedModeModel,t.parentGroup=this.linkedModeModel.selectedGroupIndex,this.linkedModeModel.nextModel=t),this.linkedModeModel=t,this.selectLinkedGroup(0)},exitLinkedMode:function(t){if(this.isActive()){this._compoundChange&&(this.endUndo(),this._compoundChange=null),this._sortedPositions=null;var n=this.linkedModeModel;if(this.linkedModeModel=n.previousModel,n.parentGroup=n.previousModel=void 0,this.linkedModeModel&&(this.linkedModeModel.nextModel=void 0),!this.linkedModeModel){var i=this.editor,r=i.getTextView();r.removeKeyMode(this),r.removeEventListener("Verify",this.linkedModeListener.onVerify),r.removeEventListener("ModelChanged",this.linkedModeListener.onModelChanged);var o=this.contentAssist;o.removeEventListener("Activating",this.linkedModeListener.onActivating),o.offset=void 0,this.editor.reportStatus(e.linkedModeExited,null,!0)}t&&"number"==typeof n.escapePosition&&i.setCaretOffset(n.escapePosition,!1),this.selectLinkedGroup(0)}},startUndo:function(){if(this.undoStack){var e=this,t=this.linkedModeModel;this._compoundChange=this.undoStack.startCompoundChange({model:t,group:t.selectedGroupIndex,end:function(){e._compoundChange=null}})}},endUndo:function(){this.undoStack&&this.undoStack.endCompoundChange()},isActive:function(){return!!this.linkedModeModel},isStatusActive:function(){return!!this.linkedModeModel},selectLinkedGroup:function(e){var t=this.linkedModeModel;if(t){t.selectedGroupIndex=e;var n=t.groups[e],i=n.positions[0],r=this.editor;r.setSelection(i.offset,i.offset+i.length);var s=this.contentAssist;if(s)if(s.offset=void 0,n.data&&"link"===n.data.type&&n.data.values){var a=this._groupContentAssistProvider=new o(n.data);a.getPrefix=function(){var e=r.getSelection();if(e.start===e.end){var t=r.getCaretOffset();if(i.offset<=t&&t<=i.offset+i.length)return r.getText(i.offset,t)}return""},s.offset=i.offset,s.deactivate(),s.activate()}else this._groupContentAssistProvider&&(this._groupContentAssistProvider=null,s.deactivate())}this._updateAnnotations()},_getModelPositions:function(e,t,n){for(var i=t.groups,r=0;r<i.length;r++)for(var o=i[r].positions,s=0;s<o.length;s++){var a=o[s];n&&(a={offset:a.offset+n,length:a.length});var l={index:s,group:r,count:o.length,model:t,position:a};e.push(l),t.nextModel&&t.nextModel.parentGroup===r&&(l.ansestor=!0,this._getModelPositions(e,t.nextModel,(n||0)+o[s].offset-o[0].offset))}},_getSortedPositions:function(e){var t=this._sortedPositions;if(!t){for(t=[];e.previousModel;)e=e.previousModel;for(this._getModelPositions(t,e);e;)"number"==typeof e.escapePosition&&t.push({escape:!0,model:e,position:{offset:e.escapePosition,length:0}}),e=e.nextModel;t.sort(function(e,t){return e.position.offset-t.position.offset}),this._sortedPositions=t}return t},_getPositionChanged:function(e,t,n){for(var i,r=this._getSortedPositions(e),o=r.length-1;o>=0;o--)if(!r[o].escape){var s=r[o].position;if(s.offset<=t&&n<=s.offset+s.length){i=r[o];break}}return{position:i,positions:r}},_updateAnnotations:function(e){var t=this.editor.getAnnotationModel();if(t){for(var n,r=[],o=[],s=t.getAnnotations();s.hasNext();)switch(n=s.next(),n.type){case i.AnnotationType.ANNOTATION_LINKED_GROUP:case i.AnnotationType.ANNOTATION_CURRENT_LINKED_GROUP:case i.AnnotationType.ANNOTATION_SELECTED_LINKED_GROUP:r.push(n)}var a=this.linkedModeModel;if(a){e=e||this._getSortedPositions(a);for(var l=0;l<e.length;l++){var c=e[l];if(c.model===a&&!c.escape){var h=i.AnnotationType.ANNOTATION_LINKED_GROUP;c.group===a.selectedGroupIndex&&(h=0===c.index?i.AnnotationType.ANNOTATION_SELECTED_LINKED_GROUP:i.AnnotationType.ANNOTATION_CURRENT_LINKED_GROUP),c=c.position,n=i.AnnotationType.createAnnotation(h,c.offset,c.offset+c.length,""),o.push(n)}}}t.replaceAnnotations(r,o)}}}),a.LinkedMode=s,a}),n("orion/editor/factories",["orion/editor/actions","orion/editor/undoStack","orion/editor/rulers","orion/editor/annotations","orion/editor/textDND","orion/editor/linkedMode","orion/util"],function(e,t,n,i,r,o,s){function a(){}function l(){}function c(){}function h(){}function d(){}function u(){}function p(){}var f={};return a.prototype={createKeyBindings:function(t,n,i,r){var s=new e.TextActions(t,n,r),a=new o.LinkedMode(t,n,i),l=new e.SourceCodeActions(t,n,i,a);return{textActions:s,linkedMode:a,sourceCodeActions:l}}},f.KeyBindingsFactory=a,l.prototype={createUndoStack:function(e){var n=e.getTextView();return new t.UndoStack(n,200)}},f.UndoFactory=l,c.prototype={createLineNumberRuler:function(e){return new n.LineNumberRuler(e,"left",{styleClass:"ruler lines"},{styleClass:"rulerLines odd"},{styleClass:"rulerLines even"})}},f.LineNumberRulerFactory=c,h.prototype={createFoldingRuler:function(e){return new n.FoldingRuler(e,"left",{styleClass:"ruler folding"})}},f.FoldingRulerFactory=h,d.prototype={createZoomRuler:function(e){return new n.ZoomRuler(s.isIOS||s.isAndroid?"right":"innerRight",{styleClass:"ruler zoom"})}},f.ZoomRulerFactory=d,u.prototype={createAnnotationModel:function(e){return new i.AnnotationModel(e)},createAnnotationStyler:function(e,t){return new i.AnnotationStyler(e,t)},createAnnotationRulers:function(e){var t=new n.AnnotationRuler(e,"left",{styleClass:"ruler annotations"}),i=new n.OverviewRuler(e,"right",{styleClass:"ruler overview"});return{annotationRuler:t,overviewRuler:i}}},f.AnnotationFactory=u,p.prototype={createTextDND:function(e,t){return new r.TextDND(e.getTextView(),t)}},f.TextDNDFactory=p,f}),n("orion/editor/editorFeatures",["orion/editor/factories","orion/editor/actions","orion/editor/linkedMode","orion/objects"],function(e,t,n,i){return i.mixin({},e,t,n)}),function(){function e(e){this.tokens=[],this.tokens.links={},this.options=e||h.defaults,this.rules=d.normal,this.options.gfm&&(this.options.tables?this.rules=d.tables:this.rules=d.gfm)}function t(e,t){if(this.options=t||h.defaults,this.links=e,this.rules=u.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=u.breaks:this.rules=u.gfm:this.options.pedantic&&(this.rules=u.pedantic)}function i(e){this.options=e||{}}function r(e){this.tokens=[],this.token=null,this.options=e||h.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options}function o(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function s(e){return e.replace(/&([#\w]+);/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function a(e,t){return e=e.source,t=t||"",function n(i,r){return i?(r=r.source||r,r=r.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(i,r),n):new RegExp(e,t)}}function l(){}function c(e){for(var t,n,i=1;i<arguments.length;i++){t=arguments[i];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}function h(t,n,i){if(i||"function"==typeof n){i||(i=n,n=null),n=c({},h.defaults,n||{});var s,a,l=n.highlight,d=0;try{s=e.lex(t,n)}catch(u){return i(u)}a=s.length;var p=function(){var e,t;try{e=r.parse(s,n)}catch(o){t=o}return n.highlight=l,t?i(t):i(null,e)};if(!l||l.length<3)return p();if(delete n.highlight,!a)return p();for(;d<s.length;d++)!function(e){return"code"!==e.type?--a||p():l(e.text,e.lang,function(t,n){return null==n||n===e.text?--a||p():(e.text=n,e.escaped=!0,void(--a||p()))})}(s[d])}else try{return n&&(n=c({},h.defaults,n)),r.parse(e.lex(t,n),n)}catch(u){if(u.message+="\nPlease report this to https://github.com/chjj/marked.",(n||h.defaults).silent)return"<p>An error occured:</p><pre>"+o(u.message+"",!0)+"</pre>";throw u}}var d={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:l,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:l,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:l,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};d.bullet=/(?:[*+-]|\d+\.)/,d.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,d.item=a(d.item,"gm")(/bull/g,d.bullet)(),d.list=a(d.list)(/bull/g,d.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+d.def.source+")")(),d.blockquote=a(d.blockquote)("def",d.def)(),d._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",d.html=a(d.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,d._tag)(),d.paragraph=a(d.paragraph)("hr",d.hr)("heading",d.heading)("lheading",d.lheading)("blockquote",d.blockquote)("tag","<"+d._tag)("def",d.def)(),d.normal=c({},d),d.gfm=c({},d.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),d.gfm.paragraph=a(d.paragraph)("(?!","(?!"+d.gfm.fences.source.replace("\\1","\\2")+"|"+d.list.source.replace("\\1","\\3")+"|")(),d.tables=c({},d.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),e.rules=d,e.lex=function(t,n){var i=new e(n);return i.lex(t)},e.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},e.prototype.token=function(e,t,n){for(var i,r,o,s,a,l,c,h,u,e=e.replace(/^ +$/gm,"");e;)if((o=this.rules.newline.exec(e))&&(e=e.substring(o[0].length),o[0].length>1&&this.tokens.push({type:"space"})),o=this.rules.code.exec(e))e=e.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?o:o.replace(/\n+$/,"")});else if(o=this.rules.fences.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"code",lang:o[2],text:o[3]});else if(o=this.rules.heading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});else if(t&&(o=this.rules.nptable.exec(e))){for(e=e.substring(o[0].length),l={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/\n$/,"").split("\n")},h=0;h<l.align.length;h++)/^ *-+: *$/.test(l.align[h])?l.align[h]="right":/^ *:-+: *$/.test(l.align[h])?l.align[h]="center":/^ *:-+ *$/.test(l.align[h])?l.align[h]="left":l.align[h]=null;for(h=0;h<l.cells.length;h++)l.cells[h]=l.cells[h].split(/ *\| */);this.tokens.push(l)}else if(o=this.rules.lheading.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"heading",depth:"="===o[2]?1:2,text:o[1]});else if(o=this.rules.hr.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"hr"});else if(o=this.rules.blockquote.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,t,!0),this.tokens.push({type:"blockquote_end"});else if(o=this.rules.list.exec(e)){for(e=e.substring(o[0].length),s=o[2],this.tokens.push({type:"list_start",ordered:s.length>1}),o=o[0].match(this.rules.item),i=!1,u=o.length,h=0;u>h;h++)l=o[h],c=l.length,l=l.replace(/^ *([*+-]|\d+\.) +/,""),~l.indexOf("\n ")&&(c-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+c+"}","gm"),"")),this.options.smartLists&&h!==u-1&&(a=d.bullet.exec(o[h+1])[0],s===a||s.length>1&&a.length>1||(e=o.slice(h+1).join("\n")+e,h=u-1)),r=i||/\n\n(?!\s*$)/.test(l),h!==u-1&&(i="\n"===l.charAt(l.length-1),r||(r=i)),this.tokens.push({type:r?"loose_item_start":"list_item_start"}),this.token(l,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(o=this.rules.html.exec(e))e=e.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===o[1]||"script"===o[1]||"style"===o[1],text:o[0],isHTML:!0});else if(!n&&t&&(o=this.rules.def.exec(e)))e=e.substring(o[0].length),this.tokens.links[o[1].toLowerCase()]={href:o[2],title:o[3]},this.tokens.push({type:"def",id:o[1].toLowerCase(),href:o[2],title:o[3]});else if(t&&(o=this.rules.table.exec(e))){for(e=e.substring(o[0].length),l={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/(?: *\| *)?\n$/,"").split("\n")},h=0;h<l.align.length;h++)/^ *-+: *$/.test(l.align[h])?l.align[h]="right":/^ *:-+: *$/.test(l.align[h])?l.align[h]="center":/^ *:-+ *$/.test(l.align[h])?l.align[h]="left":l.align[h]=null;for(h=0;h<l.cells.length;h++)l.cells[h]=l.cells[h].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l)}else if(t&&(o=this.rules.paragraph.exec(e)))e=e.substring(o[0].length),this.tokens.push({type:"paragraph",text:"\n"===o[1].charAt(o[1].length-1)?o[1].slice(0,-1):o[1]});else if(o=this.rules.text.exec(e))e=e.substring(o[0].length),this.tokens.push({type:"text",text:o[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var u={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:l,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:l,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};u._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,u._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,u.link=a(u.link)("inside",u._inside)("href",u._href)(),u.reflink=a(u.reflink)("inside",u._inside)(),u.normal=c({},u),u.pedantic=c({},u.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),u.gfm=c({},u.normal,{escape:a(u.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:a(u.text)("]|","~]|")("|","|https?://|")()}),u.breaks=c({},u.gfm,{br:a(u.br)("{2,}","*")(),text:a(u.gfm.text)("{2,}","*")()}),t.rules=u,t.output=function(e,n,i){var r=new t(n,i);return r.output(e)},t.prototype.output=function(e){for(var t,n,i,r,s="";e;)if(r=this.rules.escape.exec(e))e=e.substring(r[0].length),s+=r[1];else if(r=this.rules.autolink.exec(e))e=e.substring(r[0].length),"@"===r[2]?(n=":"===r[1].charAt(6)?this.mangle(r[1].substring(7)):this.mangle(r[1]),i=this.mangle("mailto:")+n):(n=o(r[1]),i=n),s+=this.renderer.link(i,null,n);else if(this.inLink||!(r=this.rules.url.exec(e))){if(r=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(r[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(r[0])&&(this.inLink=!1),e=e.substring(r[0].length),s+=this.options.sanitize?o(r[0]):r[0];else if(r=this.rules.link.exec(e))e=e.substring(r[0].length),this.inLink=!0,s+=this.outputLink(r,{href:r[2],title:r[3]}),this.inLink=!1;else if((r=this.rules.reflink.exec(e))||(r=this.rules.nolink.exec(e))){if(e=e.substring(r[0].length),t=(r[2]||r[1]).replace(/\s+/g," "),t=this.links[t.toLowerCase()],!t||!t.href){s+=r[0].charAt(0),e=r[0].substring(1)+e;continue}this.inLink=!0,s+=this.outputLink(r,t),this.inLink=!1}else if(r=this.rules.strong.exec(e))e=e.substring(r[0].length),s+=this.renderer.strong(this.output(r[2]||r[1]));else if(r=this.rules.em.exec(e))e=e.substring(r[0].length),s+=this.renderer.em(this.output(r[2]||r[1]));else if(r=this.rules.code.exec(e))e=e.substring(r[0].length),s+=this.renderer.codespan(o(r[2],!0));else if(r=this.rules.br.exec(e))e=e.substring(r[0].length),s+=this.renderer.br();else if(r=this.rules.del.exec(e))e=e.substring(r[0].length),s+=this.renderer.del(this.output(r[1]));else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),s+=o(this.smartypants(r[0]));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(r[0].length),n=o(r[1]),i=n,s+=this.renderer.link(i,null,n);return s},t.prototype.outputLink=function(e,t){var n=o(t.href),i=t.title?o(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,i,this.output(e[1])):this.renderer.image(n,i,o(e[1]))},t.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/--/g,"—").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},t.prototype.mangle=function(e){for(var t,n="",i=e.length,r=0;i>r;r++)t=e.charCodeAt(r),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},i.prototype.code=function(e,t,n){if(this.options.highlight){var i=this.options.highlight(e,t);null!=i&&i!==e&&(n=!0,e=i)}return t?'<pre><code class="'+this.options.langPrefix+o(t,!0)+'">'+(n?e:o(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:o(e,!0))+"\n</code></pre>"},i.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},i.prototype.def=function(e,t,n){return""},i.prototype.html=function(e){return e},i.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},i.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},i.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},i.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},i.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},i.prototype.tablecell=function(e,t){var n=t.header?"th":"td",i=t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">";return i+e+"</"+n+">\n"},i.prototype.strong=function(e){return"<strong>"+e+"</strong>"},i.prototype.em=function(e){return"<em>"+e+"</em>"},i.prototype.codespan=function(e){return"<code>"+e+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(e){return"<del>"+e+"</del>"},i.prototype.link=function(e,t,n){if(this.options.sanitize){try{var i=decodeURIComponent(s(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(r){return""}if(0===i.indexOf("javascript:"))return""}var o='<a href="'+e+'"';return t&&(o+=' title="'+t+'"'),o+=">"+n+"</a>"},i.prototype.image=function(e,t,n){var i='<img src="'+e+'" alt="'+n+'"';return t&&(i+=' title="'+t+'"'),i+=this.options.xhtml?"/>":">"},r.parse=function(e,t,n){var i=new r(t,n);return i.parse(e)},r.prototype.parse=function(e){this.inline=new t(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var n="";this.next();)n+=this.tok();return n},r.prototype.next=function(){return this.token=this.tokens.pop()},r.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},r.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},r.prototype.tok=function(){switch(this.token.type){case"space":return"";case"def":return this.renderer.def(this.token.id,this.token.href,this.token.title);case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,i,r,o="",s="";for(n="",e=0;e<this.token.header.length;e++)i={header:!0,align:this.token.align[e]},n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(o+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",r=0;r<t.length;r++)n+=this.renderer.tablecell(this.inline.output(t[r]),{header:!1,align:this.token.align[r]});s+=this.renderer.tablerow(n)}return this.renderer.table(o,s);case"blockquote_start":for(var s="";"blockquote_end"!==this.next().type;)s+=this.tok();return this.renderer.blockquote(s);case"list_start":for(var s="",a=this.token.ordered;"list_end"!==this.next().type;)s+=this.tok();return this.renderer.list(s,a);case"list_item_start":for(var s="";"list_item_end"!==this.next().type;)s+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(s);case"loose_item_start":for(var s="";"list_item_end"!==this.next().type;)s+=this.tok();return this.renderer.listitem(s);case"html":var l=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(l);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},l.exec=l,h.options=h.setOptions=function(e){return c(h.defaults,e),h},h.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new i,xhtml:!1},h.Parser=r,h.parser=r.parse,h.Renderer=i,h.Lexer=e,h.lexer=e.lex,h.InlineLexer=t,h.inlineLexer=t.output,h.parse=h,"object"==typeof exports?module.exports=h:"function"==typeof n&&n.amd?n("marked/marked",[],function(){return h}):this.marked=h}.call(function(){return this||("undefined"!=typeof window?window:global)}()),n("orion/hover",["marked/marked"],function(e){function t(e,t){this.editor=e,this.hoverFactory=t,this.inputManager=t.inputManager,this.serviceRegistry=t.serviceRegistry,this.commandRegistry=t.commandRegistry,this._qfToolbars=[]}function n(e,t,n){this.serviceRegistry=e,this.inputManager=t,this.commandRegistry=n,this.filterHoverPlugins(),this.inputManager.addEventListener("InputChanged",function(){this.filterHoverPlugins()}.bind(this))}return t.prototype={computeHoverInfo:function(e){var t=[];return this.hoverFactory._applicableProviders.forEach(function(n){var i=this.serviceRegistry.getService(n);
if(i&&i.computeHoverInfo){var r=this.editor.getEditorContext();t.push(i.computeHoverInfo(r,e))}}.bind(this)),t},renderMarkDown:function(t){return e(t,{sanitize:!0})},clearQuickFixes:function(){this._qfToolbars.forEach(function(e){e.destroy()}),this._qfToolbars=[]},renderQuickFixes:function(e,t,n){if(e&&n){var i=document.createElement("div");i.classList.add("commandList"),n.appendChild(i);var r=[],o=this.inputManager.getFileMetadata();o&&(o.annotation=e,this.commandRegistry.renderCommands("orion.edit.quickfix",i,o,this.editor,"quickfix",e,r),delete o.annotation)}}},n.prototype={createHover:function(e){return new t(e,this)},filterHoverPlugins:function(){this._applicableProviders=[];for(var e=this.serviceRegistry.getServiceReferences("orion.edit.hover"),t=0;t<e.length;t++){var n=e[t],i=this.inputManager.getContentType();if(i){var r=n.getProperty("contentType");r&&-1!==r.indexOf(i.id)&&this._applicableProviders.push(n)}}}},{HoverFactory:n}}),n("orion/editor/contentAssist",["i18n!orion/editor/nls/messages","orion/keyBinding","orion/editor/keyModes","orion/editor/eventTarget","orion/Deferred","orion/objects","orion/editor/tooltip","orion/editor/util","orion/util","orion/webui/littlelib","orion/metrics"],function(e,t,n,i,r,o,s,a,l,c,h){function d(n,i){this.textView=n,i&&(this.pageMessage=i.getService("orion.page.message")),this.state=f.INACTIVE,this.clearProviders();var r=this;this._textViewListeners={onModelChanging:function(e){this._latestModelChangingEvent=e,e&&this._updateFilterText(e)}.bind(this),onSelection:function(e){this.isDeactivatingChange(this._latestModelChangingEvent,e)?this.setState(f.INACTIVE):this.isActive()&&(this.state===f.ACTIVE&&this.setState(f.FILTERING),this.filterProposals()),this._latestModelChangingEvent=null}.bind(this),onScroll:function(e){this.setState(f.INACTIVE)}.bind(this)},n.setKeyBinding(l.isMac?new t.KeyBinding(" ",!1,!1,!1,!0):new t.KeyBinding(" ",!0),"contentAssist"),n.setKeyBinding(l.isMac?new t.KeyBinding(" ",!1,!1,!0,!0):new t.KeyBinding(" ",!0,!1,!0),"contentAssist"),n.setAction("contentAssist",function(){return n.getOptions("readonly")||r.activate(),!0},{name:e.contentAssist})}function u(e,t){var i=e.textView;n.KeyMode.call(this,i),this.contentAssist=e,this.widget=t,this.proposals=[];var r=this;this.contentAssist.addEventListener("ProposalsComputed",function(e){if(r.proposals=e.data.proposals,0===r.proposals.length)r.selectedIndex=-1,r.cancel();else{for(r.selectedIndex=0;r.proposals[r.selectedIndex]&&r.proposals[r.selectedIndex].unselectable;)r.selectedIndex++;if(r.proposals[r.selectedIndex]){if(r.widget){var t=!0;if(e.autoApply){for(var n=r.selectedIndex+1;r.proposals[n]&&r.proposals[n].unselectable;)n++;r.proposals[n]||(t=!1,r.contentAssist.apply(r.proposals[r.selectedIndex]))}t&&(r.widget.show(),r.widget.selectNode(r.selectedIndex))}}else r.selectedIndex=-1,r.cancel()}}),i.setAction("contentAssistApply",function(){return this.enter()}.bind(this)),i.setAction("contentAssistCancel",function(){return this.cancel()}.bind(this)),i.setAction("contentAssistNextProposal",function(){return this.lineDown()}.bind(this)),i.setAction("contentAssistPreviousProposal",function(){return this.lineUp()}.bind(this)),i.setAction("contentAssistNextPage",function(){return this.pageDown()}.bind(this)),i.setAction("contentAssistPreviousPage",function(){return this.pageUp()}.bind(this)),i.setAction("contentAssistHome",function(){return this.widget&&this.widget.scrollIndex(0,!0),this.lineDown(0)}.bind(this)),i.setAction("contentAssistEnd",function(){return this.lineUp(this.proposals.length-1)}.bind(this)),i.setAction("contentAssistTab",function(){return this.tab()}.bind(this)),this.widget&&(this.widget.setContentAssistMode(this),this.widget.createAccessible())}function p(e,t){this.contentAssist=e,this.textView=this.contentAssist.getTextView(),this.textViewListenerAdded=!1,this.isShowing=!1,this._useResizeTimer=!1;var n=this.textView.getOptions("parent").ownerDocument;if(this.parentNode="string"==typeof t?n.getElementById(t):t,!this.parentNode){this.parentNode=l.createElement(n,"div"),this.parentNode.className="contentassist";var i=n.getElementsByTagName("body")[0];if(!i)throw new Error("parentNode is required");i.appendChild(this.parentNode)}var r=window.MutationObserver||window.MozMutationObserver;r&&l.isFirefox?this._mutationObserver=new r(function(e){this._contentAssistMode._showTooltip(!0,!0)}.bind(this)):this._useResizeTimer=!0,a.addEventListener(this.parentNode,"scroll",this.onScroll.bind(this));var o=this;this.textViewListener={onMouseDown:function(e){var t=e.event.target||e.event.srcElement;t.parentElement!==o.parentNode&&o.contentAssist.deactivate()}},this.contentAssist.addEventListener("Deactivating",function(e){o.hide()}),this.scrollListener=function(e){o.isShowing&&o.position()},a.addEventListener(n,"scroll",this.scrollListener)}var f={INACTIVE:1,ACTIVE:2,FILTERING:3},g={selected:"selected",hr:"proposal-hr",emphasis:"proposal-emphasis",noemphasis:"proposal-noemphasis",noemphasis_keyword:"proposal-noemphasis-keyword",noemphasis_title:"proposal-noemphasis-title",noemphasis_title_keywords:"proposal-noemphasis-title-keywords",dfault:"proposal-default"};return d.prototype={apply:function(e){if(!e)return!1;var t=this.textView,n=t.getSelection(),i=this._initialCaretOffset,r=i,o=Math.max(n.start,n.end),s=o,a=t.getModel();a.getBaseModel&&(r=a.mapOffset(r),s=a.mapOffset(s),a=a.getBaseModel()),e.overwrite&&(i="string"==typeof e.prefix?r-e.prefix.length:this.getPrefixStart(a,r));var l={proposal:e,start:r,end:s};this.setState(f.INACTIVE);var c="string"==typeof e?e:e.proposal;if(t.setText(c,i,o),e.additionalEdits)for(var d,u=0;u<e.additionalEdits.length;u++)d=e.additionalEdits[u],t.setText(d.text,d.offset,d.offset+d.length);return this.dispatchEvent({type:"ProposalApplied",data:l}),h.logEvent("contentAssist","apply"),!0},activate:function(e,t){this.state===f.INACTIVE&&(h.logEvent("contentAssist","activate",void 0,t?0:1),this._autoTriggered=t?!0:!1,this.setState(f.ACTIVE,e))},deactivate:function(){this.setState(f.INACTIVE)},getTextView:function(){return this.textView},isActive:function(){return this.state===f.ACTIVE||this.state===f.FILTERING},isDeactivatingChange:function(e,t){var n=!1,i=Array.isArray(t.newValue)?t.newValue:[t.newValue],r=i[0].start<this._initialCaretOffset;return r||!e?n=!0:e&&(n=e.removedLineCount>0||e.addedLineCount>0),n},setState:function(e,t){var n;e===f.ACTIVE?(n="Activating",this._mode&&this._mode.setActive(!0)):e===f.INACTIVE&&(n="Deactivating",this._mode&&this._mode.setActive(!1)),n&&this.dispatchEvent({type:n,providers:t}),this.state=e,this.onStateChange(e)},setMode:function(e){this._mode=e},onStateChange:function(e){e===f.INACTIVE?(this._removeTextViewListeners(),this._filterText="",this._initialCaretOffset=-1,this._computedProposals=null):e===f.ACTIVE&&(this._filterText="",this._addTextViewListeners(),this.computeProposals())},computeProposals:function(){var e=this.textView.getCaretOffset(),t=this.textView.getSelection(),n=Math.min(t.start,t.end);this._initialCaretOffset=Math.min(e,n),this._computedProposals=null,this._computeProposals(this._initialCaretOffset).then(function(e){if(this.isActive()){var t=this._flatten(e);t&&Array.isArray(t)&&0<t.length&&(this._computedProposals=e),this.dispatchEvent({type:"ProposalsComputed",data:{proposals:t},autoApply:!this._autoTriggered}),this._computedProposals&&this._filterText&&this.filterProposals(!0)}}.bind(this))},getPrefixStart:function(e,t){for(var n=t;n>0&&/[A-Za-z0-9_]/.test(e.getText(n-1,n));)n--;return n},handleError:function(e){"undefined"!=typeof console&&(console.log("Error retrieving content assist proposals"),console.log(e&&e.stack))},initialize:function(){this._providers.forEach(function(e){var t=e.provider;"function"==typeof t.initialize&&t.initialize()})},_computeProposals:function(t){var n=this._providers,i=this.textView,s=i.getSelection(),a=i.getModel(),l=t;a.getBaseModel&&(l=a.mapOffset(l),s.start=a.mapOffset(s.start),s.end=a.mapOffset(s.end),a=a.getBaseModel());for(var c=a.getLine(a.getLineAtOffset(l)),h=0;h<c.length&&/\s/.test(c.charAt(h));)h++;var d=c.substring(0,h),u=i.getOptions("tabSize","expandTab"),p=u.expandTab?new Array(u.tabSize+1).join(" "):"	",f=a.getLineDelimiter(),g=this,m=n.map(function(e){var t,n,i,h,u,m,v=e.provider,_=v.computePrefix;if(_){t=g.editorContextProvider,n=t.getEditorContext();var y=_.apply(v,[n,l]);return y.then(function(e){m={line:c,offset:l,prefix:e,selection:s,delimiter:f,tab:p,indentation:d};try{(h=v.computeContentAssist)?(m=o.mixin(m,t.getOptions()),u=h.apply(v,[n,m])):(h=v.getProposals||v.computeProposals)&&(u=h.apply(v,[a.getText(),l,m])),i=g.progress?g.progress.progress(u,"Generating content assist proposal"):u}catch(_){return(new r).reject(_)}return r.when(i)},function(e){return(new r).reject(e)})}m={line:c,offset:l,prefix:a.getText(g.getPrefixStart(a,l),l),selection:s,delimiter:f,tab:p,indentation:d};try{(h=v.computeContentAssist)?(t=g.editorContextProvider,n=t.getEditorContext(),m=o.mixin(m,t.getOptions()),u=h.apply(v,[n,m])):(h=v.getProposals||v.computeProposals)&&(u=h.apply(v,[a.getText(),l,m])),i=g.progress?g.progress.progress(u,"Generating content assist proposal"):u}catch(x){return(new r).reject(x)}return r.when(i)}),v=r.all(m,this.handleError);return this.pageMessage&&(v=r.when(v,function(t){g.pageMessage.close();var n=!1;if(t&&t.length>0)for(var i=0;i<t.length;i++)if(Array.isArray(t[i])&&t[i].length>0){n=!0;break}return n||g.pageMessage.setErrorMessage(e.noProposals),t}),this.pageMessage.showWhile(v,e.computingProposals)),v},filterProposals:function(e){if(this._computedProposals&&(this._latestModelChangingEvent||e)){var t=this.textView.getModel();t.getBaseModel&&(t=t.getBaseModel());var n=this.getPrefixStart(t,this._initialCaretOffset),i=this.textView.getText(n,this._initialCaretOffset),r=i,o=[];this._computedProposals.forEach(function(e){if(e&&Array.isArray(e)){var t=e.filter(function(e){function t(e,t){var n=t.replace(/([.+^=!:${}()|\[\]\/\\])/g,"\\$1");return n=n.replace(/([*?])/g,".$1"),new RegExp("^"+e+n,"i")}var n;if(!e)return!1;if(r="string"==typeof e.prefix?e.prefix:i,g[e.style]===g.hr||g[e.style]===g.noemphasis_title)return!0;var o="";if(e.overwrite){if(e.name)o=e.name;else{if(!e.proposal)return!1;o=e.proposal}return n=t(r,this._filterText),n.test(o)}if(e.name||e.proposal){var s=!1;return e.name&&(n=t(r,this._filterText),s=n.test(e.name)),!s&&e.proposal&&(n=t("",this._filterText),s=n.test(e.proposal)),s}return"string"==typeof e?(n=t("",this._filterText),n.test(e)):!1},this);t.length>0&&o.push(t)}},this);var s=[];o&&(o=this._removeExtraUnselectableElements(o),s=this._flatten(o)),this.dispatchEvent({type:"ProposalsComputed",data:{proposals:s},autoApply:!1})}},_removeExtraUnselectableElements:function(e){var t=e.map(function(e){var t=e.filter(function(t,n){var i=!0;if(g[t.style]===g.hr)0===n||e.length-1===n?i=!1:g.hr===g[e[n-1].style]&&(i=!1);else if(g[t.style]===g.noemphasis_title){var r=e[n+1];r?g[r.style]===g.noemphasis_title&&(i=!1):i=!1}return i});return t});return t},setEditorContextProvider:function(e){this.editorContextProvider=e},_generateProviderId:function(){return this._idcount?this._idcount++:this._idcount=0,"ContentAssistGeneratedID_"+this._idcount},setAutoTriggerEnabled:function(e){this._autoTriggerEnabled=e,this._updateAutoTriggerListenerState()},setProviders:function(e){var t=this;this.setProviderInfoArray(e.map(function(e){return e.id?e:{provider:e,id:t._generateProviderId()}}))},setProviderInfoArray:function(e){this.clearProviders(),this._providers=e,this._charTriggersInstalled=e.some(function(e){return e.charTriggers}),this._updateAutoTriggerListenerState()},getProviders:function(){return this._providers.slice()},clearProviders:function(){this._providers=[],this._charTriggersInstalled=!1,this._updateAutoTriggerListenerState()},setProgress:function(e){this.progress=e},setStyleAccessor:function(e){this._styleAccessor=e},_flatten:function(e){return e.reduce(function(e,t){var n=e,i=null;if(t&&Array.isArray(t)&&(i=t.filter(function(e){return e})),i&&Array.isArray(i)&&i.length>0){var r=i,o=e,s=i[0].style;if(s&&g[s]&&0===g[s].indexOf(g.noemphasis)&&(r=e,o=i),r.length>0){var a=r[r.length-1].style;a&&g.hr!==g[a]&&(r=r.concat({proposal:"",name:"",description:"---------------------------------",style:"hr",unselectable:!0}))}n=r.concat(o)}return n},[])},_triggerListener:function(){var e=this.textView.getCaretOffset(),t=null,n=[];if(this._charTriggersInstalled){var i=this.textView.getText(e-1,e);this._providers.forEach(function(r){var o=r.charTriggers;if(o&&o.test(i)){var s=!1,a=r.excludedStyles;this._styleAccessor&&a&&(t||(t=this._styleAccessor.getStyles(e-1)),s=t.some(function(e){return a.test(e.style)})),s||n.push(r)}},this),n.length>0&&this.activate(n,!0)}},_updateAutoTriggerListenerState:function(){this._boundTriggerListener||(this._boundTriggerListener=this._triggerListener.bind(this)),this._triggerListenerInstalled?this._autoTriggerEnabled&&this._charTriggersInstalled||(this.textView.removeEventListener("Modify",this._boundTriggerListener),this._triggerListenerInstalled=!1):this._autoTriggerEnabled&&this._charTriggersInstalled&&(this.textView.addEventListener("Modify",this._boundTriggerListener),this._triggerListenerInstalled=!0)},_addTextViewListeners:function(){this._textViewListenersAdded||(this.textView.addEventListener("ModelChanging",this._textViewListeners.onModelChanging),this.textView.addEventListener("Scroll",this._textViewListeners.onScroll),this.textView.addEventListener("Selection",this._textViewListeners.onSelection),this._textViewListenersAdded=!0)},_removeTextViewListeners:function(){this._textViewListenersAdded&&(this._latestModelChangingEvent=null,this.textView.removeEventListener("ModelChanging",this._textViewListeners.onModelChanging),this.textView.removeEventListener("Scroll",this._textViewListeners.onScroll),this.textView.removeEventListener("Selection",this._textViewListeners.onSelection),this._textViewListenersAdded=!1)},_updateFilterText:function(e){var t=e.removedCharCount;if(t){var n=this._filterText.length-t;this._filterText=this._filterText.substring(0,n)}var i=e.text;i&&(this._filterText=this._filterText.concat(i))}},i.EventTarget.addMixin(d.prototype),u.prototype=new n.KeyMode,o.mixin(u.prototype,{createKeyBindings:function(){var e=t.KeyBinding,n=[];return n.push({actionID:"contentAssistApply",keyBinding:new e(13)}),n.push({actionID:"contentAssistCancel",keyBinding:new e(27)}),n.push({actionID:"contentAssistNextProposal",keyBinding:new e(40)}),n.push({actionID:"contentAssistPreviousProposal",keyBinding:new e(38)}),n.push({actionID:"contentAssistNextPage",keyBinding:new e(34)}),n.push({actionID:"contentAssistPreviousPage",keyBinding:new e(33)}),n.push({actionID:"contentAssistHome",keyBinding:new e(c.KEY.HOME)}),n.push({actionID:"contentAssistEnd",keyBinding:new e(c.KEY.END)}),n.push({actionID:"contentAssistTab",keyBinding:new e(9)}),n},cancel:function(){this.getContentAssist().deactivate()},getContentAssist:function(){return this.contentAssist},getProposals:function(){return this.proposals},isActive:function(){return this.getContentAssist().isActive()},setActive:function(e){e?this.contentAssist.textView.addKeyMode(this):this.contentAssist.textView.removeKeyMode(this)},lineUp:function(e,t){return this.selectNew(e,t,!1)},lineDown:function(e,t){return this.selectNew(e,t,!0)},selectNew:function(e,t,n){var i=e;if(n){if(void 0===i&&(i=this.selectedIndex+1),i>=this.proposals.length){if(t)return!0;i=0}}else if(void 0===i&&(i=this.selectedIndex-1),0>i){if(t)return!0;i=this.proposals.length-1}for(var r=i;this.proposals[i]&&this.proposals[i].unselectable;){if(n){if(i++,i>=this.proposals.length){if(t)return!0;i=0}}else if(i--,0>i){if(t)return!0;i=this.proposals.length-1}if(i===r){i=-1;break}}return this.selectedIndex=i,this.widget&&this.widget.selectNode(i),this._showTooltip(!0),!0},_showTooltip:function(e,t){var n=s.Tooltip.getTooltip(this.contentAssist.textView),i=this,r={getTooltipInfo:function(){var e=i.widget.parentNode.getBoundingClientRect(),t={width:350,height:e.height,top:e.top};e.left+e.width>=document.documentElement.clientWidth?(t.left=e.left-t.width,t.left-=10):(t.left=e.left+e.width,t.left+=10);var n={context:{proposal:i.proposals[i.selectedIndex]},anchorArea:e,tooltipArea:t};return n}};e?n.update(r,t):n.show(r,!0,!1)},_hideTooltip:function(){var e=s.Tooltip.getTooltip(this.contentAssist.textView);e.hide(!0)},pageUp:function(){if(this.widget){var e=this.widget.getTopIndex();return e===this.selectedIndex&&(this.widget.scrollIndex(e,!1),e=this.widget.getTopIndex()),0===e?this.lineDown(e,!0):this.lineUp(e,!0)}return this.lineUp()},pageDown:function(){if(this.widget){var e=this.widget.getBottomIndex();return e===this.selectedIndex&&(this.widget.scrollIndex(e,!0),e=this.widget.getBottomIndex()),this.lineDown(e,!0)}return this.lineDown()},enter:function(){var e=this.proposals[this.selectedIndex]||null;return this.contentAssist.apply(e)},tab:function(){return this.widget?(this.widget.parentNode.focus(),!0):!1}}),p.prototype={onClick:function(e){e||(e=window.event),this.contentAssist.apply(this.getProposal(e.target||e.srcElement)),this.textView.focus()},onScroll:function(e){this.previousCloneNode&&!this.preserveCloneThroughScroll&&(this._removeCloneNode(),this.previousSelectedNode.classList.add(g.selected)),this.preserveCloneThroughScroll=!1},createDiv:function(e,t,n){var i=t.ownerDocument,r=l.createElement(i,"div");r.id="contentoption"+n,r.setAttribute("role","option"),r.className=g[e.style]?g[e.style]:g.dfault;var o;"hr"===e.style?o=l.createElement(i,"hr"):(o=this._createDisplayNode(e,n),r.contentAssistProposalIndex=n),r.appendChild(o),t.appendChild(r)},createAccessible:function(){var e=this._contentAssistMode,t=this;a.addEventListener(this.parentNode,"keydown",function(n){return n||(n=window.event),n.preventDefault&&n.preventDefault(),n.keyCode===c.KEY.ESCAPE?e.cancel():n.keyCode===c.KEY.UP?e.lineUp():n.keyCode===c.KEY.DOWN?e.lineDown():n.keyCode===c.KEY.ENTER?e.enter():n.keyCode===c.KEY.PAGEDOWN?e.pageDown():n.keyCode===c.KEY.PAGEUP?e.pageUp():n.keyCode===c.KEY.HOME?(t.scrollIndex(0,!0),e.lineDown(0)):n.keyCode===c.KEY.END?e.lineUp(e.getProposals().length-1):!1})},_createDisplayNode:function(e,t){var n=document.createElement("span");if(!e)return n;if("string"==typeof e){var i=this._createNameNode(e);return i.contentAssistProposalIndex=t,i}var r,o;if(e.name&&"string"==typeof e.name)r=this._createNameNode(e.name);else if(e.description&&"string"==typeof e.description)r=this._createNameNode(e.description),o=!0;else{if(!e.proposal||"string"!=typeof e.proposal)return n;r=this._createNameNode(e.proposal)}var s,a=this._createTagsNode(e.tags);return!o&&e.description&&"string"==typeof e.description&&(s=document.createTextNode(e.description)),a&&n.appendChild(a),n.appendChild(r),s&&n.appendChild(s),r.contentAssistProposalIndex=t,n.contentAssistProposalIndex=t,n},_stopResizeTimer:function(){this._resizeTimer&&(window.clearInterval(this._resizeTimer),this._resizeTimer=null)},_startResizeTimer:function(){this._stopResizeTimer(),this._cachedResizeBound=this.parentNode.getBoundingClientRect(),this._resizeTimer=window.setInterval(function(){if(this._contentAssistMode){var e=this.parentNode.getBoundingClientRect();if(e.left===this._cachedResizeBound.left&&e.top===this._cachedResizeBound.top&&e.width===this._cachedResizeBound.width&&e.height===this._cachedResizeBound.height)return;this._cachedResizeBound=e,this._contentAssistMode._showTooltip(!0,!0)}}.bind(this),100)},_createNameNode:function(e){var t=document.createElement("span");return t.classList.add("proposal-name"),t.appendChild(document.createTextNode(e)),t},_createTagsNode:function(e){var t=null;if(e&&e.constructor===Array&&e.length>0){t=document.createElement("span");for(var n=0;n<e.length;n++){var i=e[n];if(i.content||i.cssClass){var r=document.createElement("span");i.cssClass?r.classList.add(i.cssClass):r.classList.add("proposalTag"),i.content&&(r.textContent=i.content),t.appendChild(r)}}}return t},getProposal:function(e){var t=null,n=e.contentAssistProposalIndex;return void 0!==n&&(t=this._contentAssistMode.getProposals()[n]||null),t},getTopIndex:function(){for(var e=this.parentNode.childNodes,t=0;t<e.length;t++){var n=e[t];if(n.offsetTop>=this.parentNode.scrollTop)return t}return 0},getBottomIndex:function(){for(var e=this.parentNode.childNodes,t=0;t<e.length;t++){var n=e[t];if(n.offsetTop+n.offsetHeight>this.parentNode.scrollTop+this.parentNode.clientHeight)return Math.max(0,t-1)}return e.length-1},scrollIndex:function(e,t){var n=this.parentNode.childNodes[e];n&&(n.scrollIntoView(t),this.preserveCloneThroughScroll=!0)},selectNode:function(e){var t=null;if(this._hideTimeout&&(window.clearTimeout(this._hideTimeout),this._hideTimeout=null),this._fadeTimer&&(window.clearTimeout(this._fadeTimer),this._fadeTimer=null),this.previousSelectedNode&&(this.previousSelectedNode.classList.remove(g.selected),this.previousSelectedNode=null,this.previousCloneNode&&this._removeCloneNode()),-1!==e&&(t=this.parentNode.childNodes[e])){t.classList.add(g.selected),this.parentNode.setAttribute("aria-activedescendant",t.id),t.focus(),t.offsetTop<this.parentNode.scrollTop?(t.scrollIntoView(!0),this.preserveCloneThroughScroll=!0):t.offsetTop+t.offsetHeight>this.parentNode.scrollTop+this.parentNode.clientHeight&&(t.scrollIntoView(!1),this.preserveCloneThroughScroll=!0);var n=t.firstChild||t,i=n.getBoundingClientRect(),r=this.parentNode.clientWidth?this.parentNode.clientWidth:this.parentNode.getBoundingClientRect(),o=window.getComputedStyle(this.parentNode),s=window.getComputedStyle(t),a=parseInt(o.paddingLeft)+parseInt(o.paddingRight)+parseInt(s.paddingLeft)+parseInt(s.paddingRight);if(i.width>=r-a){var l=parseInt(o.top),c=t.cloneNode(!0);c.classList.add("cloneProposal"),c.style.top=l+t.offsetTop-this.parentNode.scrollTop+"px",c.style.left=o.left,c.setAttribute("id",c.id+"_clone");var h=document.documentElement.clientWidth,d=i.left+i.width-parseInt(h);if(d>0){var u=parseInt(o.left)-d;0>u&&(u=0),c.style.left=u+"px"}var p=document.createElement("div");p.id="clone_contentassist",p.classList.add("contentassist"),p.classList.add("cloneWrapper"),p.appendChild(c),p.onclick=this.parentNode.onclick,this.parentNode.parentNode.insertBefore(p,this.parentNode);var f=function(e){if(e.contentAssistProposalIndex=t.contentAssistProposalIndex,e.hasChildNodes())for(var n=0;n<e.childNodes.length;n++)f(e.childNodes[n])};f(p);var m=this;this._hideTimeout=window.setTimeout(function(){m._hideTimeout=null,t.classList.add(g.selected);var e=1;m._fadeTimer=window.setInterval(function(){!m.previousCloneNode||.01>=e?(m._removeCloneNode(),window.clearInterval(m._fadeTimer),m._fadeTimer=null):(p.style.opacity=e,p.style.filter="alpha(opacity="+100*e+")",e-=.1*e)},50)},1500),t.classList.remove(g.selected),this.previousCloneNode=p}}this.previousSelectedNode=t},setContentAssistMode:function(e){this._contentAssistMode=e},show:function(){var e=this._contentAssistMode.getProposals();if(0===e.length)this.hide();else{this.parentNode.innerHTML="";for(var t=0;t<e.length;t++)this.createDiv(e[t],this.parentNode,t);this.position(),this.parentNode.onclick=this.onClick.bind(this),this.isShowing=!0,this._contentAssistMode._showTooltip(!1),this._useResizeTimer?this._startResizeTimer():this._mutationObserver&&this._mutationObserver.observe(this.parentNode,{attributes:!0}),this.textViewListenerAdded||(this.textView.addEventListener("MouseDown",this.textViewListener.onMouseDown),this.textViewListenerAdded=!0)}},hide:function(){this.parentNode.ownerDocument.activeElement===this.parentNode&&this.textView.focus(),this.parentNode.style.display="none",this.parentNode.onclick=null,this.isShowing=!1,this._useResizeTimer?this._stopResizeTimer():this._mutationObserver&&this._mutationObserver.disconnect(),this._contentAssistMode._hideTooltip(),this.textViewListenerAdded&&(this.textView.removeEventListener("MouseDown",this.textViewListener.onMouseDown),this.textViewListenerAdded=!1),this.previousSelectedNode&&(this.previousSelectedNode=null,this.previousCloneNode&&this._removeCloneNode())},position:function(){var e,t=this.contentAssist,n=this.textView;if(void 0!==t.offset){e=t.offset;var i=n.getModel();i.getBaseModel&&(e=i.mapOffset(e,!0))}else e=this.textView.getCaretOffset();var r=n.getLocationAtOffset(e);r.y+=n.getLineHeight(),this.textView.convert(r,"document","page"),this.parentNode.style.position="fixed",this.parentNode.style.left=r.x+"px",this.parentNode.style.top=r.y+"px",this.parentNode.style.display="block",this.parentNode.scrollTop=0;var o=this.parentNode.ownerDocument,s=o.documentElement.clientWidth,a=o.documentElement.clientHeight,l=a-r.y;if(this.parentNode.offsetHeight>l){var c=r.y-this.textView.getLineHeight();this.parentNode.offsetHeight>c?l>c?this.parentNode.style.maxHeight=l+"px":(this.parentNode.style.maxHeight=c+"px",this.parentNode.style.top="0"):(this.parentNode.style.top=r.y-this.parentNode.offsetHeight-this.textView.getLineHeight()+"px",this.parentNode.style.maxHeight=c+"px")}else this.parentNode.style.maxHeight=l+"px";if(r.x+this.parentNode.offsetWidth>s){var h=s-this.parentNode.offsetWidth;0>h&&(h=0),this.parentNode.style.left=h+"px",this.parentNode.style.maxWidth=s-h}else this.parentNode.style.maxWidth=s+r.x+"px"},_removeCloneNode:function(){this.parentNode.parentNode.contains(this.previousCloneNode)&&this.parentNode.parentNode.removeChild(this.previousCloneNode),this.previousCloneNode=null}},{ContentAssist:d,ContentAssistMode:u,ContentAssistWidget:p}});var l="wixsdk",c="wixdata",h={FORMAT_CODE:["c",!0,!0,!1,!1]},d={UNDO:"orion.edit.undo",REDO:"orion.edit.redo"},u={FIND_REPLACE:"find"};return n("wix-code/constants",[],function(){return{Identifier:"Identifier",Literal:"Literal",CallExpression:"CallExpression",ExpressionStatement:"ExpressionStatement",MemberExpression:"MemberExpression",AssignmentExpression:"AssignmentExpression",ImportDeclaration:"ImportDeclaration",ImportSpecifier:"ImportSpecifier",ImportDefaultSpecifier:"ImportDefaultSpecifier",WIX_SDK_PREFIX:l,WIX_SELECTOR_PLUGIN_NAME:"wixselector",WIX_NAMESPACE_PLUGIN_NAME:"wixnamespace",WIX_DATA_PREFIX:c,WIX_DATA_PLUGIN_NAME:c,WIX_JS_PLUGIN_NAME:"JavaScript",WIX_DATA_IMPORT:"wix-data",WIX_DOLLAR:"$w",CONSOLE:"console",shortcuts:h,commandIds:d,actionIds:u,CMD_MEDIA_MANAGER:"mediamanager",CMD_MEDIA_IMAGE:"mediaimage"}}),n("wix-code/media/mediaManager",[],function(){function e(e,t){c=e,h=t}function t(){c=void 0,h=void 0,d=[]}function n(){if(!c||!h)throw new Error("Media manager is not initialized")}function i(){return n(),c.openMediaManager().then(function(e){return e&&s(e),h.focus(),e})}function r(e,t,i){return n(),c.getUrlFromImageData(e,t,i)}function o(e){return n(),c.extractImageDataFromWixCodeUri(e)}function s(e){3===d.length&&d.pop(),-1===d.indexOf(e)&&d.unshift(e)}function a(){return d}function l(e){return n(),c.isWixUri(e)}var c,h,d=[];return{initialize:e,destroy:t,open:i,getUrlFromImageData:r,extractImageDataFromWixCodeUri:o,getRecentlyUsedUris:a,isWixUri:l}}),n("wix-code/media/mediaUtils",[],function(){function e(e,t,n){var i=e?'"'+n+'"':n;return t?" = "+i:i}return{buildProposal:e}}),n("wix-code/utils/expressionParser",["orion/editor/textModel"],function(e){function t(e){this.model=e}function n(e,t,n){return n.charAt(t)!==(e?e:")")}function i(){return{found:!1}}function r(e){if("string"==typeof e)return e;if(e instanceof a)return new t(e);throw new Error("Bad source type")}function o(e,t){return"("===e.charAt(t-1)&&"w"===e.charAt(t-2)&&"$"===e.charAt(t-3)}var s=["\n"," ","!","%","&","*","+",",","-",".","/",":",";","<","=",">","[","]","`","{","|","}"],a=e.TextModel;return t.prototype.charAt=function(e){return this.model.getText(e,e+1).charAt(0)},function(e,t){for(var a=r(e),l=t,c=!1;l>2;){if(o(a,l))return{found:!0,offset:c?l+1:l,invalidSyntax:n(c,t,a)};if('"'===a.charAt(l-1))c='"';else if("'"===a.charAt(l-1))c="'";else if(-1!==s.indexOf(a.charAt(l-1)))return i();l--}return i()}}),n("wix-code/utils/textUtils",["wix-code/utils/expressionParser"],function(e){return{getStartOfLine:function(e,t,n){var i=e;for(n=void 0===n?!1:n;i>=0;){var r=t.charCodeAt(i);if(10===r){if(i+1<t.length)return 13===t.charCodeAt(i+1)?i+2:i+1}else{if(13===r)return i+1;if(9!==r&&32!==r&&!n&&i!==e)return-1}i--}return-1},getStartOfContent:function(e,t){for(var n=e;n<t.length;){var i=t.charCodeAt(n);switch(i){case 10:case 32:case 9:case 13:n++;break;default:return n}}return n},computeIndent:function(e,t,n){if(!e||0>t)return"";for(var i=t,r=e[i],o=n?"	":"";" "===r||"	"===r;)o+=r,r=e[++i];return o},getStartOfContentReverse:function(e,t){for(var n=e;n>=0;){var i=t.charCodeAt(n);switch(i){case 10:case 32:case 9:case 13:n--;break;default:return n}}return n},isSpanningSelection:function(e,t,n){return e.start===e.end?!1:n?!0:!(0===e.start&&e.end===t)},processLines:function(e,t){for(var n="",i=e.split(/\n|\r\n/),r=0;r<i.length;r++)n+=t(i[r],n,r);return n},getPrefixStart:function(t,n){if("."!==t.substring(n-1,n)){var i=e(t,n);if(1==i.found)return i.offset}for(var r=n;r>0&&/[A-Za-z0-9_\\$]/.test(t.substring(r-1,r));)r--;return r}}}),n("wix-code/wixCodeContentAssistWidget",["orion/editor/util","orion/util","orion/webui/littlelib","marked/marked"],function(e,t,n,i){function r(e){return e.replace(/&([#\w]+);/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function o(e){var t=new i.Renderer;return t.link=function(e,t,n){if(this.options.sanitize){try{var i=decodeURIComponent(r(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(o){return""}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:"))return""}var s='<a href="'+e+'"';return t&&(s+=' title="'+t+'"'),s+=' target="_blank">'+n+"</a>"},i(e,{renderer:t,sanitize:!0})}function s(e,t){if(e.contentAssistProposalIndex=t.contentAssistProposalIndex,e.hasChildNodes())for(var n=0;n<e.childNodes.length;n++)s(e.childNodes[n],t)}function a(n,i){this.contentAssist=n,this.textView=this.contentAssist.getTextView(),this.textViewListenerAdded=!1,this.isShowing=!1;var r=this.textView.getOptions("parent").ownerDocument;if(this.parentNode="string"==typeof i?r.getElementById(i):i,!this.parentNode){this.parentNode=t.createElement(r,"div"),this.parentNode.className=c;var o=r.getElementsByTagName("body")[0];o.appendChild(this.parentNode)}this.proposalContainerNode=t.createElement(r,"div"),this.proposalContainerNode.className="proposal-container",this.docsContainerNode=t.createElement(r,"div"),this.docsContainerNode.classList.add("docs-container"),this.parentNode.appendChild(this.proposalContainerNode),this.parentNode.appendChild(this.docsContainerNode),e.addEventListener(this.proposalContainerNode,"scroll",this.onScroll.bind(this));var s=this;this.textViewListener={onMouseDown:function(e){var t=e.event.target||e.event.srcElement;t.parentElement!==s.parentNode&&s.contentAssist.deactivate()}},this.contentAssist.addEventListener("Deactivating",function(e){s.hide()}),this.scrollListener=function(e){s.isShowing&&s.position()},e.addEventListener(r,"scroll",this.scrollListener),this.parentNode.tabIndex=-1,this.parentNode.addEventListener("focusout",function(){s.contentAssist.deactivate()}),this.textView.addEventListener("Blur",function(){s.parentNode.contains(window.event.relatedTarget)||s.contentAssist.deactivate()})}var l={selected:"selected",hr:"proposal-hr",emphasis:"proposal-emphasis",noemphasis:"proposal-noemphasis",noemphasis_keyword:"proposal-noemphasis-keyword",noemphasis_title:"proposal-noemphasis-title",noemphasis_title_keywords:"proposal-noemphasis-title-keywords",dfault:"proposal-default"},c="wix-code-content-assist";return a.prototype={populateDocs:function(){var e=this._contentAssistMode.getProposals()[this._contentAssistMode.selectedIndex];this.docsContainerNode.innerHTML=o(e.hover.content)},onClick:function(e){e||(e=window.event),this.contentAssist.apply(this.getProposal(e.target||e.srcElement)),this.textView.focus()},onScroll:function(e){
this.previousCloneNode&&!this.preserveCloneThroughScroll&&(this._removeCloneNode(),this.previousSelectedNode.classList.add(l.selected)),this.preserveCloneThroughScroll=!1},createDiv:function(e,n,i){var r=n.ownerDocument,o=t.createElement(r,"div");o.id="contentoption"+i,o.setAttribute("role","option"),o.className=l[e.style]?l[e.style]:l.dfault;var s;"hr"===e.style?s=t.createElement(r,"hr"):(s=this._createDisplayNode(e,i),o.contentAssistProposalIndex=i),o.appendChild(s),n.appendChild(o)},createAccessible:function(){function t(e){return e.preventDefault&&e.preventDefault(),e.keyCode===n.KEY.ESCAPE?i.cancel():e.keyCode===n.KEY.UP?i.lineUp():e.keyCode===n.KEY.DOWN?i.lineDown():e.keyCode===n.KEY.ENTER?i.enter():e.keyCode===n.KEY.PAGEDOWN?i.pageDown():e.keyCode===n.KEY.PAGEUP?i.pageUp():e.keyCode===n.KEY.HOME?(r.scrollIndex(0,!0),i.lineDown(0)):e.keyCode===n.KEY.END?i.lineUp(i.getProposals().length-1):!1}var i=this._contentAssistMode,r=this;e.addEventListener(this.proposalContainerNode,"keydown",function(e){return e||(e=window.event),t(e)}),this.parentNode.addEventListener("keydown",t)},_createDisplayNode:function(e,t){var n=document.createElement("span");if(!e)return n;if("string"==typeof e){var i=this._createNameNode(e);return i.contentAssistProposalIndex=t,i}var r,o;if(e.name&&"string"==typeof e.name)r=this._createNameNode(e.name);else if(e.description&&"string"==typeof e.description)r=this._createNameNode(e.description),o=!0;else{if(!e.proposal||"string"!=typeof e.proposal)return n;r=this._createNameNode(e.proposal)}var s,a=this._createTagsNode(e.tags);return!o&&e.description&&"string"==typeof e.description&&(s=document.createTextNode(e.description)),a&&n.appendChild(a),n.appendChild(r),s&&n.appendChild(s),r.contentAssistProposalIndex=t,n.contentAssistProposalIndex=t,n},_createNameNode:function(e){var t=document.createElement("span");return t.classList.add("proposal-name"),t.appendChild(document.createTextNode(e)),t},_createTagsNode:function(e){var t=null;if(e&&e.constructor===Array&&e.length>0){t=document.createElement("span");for(var n=0;n<e.length;n++){var i=e[n];if(i.content||i.cssClass){var r=document.createElement("span");i.cssClass?r.classList.add(i.cssClass):r.classList.add("proposalTag"),i.content&&(r.textContent=i.content),t.appendChild(r)}}}return t},getProposal:function(e){var t=null,n=e.contentAssistProposalIndex;return void 0!==n&&(t=this._contentAssistMode.getProposals()[n]||null),t},getTopIndex:function(){for(var e=this.proposalContainerNode.childNodes,t=0;t<e.length;t++){var n=e[t];if(n.offsetTop>=this.proposalContainerNode.scrollTop)return t}return 0},getBottomIndex:function(){for(var e=this.proposalContainerNode.childNodes,t=0;t<e.length;t++){var n=e[t];if(n.offsetTop+n.offsetHeight>this.proposalContainerNode.scrollTop+this.proposalContainerNode.clientHeight)return Math.max(0,t-1)}return e.length-1},scrollIndex:function(e,t){var n=this.proposalContainerNode.childNodes[e];n&&(n.scrollIntoView(t),this.preserveCloneThroughScroll=!0)},selectNode:function(e){var t=null;if(this._hideTimeout&&(window.clearTimeout(this._hideTimeout),this._hideTimeout=null),this._fadeTimer&&(window.clearTimeout(this._fadeTimer),this._fadeTimer=null),this.previousSelectedNode&&(this.previousSelectedNode.classList.remove(l.selected),this.previousSelectedNode=null,this.previousCloneNode&&this._removeCloneNode()),-1!==e&&(t=this.proposalContainerNode.childNodes[e])){t.classList.add(l.selected),this.parentNode.setAttribute("aria-activedescendant",t.id),t.focus(),t.offsetTop<this.proposalContainerNode.scrollTop?(t.scrollIntoView(!0),this.preserveCloneThroughScroll=!0):t.offsetTop+t.offsetHeight>this.proposalContainerNode.scrollTop+this.proposalContainerNode.clientHeight&&(t.scrollIntoView(!1),this.preserveCloneThroughScroll=!0),this.populateDocs();var n=t.firstChild||t,i=n.getBoundingClientRect(),r=this.proposalContainerNode.clientWidth?this.proposalContainerNode.clientWidth:this.proposalContainerNode.getBoundingClientRect(),o=window.getComputedStyle(this.parentNode),a=window.getComputedStyle(t),h=parseInt(o.paddingLeft)+parseInt(o.paddingRight)+parseInt(a.paddingLeft)+parseInt(a.paddingRight);if(i.width>=r-h){var d=parseInt(o.top),u=t.cloneNode(!0);u.classList.add("clone-proposal"),u.style.top=d+t.offsetTop-this.proposalContainerNode.scrollTop+"px",u.style.left=o.left,u.setAttribute("id",u.id+"_clone");var p=document.documentElement.clientWidth,f=i.left+i.width-parseInt(p);if(f>0){var g=parseInt(o.left)-f;0>g&&(g=0),u.style.left=g+"px"}var m=document.createElement("div");m.id="clone_contentassist",m.classList.add(c),m.classList.add("clone-wrapper"),m.appendChild(u),m.onclick=this.proposalContainerNode.onclick,this.parentNode.parentNode.insertBefore(m,this.parentNode),s(u,t);var v=this;this._hideTimeout=window.setTimeout(function(){v._hideTimeout=null,t.classList.add(l.selected);var e=1;v._fadeTimer=window.setInterval(function(){!v.previousCloneNode||.01>=e?(v._removeCloneNode(),window.clearInterval(v._fadeTimer),v._fadeTimer=null):(m.style.opacity=e,m.style.filter="alpha(opacity="+100*e+")",e-=.1*e)},50)},1500),t.classList.remove(l.selected),this.previousCloneNode=m}}this.previousSelectedNode=t},setContentAssistMode:function(e){this._contentAssistMode=e},show:function(){var e=this._contentAssistMode.getProposals();if(0===e.length)this.hide();else{this.proposalContainerNode.innerHTML="";for(var t=0;t<e.length;t++)this.createDiv(e[t],this.proposalContainerNode,t);this.populateDocs(),this.position(),this.proposalContainerNode.onclick=this.onClick.bind(this),this.isShowing=!0,this.textViewListenerAdded||(this.textView.addEventListener("MouseDown",this.textViewListener.onMouseDown),this.textViewListenerAdded=!0)}},hide:function(){this.parentNode.ownerDocument.activeElement===this.parentNode&&this.textView.focus(),this.parentNode.style.display="none",this.proposalContainerNode.onclick=null,this.isShowing=!1,this.textViewListenerAdded&&(this.textView.removeEventListener("MouseDown",this.textViewListener.onMouseDown),this.textViewListenerAdded=!1),this.previousSelectedNode&&(this.previousSelectedNode=null,this.previousCloneNode&&this._removeCloneNode())},position:function(){var e,t=this.contentAssist,n=this.textView;if(void 0!==t.offset){e=t.offset;var i=n.getModel();i.getBaseModel&&(e=i.mapOffset(e,!0))}else e=this.textView.getCaretOffset();var r=n.getLocationAtOffset(e);r.y+=n.getLineHeight(),this.textView.convert(r,"document","page"),this.parentNode.style.position="fixed",this.parentNode.style.left=r.x+"px",this.parentNode.style.top=r.y+"px",this.parentNode.style.display="flex",this.proposalContainerNode.scrollTop=0;var o=this.parentNode.ownerDocument,s=o.documentElement.clientWidth,a=o.documentElement.clientHeight,l=a-r.y;if(this.parentNode.offsetHeight>l){var c=r.y-this.textView.getLineHeight();this.parentNode.offsetHeight>c?l>c?this.parentNode.style.maxHeight=l+"px":(this.parentNode.style.maxHeight=c+"px",this.parentNode.style.top="0"):(this.parentNode.style.top=r.y-this.parentNode.offsetHeight-this.textView.getLineHeight()+"px",this.parentNode.style.maxHeight=c+"px")}else this.parentNode.style.maxHeight=l+"px";if(r.x+this.parentNode.offsetWidth>s){var h=s-this.parentNode.offsetWidth;0>h&&(h=0),this.parentNode.style.left=h+"px",this.parentNode.style.maxWidth=s-h}else this.parentNode.style.maxWidth=s+r.x+"px"},_removeCloneNode:function(){this.parentNode.parentNode.contains(this.previousCloneNode)&&this.parentNode.parentNode.removeChild(this.previousCloneNode),this.previousCloneNode=null}},a}),n("wix-code/orion-overrides/orion/editor/contentAssist",["orion/editor/contentAssist","wix-code/constants","wix-code/media/mediaManager","wix-code/media/mediaUtils","wix-code/utils/textUtils","wix-code/wixCodeContentAssistWidget"],function(e,t,n,i,r,o){var s=e.ContentAssist.prototype.apply;return e.ContentAssist.prototype.apply=function(e){var r=this,o=this._initialCaretOffset;if(e.wixtype===t.CMD_MEDIA_MANAGER)return n.open().then(function(t){if(t){var n=i.buildProposal(e.wrapWithQuotes,e.addEquals,t),s=r.textView,a=s.getSelection(),l=o,c=Math.max(a.start,a.end);s.setText(n,l,c)}}),!0;var a=s.call(this,e);return a},e.ContentAssist.prototype.getPrefixStart=function(e,t){var n=e.getText();return r.getPrefixStart(n,t)},e.ContentAssistMode.prototype._showTooltip=function(){},e.ContentAssistWidget=o,e}),n("orion/editor/emacs",["i18n!orion/editor/nls/messages","orion/editor/keyModes","orion/keyBinding","orion/util"],function(e,t,n,i){function r(e){t.KeyMode.call(this,e)}return r.prototype=new t.KeyMode,r.prototype.createKeyBindings=function(){var e=[];e.push({actionID:"emacs-beginning-of-line",keyBinding:this._createStroke("a",!i.isMac,!1,!1,i.isMac)}),e.push({actionID:"emacs-end-of-line",keyBinding:this._createStroke("e",!i.isMac,!1,!1,i.isMac)}),e.push({actionID:"emacs-forward-char",keyBinding:this._createStroke("f",!i.isMac,!1,!1,i.isMac)}),e.push({actionID:"emacs-backward-char",keyBinding:this._createStroke("b",!i.isMac,!1,!1,i.isMac)}),e.push({actionID:"emacs-forward-word",keyBinding:this._createStroke("f",!1,!1,!0)}),e.push({actionID:"emacs-backward-word",keyBinding:this._createStroke("b",!1,!1,!0)}),e.push({actionID:"emacs-next-line",keyBinding:this._createStroke("n",!i.isMac,!1,!1,i.isMac)}),e.push({actionID:"emacs-previous-line",keyBinding:this._createStroke("p",!i.isMac,!1,!1,i.isMac)}),e.push({actionID:"emacs-beginning-of-buffer",keyBinding:this._createStroke(188,!1,!0,!0)}),e.push({actionID:"emacs-end-of-buffer",keyBinding:this._createStroke(190,!1,!0,!0)}),e.push({actionID:"emacs-delete-backward-char",keyBinding:this._createStroke(46,!i.isMac,!1,!1,i.isMac)}),e.push({actionID:"emacs-delete-char",keyBinding:this._createStroke("d",!i.isMac,!1,!1,i.isMac)}),e.push({actionID:"emacs-kill-line",keyBinding:this._createStroke("k",!i.isMac,!1,!1,i.isMac)}),e.push({actionID:"emacs-kill-word",keyBinding:this._createStroke("d",!1,!1,!0)}),e.push({actionID:"emacs-backward-kill-word",keyBinding:this._createStroke(46,!1,!1,!0)}),e.push({actionID:"undo",keyBinding:this._createSequence([this._createStroke("x",!0),this._createStroke("u")])}),e.push({actionID:"redo",keyBinding:this._createSequence([this._createStroke("x",!0),this._createStroke("r")])}),e.push({actionID:"emacs-scroll-up",keyBinding:this._createStroke("v",!i.isMac,!1,!1,i.isMac)}),e.push({actionID:"emacs-scroll-down",keyBinding:this._createStroke("v",!1,!1,!0)}),e.push({actionID:"emacs-set-mark-command",keyBinding:this._createStroke(" ",!i.isMac,!1,!1,i.isMac)}),e.push({actionID:"emacs-reset-mark-command",keyBinding:this._createStroke("g",!i.isMac,!1,!1,i.isMac)}),e.push({actionID:"emacs-exchange-point-and-mark",keyBinding:this._createSequence([this._createStroke("x",!i.isMac,!1,!1,i.isMac),this._createStroke("x",!i.isMac,!1,!1,i.isMac)])});for(var t=0;9>=t;t++)e.push({actionID:"emacs-digit-argument-"+t,keyBinding:this._createStroke(48+t,!i.isMac,!1,!1,i.isMac)}),e.push({actionID:"emacs-digit-argument-"+t,keyBinding:this._createStroke(48+t,!1,!1,!0)}),e.push({actionID:"emacs-digit-argument-"+t,keyBinding:this._createStroke(48+t,!i.isMac,!1,!0,i.isMac)});return e.push({actionID:"emacs-negative-argument",keyBinding:this._createStroke(189,!i.isMac,!1,!1,i.isMac)}),e.push({actionID:"emacs-negative-argument",keyBinding:this._createStroke(189,!1,!1,!0)}),e.push({actionID:"emacs-negative-argument",keyBinding:this._createStroke(189,!i.isMac,!1,!0,i.isMac)}),e.push({actionID:"emacs-uppercase",keyBinding:this._createStroke("u",!1,!1,!0)}),e.push({actionID:"emacs-lowercase",keyBinding:this._createStroke("l",!1,!1,!0)}),e.push({actionID:"emacs-capitalize",keyBinding:this._createStroke("c",!1,!1,!0)}),e.push({actionID:"contentAssist",keyBinding:this._createStroke(191,!1,!1,!0)}),e.push({actionID:"find",keyBinding:this._createStroke("r",!1,!1,!0)}),e.push({actionID:"incrementalFind",keyBinding:this._createStroke("s",!0)}),e.push({actionID:"incrementalFindReverse",keyBinding:this._createStroke("r",!0)}),e.push({actionID:"save",keyBinding:this._createSequence([this._createStroke("x",!i.isMac,!1,!1,i.isMac),this._createStroke("s",!i.isMac,!1,!1,i.isMac)])}),this._createActions(this.getView()),e},r.prototype._createStroke=function(t,i,r,o,s){var a=new n.KeyStroke(t,i,r,o,s);return a.scopeName=e.emacs,a},r.prototype._createSequence=function(t){var i=new n.KeySequence(t);return i.scopeName=e.emacs,i},r.prototype._getData=function(){var e={count:(this._argument||1)*(this._sign||1)};return this._argument=0,this._sign=1,e},r.prototype._moveCursor=function(e){var t=this._getData();this._marker&&(t.select=!0);var n=this.getView();return n.invokeAction(e,!1,t)},r.prototype._digitArgument=function(e){return this._argument=10*(this._argument||0)+e,!0},r.prototype._negativeArgument=function(){return this._sign=-1*(this._sign||1),!0},r.prototype._createActions=function(t){var n=this;t.setAction("emacs-beginning-of-line",function(){return n._moveCursor("lineStart")},{name:e.lineStart}),t.setAction("emacs-end-of-line",function(){return n._moveCursor("lineEnd")},{name:e.lineEnd}),t.setAction("emacs-forward-char",function(){return n._moveCursor("charNext")},{name:e.charNext}),t.setAction("emacs-backward-char",function(){return n._moveCursor("charPrevious")},{name:e.charPrevious}),t.setAction("emacs-forward-word",function(){return n._moveCursor("wordNext")},{name:e.wordNext}),t.setAction("emacs-backward-word",function(){return n._moveCursor("wordPrevious")},{name:e.wordPrevious}),t.setAction("emacs-next-line",function(){return n._moveCursor("lineDown")},{name:e.lineDown}),t.setAction("emacs-previous-line",function(){return n._moveCursor("lineUp")},{name:e.lineUp}),t.setAction("emacs-beginning-of-buffer",function(){return n._moveCursor("textStart")},{name:e.textStart}),t.setAction("emacs-end-of-buffer",function(){return n._moveCursor("textEnd")},{name:e.textEnd}),t.setAction("emacs-delete-backward-char",function(){return t.invokeAction("deletePrevious")},{name:e.deletePrevious}),t.setAction("emacs-delete-char",function(){return t.invokeAction("deletePrevious")},{name:e.deletePrevious}),t.setAction("emacs-kill-line",function(){return t.invokeAction("deleteLineEnd")},{name:e.deleteLineEnd}),t.setAction("emacs-kill-word",function(){return t.invokeAction("deleteWordNext")},{name:e.deleteWordNext}),t.setAction("emacs-backward-kill-word",function(){return t.invokeAction("deleteWordPrevious")},{name:e.deleteWordPrevious}),t.setAction("emacs-scroll-up",function(){return n._moveCursor("pageDown")},{name:e.pageDown}),t.setAction("emacs-scroll-down",function(){return n._moveCursor("pageUp")},{name:e.pageUp}),t.setAction("emacs-set-mark-command",function(){var e=t.getCaretOffset();return t.setCaretOffset(e),n._marker=e,!0},{name:e.setMarkCommand}),t.setAction("emacs-exchange-point-and-mark",function(){if(void 0!==n._marker){var e=t.getCaretOffset(),i=t.getSelection();if(i.end===e){var r=i.start;i.start=i.end,i.end=r}n._marker=e,t.setSelection(i.start,i.end)}return!0},{name:e.exchangeMarkPoint}),t.setAction("emacs-reset-mark-command",function(){var e=t.getCaretOffset();return t.setCaretOffset(e),n._marker=void 0,!0},{name:e.clearMark}),t.setAction("emacs-digit-argument-0",function(){return n._digitArgument(0)},{name:i.formatMessage(e.digitArgument,"0")}),t.setAction("emacs-digit-argument-1",function(){return n._digitArgument(1)},{name:i.formatMessage(e.digitArgument,"1")}),t.setAction("emacs-digit-argument-2",function(){return n._digitArgument(2)},{name:i.formatMessage(e.digitArgument,"2")}),t.setAction("emacs-digit-argument-3",function(){return n._digitArgument(3)},{name:i.formatMessage(e.digitArgument,"3")}),t.setAction("emacs-digit-argument-4",function(){return n._digitArgument(4)},{name:i.formatMessage(e.digitArgument,"4")}),t.setAction("emacs-digit-argument-5",function(){return n._digitArgument(5)},{name:i.formatMessage(e.digitArgument,"5")}),t.setAction("emacs-digit-argument-6",function(){return n._digitArgument(6)},{name:i.formatMessage(e.digitArgument,"6")}),t.setAction("emacs-digit-argument-7",function(){return n._digitArgument(7)},{name:i.formatMessage(e.digitArgument,"7")}),t.setAction("emacs-digit-argument-8",function(){return n._digitArgument(8)},{name:i.formatMessage(e.digitArgument,"8")}),t.setAction("emacs-digit-argument-9",function(){return n._digitArgument(9)},{name:i.formatMessage(e.digitArgument,"9")}),t.setAction("emacs-negative-argument",function(){return n._negativeArgument()},{name:e.negativeArgument}),t.setAction("emacs-uppercase",function(){var e=n._getData();return e.unit="word",t.invokeAction("uppercase",!1,e)},{name:e.uppercase}),t.setAction("emacs-lowercase",function(){var e=n._getData();return e.unit="word",t.invokeAction("lowercase",!1,e)},{name:e.lowercase}),t.setAction("emacs-capitalize",function(){var e=n._getData();return e.unit="word",t.invokeAction("capitalize",!1,e)},{name:e.capitalize})},{EmacsMode:r}}),n("orion/editor/vi",["i18n!orion/editor/nls/messages","orion/editor/keyModes","orion/keyBinding","orion/util"],function(e,t,n,i){function r(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function o(t,i,r,o,s,a,l){var c=new n.KeyStroke(t,i,r,o,s,a);return c.scopeName=l||e.vi,c}function s(t,i){var r=new n.KeySequence(t);return r.scopeName=i||e.vi,r}function a(e,n,i){this.key=n,this.msg=i,this.number="",t.KeyMode.call(this,e),e&&this._createActions(e)}function l(e){var n=e.getView();this.viMode=e,t.KeyMode.call(this,n),this._createActions(n)}function c(e,t,n,i){this.viMode=e,this.nextMode=t,a.call(this,e.getView(),n,i)}function h(e){var n=e.getView();t.KeyMode.call(this,n),this.viMode=e,this._createActions(n)}function d(t,n){a.call(this,t,"",e.vimove),this.insertMode=new h(this),this.changeMode=new c(this,this.insertMode,"c",e.vichange),this.deleteMode=new c(this,this,"d",e.videlete),this.yankMode=new c(this,this,"y",e.viyank),this.statusReporter=n}var u,p;return a.prototype=new t.KeyMode,r(a.prototype,{_msg:function(t){return{name:i.formatMessage(e[t],this.msg)}},createKeyBindings:function(){var e=[],t=this.key;t=t?"-"+t+"-":"-";for(var n=0;9>=n;n++)e.push({actionID:"vi"+t+n,keyBinding:o(n+"",!1,!1,!1,!1,"keypress"),predefined:!0});return e.push({actionID:"vi"+t+"Left",keyBinding:o("h",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"Left",keyBinding:o("h",!0,!1,!1,!1)}),e.push({actionID:"vi"+t+"Left",keyBinding:o(8)}),e.push({actionID:"vi"+t+"Left",keyBinding:o(37)}),e.push({actionID:"vi"+t+"Down",keyBinding:o("j",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"Down",keyBinding:o(40)}),e.push({actionID:"vi"+t+"Up",keyBinding:o("k",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"Up",keyBinding:o(38)}),e.push({actionID:"vi"+t+"Right",keyBinding:o("l",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"Right",keyBinding:o(39)}),e.push({actionID:"vi"+t+"Right",keyBinding:o(32)}),e.push({actionID:"vi"+t+"w",keyBinding:o("w",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"b",keyBinding:o("b",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"W",keyBinding:o("W",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"B",keyBinding:o("B",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"e",keyBinding:o("e",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"E",keyBinding:o("E",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"$",keyBinding:o("$",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"^_",keyBinding:o("^",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"^_",keyBinding:o("_",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"+",keyBinding:o("+",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"+",keyBinding:o(13)}),e.push({actionID:"vi"+t+"-",keyBinding:o("-",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"|",keyBinding:o("|",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"H",keyBinding:o("H",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"M",keyBinding:o("M",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"L",keyBinding:o("L",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"/",keyBinding:o("/",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"?",keyBinding:o("?",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"n",keyBinding:o("n",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"N",keyBinding:o("N",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"f",keyBinding:o("f",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"F",keyBinding:o("F",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"t",keyBinding:o("t",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"T",keyBinding:o("T",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+",",keyBinding:o(",",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+";",keyBinding:o(";",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi"+t+"G",keyBinding:o("G",!1,!1,!1,!1,"keypress")}),e},_createActions:function(e){function t(t){for(var n=e.getModel(),i=n.getLine(t),r=0,o=i.charCodeAt(r);32===o||9===o;)r++,o=i.charCodeAt(r);return r}function n(e,t){e&&r.getView().setCaretOffset(e.start),t.editDone&&t.editDone()}var i=this.key;i=i?"-"+i+"-":"-";var r=this;e.setAction("vi"+i+"0",function(){return r._storeNumber(0)}),e.setAction("vi"+i+"1",function(){return r._storeNumber(1)}),e.setAction("vi"+i+"2",function(){return r._storeNumber(2)}),e.setAction("vi"+i+"3",function(){return r._storeNumber(3)}),e.setAction("vi"+i+"4",function(){return r._storeNumber(4)}),e.setAction("vi"+i+"5",function(){return r._storeNumber(5)}),e.setAction("vi"+i+"6",function(){return r._storeNumber(6)}),e.setAction("vi"+i+"7",function(){return r._storeNumber(7)}),e.setAction("vi"+i+"8",function(){return r._storeNumber(8)}),e.setAction("vi"+i+"9",function(){return r._storeNumber(9)}),e.setAction("vi"+i+"Left",function(){return r._invoke("charPrevious",{unit:"character"})},this._msg("viLeft")),e.setAction("vi"+i+"Right",function(){return r._invoke("charNext",{unit:"character"})},this._msg("viRight")),e.setAction("vi"+i+"Up",function(){return r._invoke("lineUp",{editLine:!0})},this._msg("viUp")),e.setAction("vi"+i+"Down",function(){return r._invoke("lineDown",{editLine:!0})},this._msg("viDown")),e.setAction("vi"+i+"w",function(){return r._invoke("wordNext",{unit:"word"})},this._msg("viw")),e.setAction("vi"+i+"b",function(){return r._invoke("wordPrevious",{unit:"word"})},this._msg("vib")),e.setAction("vi"+i+"W",function(){return r._invoke("wordNext",{unit:"wordWS"})},this._msg("viW")),e.setAction("vi"+i+"B",function(){return r._invoke("wordPrevious",{unit:"wordWS"})},this._msg("viB")),e.setAction("vi"+i+"e",function(){return r._invoke("charNext",{unit:"character"}),r._invoke("wordNext",{unit:"wordend"}),r._invoke("charPrevious",{unit:"character"}),!0},this._msg("vie")),e.setAction("vi"+i+"E",function(){return r._invoke("wordNext",{unit:"wordendWS"})},this._msg("viE")),e.setAction("vi"+i+"$",function(){return r._invoke("lineEnd")},this._msg("vi$")),e.setAction("vi"+i+"^_",function(){return r._invoke(function(){var n=e.getModel(),i=e.getCaretOffset(),r=n.getLineAtOffset(i);e.setCaretOffset(n.getLineStart(r)+t(r))})},this._msg("vi^_")),e.setAction("vi"+i+"+",function(){return r._invoke(function(n){var i=e.getModel(),r=e.getCaretOffset(),o=i.getLineCount()-1,s=Math.min(i.getLineAtOffset(r)+n.count,o);e.setCaretOffset(i.getLineStart(s)+t(s))},{editLine:!0})},this._msg("vi+")),e.setAction("vi"+i+"-",function(){return r._invoke(function(n){var i=e.getModel(),r=e.getCaretOffset(),o=Math.max(i.getLineAtOffset(r)-n.count,0);e.setCaretOffset(i.getLineStart(o)+t(o))},{editLine:!0})},this._msg("vi-")),e.setAction("vi"+i+"|",function(){return r._invoke(function(t){var n=e.getModel(),i=e.getCaretOffset(),r=n.getLineAtOffset(i);e.setCaretOffset(Math.min(n.getLineStart(r)+t.count-1,n.getLineEnd(r)))})},this._msg("vi|")),e.setAction("vi"+i+"H",function(){return r._invoke(function(t){var n=e.getModel().getLineStart(e.getTopIndex(!0)+(t.count-1));e.setCaretOffset(n)},{editLine:!0})},this._msg("viH")),e.setAction("vi"+i+"M",function(){return r._invoke(function(t){var n=Math.ceil((e.getBottomIndex(!0)-e.getTopIndex(!0))/2)+e.getTopIndex(!0);e.setCaretOffset(e.getModel().getLineStart(n))},{editLine:!0})},this._msg("viM")),e.setAction("vi"+i+"L",function(){return r._invoke(function(t){e.setCaretOffset(e.getModel().getLineStart(e.getBottomIndex(!0)-(t.count-1)))},{editLine:!0})},this._msg("viL")),e.setAction("vi"+i+"/",function(){var e={hideAfterFind:!0,incremental:!1,reverse:!1,findCallback:function(t){r._searchFwd=!0,n(t,e)}};return r._invoke("find",e)},this._msg("vi/")),e.setAction("vi"+i+"?",function(){var e={hideAfterFind:!0,incremental:!1,reverse:!0,findCallback:function(t){r._searchFwd=!1,n(t,e)}};return r._invoke("find",e)},this._msg("vi?")),e.setAction("vi"+i+"n",function(){var t,i=e.getCaretOffset();r._searchFwd?(t="findNext",i++):t="findPrevious";var o={start:i,findCallback:function(e){n(e,o)}};return r._invoke(t,o)},this._msg("vin")),e.setAction("vi"+i+"N",function(){var t,i=e.getCaretOffset();r._searchFwd?t="findPrevious":(t="findNext",i++);var o={start:i,findCallback:function(e){n(e,o)}};return r._invoke(t,o)},this._msg("viN")),e.setAction("vi"+i+"f",function(){var t=e.getModel(),n=e.getCaretOffset();return r._findChar(n,t.getLineEnd(t.getLineAtOffset(n)),!1,0)},this._msg("vif")),e.setAction("vi"+i+"F",function(){var t=e.getModel(),n=e.getCaretOffset();return r._findChar(t.getLineStart(t.getLineAtOffset(n)),n,!0,0)},this._msg("viF")),e.setAction("vi"+i+"t",function(){var t=e.getModel(),n=e.getCaretOffset();return r._findChar(n,t.getLineEnd(t.getLineAtOffset(n)),!1,-1)},this._msg("vit")),e.setAction("vi"+i+"T",function(){var t=e.getModel(),n=e.getCaretOffset();return r._findChar(t.getLineStart(t.getLineAtOffset(n)),n,!0,1)},this._msg("viT")),e.setAction("vi"+i+",",function(){return r._charTempOptions?r._findNextChar(r._charTempOptions.reverse):void 0},this._msg("vi,")),e.setAction("vi"+i+";",function(){return r._charTempOptions?r._findNextChar(!r._charTempOptions.reverse):void 0},this._msg("vi;")),e.setAction("vi"+i+"G",function(){if(""===r.number){var t=e.getModel();t.getBaseModel&&(t=t.getBaseModel()),r.number=t.getLineCount()}return r._invoke(function(t){t=t||{},t.line=t.count,t.editLine=!0,t.callback=function(){t.editDone&&t.editDone()},e.invokeAction("gotoLine",!1,t)})},this._msg("viG"))},_invoke:function(e,t){var n=this.getView();return t=t||{},t.count=this._getCount(),"function"==typeof e?e(t):n.invokeAction(e,!1,t),!0},_getCount:function(){var e=1;return""!==this.number&&(e=this.number>>0),this.number="",e},_findChar:function(e,t,n,i){this._charTempOptions={},this._charTempOptions.start=e,this._charTempOptions.end=t,this._charTempOptions.hideAfterFind=!0,this._charTempOptions.incremental=!1,this._charTempOptions.reverse=n,this._charTempOptions.offset=i;var r=this._charTempOptions,o=this;return this._charTempOptions.findCallback=function(e){e&&o.getView().setCaretOffset(e.start+i),r.editDone&&r.editDone()},this._invoke("find",this._charTempOptions)},_findNextChar:function(e){if(this._charTempOptions){var t=this.getView(),n={};n.hideAfterFind=this._charTempOptions.hideAfterFind,n.incremental=this._charTempOptions.incremental,n.reverse=this._charTempOptions.reverse,n.wrap=!1;var i=n,r=this;n.findCallback=function(e){e&&r.getView().setCaretOffset(e.start+r._charTempOptions.offset),i.editDone&&i.editDone()};var o=t.getModel();return e?(n.start=t.getCaretOffset()+1-this._charTempOptions.offset,n.end=o.getLineEnd(o.getLineAtOffset(n.start)),n.reverse=!1,this._invoke("findNext",n)):(n.start=t.getCaretOffset()-this._charTempOptions.offset,n.end=o.getLineStart(o.getLineAtOffset(n.start)),n.reverse=!0,this._invoke("findPrevious",n))}return!0},_storeNumber:function(e){var t=this;return 0!==e||this.number?(this.number+=e,!0):this._invoke(function(){t.getView().invokeAction("lineStart",!0)})}}),l.prototype=new t.KeyMode,r(l.prototype,{createKeyBindings:function(){var e=[];return e.push({actionID:"vi-:-ESC",keyBinding:o(27),predefined:!0}),e},_createActions:function(e){var t=this;e.setAction("vi-:-ESC",function(){return e.removeKeyMode(t),e.addKeyMode(t.viMode),!0})},match:function(e){var n=t.KeyMode.prototype.match.call(this,e);return n||(n=this.getView().getKeyModes()[0].match(e)),n},storeNumber:function(e){this.number=e}}),c.prototype=new a,r(c.prototype,{createKeyBindings:function(){var e=a.prototype.createKeyBindings.call(this);return e.push({actionID:"vi-"+this.key+"ESC",keyBinding:o(27),predefined:!0}),e.push({actionID:"vi-"+this.key+"-"+this.key,keyBinding:o(this.key,!1,!1,!1,!1,"keypress")}),e},_invoke:function(e,t){t=t||{};var n=this.getView(),i=n.getCaretOffset(),r=i,o=n.getModel(),s=this;return t.editDone=function(){var e=n.getCaretOffset();if(r>e){var a=r;r=e,e=a}t.editLine&&(r=o.getLineStart(o.getLineAtOffset(r)),e=o.getLineEnd(o.getLineAtOffset(e),"c"===s.key?!1:!0)),"y"===s.key?(u=n.getText(r,e),p=t.editLine,n.setCaretOffset(i)):n.setText("",r,e),n.removeKeyMode(s),n.addKeyMode(s.nextMode)},a.prototype._invoke.call(this,e,t),t.editDone(),!0},_getCount:function(){var e=1;""!==this.firstNumber&&(e=this.firstNumber>>0);var t=1;return""!==this.number&&(t=this.number>>0),e*=t,this.number=this.firstNumber="",e},_createActions:function(e){a.prototype._createActions.call(this,e);var t=this;e.setAction("vi-"+t.key+"ESC",function(){return e.removeKeyMode(t),e.addKeyMode(t.viMode),!0}),e.setAction("vi-"+t.key+"-"+t.key,function(){return t._invoke("lineEnd",{editLine:!0})},this._msg("viycd"))},storeNumber:function(e){this.firstNumber=e},_modeAdded:function(){this.secondNumber=""},_modeRemoved:function(){this.command="",this.firstNumber="",this.number=""}}),h.prototype=new t.KeyMode,r(h.prototype,{createKeyBindings:function(){var e=[];return e.push({actionID:"vi-insert-ESC",keyBinding:o(27),predefined:!0}),e},_createActions:function(e){var t=this;e.setAction("vi-insert-ESC",function(){return e.removeKeyMode(t),e.addKeyMode(t.viMode),!0})},match:function(e){var n=t.KeyMode.prototype.match.call(this,e);return n||(n=this.getView().getKeyModes()[0].match(e)),n},storeNumber:function(e){}}),d.prototype=new a,r(d.prototype,{createKeyBindings:function(){var e=a.prototype.createKeyBindings.call(this);return e.push({actionID:"vi-ctrl-f",keyBinding:o("f",!0)}),e.push({actionID:"vi-ctrl-b",keyBinding:o("b",!0)}),e.push({actionID:"vi-ctrl-e",keyBinding:o("e",!0)}),e.push({actionID:"vi-ctrl-y",keyBinding:o("y",!0)}),e.push({actionID:"statusLineMode",keyBinding:o(":",!1,!1,!1,!1,"keypress")}),e.push({actionID:"vi-a",keyBinding:o("a",!1,!1,!1,!1,"keypress"),predefined:!0}),e.push({actionID:"vi-A",keyBinding:o("A",!1,!1,!1,!1,"keypress"),predefined:!0}),e.push({actionID:"vi-i",keyBinding:o("i",!1,!1,!1,!1,"keypress"),predefined:!0}),e.push({actionID:"vi-I",keyBinding:o("I",!1,!1,!1,!1,"keypress"),predefined:!0}),e.push({actionID:"vi-o",keyBinding:o("o",!1,!1,!1,!1,"keypress"),predefined:!0}),e.push({actionID:"vi-O",keyBinding:o("O",!1,!1,!1,!1,"keypress"),predefined:!0}),e.push({actionID:"vi-R",keyBinding:o("R",!1,!1,!1,!1,"keypress"),predefined:!0}),e.push({actionID:"vi-s",keyBinding:o("s",!1,!1,!1,!1,"keypress"),predefined:!0}),e.push({actionID:"vi-S",keyBinding:o("S",!1,!1,!1,!1,"keypress"),predefined:!0}),e.push({actionID:"vi-p",keyBinding:o("p",!1,!1,!1,!1,"keypress"),predefined:!0}),e.push({actionID:"vi-P",keyBinding:o("P",!1,!1,!1,!1,"keypress"),predefined:!0}),e.push({actionID:"vi-u",keyBinding:o("u",!1,!1,!1,!1,"keypress"),predefined:!0}),e.push({actionID:"vi-c",keyBinding:o("c",!1,!1,!1,!1,"keypress"),predefined:!0}),e.push({actionID:"vi-d",keyBinding:o("d",!1,!1,!1,!1,"keypress"),predefined:!0}),e.push({actionID:"vi-y",keyBinding:o("y",!1,!1,!1,!1,"keypress"),predefined:!0}),e.push({actionID:"vi-~",keyBinding:o("~",!1,!1,!1,!1,"keypress"),predefined:!0}),e.push({actionID:"vi-x",keyBinding:o("x",!1,!1,!1,!1,"keypress"),predefined:!0}),e.push({actionID:"vi-X",keyBinding:o("X",!1,!1,!1,!1,"keypress"),predefined:!0}),e.push({actionID:"vi-C",keyBinding:o("C",!1,!1,!1,!1,"keypress"),predefined:!0}),e.push({actionID:"vi-D",keyBinding:o("D",!1,!1,!1,!1,"keypress"),predefined:!0}),e.push({actionID:"vi-*",keyBinding:o("*",!1,!1,!1,!1,"keypress"),predefined:!0}),e},getKeyBindings:function(e){
var n=t.KeyMode.prototype.getKeyBindings.call(this,e);n=n||[];var i,r=this.changeMode.getKeyBindings(e);if(!this.changeMode.isActive())for(i=0;i<r.length;i++)r[i]=s([o("c",!1,!1,!1,!1,"keypress"),r[i]]);if(n=n.concat(r),r=this.deleteMode.getKeyBindings(e),!this.deleteMode.isActive())for(i=0;i<r.length;i++)r[i]=s([o("d",!1,!1,!1,!1,"keypress"),r[i]]);if(n=n.concat(r),r=this.yankMode.getKeyBindings(e),!this.yankMode.isActive())for(i=0;i<r.length;i++)r[i]=s([o("y",!1,!1,!1,!1,"keypress"),r[i]]);return n=n.concat(r)},match:function(e){var n=t.KeyMode.prototype.match.call(this,e);return n||"keypress"!==e.type||(n="noop"),n},_createActions:function(t){a.prototype._createActions.call(this,t);var n=this;t.setAction("vi-ctrl-f",function(){return n._invoke("pageDown")},{name:e.pageDown}),t.setAction("vi-ctrl-b",function(){return n._invoke("pageUp")},{name:e.pageUp}),t.setAction("vi-ctrl-e",function(){return n._invoke("scrollLineDown")},{name:e.scrollLineDown}),t.setAction("vi-ctrl-y",function(){return n._invoke("scrollLineUp")},{name:e.scrollLineUp}),t.setAction("vi-a",function(){return n._toInsertMode("charNext")},{name:e.via}),t.setAction("vi-A",function(){return n._toInsertMode("lineEnd")},{name:e.viA}),t.setAction("vi-i",function(){return n._toInsertMode("noop")},{name:e.vii}),t.setAction("vi-I",function(){return n._toInsertMode("lineStart")},{name:e.viI}),t.setAction("vi-O",function(){return n._invoke("lineUp"),n._invoke("lineEnd"),n._toInsertMode("enter"),!0},{name:e.viO}),t.setAction("vi-o",function(){return n._invoke("lineEnd"),n._toInsertMode("enter"),!0},{name:e.vio}),t.setAction("vi-R",function(){return n._toInsertMode("toggleOverwriteMode")},{name:e.viR}),t.setAction("vi-s",function(){return n._toInsertMode("deleteNext",{unit:"char"})},{name:e.vis}),t.setAction("vi-S",function(){return n._toInsertMode("deleteLines",{unit:"line"})},{name:e.viS}),t.setAction("vi-p",function(){return n._invoke(function(){var e=n.getView(),t=e.getSelection();if(t.start===t.end){var i=e.getModel(),r=e.getCaretOffset();p?t.start=t.end=i.getLineEnd(i.getLineAtOffset(r),!0):(t.start++,t.end++)}e.setText(u,t.start,t.end)})},{name:e.vip}),t.setAction("vi-P",function(){return n._invoke(function(){var e=n.getView(),t=e.getSelection();if(t.start===t.end){var i=e.getModel(),r=e.getCaretOffset();p&&(t.start=t.end=i.getLineStart(i.getLineAtOffset(r)))}e.setText(u,t.start,t.end)})},{name:e.viP}),t.setAction("vi-u",function(){return n._invoke("undo")},{name:e.Undo}),t.setAction("vi-c",function(){return t.removeKeyMode(n),t.addKeyMode(n.changeMode),n.changeMode.storeNumber(n.number),n.number="",!0}),t.setAction("vi-d",function(){return t.removeKeyMode(n),t.addKeyMode(n.deleteMode),n.deleteMode.storeNumber(n.number),n.number="",!0}),t.setAction("vi-y",function(){return t.removeKeyMode(n),t.addKeyMode(n.yankMode),n.yankMode.storeNumber(n.number),n.number="",!0}),t.setAction("vi-~",function(){return n._invoke("reversecase")},{name:e.reversecase}),t.setAction("vi-x",function(){return n._invoke("deleteNext")},{name:e.deleteNext}),t.setAction("vi-X",function(){return n._invoke("deletePrevious")},{name:e.deletePrevious}),t.setAction("vi-C",function(){return n._toInsertMode("deleteLineEnd")},{name:e.viC}),t.setAction("vi-D",function(){return n._invoke("deleteLineEnd")},{name:e.deleteLineEnd}),t.setAction("vi-*",function(){var e=n.getView(),t=e.getCaretOffset(),i=e.getNextOffset(t+1,{count:-1,unit:"word"}),r=e.getNextOffset(i,{count:1,unit:"wordend"}),o=e.getText(i,r);n._searchFwd=!0;var s={hideAfterFind:!0,incremental:!1,reverse:!1,findString:o};return n._invoke("find",s)},{name:e.viStar})},_reportStatus:function(e){this.statusReporter&&this.statusReporter(e)},_toInsertMode:function(e,t){t=t||{};var n=1;""!==this.number&&(n=this.number>>0),t.count=n;var i=this.getView();return this.insertMode.storeNumber(this.number),i.invokeAction(e,!1,t),i.removeKeyMode(this),i.addKeyMode(this.insertMode),this.number="",!0},_modeAdded:function(){this.getView().setOptions({blockCursorVisible:!0})},_modeRemoved:function(){var e=this.getView();e.setOptions({blockCursorVisible:!1}),e.removeKeyMode(this.insertMode),e.removeKeyMode(this.changeMode),e.removeKeyMode(this.deleteMode)}}),{VIMode:d}}),n("orion/editorPreferences",[],function(){return{}}),n("orion/widgets/themes/ThemePreferences",[],function(){return{}}),n("orion/widgets/themes/editor/ThemeData",[],function(){return{}}),n("orion/widgets/settings/EditorSettings",[],function(){return null}),n("orion/searchAndReplace/textSearcher",[],function(){return{TextSearcher:null}}),n("orion/globalCommands",[],function(){return{}}),n("orion/edit/dispatcher",[],function(){function e(e,t,n,i){this.serviceRegistry=e,this.editor=n,this.inputManager=i,this.ctRegistry=t,this.serviceReferences={};var r=this;this.inputManager.addEventListener("InputChanged",function(e){r.contentType=e.contentType,r.updateListeners()}.bind(this)),this.listener={onServiceAdded:function(e){r._onServiceAdded(e.serviceReference)},onServiceRemoved:function(e){r._onServiceRemoved(e.serviceReference)}},this.serviceRegistry.addEventListener("registered",this.listener.onServiceAdded),this.serviceRegistry.addEventListener("unregistering",this.listener.onServiceRemoved)}return e.prototype={updateListeners:function(){this._removeAllListeners();for(var e=this.serviceRegistry,t=e.getServiceReferences("orion.edit.model"),n=0;n<t.length;n++)this._wireServiceReference(t[n])},_wireServiceReference:function(e){var t=e.getProperty("contentType");if("undefined"!=typeof t&&null!==t){var n=this,i=this.contentType;this.ctRegistry.isSomeExtensionOf(i,t)&&n._wireService(e,n.serviceRegistry.getService(e))}},_wireService:function(e,t){var n=this.editor.getTextView();if(!n)throw new Error("TextView not installed");for(var i=Object.keys(t),r=0;r<i.length;r++){var o=i[r],s=t[o];if("on"===o.substr(0,2)&&"function"==typeof s){var a=o.substr(2);this._wireServiceMethod(e,t,s,n,a)}}},_wireServiceMethod:function(e,t,n,i,r){var o=this,s=function(e){e.file=o.getServiceFileObject(),n(e).then()},a=e.getProperty("service.id");this.serviceReferences[a]=this.serviceReferences[a]||[],this.serviceReferences[a].push([i,r,s]),i.addEventListener(r,s)},_onServiceRemoved:function(e){var t=e.getProperty("service.id");this._removeListeners(t)},_onServiceAdded:function(e){-1!==e.getProperty("objectClass").indexOf("orion.edit.model")&&this._wireServiceReference(e)},_removeListeners:function(e){var t=this.serviceReferences[e];if(t){for(var n=0;n<t.length;n++){var i=t[n],r=i[0],o=i[1],s=i[2];r.removeEventListener(o,s)}delete this.serviceReferences[e]}},_removeAllListeners:function(){for(var e=Object.keys(this.serviceReferences),t=0;t<e.length;t++)this._removeListeners(e[t])},getServiceFileObject:function(){var t=this.inputManager.getFileMetadata();return t?e.toServiceFileObject(t,this.inputManager.getContentType()):null}},e.toServiceFileObject=function(e,t){var n=Object.create(null);return n.name=e.Name,n.location=e.Location,n.parents=e.Parents,t&&(n.contentType=Object.create(null),n.contentType.id=t.id,n.contentType.name=t.name,n.contentType.imageClass=t.imageClass,n.contentType.extension=t.extension),n},{Dispatcher:e}}),n("orion/edit/editorContext",[],function(){function e(e,t){var i=Object.create(null);return n(e,t).forEach(function(t){var n=e.getService(t);Object.keys(n).forEach(function(e){"function"==typeof n[e]&&(i[e]=n[e].bind(n))})}),i}function t(e,t){var i=Object.create(null);return n(e,t).forEach(function(e){e.getPropertyKeys().forEach(function(t){"service.id"!==t&&"service.names"!==t&&"objectClass"!==t&&(i[t]=e.getProperty(t))})}),i}function n(e,t){return e.getServiceReferences(t||"orion.edit.context")}return{getEditorContext:e,getOptions:t}}),n("examples/editor/textStyler",[],function(){return{}}),n("orion/editor/textStyler",["orion/editor/annotations","orion/editor/eventTarget","orion/metrics"],function(e,t,n){function i(e){return JSON.parse(JSON.stringify(e))}function r(e,t,n){this._patternManager=new o(e,t),this._contentType=n}function o(e,t){this._unnamedCounter=0,this._patterns=[],this._rootId=t,e.forEach(function(e){this._addRepositoryPatterns(e.repository||{},e.id),this._addPatterns(e.patterns||[],e.id)}.bind(this))}function s(e,t,n,i,r,o,s){this.start=e.start,this.end=e.end,this.contentStart=e.contentStart,this.contentEnd=e.contentEnd,this.name=t,this.typeId=n,this.styler=i,this.parent=o,s&&s(this),this._subBlocks=i.computeBlocks(r,r.getText(this.contentStart,this.end),this,this.contentStart,null,null,null)}function a(e){this._styler=e}function l(t,i,r){this._whitespacesVisible=!1,this._highlightCaretLine=!1,this._foldingEnabled=!0,this._detectTasks=!0,this._annotationProviders=[],this._view=t,this._annotationModel=i,this._stylerAdapter=r,this._stylerAdapter.setStyler(this),this._accessor=new a(this),this._bracketAnnotations;var o=this;this._listener={onChanged:function(e){o._onModelChanged(e)},onDestroy:function(e){o._onDestroy(e)},onLineStyle:function(e){o._onLineStyle(e)},onMouseDown:function(e){o._onMouseDown(e)},onSelection:function(e){o._onSelection(e)}};var s=t.getModel();s.getBaseModel&&(s=s.getBaseModel()),s.addEventListener("Changed",this._listener.onChanged),t.addEventListener("MouseDown",this._listener.onMouseDown),t.addEventListener("Selection",this._listener.onSelection),t.addEventListener("Destroy",this._listener.onDestroy),t.addEventListener("LineStyle",this._listener.onLineStyle);var l=s.getCharCount(),c={start:0,contentStart:0,end:l,contentEnd:l};if(l>=5e4)var h=(new Date).getTime();if(this._rootBlock=this._stylerAdapter.createBlock(c,this,s,null),h){var d=(new Date).getTime()-h;d>10&&n.logTiming("editor","styler compute blocks (ms/50000 chars)",5e4*d/l,r.getContentType())}if(i){var u=[];i.removeAnnotations(e.AnnotationType.ANNOTATION_FOLDING),this._computeFolding(this._rootBlock.getBlocks(),t.getModel(),u),this._detectTasks&&(i.removeAnnotations(e.AnnotationType.ANNOTATION_TASK),this._computeTasks(this._rootBlock,s,u)),i.replaceAnnotations([],u)}t.redrawLines()}var c=function(e,t,n,i,r){var o;for(void 0===i&&(i=-1),void 0===r&&(r=e.length);r-i>1;)if(o=Math.floor((r+i)/2),t<=e[o].start)r=o;else{if(n&&t<e[o].end){r=o;break}i=o}return r},h=function(e,t,n){return new r(e,t,n)};return r.prototype={blockSpansBeyondEnd:function(e){return e.pattern.regexEnd===this._eolRegex},computeBlocks:function(e,t,n,i,r,o,s){if(!t)return[];var a,l=[],c=[];if(r=r||0,o=o||1/0,s=s||1/0,n.blockPatterns.forEach(function(e){a=this._findMatch(e.regexBegin||e.regex,t,r),a&&c.push({result:a,pattern:e})}.bind(this)),!c.length)return l;c.sort(function(e,t){return e.result.index<t.result.index?-1:e.result.index>t.result.index?1:e.pattern.pattern.index<t.pattern.pattern.index?-1:1});for(var h=0;c.length>0;){var d=c[0];if(c.splice(0,1),o<d.result.index)break;if(d.result.index<h)this._updateMatch(d,t,c,h,o);else{var u=i+d.result.index,p=d.result.index,f=null,g=d.pattern.regexEnd;if(g){p+=d.result[0].length;var m=d.pattern,v=this._substituteCaptureValues(g,d.result);v!==g&&(m={pattern:m.pattern,regexBegin:m.regexBegin,regexEnd:v},g=v);for(var _=p;!f;){a=this._findMatch(g,t,_),a||(this._eolRegex.lastIndex=0,a=this._eolRegex.exec(t),m={pattern:m.pattern,regexBegin:m.regexBegin,regexEnd:this._eolRegex});var y=this.createBlock({start:u,end:i+a.index+a[0].length,contentStart:i+p,contentEnd:i+a.index},n.styler,e,n,m),x=y.getBlocks();(!x.length||x[x.length-1].end<=a.index+i)&&(f=y),_=a.index+a[0].length}}else f=this.createBlock({start:u,end:u+d.result[0].length,contentStart:u,contentEnd:u+d.result[0].length},n.styler,e,n,d.pattern);if(l.push(f),l.length===s||o<=f.end)break;h=f.end-i,this._updateMatch(d,t,c,h,o)}}return l},computeStyle:function(e,t,n){if(!e.pattern)return null;var i={start:e.start,end:e.end,style:e.pattern.pattern.name};if(e.contentStart<=n&&n<e.contentEnd)return e.pattern.pattern.contentName?{start:e.contentStart,end:e.contentEnd,style:e.pattern.pattern.contentName}:i;var r,o,s,a;if(n<e.contentStart){if(o=e.pattern.pattern.beginCaptures||e.pattern.pattern.captures,!o)return i;r=e.pattern.regexBegin,s=t.getText(e.start,e.contentStart),a=e.start}else{if(o=e.pattern.pattern.endCaptures||e.pattern.pattern.captures,!o)return i;r=e.pattern.regexEnd,s=t.getText(e.contentEnd,e.end),a=e.contentEnd}r.lastIndex=0;var l=r.exec(s);if(l){var h=[];this._getCaptureStyles(l,o,a,h);var d=h[c(h,n,!0)];if(d&&d.start<=n&&n<d.end)return d}return i},createBlock:function(e,t,n,i,r){return new s(e,r?r.pattern.name:null,r?r.pattern.id:null,t,n,i,function(e){e.pattern=r,e.linePatterns=[],e.blockPatterns=[],e.enclosurePatterns={},this._initPatterns(this._patternManager,e)}.bind(this))},getBlockCommentDelimiters:function(e){var t=this._getLanguageBlock(e),n=t.blockPatterns;if(n)for(var i="comment.block",r=0;r<n.length;r++){var o=n[r].pattern,s=o.name||o.contentName;if(s&&-1!==s.indexOf(i)&&o.begin&&o.end&&o.begin.literal&&o.end.literal)return[o.begin.literal,o.end.literal]}return["",""]},getBlockContentStyleName:function(e){return e.pattern.pattern.contentName||e.pattern.pattern.name},getBlockEndStyle:function(e,t,n,i){var r;if(e.pattern.regexEnd&&(r=this._findMatch(e.pattern.regexEnd,t,0))){var o=e.pattern.pattern.endCaptures||e.pattern.pattern.captures;o?this._getCaptureStyles(r,o,n-r[0].length,i):e.pattern.pattern.name&&i.push({start:n-r[0].length,end:n,style:e.pattern.pattern.name})}return r?r[0]:null},getBlockFoldBounds:function(e,t){return{start:e.start,end:e.end}},getBlockStartStyle:function(e,t,n,i){var r;if(e.pattern.regexBegin&&(r=this._findMatch(e.pattern.regexBegin,t,0))){var o=e.pattern.pattern.beginCaptures||e.pattern.pattern.captures;o?this._getCaptureStyles(r,o,n,i):i.push({start:n,end:n+r[0].length,style:e.pattern.pattern.name})}return r?r[0]:null},getBracketMatch:function(e,t){for(var n,i=Object.keys(e.enclosurePatterns),r=0;r<i.length;r++){var o=e.enclosurePatterns[i[r]],s=this._findMatch(o.regex,t,0);if(s&&0===s.index){n=o;break}}if(!n)return null;var a,l=!1;-1!==n.pattern.name.indexOf(this._PUNCTUATION_SECTION_BEGIN)?(l=!0,a=n.pattern.name.replace(this._PUNCTUATION_SECTION_BEGIN,this._PUNCTUATION_SECTION_END)):a=n.pattern.name.replace(this._PUNCTUATION_SECTION_END,this._PUNCTUATION_SECTION_BEGIN);var c=e.enclosurePatterns[a];return c?{beginName:n.pattern.name,endName:a,atStart:l}:null},getContentType:function(){return this._contentType},getLineCommentDelimiter:function(e){var t="comment.line",n=this._getLanguageBlock(e),i=n.linePatterns;if(i)for(var r=0;r<i.length;r++){var o=i[r].pattern,s=o.name;if(s&&-1!==s.indexOf(t)&&o.match&&o.match.literal)return o.match.literal}var a=n.blockPatterns;if(a)for(r=0;r<a.length;r++)if(o=a[r].pattern,s=o.name||o.contentName,s&&-1!==s.indexOf(t)&&o.begin&&o.begin.literal)return o.begin.literal;return""},parse:function(e,t,n,i,r,o){if(e){var s=i.linePatterns;if(s){var a,l=[];s.forEach(function(t){var i=t.regex||t.regexBegin;i.oldLastIndex=i.lastIndex,a=this._findMatch(i,e,n),a&&l.push({result:a,pattern:t})}.bind(this)),l.sort(function(e,t){return e.result.index<t.result.index?-1:e.result.index>t.result.index?1:e.pattern.pattern.index<t.pattern.pattern.index?-1:1});for(var c=n;l.length>0;){var h=l[0];if(l.splice(0,1),h.result.index<c)this._updateMatch(h,e,l,c);else{var d,u=h.result.index,p=[];if(h.pattern.regex){a=h.result,d=u+a[0].length;var f={start:t+u,end:t+d,style:h.pattern.pattern.name};if(!o){h.pattern.pattern.captures&&this._getCaptureStyles(a,h.pattern.pattern.captures,t+u,p),p.sort(function(e,t){return e.start<t.start?-1:e.start>t.start?1:0});for(var g=0;g<p.length-1;g++)if(p[g+1].start<p[g].end){var m={start:p[g+1].end,end:p[g].end,style:p[g].style};p[g].end=p[g+1].start,p.splice(g+2,0,m)}}this._mergeStyles(f,p,r)}else{var v=h.pattern.regexEnd;v=this._substituteCaptureValues(v,h.result),a=this._findMatch(v,e,h.result.index+h.result[0].length),a||(this._eolRegex.lastIndex=0,a=this._eolRegex.exec(e)),d=a.index+a[0].length,r.push({start:t+u,end:t+d,style:h.pattern.pattern.name})}c=a.index+a[0].length,this._updateMatch(h,e,l,c)}}s.forEach(function(e){var t=e.regex||e.regexBegin;t.lastIndex=t.oldLastIndex})}}},setStyler:function(e){this._styler=e},verifyBlock:function(e,t,n,i){var r,o=null,s=[],a=n.parent;if(a.blockPatterns.forEach(function(e){r=this._findMatch(e.regexBegin||e.regex,t,0),r&&s.push({result:r,pattern:e})}.bind(this)),s.sort(function(e,t){return!e.result.index&&t.result.index?-1:e.result.index&&!t.result.index?1:e.result.index||t.result.index?0:e.pattern.pattern.index<t.pattern.pattern.index?-1:1}),s.length&&0===s[0].result.index&&s[0].pattern.pattern.id===n.pattern.pattern.id){r=s[0];var l=r.pattern.regexEnd;if(l){l=this._substituteCaptureValues(l,r.result);for(var c=r.result[0].length,h=this._findMatch(l,t,c);null===o&&h&&n.start+h.index!==n.contentEnd+i;){var d=this.computeBlocks(e,t,n,n.start,c,h.index+1,null);!d.length||d[d.length-1].end<=n.start+h.index?o=!1:d.length?(c=d[d.length-1].end-n.start,h=this._findMatch(l,t,c)):h=null}h||(this._eolRegex.lastIndex=0,h=this._eolRegex.exec(t),o=n.start+h.index===n.end+i)}else o=n.start+r.result[0].length===n.end+i}else o=!1;return null!==o?o:!0},_findMatch:function(e,t,n,i){var r=n,o=e.lastIndex;this._linebreakRegex.lastIndex=n;var s,a,l=this._linebreakRegex.exec(t);if(e.lastIndex=0,l){for(var c=l.index;0<=--c;){var h=t.charAt(c);if(h===this._NEWLINE||h===this._CR)break}s=t.substring(c+1,l.index+l[1].length),e.lastIndex=a=l.index-c-1}for(;l&&l.index<t.length;){var d;if(i){var u=e.lastIndex;e.test(s)&&(e.lastIndex=u,d=e.exec(s))}else d=e.exec(s);if(d)return d.index+=r,d.index-=a,e.lastIndex=o,d;a=0,r+=l[0].length,l=this._linebreakRegex.exec(t),l&&(s=l[1],e.lastIndex=0)}return e.lastIndex=o,null},_getCaptureStyles:function(e,t,n,i){if(t[0])return void i.push({start:n,end:n+e[0].length,style:t[0].name});for(var r=0,o=1;o<e.length;o++)if(e[o]){var s=t[o];if(s){var a=n+r;i.push({start:a,end:a+e[o].length,style:s.name})}r+=e[o].length}},_getLanguageBlock:function(e){for(var t=this._styler.getBlockAtIndex(e),n=/^source\..+\.embedded/;t;){if(t.pattern){var i=t.pattern.pattern;if(n.test(i.name||i.contentName))return t}t=t.parent}return this._styler.getRootBlock()},_initPatterns:function(e,t){if(t.pattern&&t.pattern.pattern.linePatterns)return t.linePatterns=t.pattern.pattern.linePatterns,t.blockPatterns=t.pattern.pattern.blockPatterns,void(t.enclosurePatterns=t.pattern.pattern.enclosurePatterns);var n=e.getPatterns(t.pattern?t.pattern.pattern:null),i=function(e){var t="string"==typeof e?e:e.match,n=this._ignoreCaseRegex.exec(t),i=this._FLAGS;return n&&(t=t.substring(n[0].length),i+="i"),new RegExp(t,i)}.bind(this),r=-1,o=0;n.forEach(function(e){var n;!e.match||e.begin||e.end?!e.match&&e.begin&&e.end&&(r=o,n={regexBegin:i(e.begin),regexEnd:i(e.end),pattern:e},t.linePatterns.push(n)):(n={regex:i(e.match),pattern:e},t.linePatterns.push(n),!e.name||0!==e.name.indexOf("punctuation.section")||-1===e.name.indexOf(this._PUNCTUATION_SECTION_BEGIN)&&-1===e.name.indexOf(this._PUNCTUATION_SECTION_END)||(t.enclosurePatterns[e.name]=n)),o++}.bind(this)),t.blockPatterns=t.linePatterns.slice(0,r+1),t.pattern&&(t.pattern.pattern.enclosurePatterns=t.enclosurePatterns,t.pattern.pattern.linePatterns=t.linePatterns,t.pattern.pattern.blockPatterns=t.blockPatterns)},_mergeStyles:function(e,t,n){var i=e.start;t.forEach(function(t){i<=t.start&&n.push({start:i,end:t.start,style:e.style}),n.push(t),i=t.end}),i<e.end&&n.push({start:i,end:e.end,style:e.style})},_substituteCaptureValues:function(e,t){var n=e.toString();if(this._captureReferenceRegex.lastIndex=0,!this._captureReferenceRegex.test(n))return e;this._captureReferenceRegex.lastIndex=0;for(var i=this._captureReferenceRegex.exec(n);i;)n=n.replace(i[0],t[i[1]]||""),this._captureReferenceRegex.lastIndex=0,i=this._captureReferenceRegex.exec(n);return new RegExp(n.substring(1,n.length-1-this._FLAGS.length),this._FLAGS)},_updateMatch:function(e,t,n,i,r){var o=e.pattern.regex?e.pattern.regex:e.pattern.regexBegin;r=r||1/0;var s=this._findMatch(o,t,i,!0);if(s&&s.index<r){e.result=s;for(var a=0;a<n.length;a++)if(s.index<n[a].result.index||s.index===n[a].result.index&&e.pattern.pattern.index<n[a].pattern.pattern.index)return void n.splice(a,0,e);n.push(e)}},_captureReferenceRegex:/\\(\d)/g,_eolRegex:/$/,_ignoreCaseRegex:/^\(\?i\)\s*/,_linebreakRegex:/(.*)(?:[\r\n]|$)/g,_CR:"\r",_FLAGS:"g",_NEWLINE:"\n",_PUNCTUATION_SECTION_BEGIN:".begin",_PUNCTUATION_SECTION_END:".end"},o.prototype={getPatterns:function(e){var t;e?(t="string"==typeof e?e:e.qualifiedId,t+="#"):t=this._rootId+"#"+this._NO_ID;var n=[0],r={},o=new RegExp("^"+t+"[^#]+$");this._patterns.forEach(function(e){if(o.test(e.qualifiedId))if(e.include)this._processInclude(e,n,r);else{var t=i(e);t.index=n[0]++,r[e.qualifiedId]=t}}.bind(this));var s=[],a=Object.keys(r);return a.forEach(function(e){s.push(r[e])}),s},_addPattern:function(e,t,n){e.parentId=n,e.id=t,e.qualifiedId=e.parentId+"#"+e.id,this._patterns.push(e),e.patterns&&!e.include&&this._addPatterns(e.patterns,e.qualifiedId)},_addPatterns:function(e,t){e.forEach(function(e){this._addPattern(e,this._NO_ID+this._unnamedCounter++,t)}.bind(this))},_addRepositoryPatterns:function(e,t){var n=Object.keys(e);n.forEach(function(n){this._addPattern(e[n],n,t)}.bind(this))},_processInclude:function(e,t,n){var r,o=e.include.indexOf("#");r=0===o?new RegExp("^"+e.qualifiedId.substring(0,e.qualifiedId.indexOf("#"))+e.include+"$"):-1===o?new RegExp("^"+e.include+"#"+this._NO_ID+"[^#]+$"):new RegExp("^"+e.include+"$"),this._patterns.forEach(function(e){if(r.test(e.qualifiedId))if(e.include)this._processInclude(e,t,n);else if(!n[e.qualifiedId]){var o=i(e);o.index=t[0]++,n[e.qualifiedId]=o}}.bind(this))},_NO_ID:"NoID"},s.prototype={adjustBounds:function(e,t){e<this.start&&(this.start+=t),e<this.contentStart&&(this.contentStart+=t),e<=this.end&&(this.end+=t),e<=this.contentEnd&&(this.contentEnd+=t),this._subBlocks.forEach(function(n){e<=n.end&&n.adjustBounds(e,t)})},getBlocks:function(){return this._subBlocks},getBlockAtIndex:function(e){return c(this.getBlocks(),e,!0)},isRenderingWhitespace:function(){return this.styler._isRenderingWhitespace()}},a.prototype={getBlockCommentDelimiters:function(e){return this._styler.getBlockCommentDelimiters(e)},getLineCommentDelimiter:function(e){return this._styler.getLineCommentDelimiter(e)},getStyles:function(e){return this._styler.getStyles(e)}},l.prototype={addAnnotationProvider:function(e){"function"==typeof e&&this._annotationProviders.push(e)},computeBlocks:function(e,t,n,i,r,o,s){return this._stylerAdapter.computeBlocks(e,t,n,i,r,o,s)},destroy:function(){if(this._view){var e=this._view.getModel();e.getBaseModel&&(e=e.getBaseModel()),e.removeEventListener("Changed",this._listener.onChanged),this._view.removeEventListener("MouseDown",this._listener.onMouseDown),this._view.removeEventListener("Selection",this._listener.onSelection),this._view.removeEventListener("Destroy",this._listener.onDestroy),this._view.removeEventListener("LineStyle",this._listener.onLineStyle),this._view=null}},getAnnotationModel:function(){return this._annotationModel},getBlockAtIndex:function(e){return this._findBlock(this._rootBlock,e)},getBlockCommentDelimiters:function(e){return this._stylerAdapter.getBlockCommentDelimiters(e)},getLineCommentDelimiter:function(e){return this._stylerAdapter.getLineCommentDelimiter(e)},getRootBlock:function(){return this._rootBlock},getStyleAccessor:function(){return this._accessor},getStyles:function(e){var t=[],n=this._view.getModel();n.getBaseModel&&(n=n.getBaseModel());var i=this._findBlock(this._rootBlock,e),r=n.getLineAtOffset(e),o=n.getLine(r),s=[];this._stylerAdapter.parse(o,n.getLineStart(r),0,i,s);var a=s[c(s,e,!0)];for(a&&a.start<=e&&e<a.end&&t.push(a);i;)a=this._stylerAdapter.computeStyle(i,n,e),a&&t.splice(0,0,a),i=i.parent;return t},getTextModel:function(){var e=this._view.getModel();return e.getBaseModel&&(e=e.getBaseModel()),e},removeAnnotationProvider:function(e){if("function"==typeof e){var t=this._annotationProviders.indexOf(e);-1!==t&&this._annotationProviders.splice(t,1)}},setDetectHyperlinks:function(){},setDetectTasks:function(e){this._detectTasks=e},setFoldingEnabled:function(e){this._foldingEnabled=e},setHighlightCaretLine:function(e){this._highlightCaretLine=e},setWhitespacesVisible:function(e,t){this._whitespacesVisible!==e&&(this._whitespacesVisible=e,t&&this._view.redraw())},_computeFolding:function(e,t,n){if(t.getBaseModel){var i=t.getBaseModel();e.forEach(function(e){var r=this._stylerAdapter.getBlockFoldBounds(e,i),o=this._createFoldingAnnotation(t,i,r.start,r.end);o&&n.push(o),this._computeFolding(e.getBlocks(),t,n)}.bind(this))}},_computeTasks:function(t,n,i,r,o){if(r=r||t.start,o=o||t.end,t.start<=o&&r<=t.end){if(!this._annotationModel)return;var s=e.AnnotationType.ANNOTATION_TASK;if(t.name&&0===t.name.indexOf("comment")){var a=[],l=n.getLineAtOffset(t.contentStart),c=n.getLineStart(l);this._stylerAdapter.parse(n.getText(c,t.end),c,t.contentStart-c,t,a,!0);for(var h=0;h<a.length;h++)"meta.annotation.task.todo"===a[h].style&&r<=a[h].start&&a[h].end<=o&&i.push(e.AnnotationType.createAnnotation(s,a[h].start,a[h].end,n.getText(a[h].start,a[h].end)))}t.getBlocks().forEach(function(e){this._computeTasks(e,n,i,r,o)}.bind(this))}},_createFoldingAnnotation:function(t,n,i,r){var o=n.getLineAtOffset(i),s=n.getLineAtOffset(r);return o===s?null:o+1===s&&n.getLineStart(s)===n.getLineEnd(s)?null:new(e.AnnotationType.getType(e.AnnotationType.ANNOTATION_FOLDING))(i,r,t)},_findBlock:function(e,t){var n=e.getBlocks();if(!n.length)return e;var i=c(n,t,!0);return i<n.length&&n[i].start<=t&&t<n[i].end?this._findBlock(n[i],t):e},_findBrackets:function(e,t,n,i,r,o){for(var s=[],a=[],l=r,h=n.getBlocks(),d=c(h,r,!0),u=d;u<h.length&&!(h[u].start>=o);u++){var p=h[u].start,f=h[u].end;if(p>l){var g=e.getLineAtOffset(l),m=e.getLineStart(g);this._stylerAdapter.parse(i.substring(m-r,p-r),m,l-m,n,a),a.forEach(function(e){e.style&&(0===e.style.indexOf(t.beginName)?s.push(e.start+1):0===e.style.indexOf(t.endName)&&s.push(-(e.start+1)))}),a=[]}l=f}return o>l&&(g=e.getLineAtOffset(l),m=e.getLineStart(g),this._stylerAdapter.parse(i.substring(m-r,o-r),m,l-m,n,a),a.forEach(function(e){e.style&&(0===e.style.indexOf(t.beginName)?s.push(e.start+1):0===e.style.indexOf(t.endName)&&s.push(-(e.start+1)))})),s},_findMatchingBracket:function(e,t,n){var i=e.getLineAtOffset(n),r=e.getLineEnd(i),o=e.getText(n,r),s=this._stylerAdapter.getBracketMatch(t,o);if(!s)return-1;for(var a=e.getLine(i),l=e.getLineStart(i),c=this._findBrackets(e,s,t,a,l,r),h=0;h<c.length;h++){var d=c[h]>=0?1:-1;if(c[h]*d-1===n){var u=1;if(s.atStart){for(h++;h<c.length;h++)if(d=c[h]>=0?1:-1,u+=d,0===u)return c[h]*d-1;i+=1;for(var p=e.getLineCount();p>i;){a=e.getLine(i),l=e.getLineStart(i),r=e.getLineEnd(i),c=this._findBrackets(e,s,t,a,l,r);for(var f=0;f<c.length;f++)if(d=c[f]>=0?1:-1,u+=d,0===u)return c[f]*d-1;i++}}else{for(h--;h>=0;h--)if(d=c[h]>=0?1:-1,u+=d,0===u)return c[h]*d-1;for(i-=1;i>=0;){a=e.getLine(i),l=e.getLineStart(i),r=e.getLineEnd(i),c=this._findBrackets(e,s,t,a,l,r);for(var g=c.length-1;g>=0;g--)if(d=c[g]>=0?1:-1,u+=d,0===u)return c[g]*d-1;i--}}break}}return-1},_getLineStyle:function(e){if(this._highlightCaretLine){var t=this._view,n=t.getModel(),i=t.getSelections(),r=!1;if(!i.some(function(t){return t.start===t.end?(r=r||n.getLineAtOffset(t.start)===e,!1):!0})&&r)return this._caretLineStyle}return null},_getStyles:function(e,t,n,i,r){for(var o=i+n.length,s=[],a=i+r,l=e.getBlocks(),h=c(l,a,!0),d=h;d<l.length&&!(l[d].start>=o);d++){var u=l[d].start,p=l[d].end;if(u>a){var f=t.getLineAtOffset(a),g=t.getLineStart(f);this._stylerAdapter.parse(n.substring(g-i,u-i),g,a-g,e,s)}var m=Math.max(a,u);if(m===u){var v=this._stylerAdapter.getBlockStartStyle(l[d],n.substring(m-i),m,s);v&&(m+=v.length)}var _=Math.min(o,p),y=[];if(_===p){var x=n.substring(_-a-(l[d].end-l[d].contentEnd)),w=this._stylerAdapter.getBlockEndStyle(l[d],x,_,y);w&&(_-=w.length)}f=t.getLineAtOffset(m),g=t.getLineStart(f);var b=this._getStyles(l[d],t,n.substring(g-i,_-i),g,m-g),C=this._stylerAdapter.getBlockContentStyleName(l[d]);if(C){var E=m;b.forEach(function(e){e.start-E&&s.push({start:E,end:e.start,style:C}),e.mergeable&&(e.style+=","+C),s.push(e),E=e.end}),_-E&&s.push({start:E,end:_,style:C})}else s=s.concat(b);s=s.concat(y),a=p}return o>a&&(f=t.getLineAtOffset(a),g=t.getLineStart(f),this._stylerAdapter.parse(n.substring(g-i,o-i),g,a-g,e,s)),s},_isRenderingWhitespace:function(){return this._whitespacesVisible},_onDestroy:function(){this.destroy()},_onLineStyle:function(e){e.textView===this._view&&(e.style=this._getLineStyle(e.lineIndex));var t=e.lineStart,n=e.textView.getModel();if(n.getBaseModel){t=n.mapOffset(t);var i=n.getBaseModel()}e.ranges=this._getStyles(this._rootBlock,i||n,e.lineText,t,0);for(var r=e.ranges.length-1;r>=0;r--){var o=e.ranges[r];if(o.style){if(o.style={styleClass:o.style.replace(/\./g," ")},i){var s=o.end-o.start;o.start=n.mapOffset(o.start,!0),o.end=o.start+s}}else e.ranges.splice(r,1)}this._isRenderingWhitespace()&&(this._spliceStyles(this._spacePattern,e.ranges,e.lineText,e.lineStart),this._spliceStyles(this._tabPattern,e.ranges,e.lineText,e.lineStart))},_onModelChanged:function(t){for(var n,i,r,o,s,a,l,h=t.start,d=t.removedCharCount,u=t.addedCharCount,p=u-d,f=this._view.getModel(),g=f.getBaseModel?f.getBaseModel():f,m=h+d,v=g.getCharCount(),_=g.getLineStart(g.getLineAtOffset(h)),y=this._findBlock(this._rootBlock,h);;){if(r=y.parent,!n&&r){if(0>p&&y.end-h<=-p){y=r;continue}if(s=g.getText(y.start,Math.min(v,y.end+p+1)),!this._stylerAdapter.verifyBlock(g,s,y,p)){y=r;continue}}i=y.getBlocks();var x=i.length,w=c(i,_,!0),b=c(i,m,!1,w-1,x);if(n=!1,w&&i.length&&i[w-1].end===h){s=g.getText(i[w-1].start,Math.min(v,h+1));var C=this.computeBlocks(g,s,y,i[w-1].start,null,null,null);C.length&&C[0].end!==i[w-1].end&&(w--,n=!0)}x>w&&i[w].start<=_&&(_<i[w].end||n)?(l=i[w].start,l>h&&(l+=p)):w===x&&x>0&&y.end-p===i[x-1].end?(l=i[--w].start,l>h&&(l+=p)):l=Math.max(_,y.contentStart),a=x>b?i[b].end:y.contentEnd,a>=h&&(a+=p),a=Math.min(a,v-1),s=g.getText(l,a+1);var E=this.computeBlocks(g,s,y,l,null,null,null);if(x>b){if(E.length&&E[E.length-1].end===a&&E[E.length-1].typeId===i[b].typeId)break;if(E.length&&this._stylerAdapter.blockSpansBeyondEnd(E[E.length-1])){b++;for(var T=E[E.length-1].getBlocks(),S=(T.length?T[T.length-1]:E[E.length-1]).typeId;x>b;){if(i[b].typeId===S){var k=i[b].end+p;k=Math.min(k,v-1),s=g.getText(l,k+1);var A=this.computeBlocks(g,s,y,l,null,null,null);if(A.length&&A[A.length-1].end===k){a=k,E=A;break}}b++}if(x>b)break}}else if(!E.length||E[E.length-1].end<=y.contentEnd+p)break;if(!r){a=v,b=x,s=g.getText(l,a),E=this.computeBlocks(g,s,y,l,null,null,null);break}y=r,o=!0}this._rootBlock.adjustBounds(h,p),b=Math.min(b+1,x);var L;if(o||(o=b-w!==E.length),!o)for(var M=0;M<E.length;M++){L=i[w+M];var N=E[M];if(L.start!==N.start||L.end!==N.end||L.typeId!==N.typeId){o=!0;break}}if(i.length||E.length)this.dispatchEvent({type:"BlocksChanged",oldBlocks:i.slice(w,b),newBlocks:E});else{var O=[y],D=[y];this.dispatchEvent({type:"BlocksChanged",oldBlocks:O,newBlocks:D}),y=D[0]}var R=[w,b-w].concat(E);if(Array.prototype.splice.apply(i,R),o){var I=l,P=a;f!==g&&(I=f.mapOffset(I,!0),P=f.mapOffset(P,!0)),this._view.redrawRange(I,P)}if(this._annotationModel){for(var B=[],F=[],V=[],K=this._annotationModel.getAnnotations(l,a),j=this._foldingEnabled&&g!==f,H=y.parent||y;K.hasNext();){var U=K.next();if(j&&U.type===e.AnnotationType.ANNOTATION_FOLDING){for(V.push(U),L=this._findBlock(H,U.start);L;){var W=this._stylerAdapter.getBlockFoldBounds(L,g);if(U.start===W.start&&U.end===W.end)break;L=L.parent}if(L&&U.start===W.start&&U.end===W.end){var G=U.start,$=U.end;if(G>h&&(G-=p),$>h&&($-=p),h>=G&&$>h&&m>=G&&$>m){var z=g.getLineAtOffset(U.start),X=g.getLineAtOffset(U.end);z!==X?U.expanded||U.expand():B.push(U)}}else B.push(U),U.expand()}else U.type===e.AnnotationType.ANNOTATION_TASK&&y.start<=U.start&&U.end<=y.end&&B.push(U)}j&&H.getBlocks().forEach(function(e){this._updateFolding(e,g,f,V,F,l,a)}.bind(this)),
this._detectTasks&&this._computeTasks(y,g,F,l,a),this._annotationProviders.forEach(function(e){var t=[],n=[];e(this._annotationModel,g,y,l,a,t,n),B=B.concat(t),F=F.concat(n)}.bind(this)),this._annotationModel.replaceAnnotations(B,F)}},_onMouseDown:function(e){if(2===e.clickCount){var t=this._view.getModel(),n=this._view.getOffsetAtLocation(e.x,e.y);if(n>0){var i=n-1,r=t;t.getBaseModel&&(i=t.mapOffset(i),r=t.getBaseModel());var o=this._findBlock(this._rootBlock,i),s=this._findMatchingBracket(r,o,i);if(-1!==s){e.preventDefault();var a=s;t.getBaseModel&&(a=t.mapOffset(a,!0)),n>a&&(n--,a++),this._view.setSelection(a,n)}}}},_onSelection:function(t){function n(e){var t={};return e.some(function(e){return e.isEmpty()?(t[l.getLineAtOffset(e.start).toString()]=!0,!1):!0})?{}:t}function i(e,t){for(var n in e)t[n]||(r=n>>0,a.redrawLines(r,r+1))}var r,o=Array.isArray(t.oldValue)?t.oldValue:[t.oldValue],s=Array.isArray(t.newValue)?t.newValue:[t.newValue],a=this._view,l=a.getModel();if(this._highlightCaretLine){var c=n(o),h=n(s);i(c,h),i(h,c)}if(this._annotationModel){var d,u,p=this._bracketAnnotations;if(1===s.length&&s[0].isEmpty()&&(u=s[0].getCaret())>0){var f=u-1;l.getBaseModel&&(f=l.mapOffset(f),l=l.getBaseModel());var g=this._findBlock(this._rootBlock,f),m=this._findMatchingBracket(l,g,f);-1!==m&&(d=[e.AnnotationType.createAnnotation(e.AnnotationType.ANNOTATION_MATCHING_BRACKET,m,m+1),e.AnnotationType.createAnnotation(e.AnnotationType.ANNOTATION_CURRENT_BRACKET,f,f+1)])}this._bracketAnnotations=d,this._annotationModel.replaceAnnotations(p,d)}},_spliceStyles:function(e,t,n,r){var o=e.regex;o.lastIndex=0;for(var s=0,a=o.exec(n);a;){for(var l=r+a.index;s<t.length&&!(l<t[s].end);)s++;var c={start:l,end:l+1,style:i(e.style)};if(s<t.length&&t[s].start<=l){var h={start:l+1,end:t[s].end,style:t[s].style};t[s].end=l,t.splice(s+1,0,h),t.splice(s+1,0,c),s+=2,c.style.styleClass+=" "+t[s].style.styleClass}else t.splice(s,0,c),s++;a=o.exec(n)}},_updateFolding:function(e,t,n,i,r,o,s){o=o||e.start,s=s||e.end;var a=this._stylerAdapter.getBlockFoldBounds(e,t);if(!e.doNotFold&&a.start<=s&&o<=a.end){var l=c(i,a.start,!0);if(!(l<i.length&&i[l].start===a.start&&i[l].end===a.end)){var h=this._createFoldingAnnotation(n,t,a.start,a.end);h&&r.push(h)}e.getBlocks().forEach(function(e){this._updateFolding(e,t,n,i,r,o,s)}.bind(this))}},_caretLineStyle:{styleClass:"meta annotation currentLine"},_spacePattern:{regex:/[ ]/g,style:{styleClass:"punctuation separator space",unmergeable:!0}},_tabPattern:{regex:/\t/g,style:{styleClass:"punctuation separator tab",unmergeable:!0}}},t.EventTarget.addMixin(l.prototype),{TextStyler:l,Block:s,createPatternBasedAdapter:h}}),n("orion/editor/textMateStyler",["orion/regex"],function(e){function t(e){var n;if(e instanceof Array){n=new Array(e.length);for(var i=0;i<e.length;i++)n[i]=t(e[i])}else{n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=e[r];"object"==typeof o&&null!==o?n[r]=t(o):n[r]=o}}return n}function n(e,n,i){this.initialize(e),this.grammar=t(n),this.externalGrammars=i?t(i):[],this._styles={},this._tree=null,this._allGrammars={},this.preprocess(this.grammar)}var i={unsupported:[{regex:/\(\?[ims\-]:/,func:function(e){return"option on/off for subexp"}},{regex:/\(\?<([=!])/,func:function(e){return"="===e[1]?"lookbehind":"negative lookbehind"}},{regex:/\(\?>/,func:function(e){return"atomic group"}}],toRegExp:function(e){function t(e,t){throw new Error('Unsupported regex feature "'+e+'": "'+t[0]+'" at index: '+t.index+" in "+t.input)}function n(e){for(var t="",n=!1,i=e.length,r=0;i>r;){var o=e.charAt(r);if(n||"#"!==o)if(!n&&/\s/.test(o))for(;i>r&&/\s/.test(o);)o=e.charAt(++r);else"\\"===o?(t+=o,/\s/.test(e.charAt(r+1))||(t+=e.charAt(r+1),r+=1),r+=1):"["===o?(n=!0,t+=o,r+=1):"]"===o?(n=!1,t+=o,r+=1):(t+=o,r+=1);else for(;i>r&&"\r"!==o&&"\n"!==o;)o=e.charAt(++r)}return t}var r,o="";for(e=i.processGlobalFlag("x",e,function(e){return n(e)}),e=i.processGlobalFlag("i",e,function(e){return o+="i",e}),r=0;r<this.unsupported.length;r++){var s;(s=this.unsupported[r].regex.exec(e))&&t(this.unsupported[r].func(s),s)}return new RegExp(e,o)},processGlobalFlag:function(e,t,n){function i(e,t){for(var n=0,i=e.length,r=-1,o=t;i>o&&-1===r;o++)switch(e.charAt(o)){case"\\":o++;break;case"(":n++;break;case")":n--,0===n&&(r=o)}return r}var r="(?"+e+")",o="(?"+e+":";if(t.substring(0,r.length)===r)return n(t.substring(r.length));if(t.substring(0,o.length)===o){var s=i(t,0);if(s<t.length-1)throw new Error("Only a "+o+") group that encloses the entire regex is supported in: "+t);return n(t.substring(o.length,s))}return t},hasBackReference:function(e){return/\\\d+/.test(e.source)},getSubstitutedRegex:function(t,n,i){i="undefined"==typeof i?!0:!1;for(var r=t.source.split(/(\\\d+)/g),o=[],s=0;s<r.length;s++){var a=r[s],l=/\\(\d+)/.exec(a);if(l){var c=n[l[1]]||"";o.push(i?e.escape(c):c)}else o.push(a)}return new RegExp(o.join(""))},groupify:function(e,t){for(var n=1,i=2,r=3,o=4,s=e.source,a=s.length,l=[],c=0,h=[],d=1,u=1,p=[],f={},g={},m=0;a>m;m++){var v=l[l.length-1],_=s.charAt(m);switch(_){case"(":v===o&&(l.pop(),p.push(")"),h[h.length-1].end=m);var y=a>m+2?s.charAt(m+1)+""+s.charAt(m+2):null;if("?:"===y||"?="===y||"?!"===y){var x;"?:"===y?x=n:(x=r,c++),l.push(x),h.push({start:m,end:-1,type:x}),p.push(_),p.push(y),m+=y.length}else l.push(i),h.push({start:m,end:-1,type:i,oldNum:d,num:u}),p.push(_),0===c&&(g[u]=null),f[d]=u,d++,u++;break;case")":var w=l.pop();w===r&&c--,h[h.length-1].end=m,p.push(_);break;case"*":case"+":case"?":case"}":var b=_,C=s.charAt(m-1),E=m-1;if("}"===_){for(var T=m-1;"{"!==s.charAt(T)&&T>=0;T--);C=s.charAt(T-1),E=T-1,b=s.substring(T,m+1)}var S=h[h.length-1];if(")"===C&&(S.type===i||S.type===o)){p.splice(S.start,0,"("),p.push(b),p.push(")");for(var k={start:S.start,end:p.length-1,type:o,num:S.num},A=0;A<h.length;A++)w=h[A],(w.type===i||w.type===o)&&w.start>=S.start&&w.end<=E&&(w.start+=1,w.end+=1,w.num=w.num+1,w.type===i&&(f[w.oldNum]=w.num));h.push(k),u++;break}default:if("|"!==_&&v!==i&&v!==o&&0===c&&(l.push(o),h.push({start:m,end:-1,type:o,num:u}),p.push("("),g[u]=null,u++),p.push(_),"\\"===_){var L=s.charAt(m+1);p.push(L),m+=1}}}for(;l.length;)l.pop(),p.push(")");var M=new RegExp(p.join("")),N={};t=t||f;for(var O in t)t.hasOwnProperty(O)&&(N[O]="\\"+t[O]);return M=this.getSubstitutedRegex(M,N,!1),[M,f,g]},complexCaptures:function(e){if(!e)return!1;for(var t in e)if(e.hasOwnProperty(t)&&"0"!==t)return!0;return!1}};return n.prototype={initialize:function(e){this.textView=e,this.textView.stylerOptions=this;var t=this;this._listener={onModelChanged:function(e){t.onModelChanged(e)},onDestroy:function(e){t.onDestroy(e)},onLineStyle:function(e){t.onLineStyle(e)},onStorage:function(e){t.onStorage(e)}},e.addEventListener("ModelChanged",this._listener.onModelChanged),e.addEventListener("Destroy",this._listener.onDestroy),e.addEventListener("LineStyle",this._listener.onLineStyle),e.redrawLines()},onDestroy:function(e){this.destroy()},destroy:function(){this.textView&&(this.textView.removeEventListener("ModelChanged",this._listener.onModelChanged),this.textView.removeEventListener("Destroy",this._listener.onDestroy),this.textView.removeEventListener("LineStyle",this._listener.onLineStyle),this.textView=null),this.grammar=null,this._styles=null,this._tree=null,this._listener=null},preprocess:function(e){for(var t=[e];0!==t.length;){var n=t.pop();if((!n._resolvedRule||!n._typedRule)&&(n._resolvedRule=this._resolve(n),n._typedRule=this._createTypedRule(n),this.addStyles(n.name),this.addStyles(n.contentName),this.addStylesForCaptures(n.captures),this.addStylesForCaptures(n.beginCaptures),this.addStylesForCaptures(n.endCaptures),n._resolvedRule!==n&&t.push(n._resolvedRule),n.patterns))for(var i=0;i<n.patterns.length;i++)t.push(n.patterns[i])}},addStyles:function(e){if(e&&!this._styles[e]){this._styles[e]=[];for(var t=e.split("."),n=0;n<t.length;n++)this._styles[e].push(t.slice(0,n+1).join("-"))}},addStylesForCaptures:function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t].name;this.addStyles(n)}},ContainerRule:function(){function e(e){this.rule=e,this.subrules=e.patterns}return e.prototype.valueOf=function(){return"aa"},e}(),BeginEndRule:function(){function e(e){this.rule=e,this.beginRegex=i.toRegExp(e.begin),this.endRegex=i.toRegExp(e.end),this.subrules=e.patterns||[],this.endRegexHasBackRef=i.hasBackReference(this.endRegex);var t=i.complexCaptures(e.captures),n=i.complexCaptures(e.beginCaptures)||i.complexCaptures(e.endCaptures);if(this.isComplex=t||n,this.isComplex){var r=i.groupify(this.beginRegex);this.beginRegex=r[0],this.beginOld2New=r[1],this.beginConsuming=r[2];var o=i.groupify(this.endRegex,this.beginOld2New);this.endRegex=o[0],this.endOld2New=o[1],this.endConsuming=o[2]}}return e.prototype.valueOf=function(){return this.beginRegex},e}(),MatchRule:function(){function e(e){if(this.rule=e,this.matchRegex=i.toRegExp(e.match),this.isComplex=i.complexCaptures(e.captures),this.isComplex){var t=i.groupify(this.matchRegex);this.matchRegex=t[0],this.matchOld2New=t[1],this.matchConsuming=t[2]}}return e.prototype.valueOf=function(){return this.matchRegex},e}(),_createTypedRule:function(e){return e.match?new this.MatchRule(e):e.begin?new this.BeginEndRule(e):new this.ContainerRule(e)},_resolve:function(e){var t=e;if(e.include){if(e.begin||e.end||e.match)throw new Error('Unexpected regex pattern in "include" rule '+e.include);var n=e.include;if("#"===n.charAt(0)){if(t=this.grammar.repository&&this.grammar.repository[n.substring(1)],!t)throw new Error("Couldn't find included rule "+n+" in grammar repository")}else if("$self"===n)t=this.grammar;else{if("$base"===n)throw new Error('Include "$base" is not supported');if(t=this._allGrammars[n],!t)for(var i=0;i<this.externalGrammars.length;i++){var r=this.externalGrammars[i];if(r.scopeName===n){this.preprocess(r),this._allGrammars[n]=r,t=r;break}}}}return t},ContainerNode:function(){function e(e,t){this.parent=e,this.rule=t,this.children=[],this.start=null,this.end=null}return e.prototype.addChild=function(e){this.children.push(e)},e.prototype.valueOf=function(){var e=this.rule;return"ContainerNode { "+(e.include||"")+" "+(e.name||"")+(e.comment||"")+"}"},e}(),BeginEndNode:function(){function e(e,t,n){this.parent=e,this.rule=t,this.children=[],this.setStart(n),this.end=null,this.endMatch=null,t.endRegexHasBackRef?this.endRegexSubstituted=i.getSubstitutedRegex(t.endRegex,n):this.endRegexSubstituted=null}return e.prototype.addChild=function(e){this.children.push(e)},e.prototype.getIndexInParent=function(e){return this.parent?this.parent.children.indexOf(this):-1},e.prototype.setStart=function(e){this.start=e.index,this.beginMatch=e},e.prototype.setEnd=function(e){if(e&&"object"==typeof e){var t=e;this.endMatch=t,this.end=t.index+t[0].length}else{var n=e;this.endMatch=null,this.end=n}},e.prototype.shiftStart=function(e){this.start+=e,this.beginMatch.index+=e},e.prototype.shiftEnd=function(e){this.end+=e,this.endMatch&&(this.endMatch.index+=e)},e.prototype.valueOf=function(){return"{"+this.rule.beginRegex+" range="+this.start+".."+this.end+"}"},e}(),push:function(e,t){if(t)for(var n=t.length;n>0;)e.push(t[--n])},exec:function(e,t,n){var i=e.exec(t);return i&&(i.index+=n),e.lastIndex=0,i},afterMatch:function(e){return e.index+e[0].length},getEndMatch:function(e,t,n){if(e instanceof this.BeginEndNode){var i=e.rule,r=e.endRegexSubstituted||i.endRegex;return r?this.exec(r,t,n):null}return null},initialParse:function(){var e=(this.textView.getModel().getCharCount(),new this.ContainerNode(null,this.grammar._typedRule));this._tree=e,this.parse(this._tree,!1,0)},onModelChanged:function(e){var t=e.addedCharCount,n=(e.addedLineCount,e.removedCharCount),i=(e.removedLineCount,e.start);if(this._tree){var r=this.textView.getModel(),o=r.getCharCount(),s=r.getLineEnd(r.getLineAtOffset(i)-1),a=this.getFirstDamaged(s,s);s=-1===s?0:s;var l;l=a?this.parse(a,!0,s,i,t,n):o,this.textView.redrawRange(s,l)}else this.initialParse()},getFirstDamaged:function(e,t){if(0>e)return this._tree;for(var n=[this._tree],i=null;n.length;){var r=n.pop();if(!r.parent||this.isDamaged(r,e,t)){r instanceof this.BeginEndNode&&(i=r);for(var o=0;o<r.children.length;o++)n.push(r.children[o])}}return i||this._tree},isDamaged:function(e,t,n){return e.start<=n&&e.end>t},parse:function(e,t,n,i,r,o){var s=this.textView.getModel(),a=s.getLineStart(s.getLineCount()-1),l=s.getCharCount(),c=this.getInitialExpected(e,n),h=-1;if(t){e.repaired=!0,e.endNeedsUpdate=!0;var d=e.children[e.children.length-1],u=r-o,p=d?s.getLineEnd(s.getLineAtOffset(d.end+u)):-1,f=s.getLineEnd(s.getLineAtOffset(i+o));h=Math.max(p,f)}h=-1===h?l:h;for(var g=c,m=e,v=!1,_=n,y=-1;m&&(!t||h>_);){var x=this.getNextMatch(s,m,_);x||(_=_>=a?l:s.getLineStart(s.getLineAtOffset(_)+1));var w=x&&x.match,b=x&&x.rule,C=x&&x.isSub,E=x&&x.isEnd;if(C){if(_=this.afterMatch(w),b instanceof this.BeginEndRule)if(v=!0,t&&b===g.rule&&m===g.parent){var T=g;T.setStart(w),T.repaired=!0,T.endNeedsUpdate=!0,m=T,g=this.getNextExpected(g,"begin")}else{t&&(this.prune(m,g),t=!1);var S=new this.BeginEndNode(m,b,w);m.addChild(S),m=S}}else(E||_===l)&&(m instanceof this.BeginEndNode&&(w?(v=!0,y=Math.max(y,m.end),m.setEnd(w),_=this.afterMatch(w),t&&m===g&&m.parent===g.parent?(m.repaired=!0,delete m.endNeedsUpdate,g=this.getNextExpected(g,"end")):t&&(this.prune(m,g),t=!1)):(m.setEnd(l),delete m.endNeedsUpdate)),m=m.parent);t&&_>=h&&!v&&(this.prune(e,c),t=!1)}return this.removeUnrepairedChildren(e,t,n),this.cleanup(t,e,n,h,l,r,o),t?Math.max(y,_):_},removeUnrepairedChildren:function(e,t,n){if(t){for(var i=e.children,r=-1,o=0;o<i.length;o++){var s=i[o];if(!s.repaired&&this.isDamaged(s,n,Number.MAX_VALUE)){r=o;break}}-1!==r&&(e.children.length=r)}},cleanup:function(e,t,n,i,r,o,s){var a,l,c;if(e){var h=o-s,d=this.getIntersecting(i-h+1,r);for(c=this.getIntersecting(n,i),a=0;a<d.length;a++)l=d[a],!l.repaired&&l instanceof this.BeginEndNode&&(l.shiftEnd(h),l.shiftStart(h));for(a=0;a<c.length;a++)l=c[a],l.repaired&&l.endNeedsUpdate&&l.shiftEnd(h),delete l.endNeedsUpdate,delete l.repaired}else for(c=this.getIntersecting(n,i),a=0;a<c.length;a++)delete c[a].repaired},getNextMatch:function(e,t,n,i){var r=e.getLineAtOffset(n),o=e.getLineEnd(r),s=e.getText(n,o),a=[],l=[],c=[],h=[];for(this.push(a,t.rule.subrules);a.length;){var d=a.length?a.pop():null,u=d&&d._resolvedRule._typedRule;if(u instanceof this.ContainerRule&&-1===l.indexOf(u))l.push(u),this.push(a,u.subrules);else if(!u||!i||u.matchRegex){var p=u&&this.exec(u.matchRegex||u.beginRegex,s,n);p&&(c.push(p),h.push(u))}}for(var f=Number.MAX_VALUE,g=-1,m=0;m<c.length;m++){var v=c[m];v.index<f&&(f=v.index,g=m)}if(!i){var _=t,y=this.getEndMatch(t,s,n);if(y){var x=_.rule.applyEndPatternLast,w=-1===g||y.index<f||!x&&y.index===f;if(w)return{isEnd:!0,rule:_.rule,match:y}}}return-1===g?null:{isSub:!0,rule:h[g],match:c[g]}},getInitialExpected:function(e,t){var n,i;if(e===this._tree){for(n=0;n<e.children.length;n++)if(i=e.children[n],i.start>=t)return i}else if(e instanceof this.BeginEndNode&&e.endMatch){var r=e.endMatch.index;for(n=0;n<e.children.length&&(i=e.children[n],!(i.start>=t));n++);if(i&&i.start<r)return i}return e},getNextExpected:function(e,t){var n=e;if("begin"===t){var i=n.children[0];return i?i:n}if("end"===t){var r=n.parent;if(r){var o=r.children[r.children.indexOf(n)+1];return o?o:r}}return null},prune:function(e,t){var n=t.parent===e;n?e.children.length=t.getIndexInParent():e instanceof this.BeginEndNode&&(e.endMatch=null,e.end=null),e.parent&&(e.parent.children.length=e.getIndexInParent()+1)},onLineStyle:function(e){function t(e,t){return e.start-t.start}this._tree||this.initialParse();var n=e.lineStart,i=this.textView.getModel(),r=i.getLineEnd(e.lineIndex),o=i.getLineEnd(i.getLineAtOffset(n)-1),s=this.getFirstDamaged(o,o),a=this.getLineScope(i,s,n,r);e.ranges=this.toStyleRanges(a),e.ranges.sort(t)},getLineScope:function(e,t,n,i){for(var r=n,o=this.getInitialExpected(t,n),s=[],a=[];t&&i>r;){var l=this.getNextMatch(e,t,r);if(!l)break;var c=l&&l.match,h=l&&l.rule,d=l&&l.isSub,u=l&&l.isEnd;c.index!==r&&a.push({start:r,end:c.index,node:t}),d?(r=this.afterMatch(c),h instanceof this.BeginEndRule?(this.addBeginScope(s,c,h),t=o,o=this.getNextExpected(o,"begin")):this.addMatchScope(s,c,h)):u&&(r=this.afterMatch(c),this.addEndScope(s,c,h),o=this.getNextExpected(o,"end"),t=t.parent)}i>r&&a.push({start:r,end:i,node:t});var p=this.getInheritedLineScope(a,n,i);return s.concat(p)},getInheritedLineScope:function(e,t,n){for(var i=[],r=0;r<e.length;r++)for(var o=e[r],s=o.node;s;){var a=s.rule.rule,l=a.name,c=a.contentName,h=c||l;if(h){this.addScopeRange(i,o.start,o.end,h);break}s=s.parent}return i},addBeginScope:function(e,t,n){var i=n.rule;this.addCapturesScope(e,t,i.beginCaptures||i.captures,n.isComplex,n.beginOld2New,n.beginConsuming)},addEndScope:function(e,t,n){var i=n.rule;this.addCapturesScope(e,t,i.endCaptures||i.captures,n.isComplex,n.endOld2New,n.endConsuming)},addMatchScope:function(e,t,n){var i=n.rule,r=i.name,o=i.captures;o?this.addCapturesScope(e,t,o,n.isComplex,n.matchOld2New,n.matchConsuming):this.addScope(e,t,r)},addScope:function(e,t,n){n&&e.push({start:t.index,end:this.afterMatch(t),scope:n})},addScopeRange:function(e,t,n,i){i&&e.push({start:t,end:n,scope:i})},addCapturesScope:function(e,t,n,i,r,o){if(n)if(i){for(var s={1:0},a=0,l=1;void 0!==t[l];l++)void 0!==o[l]&&(a+=t[l].length),void 0!==t[l+1]&&(s[l+1]=a);for(var c=t.index,h=1;n[h];h++){var d=n[h].name,u=r[h],p=c+s[u];if("undefined"!=typeof t[u]){var f=p+t[u].length;this.addScopeRange(e,p,f,d)}}}else this.addScope(e,t,n[0]&&n[0].name)},getIntersecting:function(e,t){for(var n=[],i=this._tree?[this._tree]:[];i.length;){var r=i.pop(),o=!1;if(r instanceof this.ContainerNode?o=!0:this.isDamaged(r,e,t)&&(o=!0,n.push(r)),o)for(var s=r.children.length,a=0;s>a;a++)i.push(r.children[a])}return n.reverse()},toStyleRanges:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],r=this._styles[i.scope];if(!r)throw new Error("styles not found for "+i.scope);var o=r.join(" ");t.push({start:i.start,end:i.end,style:{styleClass:o}})}return t}},{RegexUtil:i,TextMateStyler:n}}),n("orion/editor/AsyncStyler",["i18n!orion/editor/nls/messages","orion/editor/annotations"],function(e,t){function n(e){return-1!==e.getProperty("objectClass").indexOf(r)&&"highlighter"===e.getProperty("type")}function i(e,t,n){this.initialize(e,t,n),this.lineStyles=[]}var r="orion.edit.highlighter",o="orion.annotation.highlightError",s=r+" service must be an event emitter";return t.AnnotationType.registerType(o,{title:e.syntaxError,html:"<div class='annotationHTML error'></div>",rangeStyle:{styleClass:"annotationRange error"}}),i.prototype={initialize:function(e,t,i){this.textView=e,this.serviceRegistry=t,this.annotationModel=i,this.services=[];var o=this;this.listener={onModelChanging:function(e){o.onModelChanging(e)},onModelChanged:function(e){o.onModelChanged(e)},onDestroy:function(e){o.onDestroy(e)},onLineStyle:function(e){o.onLineStyle(e)},onStyleReady:function(e){o.onStyleReady(e)},onServiceAdded:function(e){o.onServiceAdded(e.serviceReference,o.serviceRegistry.getService(e.serviceReference))},onServiceRemoved:function(e){o.onServiceRemoved(e.serviceReference,o.serviceRegistry.getService(e.serviceReference))}},e.addEventListener("ModelChanging",this.listener.onModelChanging),e.addEventListener("ModelChanged",this.listener.onModelChanged),e.addEventListener("Destroy",this.listener.onDestroy),e.addEventListener("LineStyle",this.listener.onLineStyle),t.addEventListener("registered",this.listener.onServiceAdded),t.addEventListener("unregistering",this.listener.onServiceRemoved);for(var s=t.getServiceReferences(r),a=0;a<s.length;a++){var l=s[a];n(l)&&this.addServiceListener(t.getService(l))}},onDestroy:function(e){this.destroy()},destroy:function(){if(this.textView&&(this.textView.removeEventListener("ModelChanging",this.listener.onModelChanging),this.textView.removeEventListener("ModelChanged",this.listener.onModelChanged),this.textView.removeEventListener("Destroy",this.listener.onDestroy),this.textView.removeEventListener("LineStyle",this.listener.onLineStyle),this.textView=null),this.services){for(var e=0;e<this.services.length;e++)this.removeServiceListener(this.services[e]);this.services=null}this.serviceRegistry&&(this.serviceRegistry.removeEventListener("registered",this.listener.onServiceAdded),this.serviceRegistry.removeEventListener("unregistering",this.listener.onServiceRemoved),this.serviceRegistry=null),this.listener=null,this.lineStyles=null},onModelChanging:function(e){this.startLine=this.textView.getModel().getLineAtOffset(e.start)},onModelChanged:function(e){var t=this.startLine;(e.addedLineCount||e.removedLineCount)&&Array.prototype.splice.apply(this.lineStyles,[t,e.removedLineCount].concat(this._getEmptyStyle(e.addedLineCount)))},onStyleReady:function(e){var n=e.lineStyles||e.style,i=Number.MAX_VALUE,r=-1,s=this.textView.getModel();for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(this.lineStyles[a]=n[a],i=Math.min(i,a),r=Math.max(r,a));i=Math.max(i,0),r=Math.min(r,s.getLineCount());var l=this.annotationModel;if(l){for(var c=l.getAnnotations(s.getLineStart(i),s.getLineEnd(r)),h=[];c.hasNext();){var d=c.next();d.type===o&&h.push(d)}for(var u=[],p=i;r>=p;p++){a=p;var f=this.lineStyles[a],g=f&&f.errors,m=s.getLineStart(a);if(g)for(var v=0;v<g.length;v++){var _=g[v];u.push(t.AnnotationType.createAnnotation(o,_.start+m,_.end+m))}}l.replaceAnnotations(h,u)}this.textView.redrawLines(i,r+1)},onLineStyle:function(e){function t(e,t){for(var n=e.length,i=[],r=0;n>r;r++){var o=e[r];i.push({start:o.start+t,end:o.end+t,style:o.style})}return i}var n=this.lineStyles[e.lineIndex];n&&(n.ranges?e.ranges=t(n.ranges,e.lineStart):n.style&&(e.style=n.style))},_getEmptyStyle:function(e){for(var t=[],n=0;e>n;n++)t.push(null);return t},setContentType:function(e){if(this.contentType=e,this.services)for(var t=0;t<this.services.length;t++){var n=this.services[t];if(n.setContentType){var i=this.serviceRegistry.getService("orion.page.progress");i?i.progress(n.setContentType(this.contentType),this.contentType.id):n.setContentType(this.contentType)}}},onServiceAdded:function(e,t){n(e)&&this.addServiceListener(t)},onServiceRemoved:function(e,t){-1!==this.services.indexOf(t)&&this.removeServiceListener(t)},addServiceListener:function(e){if("function"==typeof e.addEventListener){if(e.addEventListener("orion.edit.highlighter.styleReady",this.listener.onStyleReady),this.services.push(e),e.setContentType&&this.contentType){var t=this.serviceRegistry.getService("orion.page.progress");t?t.progress(e.setContentType(this.contentType),this.contentType.id):e.setContentType(this.contentType)}}else"undefined"!=typeof console&&console.log(new Error(s))},removeServiceListener:function(e){if("function"==typeof e.removeEventListener){e.removeEventListener("orion.edit.highlighter.styleReady",this.listener.onStyleReady);var t=this.services.indexOf(e);-1!==t&&this.services.splice(t,1)}else"undefined"!=typeof console&&console.log(new Error(s))}},i}),n("orion/highlight",["examples/editor/textStyler","orion/editor/textStyler","orion/editor/textMateStyler","orion/editor/AsyncStyler","orion/Deferred"],function(e,t,n,i,r){function o(o,s,l,c,h,d,u){function p(e,t){var n=e.getProperty("contentType")||e.getProperty("contentTypes"),i=e.getProperty("fileTypes");if(n)return r.when(s.isSomeExtensionOf(l,n)).then(function(t){return t?e:null});if(t&&i&&-1!==i.indexOf(t)){var o=new r;return o.resolve(e),o}return null}function f(e){return u||"highlighter"!==e.getProperty("type")}function g(t){var n=null;switch(t&&t.id){case"application/javascript":case"application/json":n=new e.TextStyler(c,"js",h);break;case"text/x-java-source":n=new e.TextStyler(c,"java",h);break;case"text/css":n=new e.TextStyler(c,"css",h)}return n}if(!a){var m=g(l);if(m){var v=new r;return v.resolve(m),v}}a&&!this.orionGrammars&&(this.orionGrammars={});for(var _=d&&d.split(".").pop().toLowerCase(),y=o.getServiceReferences("orion.edit.highlighter"),x=[],w=[],b=0;b<y.length;b++){var C=y[b],E=C.getProperty("type");if("grammar"===E||!a&&"undefined"==typeof E)x.push(C.getProperty("grammar"));else if("highlighter"!==E){var T=C.getProperty("id");T&&!this.orionGrammars[T]&&(this.orionGrammars[T]={id:T,contentTypes:C.getProperty("contentTypes"),patterns:C.getProperty("patterns"),repository:C.getProperty("repository")})}var S=p(C,_);S&&w.push(S)}return r.all(w,function(e){return{_error:e}}).then(function(e){for(var r,s=e.length-1;s>=0;s--){var d=e[s];if(d&&!d._error&&f(d)){r=d;break}}var u;if(r){var p=r.getProperty("type");if("highlighter"===p)u=new i(c,o,h),u.setContentType(l);else if("grammar"===p||!a&&"undefined"==typeof p){var g=r.getProperty("grammar");u=new n.TextMateStyler(c,g,x)}else if(a){var m=[];for(var v in this.orionGrammars)m.push(this.orionGrammars[v]);var _=new t.createPatternBasedAdapter(m,r.getProperty("id"),l.id);u=new t.TextStyler(c,h,_)}}else!a||l&&"text/x-markdown"===l.id||(_=new t.createPatternBasedAdapter([],""),u=new t.TextStyler(c,h,_));return u})}function s(e,t){this.serviceRegistry=e,this.contentTypeService=t,this.styler=null}var a=1;return s.prototype={setup:function(e,t,n,i,r){r="undefined"==typeof r?!0:r,this.styler&&(this.styler.destroy&&this.styler.destroy(),this.styler=null);var s=this;return o(this.serviceRegistry,this.contentTypeService?this.contentTypeService:this.serviceRegistry.getService("orion.core.contentTypeRegistry"),e,t,n,i,r).then(function(e){return s.styler=e,e})},getStyler:function(){return this.styler}},{createStyler:o,SyntaxHighlighter:s}}),n("orion/markOccurrences",["orion/Deferred"],function(e){function t(e,t,n){this.registry=e,this.inputManager=t,this.editor=n}return t.prototype={setOccurrencesVisible:function(e){this.occurrencesVisible!==e&&(this.occurrencesVisible=e,e||this.editor.showOccurrences([]))},findOccurrences:function(){function t(t,n,i){function r(e,t,n){var i=t.getProperty("contentType");return o.isSomeExtensionOf(n,i).then(function(e){return e?t:null})}for(var o=t.getService("orion.core.contentTypeRegistry"),s=t.getServiceReferences("orion.edit.occurrences"),a=[],l=0;l<s.length;l++){var c=s[l],h=c.getProperty("pattern");if(c.getProperty("contentType"))a.push(r(t,c,n));else if(h&&new RegExp(h).test(i)){var d=new e;d.resolve(c),a.push(d)}}return e.all(a,function(e){return{_error:e}}).then(function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];i&&!i._error&&t.push(i)}return t})}var n,i=this,r=function(){n&&window.clearTimeout(n),i.occurrencesVisible&&(n=window.setTimeout(function(){n=null;var t=i.editor,r=t.getSelections();if(r.length>1)return void i.editor.showOccurrences([]);var o={selection:r[0],contentType:i.inputManager.getContentType().id};if(Array.isArray(i.occurrencesServices)&&i.occurrencesServices.length>0){for(var s=[],a=[],l=0;l<i.occurrencesServices.length;l++){var c=i.occurrencesServices[l];c&&s.push(c.computeOccurrences(t.getEditorContext(),o).then(function(e){a=a.concat(e)}))}e.all(s).then(function(){i.editor.showOccurrences(a)})}},500))};i.inputManager.addEventListener("InputChanged",function(e){var o=i.editor.getTextView();o&&(o.removeEventListener("Selection",r),t(i.registry,e.contentType,e.title).then(function(e){if(e&&0!==e.length){i.occurrencesServices=[];for(var t=0;t<e.length;t++){var s=i.registry.getService(e[t]);s&&i.occurrencesServices.push(s)}o.addEventListener("Selection",r)}else n&&window.clearTimeout(n)}))})}},{MarkOccurrences:t}}),n("orion/syntaxchecker",["orion/Deferred","orion/edit/editorContext"],function(e,t){function n(e,t,n){var i=e.getProperty("contentType");return n.isSomeExtensionOf(t,i).then(function(t){return t?e:null})}function i(e,t,n){return e=Math.max(e,t),e=Math.min(e,n)}function r(e){e=e||{};var t=e.problems||e.errors||e;return Array.isArray(t)?t:[]}function o(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.description=r.description||r.reason,r.severity=r.severity||"error",r.start="number"==typeof r.start?r.start:r.character,"number"==typeof r.line){var o=t.getLine(r.line-1,!1).length;r.start=i(r.start,1,o),r.end="number"==typeof r.end?r.end:-1,r.end=i(r.end,r.start+1,o+1)}else{var s=t.getCharCount();if(r.start=i(r.start,0,s),r.end="number"==typeof r.end?r.end:-1,r.end=i(r.end,r.start,s),r.end===s&&t.getLineCount()>1&&s===t.getLineStart(t.getLineCount()-1)){var a=t.getLineCount()-2,l=t.getLineStart(a),c=t.getLineEnd(a);l===c?r.start=r.end=c:(r.start=c-1,r.end=c)}}}}function s(e,t){this.registry=e,this.textModel=t}return s.prototype={initialize:function(e,t){return t?void this.getValidators(e,t).then(function(n){Array.isArray(n)&&n.length>0&&n.forEach(function(n){var i=this.registry.getService(n);i&&"function"==typeof i.initialize&&i.initialize(e,t)}.bind(this))}.bind(this)):void this.registry.getServiceReferences("orion.edit.validator").forEach(function(t){var n=this.registry.getService(t);n&&"function"==typeof n.initialize&&n.initialize(e)}.bind(this))},checkSyntax:function(n,i,s,a,l){if(!n||s)return(new e).resolve([]);if(!s){var c=this.registry;return this.getValidators(i,n).then(function(s){if(0===s.length)return(new e).resolve();var h=c.getService("orion.page.progress"),d=s.map(function(e){var o,s=c.getService(e);if(s.computeProblems){var d={contentType:n.id,title:i};o=s.computeProblems(l?l:t.getEditorContext(c),d)}else s.checkSyntax&&(o=s.checkSyntax(i,a));return h.progress(o,"Validating "+i).then(r)});return e.all(d,function(e){return{_error:e}}).then(function(t){for(var n=[],i=0;i<t.length;i++){var r=t[i];r._error||(o(r,this.textModel),n=n.concat(r))}return(new e).resolve(n)}.bind(this))}.bind(this),function(t){return(new e).resolve([])})}},setTextModel:function(e){this.textModel=e},getValidators:function(t,i){for(var r=this.registry.getService("orion.core.contentTypeRegistry"),o=this.registry.getServiceReferences("orion.edit.validator"),s=[],a=0;a<o.length;a++){var l=o[a],c=l.getProperty("pattern");if(l.getProperty("contentType"))s.push(n(l,i,r));else if(c&&new RegExp(c).test(t)){var h=new e;h.resolve(l),s.push(h)}}return e.all(s,function(e){return{_error:e}}).then(function(e){var t=[];for(a=0;a<e.length;a++){var n=e[a];n&&!n._error&&t.push(n)}return t})}},{SyntaxChecker:s}}),n("orion/liveEditSession",["orion/Deferred"],function(e){function t(e){return e instanceof Error?e:new Error(e)}function n(e,t){this.registry=e,this.editor=t}var i,r=[];return n.prototype={start:function(n,o){function s(n,i){function r(e,t){var n=e.getProperty("contentType");return o.isSomeExtensionOf(t,n).then(function(t){return t?e:null})}for(var o=n.getService("orion.core.contentTypeRegistry"),s=n.getServiceReferences("orion.edit.live"),a=[],l=0;l<s.length;l++){var c=s[l];c.getProperty("contentType")&&a.push(r(c,i))}return e.all(a,t).then(function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];!i||i instanceof Error||t.push(i)}return t})}if(i!==o){if(r&&r.forEach(function(e){e.endEdit(i)}),r=[],i=o,!n)return;var a=this.editor,l=this.registry;s(l,n).then(function(i){var s=i.map(function(e){var t=l.getService(e);if(t.startEdit){var i={contentType:n.id,title:o};r.push(t);var s=a.getEditorContext();return t.startEdit(s,i)}});e.all(s,t)})}}},n}),n("orion/problems",["orion/EventTarget"],function(e){function t(t,n){this._serviceRegistry=t,e.attach(this),this._serviceRegistration=t.registerService(n||"orion.core.marker",this)}return t.prototype={_setProblems:function(e){this.problems=e,this.dispatchEvent({type:"problemsChanged",problems:e})}},t.prototype.constructor=t,{ProblemService:t}}),n("orion/blamer",["orion/extensionCommands","orion/PageLinks","orion/URITemplate"],function(e,t,n){function i(e,t,n){this.serviceRegistry=e,this.inputManager=t,this.editor=n}return i.prototype={getBlamer:function(){for(var t=this.inputManager.getFileMetadata(),n=this.serviceRegistry.getServiceReferences("orion.edit.blamer"),i=0;i<n.length;i++){var r=n[i],o={};o.validationProperties=r.getProperty("validationProperties"),o.forceSingleItem=!0;var s=e._makeValidator(o,this.serviceRegistry);if(s.validationFunction.bind(s)(t))return this.serviceRegistry.getService(r);
}return null},isVisible:function(){return!!this.getBlamer()},doBlame:function(){var e=this.getBlamer();if(e){var i=function(e){for(var i=t.getOrionHome(),r=0;r<e.length;r++){var o=e[r],s=new n(o.CommitLink),a={};a.OrionHome=i,o.CommitLink=s.expand(a)}this.editor.showBlame(e)}.bind(this),r=this.inputManager,o={metadata:r.getFileMetadata()};e.computeBlame(this.editor.getEditorContext(),o).then(i)}}},{Blamer:i}}),n("orion/compare/diffParser",[],function(){var e=e||{};return e.DiffParser=function(){function e(e,n){this._lineDelimiter=e?e:t?"\r\n":"\n",this._diffLineDelimiter=n?n:this._lineDelimiter,this._DEBUG=!1}var t=-1!==window.navigator.platform.indexOf("Win"),n="\\ No newline at end of file";return e.prototype={_init:function(){this._oFileContents=[],this._diffContents=[],this._oBlocks=[],this._nBlocks=[],this._hunkRanges=[],this._lastToken=" ",this._deltaMap=[],this._nFileContents=[],this._oNewLineAtEnd=!0,this._nNewLineAtEnd=!0,this._diffContentIndex=1},getOriginalBlocks:function(){return this._oBlocks},getNewBlocks:function(){return this._nBlocks},setLineDelim:function(e){this._lineDelimiter=e,this._diffLineDelimiter=e},getDiffArray:function(){return{array:this._diffContents,index:this._diffContentIndex}},parse:function(e,t,n,i){if(this._init(),""===t)return{outPutFile:e,mapper:[]};this._oFileContents=""===e?[]:e.split(this._lineDelimiter),this._diffContents=t.split(this._diffLineDelimiter);var r={};r.mapper=[];var o=this._diffContents.length;this._hunkRanges=[];for(var s=0;o>s;s++){this._addFileModeProperties(this._diffContents[s],r);var a=this._parseHunkRange(s);a&&this._hunkRanges.push(a)}if(0===this._hunkRanges.length)return r.outPutFile=e,r;this._DEBUG&&(console.log("***Diff contents: \n"),this._diffContents.forEach(function(e){console.log(e)}),console.log("***Hunk ranges: \n"),console.log(JSON.stringify(this._hunkRanges)));for(var l=0;l<this._hunkRanges.length;l++)this._parseHunkBlock(l);return this._DEBUG&&(console.log("***Original Hunk range blocks: \n"),console.log(JSON.stringify(this._oBlocks)),console.log("***New Hunk range blocks: \n"),console.log(JSON.stringify(this._nBlocks))),this._buildMap(n),this._DEBUG&&(console.log("***New Line at end of file(original): \n"),console.log(JSON.stringify(this._oNewLineAtEnd)),console.log("***New Line at end of file(new): \n"),console.log(JSON.stringify(this._nNewLineAtEnd)),console.log("***Mapper: \n"),this._logMap(),console.log("***Total line number in original file: "+this._oFileContents.length)),i||this._buildNewFile(),this._DEBUG,r.outPutFile=this._nFileContents.join(this._diffLineDelimiter),r.mapper=this._deltaMap,r},_addFileModeProperties:function(e,t){function n(e,t){return 0===e.lastIndexOf(t,0)}n(e,"-")||n(e,"+")||n(e,"@")||(n(e,"deleted file mode")&&(t.deletedFileMode=e.split("deleted file mode")[1].match(/[^ ]+/g)[0]),n(e,"new file mode")&&(t.newFileMode=e.split("new file mode")[1].match(/[^ ]+/g)[0]),n(e,"old mode")&&(t.oldMode=e.split("old mode")[1].match(/[^ ]+/g)[0]),n(e,"new mode")&&(t.newMode=e.split("new mode")[1].match(/[^ ]+/g)[0]))},_logMap:function(){for(var e=0;e<this._deltaMap.length;e++)if(console.log(JSON.stringify(this._deltaMap[e])),this._deltaMap[e][2]>0){console.log("    **Diff content on change/add: \n");for(var t=0;t<this._deltaMap[e][0];t++)console.log("    "+this._diffContents[this._deltaMap[e][2]+t-1])}},_logNewFile:function(){for(var e=0;e<this._nFileContents.length;e++)console.log(this._nFileContents[e])},_createBlock:function(e,t,n,i){if(i!==n||" "!==e){var r=[n,i-n,"s"];"-"===e?r[2]="r":"+"===e?r[2]="a":"c"===e&&(r[2]="c"),t.push(r)}},_createMinusBlock:function(e,t,n,i){var r=this._oBlocks.length;0===r||e!==this._oBlocks[r-1][0]?(this._oBlocks.push([0===e?1:e,n,i]),this._nBlocks.push([t,0,-2])):(this._oBlocks[r-1][1]=this._oBlocks[r-1][1]+n,this._oBlocks[r-1][2]=i)},_createPlusBlock:function(e,t,n,i){var r=this._nBlocks.length;0===r||t!==this._nBlocks[r-1][0]?(this._oBlocks.push([0===e?1:e,0]),this._nBlocks.push([t,n,i])):(this._nBlocks[r-1][1]=this._nBlocks[r-1][1]+n,this._nBlocks[r-1][2]=i)},_parseHunkBlock:function(e){for(var t=" ",i=this._hunkRanges[e][0]+1,r=e===this._hunkRanges.length-1?this._diffContents.length:this._hunkRanges[e+1][0],o=0,s=0,a=this._hunkRanges[e][1],l=this._hunkRanges[e][3],c=i,h=i,d=i;r>d;d++)if(0!==this._diffContents[d].length){var u=this._diffContents[d][0];if("\\"!==u||n!==this._diffContents[d].substring(0,this._diffContents[d].length-1)&&n!==this._diffContents[d]){switch(u){case"-":case"+":case" ":break;default:continue}if(t!==u){switch("+"===u&&(c=d),"-"===u&&(h=d),t){case" ":a=this._hunkRanges[e][1]+o,l=this._hunkRanges[e][3]+s;break;case"-":this._createMinusBlock(a,l,this._hunkRanges[e][1]+o-a,h);break;case"+":this._createPlusBlock(a,l,this._hunkRanges[e][3]+s-l,c)}t=u}switch(u){case"-":o++;break;case"+":s++;break;case" ":o++,s++}}else"-"===t?this._oNewLineAtEnd=!1:" "===t?(this._nNewLineAtEnd=!1,this._oNewLineAtEnd=!1):this._nNewLineAtEnd=!1,d>i&&"\r"===this._diffContents[d-1][this._diffContents[d-1].length-1]&&(this._diffContents[d-1]=this._diffContents[d-1].substring(0,this._diffContents[d-1].length-1))}switch(t){case"-":this._createMinusBlock(a,l,this._hunkRanges[e][1]+o-a,h);break;case"+":this._createPlusBlock(a,l,this._hunkRanges[e][3]+s-l,c)}},_detectConflictes:function(e,t){if(0>e)return!1;for(var n=e+t,i=e;n>i;i++){var r=this._diffContents[i];if(r.indexOf("<<<<<")>-1||r.indexOf(">>>>>")>-1)return!0}return!1},_buildMap:function(e){for(var t,n=this._oBlocks.length,i=this._oFileContents.length,r=0,o=1,s=0;n>s;s++)t=this._oBlocks[s][0]-o,t>0&&(this._deltaMap.push([t,t,0]),r+=t),e&&this._detectConflictes(this._nBlocks[s][2],this._nBlocks[s][1])?this._deltaMap.push([this._nBlocks[s][1],this._oBlocks[s][1],this._nBlocks[s][2]+1,1]):this._deltaMap.push([this._nBlocks[s][1],this._oBlocks[s][1],this._nBlocks[s][2]+1]),r+=this._oBlocks[s][1],o=this._oBlocks[s][0]+this._oBlocks[s][1];if(i-o>0&&(this._deltaMap.push([i-o+1,i-o+1,0]),r+=i-o+1),i>r){t=i-r;var a=this._deltaMap[this._deltaMap.length-1];0===a[2]?(a[0]+=t,a[1]+=t):-1===a[2]?this._deltaMap.push([t,t,0]):this._nNewLineAtEnd===this._oNewLineAtEnd?this._deltaMap.push([t,t,0]):(this._nNewLineAtEnd&&(a[0]+=t),this._oNewLineAtEnd&&(a[1]+=t))}},_buildNewFile:function(){var e,t,n=1,i=!1,r=this._deltaMap.length;for(e=0;r>e;e++){if(i=!1,0===this._deltaMap[e][2]){for(t=0;t<this._deltaMap[e][0];t++)this._nFileContents.push(this._oFileContents[n+t-1]);i=!0}else if(this._deltaMap[e][2]>0)for(t=0;t<this._deltaMap[e][0];t++)this._nFileContents.push(this._diffContents[this._deltaMap[e][2]+t-1].substring(1));n+=this._deltaMap[e][1]}this._nNewLineAtEnd&&!i&&this._nFileContents.push("")},_converHRangeBody:function(e,t){if(e){var n=parseInt(e,10);t.push(n>=0?n:1)}else t.push(1)},_parseHunkRange:function(e){var t=this._diffContents[e],n=/^@@\s*-([\+|\-]*[\d]+)\s*,*\s*([\d]*)\s*\+([\+|\-]*[\d]+)\s*,*\s*([\d]*)\s*@@+/,i=/^@@\s*\+([\+|\-]*[\d]+)\s*,*\s*([\d]*)\s*-([\+|\-]*[\d]+)\s*,*\s*([\d]*)\s*@@+/,r=n.exec(t),o=null;return r&&5===r.length?(o=[e],this._converHRangeBody(r[1],o),this._converHRangeBody(r[2],o),this._converHRangeBody(r[3],o),this._converHRangeBody(r[4],o)):(r=i.exec(t),r&&5===r.length&&(o=[e],this._converHRangeBody(r[3],o),this._converHRangeBody(r[4],o),this._converHRangeBody(r[1],o),this._converHRangeBody(r[2],o))),o}},e}(),e}),n("orion/differ",["orion/extensionCommands","orion/compare/diffParser"],function(e,t){function n(e,t,n){this._serviceRegistry=e,this._inputManager=t,this._editor=n,this._enabled=!1,this.init()}return n.prototype={init:function(){var e=this;this._changeListener=function(){e._enabled&&(e.occurrenceTimer&&window.clearTimeout(e.occurrenceTimer),e.occurrenceTimer=window.setTimeout(function(){e.occurrenceTimer=null,e.doDiff()},500))},this._inputManager.addEventListener("InputChanged",function(){var t=e._editor.getTextView();t&&t.removeEventListener("ModelChanged",e._changeListener);var n=e.service=e.getDiffer();n&&t&&t.addEventListener("ModelChanged",e._changeListener)})},isVisible:function(){return!!this.getDiffer()},getDiffer:function(){for(var t=this._inputManager.getFileMetadata(),n=this._serviceRegistry.getServiceReferences("orion.edit.diff"),i=0;i<n.length;i++){var r=n[i],o={};o.validationProperties=r.getProperty("validationProperties"),o.forceSingleItem=!0;var s=e._makeValidator(o,this._serviceRegistry);if(s.validationFunction.bind(s)(t))return this._serviceRegistry.getService(r)}return null},showAnnotations:function(e){var n=this,i=new t.DiffParser,r={metadata:this._inputManager.getFileMetadata()};e.computeDiff(this._editor.getEditorContext(),r).then(function(e){i.setLineDelim("\n"),i.parse("",e);var t=i.getOriginalBlocks(),r=i.getNewBlocks(),o=i.getDiffArray(),s=n.getDiffRanges(t,r,o);n._enabled&&n._editor.showDiffAnnotations(s)})},getDiffRanges:function(e,t){for(var n=[],i=0;i<t.length;i++){var r=t[i][0],o=e[i][1],s=t[i][1];0===s?n.push({lineStart:r-1,lineEnd:r,type:"deleted"}):0===o?n.push({lineStart:r-1,lineEnd:r+s-1,type:"added"}):n.push({lineStart:r-1,lineEnd:r+s-1,type:"modified"})}return n},toggleEnabled:function(){this.setEnabled(!this.isEnabled())},setEnabled:function(e){this._enabled=e,this.doDiff()},isEnabled:function(){return this._enabled},doDiff:function(){if(this._enabled){if(this.service){var e=this;this._inputManager.save().then(function(){e.showAnnotations(e.service)})}}else this._editor.showDiffAnnotations([])}},n.prototype.constructor=n,{Differ:n}}),n("orion/webui/contextmenu",["orion/webui/littlelib","orion/webui/dropdown","orion/objects"],function(e,t,n){function i(e){e.skipTriggerEventListeners=!0,r.call(this,e),this._initialize()}var r=t.Dropdown;return i.prototype=Object.create(r.prototype),i.prototype.constructor=i,n.mixin(i.prototype,{_initialize:function(){this._dropdownNode.dropdown||(this._dropdownNode.dropdown=this),this._boundcontextmenuEventHandler=this._contextmenuEventHandler.bind(this),this._boundContextMenuCloser=this._contextMenuCloser.bind(this),this._triggerNode.addEventListener("contextmenu",this._boundcontextmenuEventHandler,!0),window.addEventListener("contextmenu",this._boundContextMenuCloser,!1)},_contextMenuCloser:function(e){this.close(e)},_contextmenuEventHandler:function(t){this.open(t)?e.stop(t):this.close()}}),i.prototype.open=function(e){return this._triggerNode.addEventListener("click",this._boundContextMenuCloser,!1),r.prototype.open.call(this,e)},i.prototype.close=function(e){return this._triggerNode.removeEventListener("click",this._boundContextMenuCloser,!1),r.prototype.close.call(this,e)},i.prototype._positionDropdown=function(t){if(t){var n=t.clientX,i=t.clientY;this._dropdownNode.style.position="fixed",this._dropdownNode.style.left=n+1+"px",this._dropdownNode.style.top=i+"px";var o=e.bounds(this._dropdownNode),s=o.width,a=o.height,l=e.bounds(document.body),c=n+s-(l.left+l.width);c>0&&(this._dropdownNode.style.left=Math.floor(n-c)+"px");var h=i+a-(l.top+l.height);h>0&&(this._dropdownNode.style.top=Math.floor(i-h)+"px")}else r.prototype._positionDropdown.call(this)},i.prototype.destroy=function(){this._triggerNode.removeEventListener("contextmenu",this._boundcontextmenuEventHandler,!0),this._triggerNode.removeEventListener("click",this._boundContextMenuCloser,!1),window.removeEventListener("contextmenu",this._boundContextMenuCloser,!1),this._dropdownNode.dropdown=null,r.prototype.destroy.call(this)},{ContextMenu:i}}),n("orion/commonPreferences",["orion/EventTarget"],function(e){function t(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t}function n(t,n){this._preferences=t,e.attach(this),t.addEventListener("changed",function(e){e.namespace===this.getPrefsSection()&&this.dispatchEvent({type:"Changed"})}.bind(this)),n&&this.addEventListener("Changed",function(e){n(e.preferences)})}return n.prototype={_initialize:function(e){var n=e[this.getPrefsKey()]||{},i=this.getDefaults();return t(i,n)},getDefaults:function(){return{}},getPrefsSection:function(){return"common/settings"},getPrefsKey:function(){return"commonSettings"},getPrefs:function(e){return this._preferences.get(this.getPrefsSection()).then(function(t){var n=this._initialize(t);return"string"==typeof n&&(n=JSON.parse(n)),e&&e(n),n}.bind(this))},setPrefs:function(e,t){var n={};n[this.getPrefsKey()]=e,this._preferences.put(this.getPrefsSection(),n).then(function(){e=this._initialize(n),t&&t(e),this.dispatchEvent({type:"Changed",preferences:e})}.bind(this))}},{CommonPreferences:n,mergeSettings:t}}),n("orion/editorView",["i18n!orion/edit/nls/messages","orion/editor/editor","orion/editor/eventTarget","orion/editor/textView","orion/editor/textModelFactory","orion/editor/editorFeatures","orion/hover","orion/editor/contentAssist","orion/editor/emacs","orion/editor/vi","orion/editorPreferences","orion/widgets/themes/ThemePreferences","orion/widgets/themes/editor/ThemeData","orion/widgets/settings/EditorSettings","orion/searchAndReplace/textSearcher","orion/editorCommands","orion/globalCommands","orion/edit/dispatcher","orion/edit/editorContext","orion/highlight","orion/markOccurrences","orion/syntaxchecker","orion/liveEditSession","orion/problems","orion/blamer","orion/differ","orion/keyBinding","orion/util","orion/Deferred","orion/webui/contextmenu","orion/metrics","orion/commonPreferences","embeddedEditor/helper/memoryFileSysConst","orion/objects"],function(e,t,n,i,r,o,s,a,l,c,h,d,u,p,f,g,m,v,_,y,x,w,b,C,E,T,S,k,A,L,M,N,O,D){function R(e,t){for(var n=0;n<t.length;n++){var i=t[n];e[i]&&(e[i]=parseInt(e[i],10))}}function I(e){this._parent=e.parent,"string"==typeof this._parent&&(this._parent=document.getElementById(e.parent)),this.id=e.id||"",this.activateContext=e.activateContext,this.renderToolbars=e.renderToolbars,this.serviceRegistry=e.serviceRegistry,this.contentTypeRegistry=e.contentTypeRegistry,this.commandRegistry=e.commandRegistry,this.progress=e.progress,this.statusService=e.statusService,this.editorCommands=e.editorCommands,this.fileClient=e.fileService,this.inputManager=e.inputManager,this.preferences=e.preferences,this.readonly=e.readonly,this.searcher=e.searcher,this.statusReporter=e.statusReporter,this.model=e.model,this.undoStack=e.undoStack,this.problemsServiceID=e.problemsServiceID||"orion.core.marker",this.editContextServiceID=e.editContextServiceID||"orion.edit.context",this.syntaxHighlighter=new y.SyntaxHighlighter(this.serviceRegistry);var t=m.getKeyAssist?m.getKeyAssist():null;t&&t.addProvider(this.editorCommands);var n=m.getMainSplitter?m.getMainSplitter():null;n&&n.splitter.addEventListener("resize",function(e){this.editor&&e.node===n.main&&this.editor.resize()}.bind(this)),m.getGlobalEventTarget&&m.getGlobalEventTarget().addEventListener("toggleTrim",function(){this.editor&&this.editor.resize()}.bind(this)),this.settings={},this._editorConfig=e.editorConfig,this._init()}var P=O.MEMORY_FILE_PATTERN,B=v.Dispatcher;return I.prototype={updateKeyMode:function(e,t){this.emacs&&t.removeKeyMode(this.emacs),this.vi&&t.removeKeyMode(this.vi),"Emacs"===e.keyBindings?(this.emacs||(this.emacs=new l.EmacsMode(t)),t.addKeyMode(this.emacs)):"vi"===e.keyBindings&&(this.vi||(this.vi=new c.VIMode(t,this.statusReporter)),t.addKeyMode(this.vi))},setContents:function(e,t){var n=this.contentTypeRegistry.getContentType(t),i="txt";n&&n.extension&&n.extension.length>0&&(i=n.extension[0]);var r,o=P+this.id+"/foo."+i,s=o===this.lastFileLocation;return r=s||!this.lastFileLocation?(new A).resolve():this.fileClient.deleteFile(this.lastFileLocation),r.then(function(){return this.fileClient.write(o,e).then(function(){this.lastFileLocation=o,s?this.inputManager.load():this.inputManager.setInput(o)}.bind(this))}.bind(this))},getParent:function(){return this._parent},getSettings:function(){return this.settings},setParent:function(e){this._parent=e},updateSourceCodeActions:function(e,t){t&&(t.setAutoPairParentheses(e.autoPairParentheses),t.setAutoPairBraces(e.autoPairBraces),t.setAutoPairSquareBrackets(e.autoPairSquareBrackets),t.setAutoPairAngleBrackets(e.autoPairAngleBrackets),t.setAutoPairQuotations(e.autoPairQuotations),t.setAutoCompleteComments(e.autoCompleteComments),t.setSmartIndentation(e.smartIndentation))},updateViewOptions:function(e){var t=0;e.showMargin&&(t=e.marginOffset,"number"!=typeof t&&(t=e.marginOffset=parseInt(t,10)));var n=0;return e.wordWrap&&(n=t),{readonly:this.readonly||this.inputManager.getReadOnly(),tabSize:e.tabSize||4,expandTab:e.expandTab,wrapMode:e.wordWrap,wrapOffset:n,marginOffset:t,scrollAnimation:e.scrollAnimation?e.scrollAnimationTimeout:0}},updateSettings:function(e){this.settings=e;var t=this.editor,n=this.inputManager;n.setAutoLoadEnabled(e.autoLoad),n.setAutoSaveTimeout(e.autoSave?e.autoSaveTimeout:-1),this.differ&&(n.setSaveDiffsEnabled(e.saveDiffs),this.differ.setEnabled(this.settings.diffService)),this.updateStyler(e);var i=t.getTextView();i&&(this.updateKeyMode(e,i),i.setOptions(this.updateViewOptions(e))),this.updateSourceCodeActions(e,t.getSourceCodeActions()),t.setAnnotationRulerVisible(e.annotationRuler),t.setLineNumberRulerVisible(e.lineNumberRuler),t.setFoldingRulerVisible(e.foldingRuler),t.setOverviewRulerVisible(e.overviewRuler),t.setZoomRulerVisible(e.zoomRuler),this.renderToolbars&&this.renderToolbars(n.getFileMetadata()),this.markOccurrences.setOccurrencesVisible(e.showOccurrences),t.getContentAssist()&&t.getContentAssist().setAutoTriggerEnabled(e.contentAssistAutoTrigger),this.dispatchEvent({type:"Settings",newSettings:this.settings})},updateStyler:function(e){var t=this.syntaxHighlighter.getStyler();t&&t.setWhitespacesVisible&&t.setWhitespacesVisible(e.showWhitespaces,!0)},createSession:function(e){var t=this.editor,n=t.getTextView(),i=this.inputManager;if(n&&i){var r=i.getFileMetadata();r&&(e.session={get:function(){return sessionStorage.editorViewSection?JSON.parse(sessionStorage.editorViewSection):{}},apply:function(e){if(r.Location){var i=this.get(),o=i[r.Location];o&&o.ETag===r.ETag&&(t.setSelections(o.selections),n.setTopIndex(o.topIndex,e?function(){}:void 0))}},save:function(){if(r.Location){var e=this.get();e[r.Location]={ETag:r.ETag,topIndex:n.getTopIndex(),selections:t.getSelections().map(function(e){return e.getOrientedSelection()})},sessionStorage.editorViewSection=JSON.stringify(e)}}})}},_init:function(){function n(t,n,i){H.setTextModel(F.getModel());var r=k.getInput();H.checkSyntax(k.getContentType(),t,n,i,F.getEditorContext()).then(function(e){r===k.getInput()&&e&&v.getService(l.problemsServiceID)._setProblems(e)}),k.getReadOnly()&&F.reportStatus(e.readonly,"error")}this.preferences&&(this.editorCommands.editorPreferences=this.editorPreferences=this.editorCommands.editorPreferences||new h.EditorPreferences(this.preferences),this.editorPreferences.addEventListener("Changed",function(e){var t=e.preferences;t?this.updateSettings(t):this.editorPreferences.getPrefs(this.updateSettings.bind(this))}.bind(this)),this.editorCommands.themePreferences=this.themePreferences=this.editorCommands.themePreferences||new d.ThemePreferences(this.preferences,new u.ThemeData),this.themePreferences.apply());var l=this,c=this.readonly,m=this.commandRegistry,v=this.serviceRegistry,y=this.activateContext,k=this.inputManager,A=this.progress,L=this.contentTypeRegistry,M=this.editorCommands,N=function(){var e=l.updateViewOptions(l.settings);D.mixin(e,{parent:l._parent,model:(new r.TextModelFactory).createProjectionTextModel(l.model,{serviceRegistry:l.serviceRegistry}),wrappable:!0});var t=new i.TextView(e);return t},O=function(t,n,i,s){var a,c=new r.TextModelFactory;"function"==typeof c.getDefaultFindOptions&&(a=c.getDefaultFindOptions());var h=l.textSearcher=f.TextSearcher?new f.TextSearcher(t,v,m,i,a):null,d=(new o.KeyBindingsFactory).createKeyBindings(t,i,s,h);l.updateSourceCodeActions(l.settings,d.sourceCodeActions);var u=t.getTextView();return u.setAction("toggleWrapMode",function(){u.invokeAction("toggleWrapMode",!0);var e=u.getOptions("wrapMode");return l.settings.wordWrap=e,l.editorPreferences&&l.editorPreferences.setPrefs(l.settings),!0}),u.setKeyBinding(new S.KeyStroke("z",!0,!1,!0),"toggleZoomRuler"),u.setAction("toggleZoomRuler",function(){return l.settings.zoomRulerVisible?(l.settings.zoomRuler=!l.settings.zoomRuler,l.editorPreferences&&l.editorPreferences.setPrefs(l.settings),!0):!1},{name:e.toggleZoomRuler}),l.vi=l.emacs=null,l.updateKeyMode(l.settings,u),M.overwriteKeyBindings(t),d},I=function(e,t,n){var i=k.getContentType(),r=e.getTitle(),o=v.getServiceReferences("orion.edit.contentAssist").concat(v.getServiceReferences("orion.edit.contentassist")),s=n&&n.providers;s||(s=o.map(function(e){var t=e.getProperty("contentType"),n=e.getProperty("pattern");if(t&&L.isSomeExtensionOf(i,t)||n&&new RegExp(n).test(r)){var o=v.getService(e),s=e.getProperty("service.id").toString(),a=e.getProperty("charTriggers"),l=e.getProperty("excludedStyles");return a&&(a=new RegExp(a)),l&&(l=new RegExp(l)),{provider:o,id:s,charTriggers:a,excludedStyles:l}}return null}).filter(function(e){return!!e}));var a={};Object.keys(_).forEach(function(e){"function"==typeof _[e]&&(a[e]=_[e].bind(null,v,l.editContextServiceID))}),t.setEditorContextProvider(a),t.setProviders(s),t.setAutoTriggerEnabled(l.settings.contentAssistAutoTrigger),t.setProgress(A),t.setStyleAccessor(l.getStyleAccessor())},P=c?null:{createContentAssistMode:function(e){var t=new a.ContentAssist(e.getTextView(),v);t.addEventListener("Activating",I.bind(null,e,t));var n=new a.ContentAssistWidget(t,"contentassist"),i=new a.ContentAssistMode(t,n);return t.setMode(i),I(e,t),t.initialize(),i}},F=this.editor=new t.Editor({textViewFactory:N,undoStackFactory:l.undoStack?{createUndoStack:function(e){return l.undoStack.setView(e.getTextView()),l.undoStack}}:new o.UndoFactory,textDNDFactory:new o.TextDNDFactory,annotationFactory:new o.AnnotationFactory,foldingRulerFactory:new o.FoldingRulerFactory,zoomRulerFactory:new o.ZoomRulerFactory,lineNumberRulerFactory:new o.LineNumberRulerFactory,hoverFactory:new s.HoverFactory(v,k,m),contentAssistFactory:P,keyBindingFactory:O,statusReporter:this.statusReporter,domNode:this._parent,syntaxHighlighter:this.syntaxHighlighter});F.id="orion.editor",F.processParameters=function(e){return R(e,["start","end","line","offset","length"]),this.showSelection(e.start,e.end,e.line,e.offset,e.length)},F.getEditorContext=function(){return _.getEditorContext(v,l.editContextServiceID)},this.dispatcher=new B(this.serviceRegistry,this.contentTypeRegistry,F,k),this.themePreferences&&this.editorPreferences&&(this.localSettings=p?new p({local:!0,editor:F,themePreferences:this.themePreferences,preferences:this.editorPreferences}):null);var V=new b(v,F);k.addEventListener("InputChanging",function(e){l.createSession(e)}),window.addEventListener("beforeunload",function(e){l.createSession(e),e.session&&e.session.save()}),k.addEventListener("InputChanged",function(e){l.createSession(e);var t=F.getTextView();t?(V.start(k.getContentType(),e.title),t.setOptions(this.updateViewOptions(this.settings)),this.markOccurrences.setOccurrencesVisible(this.settings.showOccurrences),this.syntaxHighlighter.setup(e.contentType,F.getTextView(),F.getAnnotationModel(),e.title,!0).then(function(){this.updateStyler(this.settings),F.getContentAssist()&&I(F,F.getContentAssist())}.bind(this)),t.onInputChanged&&t.onInputChanged({type:e.type})):V.start()}.bind(this)),k.addEventListener("Saving",function(e){l.settings.trimTrailingWhiteSpace&&F.getTextView().invokeAction("trimTrailingWhitespaces");var t=F.getTextView();t&&t.onSaving&&t.onSaving({type:e.type})}),this.blamer=new E.Blamer(v,k,F),this.differ=new T.Differ(v,k,F),this.problemService=new C.ProblemService(v,this.problemsServiceID);var K=v.getService(this.problemsServiceID);K&&K.addEventListener("problemsChanged",function(e){F.showProblems(e.problems)});var j=this.markOccurrences=new x.MarkOccurrences(v,k,F);j.setOccurrencesVisible(this.settings.showOccurrences),j.findOccurrences();var H=new w.SyntaxChecker(v,F.getModel());this.refreshSyntaxCheck=function(){n(k.getInput())},F.addEventListener("InputChanged",function(e){n(e.title,e.message,e.contents)});var U=Object.create(null);["getCaretOffset","setCaretOffset","getSelection","getSelectionText","setSelection","getSelections","setSelections","getText","setText","getLineAtOffset","getLineStart","isDirty","markClean"].forEach(function(e){U[e]=F[e].bind(F)}),U.showMarkers=function(e){v.getService(l.problemsServiceID)._setProblems(e)},U.enterLinkedMode=function(e){F.getLinkedMode().enterLinkedMode(e)},U.exitLinkedMode=function(e){F.getLinkedMode().exitLinkedMode(e)},U.syntaxCheck=function(e,t,i){n(e,t,i)},U.openEditor=function(e,t){y.openEditor(e,t)},U.getFileMetadata=function(){return l.dispatcher.getServiceFileObject()},U.setStatus=g.handleStatusMessage.bind(null,v),v.registerService(this.editContextServiceID,U,null)},create:function(){if(this.editor.install(),this.editorPreferences)this.editorPreferences.getPrefs(this.updateSettings.bind(this));else if(this._editorConfig){var e=N.mergeSettings(this._editorConfig,{});this.updateSettings(e)}this._createContextMenu()},destroy:function(){this.lastFileLocation&&this.fileClient.deleteFile(this.lastFileLocation),this.editor.uninstall()},getStyleAccessor:function(){var e=null,t=this.syntaxHighlighter.getStyler();return t&&t.getStyleAccessor&&(e=t.getStyleAccessor()),e},_createContextMenu:function(){this._editorContextMenuNode=document.createElement("ul"),this._editorContextMenuNode.className="dropdownMenu",this._editorContextMenuNode.setAttribute("role","menu"),this._parent.parentNode.appendChild(this._editorContextMenuNode);var e=this.editor.getTextView(),t=new L.ContextMenu({dropdown:this._editorContextMenuNode,triggerNode:e._clientDiv}),n=function(e){var t=e.event;t.target&&(this.commandRegistry.destroy(this._editorContextMenuNode),this.commandRegistry.renderCommands("editorContextMenuActions",this._editorContextMenuNode,null,this,"menu"),M.logEvent("contextMenu","opened","editor"))}.bind(this);t.addEventListener("triggered",n)}},n.EventTarget.addMixin(I.prototype),{EditorView:I}}),n("embeddedEditor/helper/editorSetup",["orion/editor/textModel","orion/editor/undoStack","orion/inputManager","orion/editorView","orion/Deferred","orion/webui/littlelib","orion/objects"],function(e,t,n,i,r,o,s){function a(e){this._serviceRegistry=e.serviceRegistry,this._pluginRegistry=e.pluginRegistry,this._commandRegistry=e.commandRegistry,this._fileClient=e.fileClient,this._contentTypeRegistry=e.contentTypeRegistry,this._editorCommands=e.editorCommands,this._progressService=e.progressService,this._toolbarId=e.toolbarId,this._editorConfig=e.editorConfig}var l=0;return s.mixin(a.prototype,{destroy:function(){},createInputManager:function(){var e=this._inputManager=new n.InputManager({serviceRegistry:this._serviceRegistry,fileClient:this._fileClient,progressService:this._progressService,selection:this.selection,contentTypeRegistry:this._contentTypeRegistry});e.addEventListener("InputChanged",function(e){e.editor=this.editorView.editor,this.setActiveEditorView(this.editorView)}.bind(this)),e.addEventListener("InputChanging",function(e){e.editor=this.editorView.editor}.bind(this))},defaultOptions:function(n){var i=n.parent,r=new e.TextModel,o=l.toString(),s=Object.create(null);return s.openEditor=function(e,t){this.editorView.editor.setSelection(t.start,t.end)}.bind(this),{activateContext:s,id:o,parent:i,model:r,undoStack:new t.UndoStack(r,500),serviceRegistry:this._serviceRegistry,pluginRegistry:this._pluginRegistry,commandRegistry:this._commandRegistry,contentTypeRegistry:this._contentTypeRegistry,editorCommands:this._editorCommands,editorConfig:this._editorConfig,statusReporter:n.statusReporter,progressService:this._progressService,inputManager:this._inputManager,fileService:this._fileClient,problemsServiceID:"orion.core.marker"+o,editContextServiceID:"orion.edit.context"+o,editModelContextServiceID:"orion.edit.model.context"+o,readonly:!1}},setActiveEditorView:function(e){this._editorCommands.updateCommands(e),this._commandRegistry.destroy(this._toolbarId),this._commandRegistry.renderCommands(this._toolbarId,this._toolbarId,this._inputManager.getFileMetadata(),e.editor,"tool")},createEditor:function(e,t){this.createInputManager(),this.editorView=new i.EditorView(this.defaultOptions(e)),l++,this.editorView.create(),this._inputManager.editor=this.editorView.editor;var n=o.node(e.parent);return n.addEventListener("mousedown",function(){this.setActiveEditorView(this.editorView)}.bind(this),!0),n.addEventListener("keyup",function(){this.setActiveEditorView(this.editorView)}.bind(this),!0),e.contentType&&"string"==typeof e.contents&&this.editorView.setContents(e.contents,e.contentType),(new r).resolve(this.editorView)}}),{EditorSetupHelper:a}}),n("orion/serviceregistry",["orion/Deferred","orion/EventTarget"],function(e,t){function n(e,t,n){this._properties=n||{},this._properties["service.id"]=e,this._properties.objectClass=t,this._properties["service.names"]=t}function i(e,t,n){this._serviceId=e,this._serviceReference=t,this._internalRegistry=n}function r(t,n){function i(i){return function(){var r;try{if(!n())throw new Error("Service was unregistered");var o=t[i].apply(t,Array.prototype.slice.call(arguments));if(o&&"function"==typeof o.then)return o;r=new e,r.resolve(o)}catch(s){r=new e,r.reject(s)}return r.promise}}var r;for(r in t)"function"==typeof t[r]&&(this[r]=i(r))}function o(e,t){this.type=e,this.serviceReference=t}function s(){this._entries=[],this._namedReferences={},this._serviceEventTarget=new t;var e=this;this._internalRegistry={isRegistered:function(t){return e._entries[t]?!0:!1},unregisterService:function(t){var n=e._entries[t];if(!n)throw new Error("Service has already been unregistered: "+t);var i=n.reference;e._serviceEventTarget.dispatchEvent(new o("unregistering",i)),e._entries[t]=null;var r=i.getProperty("objectClass");r.forEach(function(t){for(var n=e._namedReferences[t],r=0;r<n.length;r++)if(n[r]===i){1===n.length?delete e._namedReferences[t]:n.splice(r,1);break}})},modifyService:function(t){var n=e._entries[t];if(!n)throw new Error("Service not found while trying to send modified event: "+t);var i=n.reference;e._serviceEventTarget.dispatchEvent(new o("modified",i))}}}return n.prototype={getPropertyKeys:function(){var e,t=[];for(e in this._properties)this._properties.hasOwnProperty(e)&&t.push(e);return t},getProperty:function(e){return this._properties[e]}},n.prototype.constructor=n,i.prototype={unregister:function(){this._internalRegistry.unregisterService(this._serviceId)},getReference:function(){if(!this._internalRegistry.isRegistered(this._serviceId))throw new Error("Service has already been unregistered: "+this._serviceId);return this._serviceReference},setProperties:function(e){var t=this._serviceReference._properties;this._serviceReference._properties=e||{},e["service.id"]=this._serviceId,e.objectClass=t.objectClass,e["service.names"]=t["service.names"],this._internalRegistry.modifyService(this._serviceId)}},i.prototype.constructor=i,s.prototype={getService:function(e){var t;if("string"==typeof e){var n=this._namedReferences[e];n&&n.some(function(e){return t=this._entries[e.getProperty("service.id")].service,!!t},this)}else{var i=this._entries[e.getProperty("service.id")];i&&(t=i.service)}return t||null},getServiceReferences:function(e){if(e)return this._namedReferences[e]?this._namedReferences[e]:[];var t=[];return this._entries.forEach(function(e){e&&t.push(e.reference)}),t},registerService:function(e,t,s){if("undefined"==typeof t||null===t)throw new Error("invalid service");"string"==typeof e?e=[e]:Array.isArray(e)||(e=[]);var a=this._entries.length,l=new n(a,e,s),c=this._namedReferences;e.forEach(function(e){c[e]=c[e]||[],c[e].push(l)});var h=new r(t,this._internalRegistry.isRegistered.bind(null,a));this._entries.push({reference:l,service:h});var d=this._internalRegistry;return this._serviceEventTarget.dispatchEvent(new o("registered",l)),new i(a,l,d)},addEventListener:function(e,t){this._serviceEventTarget.addEventListener(e,t)},removeEventListener:function(e,t){
this._serviceEventTarget.removeEventListener(e,t)}},s.prototype.constructor=s,{ServiceRegistry:s}}),n("wix-code/orion-overrides/orion/serviceregistry",["orion/serviceregistry"],function(e){function t(e){return e&&"orion.edit.quickfix"===e.scopeId}var n=e.ServiceRegistry.prototype.registerService;return e.ServiceRegistry.prototype.registerService=function(e,i,r){return t(r)?void 0:n.call(this,e,i,r)},e}),n("orion/defaultEditorPreferences",["orion/util"],function(e){var t={autoSave:e.isElectron?!1:!0,autoSaveVisible:!0,autoSaveLocalVisible:!0,autoSaveTimeout:250,autoSaveTimeoutVisible:!0,themeVisible:!0,themeLocalVisible:!0,fontSizeVisible:!0,fontSizeLocalVisible:!0,autoLoad:!0,autoLoadVisible:!0,saveDiffs:!0,saveDiffsVisible:!0,contentAssistAutoTrigger:!0,contentAssistAutoTriggerVisible:!0,showOccurrences:!0,showOccurrencesVisible:!0,autoPairParentheses:!0,autoPairParenthesesVisible:!0,autoPairBraces:!0,autoPairBracesVisible:!0,autoPairSquareBrackets:!0,autoPairSquareBracketsVisible:!0,autoPairAngleBrackets:!1,autoPairAngleBracketsVisible:!0,autoPairQuotations:!0,autoPairQuotationsVisible:!0,autoCompleteComments:!0,autoCompleteCommentsVisible:!0,smartIndentation:!0,smartIndentationVisible:!0,trimTrailingWhiteSpace:!1,trimTrailingWhiteSpaceVisible:!0,tabSize:4,tabSizeVisible:!0,expandTab:!1,expandTabVisible:!0,scrollAnimation:!0,scrollAnimationVisible:!0,scrollAnimationTimeout:300,scrollAnimationTimeoutVisible:!0,annotationRuler:!0,annotationRulerVisible:!0,lineNumberRuler:!0,lineNumberRulerVisible:!0,foldingRuler:!0,foldingRulerVisible:!0,overviewRuler:!0,overviewRulerVisible:!0,zoomRuler:!1,zoomRulerVisible:!0,zoomRulerLocalVisible:!0,showWhitespaces:!1,showWhitespacesVisible:!0,wordWrap:!1,wordWrapVisible:!0,showMargin:!1,showMarginVisible:!0,marginOffset:80,marginOffsetVisible:!0,keyBindings:"Default",keyBindingsVisible:!0,keyBindingsLocalVisible:!0,diffService:!1,diffServiceVisible:!1};return{defaults:t}}),n("embeddedEditor/builder/embeddedEditor",["orion/commandRegistry","orion/fileClient","orion/contentTypes","orion/editorCommands","embeddedEditor/helper/bootstrap","embeddedEditor/helper/editorSetup","embeddedEditor/helper/memoryFileSysConst","orion/serviceregistry","orion/Deferred","orion/commonPreferences","orion/defaultEditorPreferences","orion/objects"],function(e,t,n,i,r,o,s,a,l,c,h,d){function u(e){this.serviceRegistry=new a.ServiceRegistry,this.contentTypeRegistry=new n.ContentTypeRegistry(this.serviceRegistry),this._startupOptions=e,this._toolbarId=e&&e.toolbarId?e.toolbarId:"__code__edit__hidden__toolbar",this.Deferred=l}var p;return d.mixin(u.prototype,{_init:function(n){if(p)return p;if(!this._startupOptions||!this._startupOptions.toolbarId){var r=document.createElement("div");r.id=this._toolbarId,document.body.appendChild(r),r.style.display="none"}return this._commandRegistry=new e.CommandRegistry({}),this._fileClient=new t.FileClient(this.serviceRegistry),this._editorCommands=new i.EditorCommandFactory({serviceRegistry:this.serviceRegistry,commandRegistry:this._commandRegistry,fileClient:this._fileClient,toolbarId:this._toolbarId,navToolbarId:this._toolbarId}),this._editorConfig=this._startupOptions&&this._startupOptions.editorConfig?this._startupOptions.editorConfig:{},c.mergeSettings(h.defaults,this._editorConfig),this._progressService={progress:function(e){return e},showWhile:function(e){return e}},this.serviceRegistry.registerService("orion.page.progress",this._progressService),p=this._editorCommands.createCommands().then(function(){return this._editorCommands.registerCommands(),(new l).resolve()}.bind(this))},startup:function(e){return r.startup(this.serviceRegistry,this.contentTypeRegistry,this._startupOptions).then(function(t){var n=t.serviceRegistry,i=t.pluginRegistry;return this._init(t).then(function(){if(!e)return(new l).resolve(t);var r=new o.EditorSetupHelper({serviceRegistry:n,pluginRegistry:i,commandRegistry:this._commandRegistry,fileClient:this._fileClient,contentTypeRegistry:this.contentTypeRegistry,editorCommands:this._editorCommands,editorConfig:this._editorConfig,progressService:this._progressService,toolbarId:this._toolbarId});return r.createEditor(e)}.bind(this))}.bind(this))},create:function(e){return this.startup(e)},importFiles:function(e){var t=this.serviceRegistry.getService("orion.core.file.client"),n=[];return t&&e.forEach(function(e){var i=t.createFile(e.parentLocation?e.parentLocation:s.MEMORY_FILE_PROJECT_PATTERN,e.name).then(function(n){return t.write(n.Location,e.contents)});n.push(i)}),l.all(n)},exportFiles:function(e){var t=this.serviceRegistry.getService("orion.core.file.client"),n=[];return t&&e.forEach(function(e){var i;if(e.name||e.location){var r=e.location?e.location:s.MEMORY_FILE_PROJECT_PATTERN+e.name;i=t.read(r)}else i=(new l).resolve("");n.push(i)}),l.all(n)}}),u}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof n&&n.amd?n("wix-code/codemodel",[],t):"object"==typeof exports?exports["codemodel.prod"]=t():e["codemodel.prod"]=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var i,r,o;!function(s,a){r=[t,n(1),n(31),n(32),n(60),n(61),n(65),n(63),n(64),n(66),n(68),n(67),n(69)],i=a,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(this,function(e,t,n,i,r,o,s,a,l,c,h,d,u){"use strict";function p(e){return e&&e.__esModule?e:{"default":e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var g=p(t),m=p(n),v=p(i),_=p(r),y=p(o),x=p(s),w=p(a),b=p(l),C=p(c),E=p(h),T=p(u),S=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k={ID:d.Selector.ID_SELECTOR,TYPE:d.Selector.TYPE_SELECTOR,CLASS:d.Selector.CLASS_SELECTOR,UNION:d.UnionSelector.UNION_SELECTOR},A=function(){function e(){f(this,e),this.typeIndex=new g["default"],this.tagIndex=new _["default"],this.selectorTypes=k,(0,m["default"])(this.typeIndex,T["default"]),(0,v["default"])(this.typeIndex,this.tagIndex,T["default"])}return S(e,[{key:"getTagIndex",value:function(){return this.tagIndex}},{key:"getTypeIndex",value:function(){return this.typeIndex}},{key:"populateSymbolTable",value:function(e){var t=new x["default"],n=new y["default"];return t.addHandler(new w["default"](n,this.getTypeIndex())),t.process(e),n}},{key:"newSymbolTable",value:function(e){return new y["default"](e)}},{key:"buildWixDOM",value:function(e,t){var n=new x["default"],i=new b["default"](t||this.populateSymbolTable(e),this.getTagIndex());return n.addHandler(i),n.process(e),i.getDOM()}},{key:"newHtmlConverter",value:function(e){return new b["default"](e,this.getTagIndex())}},{key:"parseWixTML",value:function(e){return(0,E["default"])(e,this)}},{key:"parseSelector",value:function(e,t){return(0,C["default"])(e,t,this.getTypeIndex())}},{key:"getManifest",value:function(){return T["default"]}},{key:"importTypes",value:function(e){(0,m["default"])(this.getTypeIndex(),e)}}]),e}(),L=!1,M=null;L||(L=!0,M=new A),e["default"]=M})},function(e,t,n){var i,r,o;!function(s,a){r=[t,n(2),n(19)],i=a,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(this,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=i(t),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a={},l={},c={},h=!1,d=function(){function e(){if(r(this,e),h)throw"There can only be one TypeIndex";h=!0}return s(e,[{key:"registerType",value:function(e){a[e.qname.fullName]=e,e.componentType&&(l[e.componentType]=e),e.tagName&&(c[e.tagName]||(c[e.tagName]=[]),c[e.tagName].push(e))}},{key:"getByName",value:function(e){return e instanceof n.QName?a[e.fullName]:a[e]}},{key:"getByTagName",value:function(e){return c[e]||[]}},{key:"getByShortName",value:function(e){return Object.keys(a).map(function(t){return a[t].shortName===e?a[t]:null}).filter(function(e){return null!==e})||[]}},{key:"getByComponentType",value:function(e){return l[e]}},{key:"getEventsForComponentType",value:function(e){var t=l[e];return t?t.resolveEvents():new n.MemberTable}},{key:"getEventsByName",value:function(e){var t=this.getByName(e);return t?t.resolveEvents():new n.MemberTable}},{key:"getAllTypes",value:function(){return(0,o["default"])(a)}}]),e}();e["default"]=d})},function(e,t,n){function i(e){return r(e,o(e))}var r=n(3),o=n(4);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=t.length,r=Array(i);++n<i;)r[n]=e[t[n]];return r}e.exports=n},function(e,t,n){var i=n(5),r=n(10),o=n(8),s=n(14),a=i(Object,"keys"),l=a?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&r(e)?s(e):o(e)?a(e):[]}:s;e.exports=l},function(e,t,n){function i(e,t){var n=null==e?void 0:e[t];return r(n)?n:void 0}var r=n(6);e.exports=i},function(e,t,n){function i(e){return null==e?!1:r(e)?h.test(l.call(e)):o(e)&&s.test(e)}var r=n(7),o=n(9),s=/^\[object .+?Constructor\]$/,a=Object.prototype,l=Function.prototype.toString,c=a.hasOwnProperty,h=RegExp("^"+l.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t,n){function i(e){return r(e)&&a.call(e)==o}var r=n(8),o="[object Function]",s=Object.prototype,a=s.toString;e.exports=i},function(e,t){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n},function(e,t,n){function i(e){return null!=e&&o(r(e))}var r=n(11),o=n(13);e.exports=i},function(e,t,n){var i=n(12),r=i("length");e.exports=r},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&i>=e}var i=9007199254740991;e.exports=n},function(e,t,n){function i(e){for(var t=l(e),n=t.length,i=n&&e.length,c=!!i&&a(i)&&(o(e)||r(e)),d=-1,u=[];++d<n;){var p=t[d];(c&&s(p,i)||h.call(e,p))&&u.push(p)}return u}var r=n(15),o=n(16),s=n(17),a=n(13),l=n(18),c=Object.prototype,h=c.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){return o(e)&&r(e)&&a.call(e,"callee")&&!l.call(e,"callee")}var r=n(10),o=n(9),s=Object.prototype,a=s.hasOwnProperty,l=s.propertyIsEnumerable;e.exports=i},function(e,t,n){var i=n(5),r=n(13),o=n(9),s="[object Array]",a=Object.prototype,l=a.toString,c=i(Array,"isArray"),h=c||function(e){return o(e)&&r(e.length)&&l.call(e)==s};e.exports=h},function(e,t){function n(e,t){return e="number"==typeof e||i.test(e)?+e:-1,t=null==t?r:t,e>-1&&e%1==0&&t>e}var i=/^\d+$/,r=9007199254740991;e.exports=n},function(e,t,n){function i(e){if(null==e)return[];l(e)||(e=Object(e));var t=e.length;t=t&&a(t)&&(o(e)||r(e))&&t||0;for(var n=e.constructor,i=-1,c="function"==typeof n&&n.prototype===e,d=Array(t),u=t>0;++i<t;)d[i]=i+"";for(var p in e)u&&s(p,t)||"constructor"==p&&(c||!h.call(e,p))||d.push(p);return d}var r=n(15),o=n(16),s=n(17),a=n(13),l=n(8),c=Object.prototype,h=c.hasOwnProperty;e.exports=i},function(e,t,n){var i,r,o;!function(s,a){r=[t,n(20)],i=a,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(this,function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Type=e.QName=e.MemberTable=e.Event=e.Member=void 0;var s=n(t),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e.Member=function u(e,t,n,i){o(this,u),this.origin=e.shortName,this.name=t,this.description=n,this.kind=i},c=e.Event=function(e){function t(e,n,r,s){o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,s,"function"));return a.type=r,a}return r(t,e),t}(l),h=e.MemberTable=function(){function e(){o(this,e),this._members={}}return a(e,[{key:"asList",value:function(){var e=this;return Object.keys(this._members).map(function(t){return e._members[t]})}},{key:"add",value:function(e,t){t instanceof l&&(this._members[e]=t)}},{key:"size",value:function(){return Object.keys(this._members).length}},{key:"remove",value:function(e){delete this._members[e]}},{key:"hasMember",value:function(e){return this._members[e]instanceof l}},{key:"getMember",value:function(e){return this._members[e]}},{key:"names",value:function(){return Object.keys(this._members)}}]),e}(),d=e.QName=function(){function e(t,n){o(this,e),this.prefix=t,this.shortName=n}return a(e,[{key:"fullName",get:function(){return this.prefix?this.prefix+"."+this.shortName:this.shortName}}],[{key:"coerce",value:function(t){return t.shortName?new e(t.prefix,t.shortName):void 0}},{key:"parseFullName",value:function(t){var n=t.lastIndexOf(".");return new e(t.substring(0,n),t.substring(n+1))}}]),e}();e.Type=function(){function e(t,n,i,r,s,a){o(this,e),this.qname=n,this.componentType=t,this.tagName=i,this.members=null,this.events=null,this.membersDefinition=r,this.eventHandlersDefinition=s,this.baseTypes=a,this.inheritanceChain=null}return a(e,[{key:"resolveMembers",value:function(){var e=this;return null===this.members&&(this.members=new h,(0,s["default"])(this.baseTypes,function(t,n){var i=t.resolveMembers();i.names().forEach(function(t){var n=i.getMember(t);n instanceof c?e.members.add(t,new c(e,t,n.type,n.description)):e.members.add(t,new l(e,t,n.description,n.kind))})}),(0,s["default"])(this.membersDefinition,function(t,n){e.members.add(n,new l(e,n,t.description,t.kind))}),(0,s["default"])(this.eventHandlersDefinition,function(t,n){e.members.add(n,new c(e,n,t.type,t.description))})),this.members}},{key:"hasMember",value:function(e){return this.resolveMembers().hasMember(e)}},{key:"hasEvent",value:function(e){return this.resolveEvents().hasMember(e)}},{key:"resolveEvents",value:function(){if(null===this.events){this.events=new h;var e=this.resolveMembers(),t=this;e.names().forEach(function(n){var i=e.getMember(n);i instanceof c&&t.events.add(n,i)}),this.events.remove("on")}return this.events}},{key:"resolveInheritanceChain",value:function(){var e=this;if(null===this.inheritanceChain){var t=Object.keys(this.baseTypes),n=t.reduce(function(t,n){var i=e.baseTypes[n].resolveInheritanceChain();return i.forEach(function(e){return t[e]=!0}),t},{});this.inheritanceChain=Object.keys(n).concat(t)}return this.inheritanceChain}},{key:"inheritsFrom",value:function(e){return this.resolveInheritanceChain().some(function(t){return e===t})}},{key:"shortName",get:function(){return this.qname.shortName}},{key:"fullName",get:function(){return this.qname.fullName}}],[{key:"coerce",value:function(t){if(t.componentType&&t.qname){var n=d.coerce(t.qname);if(n){var i=Object.keys(t.baseTypes).reduce(function(n,i){return n[i]=e.coerce(t.baseTypes[i]),n},{});return new e(t.componentType,n,t.tagName,t.membersDefinition,t.eventHandlersDefinition,i)}}}}]),e}()})},function(e,t,n){var i=n(21),r=n(22),o=n(28),s=o(i,r);e.exports=s},function(e,t){function n(e,t){for(var n=-1,i=e.length;++n<i&&t(e[n],n,e)!==!1;);return e}e.exports=n},function(e,t,n){var i=n(23),r=n(27),o=r(i);e.exports=o},function(e,t,n){function i(e,t){return r(e,t,o)}var r=n(24),o=n(4);e.exports=i},function(e,t,n){var i=n(25),r=i();e.exports=r},function(e,t,n){function i(e){return function(t,n,i){for(var o=r(t),s=i(t),a=s.length,l=e?a:-1;e?l--:++l<a;){var c=s[l];if(n(o[c],c,o)===!1)break}return t}}var r=n(26);e.exports=i},function(e,t,n){function i(e){return r(e)?e:Object(e)}var r=n(8);e.exports=i},function(e,t,n){function i(e,t){return function(n,i){var a=n?r(n):0;if(!o(a))return e(n,i);for(var l=t?a:-1,c=s(n);(t?l--:++l<a)&&i(c[l],l,c)!==!1;);return n}}var r=n(11),o=n(13),s=n(26);e.exports=i},function(e,t,n){function i(e,t){return function(n,i,s){return"function"==typeof i&&void 0===s&&o(n)?e(n,i):t(n,r(i,s,3))}}var r=n(29),o=n(16);e.exports=i},function(e,t,n){function i(e,t,n){if("function"!=typeof e)return r;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)};case 5:return function(n,i,r,o,s){return e.call(t,n,i,r,o,s)}}return function(){return e.apply(t,arguments)}}var r=n(30);e.exports=i},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){var i,r,o;!function(s,a){r=[t,n(19),n(20)],i=a,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(this,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,n,i,r){return new t.Type(e,t.QName.parseFullName(n),i.tagname,i.members,i.eventHandlers,r||{})}function o(e,t,n,i){return n.viewernames?Object.keys(n.viewernames).forEach(function(o){e.registerType(r(o,t,n,i))}):e.registerType(r(t,t,n,i)),e.getByName(t)}function s(e,t,n,i,r){var o=Object.keys(t.inherits);return 0===o.length?{}:o.reduce(function(e,t){var o=n.getByName(t);return e[t]=o||a(i,n,t,r),e},{})}function a(e,t,n,i){if(i.indexOf(n)>=0){var r=i.concat(n).join("<-");throw new Error("circular inheritance: "+r)}i.push(n);var a=t.getByName(n);if(a)return a;var l=e[n];if(!l)throw new Error("Cannot register type '"+n+"' since it was not found in the manifest");var c=s(n,l,t,e,i);return o(t,n,l,c)}function l(e,t){(0,c["default"])(t,function(n,i){var r=[];a(t,e,i,r)})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=l;var c=i(n)})},function(e,t,n){var i,r,o;!function(s,a){r=[t,n(19),n(33),n(59)],i=a,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(this,function(e,t,n,i){"use strict";function r(e,r,o){var s=void 0,a=void 0;Object.keys(o).forEach(function(t){if(s=e.getByName(t)){if(a=o[t],!a)throw"missing manifest entry for "+t;a.viewernames?Object.keys(a.viewernames).forEach(function(t){var i=e.getByComponentType(t);r.registerTag(new n.TagDefinition(i,a,o,r))}):r.registerTag(new n.TagDefinition(s,a,o,r))}}),r.registerDefaultTag(new n.TagDefinition(new t.Type(i.STAR,"component","component")))}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r})},function(e,t,n){var i,r,o;!function(s,a){r=[t,n(34),n(59)],i=a,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(this,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){Object.keys(e).forEach(function(n){t[n]=new c(n,e[n])})}Object.defineProperty(e,"__esModule",{value:!0}),e.TagDefinition=void 0;var s=i(t),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l="d",c=function(){function e(t,n){r(this,e),this._name=t,this._attr=n}return a(e,[{key:"hasValues",value:function(){return Array.isArray(this._attr.values)}},{key:"name",get:function(){return this._name}},{key:"type",get:function(){return this._attr.type}},{key:"values",get:function(){return this._attr.values||[]}},{key:"accessor",get:function(){return this._attr.accessor}},{key:"readonly",get:function(){return this._attr.readonly}}]),e}(),h=function(e,t,n){var i=void 0;["layout","data","state","prop"].forEach(function(r){Object.keys(e).forEach(function(o){var s=e[o];i="prop"===r?"props":r,void 0!==s.accessor&&s.accessor.type===r&&void 0!==t[i]&&void 0!==t[i][s.accessor.name]&&n.setAttribute(o,t[i][s.accessor.name],l)})})};e.TagDefinition=function(){function e(t,n,i,s){r(this,e),this._owningType=t,this._entry=n,this._attributes={},this._tagIndex=s;var a=this;this._entry&&(o(this._entry.attributes,this._attributes),this._owningType.resolveInheritanceChain().forEach(function(e){o(i[e].attributes,a._attributes)}))}return a(e,[{key:"attributes",value:function(){return this._attributes}},{key:"attribute",value:function(e){return this._attributes[e]}},{key:"hasAttribute",value:function(e){return void 0!==this._attributes[e]}},{key:"decorate",value:function(e,t,i,r){if(this.componentType!==n.STAR&&e.type!==this.componentType)throw"Attempting to decorate the wrong type of component";if(this._entry){var o=i.getByComponentId(e.compId);o&&(t.setIdAttribute(o.name,l),r.addNamedElement(o.name,t)),h(this._attributes,e,t);var a=i.getStaticEventHandlers(e.compId);if(a&&Object.keys(a).forEach(function(e){t.setAttribute(e,a[e],l)}),this.defaultcontent&&this.accessor)if("html"===this.defaultcontent){var c=this.accessor;if(e[c.type]&&e[c.type][c.name])for(var d=s["default"].parser.parse(e[c.type][c.name]),u=d.document.children,p=0;p<u.length;p++)t.appendChild(u.item(p))}else{var f=this._tagIndex.getByClassName(this.defaultcontent);if(!f)throw"missing type for html conversion";var g=r.createElement("wix-"+f.tagName);e[this.accessor.type][this.accessor.name].forEach(function(e){Object.keys(f.attributes()).forEach(function(t){var n=f.attribute(t);void 0!==n.accessor&&"data"===n.accessor.type&&void 0!==e[n.accessor.name]&&g.setAttribute(t,e[n.accessor.name],l)}),t.appendChild(g)})}}}},{key:"defaultcontent",get:function(){return this._entry.defaultcontent}},{key:"accessor",get:function(){return this._entry.accessor}},{key:"htmlName",get:function(){return"wix-"+this._owningType.tagName}},{key:"tagName",get:function(){return this._owningType.tagName}},{key:"componentType",get:function(){return this._owningType.componentType}},{key:"qname",get:function(){return this._owningType.qname}},{key:"owningType",get:function(){return this._owningType}}]),e}()})},function(e,t,n){var i=n(35),r=n(54);i.toDOMString=function(e,t){return r(e,t)},e.exports=i},function(e,t,n){function i(){return{lint:!0,offsets:!0,lines:!0,lowercase:!0,entities:!0,problems:[a.MISNESTED_TAG,a.MISSING_TAG_CLOSE,a.EXPECTED_CLOSE_TAG]}}var r=n(36),o=n(38),s=n(52),a=n(36).PROBLEM_TYPES;e.exports={parser:{create:function(e,t,n){return r.newParser(e,t,n||i())},parse:function(e,t){return s.parse(e,t||i())}},scanner:{create:function(e,t){return o.newScanner(e,t||i())},scan:function(e,t,n){o.scan(e,t,n||i())}},DOM:s.DOM,HtmlTokenTypes:o.HtmlTokenTypes,ProblemTypes:a}},function(e,t,n){function i(e,t,n,i){this.start=e,this.end=t,this.line=n+1,this.type=i}function r(e,t,n){this.openTags=[],this.openTags.push(-1),this.formattingTags=[],this.currentTag=null,this.currentId=void 0,this.cb=t,n=void 0===n?{}:n;var r=[];this.cb&&(this._emitIdEvents=this.cb&&void 0!==this.cb.onId,this.cb.onOpenTag&&(r.push(o.START_TAG_OPEN),r.push(o.TAG_NAME)),this.cb.onOpenTagEnd&&(r.push(o.TAG_CLOSE),r.push(o.START_TAG_VOID_CLOSE)),this.cb.onCloseTag&&r.push(o.END_TAG_OPEN),(this._emitIdEvents||this.cb.onAttribute)&&(r.push(o.ATTR_NAME),r.push(o.ATTR_VALUE),r.push(o.ATTR_EQUALS)),this.cb.onText&&(r.push(o.TEXT),r.push(o.DECIMAL_REFERENCE),r.push(o.HEX_REFERENCE),r.push(o.NR_CHAR_DATA),r.push(o.NAMED_REFERENCE)),this.cb.onComment&&r.push(o.COMMENT)),n.filter=r,this.validateDOM=u(n,"lint",!1),this.domOffsets=u(n,"offsets",!1),this.toReport=new d(n.problems||[]),this.validateDOM&&(this.problems=[]),this.domOffsets&&(this._bufferLength=e.length);var a=this,l=function(e,t){a.cb.onError(new i(t.offset,t.offset+1,t.line,e))};this.scanner=s.newScanner(e,n,this.validateDOM?l:null)}var o=n(37),s=n(38),a=n(46),l=n(48),c=n(49),h=n(51),d=n(50),u=n(44),p=n(42).getReverseMap(),f=h.ElementLocation,g=h.AttrLocation,m=h.Location,v={INVALID_VOID_ELEMENT:1,MISNESTED_TAG:2,MISSING_TAG_CLOSE:3,EXPECTED_CLOSE_TAG:4,VOID_NOT_VOID:5};i.prototype.toString=function(){var e="";switch(this.type){case v.EXPECTED_CLOSE_TAG:e="Expected closing tag";break;case v.INVALID_VOID_ELEMENT:e="Element can not be void";break;case v.MISNESTED_TAG:e="Element is closed improperly";break;case v.MISSING_TAG_CLOSE:e="Element is missing matching close Element";break;case v.VOID_NOT_VOID:e="Element can not be void";break;case l.ILLEGAL_CHAR:e="Illegal character";break;case l.UNEXPECTED_EOF:e="Unexpected EOF";break;case l.UNEXPECTED_CHAR:e="Unexpected character";break;case l.ILLEGAL_ENTITY:e="Illegal entity"}return e+"\nRange("+this.start+", "+this.end+"), line "+this.line},i.HTMLProblemType=v;var _="id",y=c.voidRule;r.prototype.reportError=function(e,t,n,r){this.validateDOM&&this.toReport.has(r)&&this.cb.onError(new i(e,t,n,r))},r.prototype.parseTagEnd=function(e){null!==this.currentTag&&(y.of(this.currentTag)===!0&&this.reportError(e.start,e.end,e.line,v.VOID_NOT_VOID),this.cb.onOpenTagEnd(this.currentTag,e.start,e.end),this.openTags.push(this.currentId))},r.prototype.startTagOpen=function(e){if(this.scanner._la(1)===o.TAG_NAME){var t=this.scanner.nextToken();if(this.openTags.length>0){var n=this.openTags[this.openTags.length-1];if(y.of(n)===!0)this.cb.onSelfClosingEnd(p[n],!0,e.start,e.start),this.openTags.pop();else{var i=c[n];void 0!==i&&i.of(t.tagId)===!0&&(this.cb.onCloseTag(this.currentTag,!0,this.domOffsets?new f(e.start,e.start):void 0),this.reportError(t.start,t.end,t.line,v.EXPECTED_CLOSE_TAG))}}return this.currentTag=t.content,this.currentId=t.tagId,this.cb.onOpenTag(t.content,this.domOffsets?new f(e.start,t.end):void 0),this.scanner._la(1)===o.TAG_CLOSE&&this.parseTagEnd(this.scanner.nextToken()),this.scanner.setTagContext(this.currentTag),t}return null},r.prototype.startTagVoidOpen=function(e,t){if(null!==this.currentTag){var n=!0;y.of(this.currentId)!==!0&&(this.reportError(t.start,t.end,t.line,v.INVALID_VOID_ELEMENT),n=!1,this.openTags.push(this.currentId)),this.cb.onSelfClosingEnd?this.cb.onSelfClosingEnd(this.currentTag,n,e.start,e.end):this.cb.onOpenTagEnd(this.currentTag,e.start,e.end)}},r.prototype.attrName=function(e){if(null!==this.currentTag){if(this.scanner._la(2)===o.ATTR_VALUE){this.scanner.pop();var t=this.scanner.nextToken();this.domOffsets?this.emitAttrWithOffsets(e,t):this.emitAttr(e,t)}else{var n;this.domOffsets&&(n=new g(e.start,e.end)),this.cb.onAttribute(this.currentTag,e.content,"",n)}this.scanner._la(1)===o.TAG_CLOSE&&this.parseTagEnd(this.scanner.nextToken())}},r.prototype.emitAttr=function(e,t){this._emitIdEvents&&e.content===_?this.cb.onId(this.currentTag,t.content):this.cb.onAttribute(this.currentTag,e.content,t.content)},r.prototype.emitAttrWithOffsets=function(e,t){var n=new g(e.start,t.end);n.valueStart=t.start,this._emitIdEvents&&e.content===_?this.cb.onId(this.currentTag,t.content,n):this.cb.onAttribute(this.currentTag,e.content,t.content,n)},r.prototype.endTagOpen=function(e,t){if(this.scanner.setTagContext(null),this.scanner._la(1)===o.TAG_NAME){if(this.openTags.length>0){var n=this.scanner.nextToken();this.balanceStack(n,e.start,n.end)||this.openTags.pop()}this.scanner._la(1)!==o.TAG_CLOSE?this.reportError(t.start,t.end,t.line,v.MISSING_TAG_CLOSE):this.scanner.pop(1)}},r.prototype.balanceStack=function(e,t,n){var i=this.openTags[this.openTags.length-1];if(-1===i)return!1;var r=!1,o=!1,s=!1,a=!1;do{if(i===e.tagId)break;if(s=!1,a=!1,y.of(i)===!0)s=!0,this.cb.onSelfClosingEnd(p[i],!0,t,n),a=!0;else{var l=c[i];void 0!==l&&(s=l.cf(e.tagId)===!0,a=!0),this.cb.onCloseTag(this.currentTag,s,t,n)}s||o||(this.reportError(e.start,e.end,e.line,v.EXPECTED_CLOSE_TAG),o=!0),a&&(this.openTags.pop(),r=!0),this.openTags.length>0&&(i=this.openTags.pop())}while(this.openTags.length>0);return this.cb.onCloseTag(e.content,!0,t,n),r},r.prototype.onText=function(e){this.cb.onText(e.content,this.domOffsets?new m(e.start,e.end):void 0)},r.prototype.onEntity=function(e){this.cb.onText(e.reference,e.start,e.reference.length+e.start)},r.prototype.onComment=function(e){this.cb.onComment(this.domOffsets?new m(e.start,e.end):void 0)},r.prototype.parse=function(){if(null!==this.cb){this.cb.onBegin&&this.cb.onBegin(this.domOffsets?new m(0,this._bufferLength):void 0);for(var e,t,n=null;this.scanner.hasNext()&&(e=this.scanner.nextToken(),null!==e);)switch(n=null,e.type){case o.ATTR_NAME:this.attrName(e);break;case o.START_TAG_OPEN:t=this.startTagOpen(e);break;case o.END_TAG_OPEN:this.endTagOpen(e,t);break;case o.TEXT:case o.NR_CHAR_DATA:this.onText(e);break;case o.TAG_CLOSE:this.parseTagEnd(e);break;case o.START_TAG_VOID_CLOSE:this.startTagVoidOpen(e,t);break;case o.DECIMAL_REFERENCE:case o.NAMED_REFERENCE:case o.HEX_REFERENCE:this.onEntity(e);break;case o.COMMENT:case o.BOGUS_COMMENT:this.onComment(e);break;case o.DOC_TYPE:this.domOffsets&&(n=this.poolLocation(e.start,e.end))}this.balanceStack(new a,this._bufferLength,this._bufferLength)}},e.exports={newParser:function(e,t,n){return new r(e,t,n)},parse:function(e,t,n){return new r(e,t,n).parse()},PROBLEM_TYPES:v}},function(e,t){e.exports={GENERIC:1,CDATA:2,COMMENT:3,START_TAG_OPEN:4,TAG_CLOSE:5,START_TAG_VOID_CLOSE:6,END_TAG_OPEN:7,ATTR_EQUALS:8,TAG_NAME:9,ATTR_NAME:10,ATTR_VALUE:11,NAMED_REFERENCE:12,DECIMAL_REFERENCE:13,HEX_REFERENCE:14,TEXT:15,NR_CHAR_DATA:16,DOC_TYPE:17,BOGUS_COMMENT:18}},function(e,t,n){function i(e,t,n){if(this._buf=e,this.cb=t,this.$cachedLength=e.length,this.offset=0,this.line=0,this.lastCR=0,this.$mark=0,this.$markedLine=0,this.state=_,this.charRefState=K,this.contextTag=null,this.tokenPool=new f(n),this.$acceptLastChar=!1,this.currentAttr={content:"",offset:0},this.entityMatcher=h,this._countLines=p(n,"lines",!1),this._emitLowercase=p(n,"lowercase",!1),this._decodeEntities=p(n,"entities",!0),this.filter=g(n,this.cb),void 0===i._CHAR_MAP){i._CHAR_MAP=[];var r="ABCDEFGHIJKLMNOPQRSTUVWXYZ";("0123456789"+r+r.toLowerCase()).split("").forEach(function(e){var t=e.charCodeAt(0);i._CHAR_MAP[t-48]=t>=65&&90>=t?String.fromCharCode(t+32):e})}}function r(e,t){this.offset=e,this.line=t}function o(e,t){this.type=e,this.context=t}function s(e){this._callback=e,this._buf=[],this._errors=[]}function a(e,t,n){this._$scanner=new i(e,new s(n),t),this.cb=this._$scanner.cb}function l(e,t){t&&t.hasOwnProperty("start")&&t.start(),e.scan(),t&&t.hasOwnProperty("end")&&t.end()}var c=n(37),h=n(39),d=n(41),u=n(42).getMap(),p=n(44),f=n(45),g=n(47),m=n(48),v=0,_=v++,y=v++,x=v++,w=v++,b=v++,C=v++,E=v++,T=v++,S=v++,k=v++,A=v++,L=v++,M=v++,N=v++,O=v++,D=v++,R=v++,I=v++,P=v++,B=v++,F=v++,V=v++,K=1,j=2,H=3,U=4,W=new Uint8Array(5);W[K]=_,W[j]=w,W[H]=x,W[U]=b;var G={script:D,style:R};i.prototype.setTagContext=function(e){this.contextTag=e},i.prototype.hasNext=function(){return this.offset<this.$cachedLength},i.prototype.emitStructureToken=function(e,t,n){if(this.filter.accept(e)){var i=this.tokenPool.poolToken(t,n,e,-1!==this.$markedLine?this.$markedLine:this.line);this.cb.consumeToken(i)}},i.prototype.emitMarkedToken=function(e){if(this.$mark!==this.offset){if(this.filter.accept(e)){var t=this.tokenPool.poolToken(this.$mark,this.offset,e,-1!==this.$markedLine?this.$markedLine:this.line);switch(e){case c.TEXT:case c.COMMENT:case c.NR_CHAR_DATA:case c.DOC_TYPE:case c.BOGUS_COMMENT:t.content=this._buf.substring(t.start,t.end)}this.cb.consumeToken(t)}this.unmark()}},i.prototype.emitToken=function(e,t,n,i){
if(this.filter.accept(e)){var r=this.tokenPool.poolToken(t,n,e,-1!==this.$markedLine?this.$markedLine:this.line);r.content=i,this.cb.consumeToken(r)}this.unmark()},i.prototype.emitNameToken=function(e){if(this.filter.accept(e)){var t=this.tokenPool.poolToken(this.$mark,this.offset,e,-1!==this.$markedLine?this.$markedLine:this.line);if(t.content=this.sliceName(this.$mark,this.offset),e===c.TAG_NAME){var n=u[t.content];void 0===n&&(n=Object.keys(u).length,u[t.context]=n),t.tagId=n}this.cb.consumeToken(t)}this.unmark()},i.prototype.emitValueToken=function(e){if(this.filter.accept(c.ATTR_VALUE)){var t=this.tokenPool.poolToken(this.currentAttr.offset,this.offset,c.ATTR_VALUE,-1!==this.$markedLine?this.$markedLine:this.line);this.currentAttr.content+=this._buf.substring(this.currentAttr.segmentOffset,this.offset),t.content=this.currentAttr.content,this.cb.consumeToken(t)}this.unmark(),this.currentAttr.offset=-1,this.currentAttr.content="",this.state=e},i.prototype.emitEntityToken=function(e,t){if(this.filter.accept(e)){var n=this.tokenPool.poolToken(this.$mark,this.offset,e,-1!==this.$markedLine?this.$markedLine:this.line);n.reference=t,this.cb.consumeToken(n)}this.unmark()},i.prototype.sliceName=function(e,t){if(!this._emitLowercase)return this._buf.substring(e,t);for(var n,r="",o=e;t>o;)if(n=this._buf.charCodeAt(o++),n>=65&&122>=n){var s=i._CHAR_MAP[n-48];r+=void 0!==s?s:String.fromCharCode(n)}else r+=String.fromCharCode(n);return r},i.prototype.mark=function(){this.$mark=this.offset,this.$markedLine=this.line},i.prototype.unmark=function(){this.$mark=-1,this.$markedLine=-1},i.prototype._m=function(e){return this._buf.charCodeAt(this.offset)===e?(this.offset++,!0):!1},i.prototype._la=function(e,t){return this._buf.charCodeAt(this.offset+t)===e},i.prototype._ml=function(e){var t=this._buf.charCodeAt(this.offset);return e===t?(this.offset++,!0):t>=65&&90>=t&&e===t+32?(this.offset++,!0):t>=97&&122>=t&&e===t-32?(this.offset++,!0):!1},i.prototype["char"]=function(){return this._buf.charAt(this.offset)},i.prototype.charCode=function(){return this._buf.charCodeAt(this.offset)},i.prototype.charCodeA=function(){return this._buf.charCodeAt(this.offset++)},i.prototype.charAt=function(e){return this._buf.charAt(this.offset+e)},i.prototype.charCodeAt=function(e){return this._buf.charCodeAt(e)},i.prototype._countNL=function(e){10===e&&this.lastCR!==this.offset-1?this.line++:13===e&&(this.line++,this.lastCR=this.offset)},i.prototype.context=function(){return new r(this.offset,this.line)},i.prototype._cdataState=function(){this.mark();for(var e;this.hasNext();){if(e=this.charCodeA(),93===e&&this._m(93)&&this._m(62))return void this.emitMarkedToken(c.CDATA);this._countLines&&this._countNL(e)}this.emitMarkedToken(c.CDATA)},i.prototype._doctypeState=function(){this.$mark--;var e;do switch(e=this.charCode()){case 9:case 32:this.offset++;break;case 10:case 13:this._countLines&&this._countNL(e),this.offset++;break;case 62:return this.offset++,this.emitMarkedToken(c.DOC_TYPE),void(this.state=_);default:this.offset++}while(this.hasNext());this.cb.parseError(m.UNEXPECTED_EOF,this.context()),this.emitMarkedToken(c.DOC_TYPE),this.state=_},i.prototype._openState=function(){if(this.hasNext()){this.mark();var e=this.charCode();switch(e){case 47:return this.state=M,void this.offset++;case 33:return this.state=F,void this.offset++;case 63:return void(this.state=B);default:return this.unmark(),e>=65&&90>=e||e>=97&&122>=e?(this.state=k,void this.emitStructureToken(c.START_TAG_OPEN,this.offset-1,this.offset)):(this.cb.parseError(m.UNEXPECTED_CHAR,this.context()),this.emitToken(c.TEXT,this.offset-1,this.offset,"<"),void(this.state=_))}}this.emitToken(c.TEXT,this.offset-1,this.offset,"<"),this.cb.parseError(m.UNEXPECTED_EOF,this.context())},i.prototype._markupDeclarationState=function(){return this._m(45)&&this._ml(45)?void(this.state=I):this._ml(68)&&this._ml(79)&&this._ml(67)&&this._ml(84)&&this._ml(89)&&this._ml(80)&&this._ml(69)?void(this.state=P):void(this.state=B)},i.prototype._commentState=function(){var e;if(this.$mark--,this._m(45)){if(this._m(45))return void(this.state=V);this._m(62)&&(this.cb.parseError(m.UNEXPECTED_CHAR,this.context()),this.emitMarkedToken(c.COMMENT))}for(;this.hasNext();)if(e=this.charCodeA(),45===e){if(this._m(45))return this._m(62)?(this.emitMarkedToken(c.COMMENT),void(this.state=_)):void(this.state=V)}else 0===e?this.cb.parseError(m.ILLEGAL_CHAR,this.context()):!this._countLines||10!==e&&13!==e||this._countNL(e);this.cb.parseError(m.UNEXPECTED_EOF,this.context()),this.emitMarkedToken(c.COMMENT)},i.prototype._commentEndState=function(){for(var e;this.hasNext();){if(e=this.charCode(),e>62)return this.offset++,void(this.state=I);switch(e){case 62:return this.emitMarkedToken(c.COMMENT),this.offset++,void(this.state=_);case 45:this.cb.parseError(m.UNEXPECTED_CHAR,this.context()),this.offset++;break;case 0:return this.cb.parseError(m.ILLEGAL_CHAR,this.context()),void(this.state=I);case 33:if(this.cb.parseError(m.UNEXPECTED_CHAR,this.context()),this.offset++,this.hasNext())switch(e=this.charCode()){case 45:this.offset++;break;case 62:return this.state=_,this.emitMarkedToken(c.COMMENT),void this.offset++;case 0:return this.cb.parseError(m.ILLEGAL_CHAR,this.context()),this.offset++,void(this.state=I);default:return void(this.state=I)}break;default:return this.offset++,void(this.state=I)}}},i.prototype._bogusCommentState=function(){var e;for(this.$mark--;this.hasNext();){if(e=this.charCodeA(),62===e)return this.emitMarkedToken(c.BOGUS_COMMENT),void(this.state=_);this._countLines&&this._countNL(e)}this.emitMarkedToken(c.BOGUS_COMMENT),this.cb.parseError(m.UNEXPECTED_EOF,this.context())},i.prototype._tagNameState=function(){var e;this.mark(),this.offset++;do if(e=this._buf.charCodeAt(this.offset),e>90||e>=65)this.offset++;else switch(e){case 9:case 10:case 13:case 32:return this.emitNameToken(c.TAG_NAME),void(this.state=C);case 47:return this.emitNameToken(c.TAG_NAME),void(this.state=N);case 62:return this.emitNameToken(c.TAG_NAME),this.emitStructureToken(c.TAG_CLOSE,this.offset,this.offset+1),this.offset++,void(this.state=_);case 0:this.offset++,this.cb.parseError(m.ILLEGAL_CHAR,this.context());break;default:this.offset++}while(this.offset<this.$cachedLength);this.emitNameToken(c.TAG_NAME),this.cb.parseError(m.UNEXPECTED_EOF,this.context())},i.prototype._attrNameState=function(){this.mark();do{if(this.$acceptLastChar){this.offset++,this.$acceptLastChar=!1;break}var e=this._buf.charCodeAt(this.offset);if(63>e){if(61===e)return this.emitNameToken(c.ATTR_NAME),this.emitStructureToken(c.ATTR_EQUALS,this.offset,this.offset+1),this.offset++,void(this.state=A);if(62===e)return this.emitNameToken(c.ATTR_NAME),this.emitStructureToken(c.TAG_CLOSE,this.offset,this.offset+1),this.offset++,void(this.state=_);if(47===e)return this.emitNameToken(c.ATTR_NAME),void(this.state=N);if(33>e&&(9===e||10===e||32===e||13===e))return this.emitNameToken(c.ATTR_NAME),void(this.state=E);switch(e){case 0:case 34:case 39:case 60:this.cb.parseError(m.UNEXPECTED_CHAR,this.context()),this.offset++;break;default:this.offset++}}else this.offset++}while(this.offset<this.$cachedLength);this.emitNameToken(c.ATTR_NAME)},i.prototype._afterAttrNameState=function(){for(var e;this.hasNext();){if(e=this.charCode(),e>62)return void(this.state=T);switch(e){case 9:case 32:this.offset++;break;case 10:case 13:this._countLines&&this._countNL(e),this.offset++;break;case 47:return void(this.state=N);case 61:return this.state===C?(this.$acceptLastChar=!0,this.cb.parseError(m.UNEXPECTED_CHAR,this.context()),void(this.state=T)):(this.emitStructureToken(c.ATTR_EQUALS,this.offset,this.offset+1),this.offset++,void(this.state=A));case 62:return this.emitStructureToken(c.TAG_CLOSE,this.offset,this.offset+1),this.offset++,void(this.state=_);case 34:case 39:case 60:case 0:return this.$acceptLastChar=!0,this.cb.parseError(0===e?m.ILLEGAL_CHAR:m.UNEXPECTED_CHAR,this.context()),void(this.state=T);default:return void(this.state=T)}}this.cb.parseError(m.UNEXPECTED_EOF,this.context()),this.state=_},i.prototype._beforeAttrValueState=function(){var e;do switch(e=this.charCode()){case 34:case 39:return this.state=34===e?x:w,this.currentAttr.offset=this.offset,this.currentAttr.content=34===e?'"':"'",void this.offset++;case 9:case 32:this.offset++;break;case 10:case 13:this._countLines&&this._countNL(e),this.offset++;break;case 60:return this.cb.parseError(m.UNEXPECTED_CHAR,this.context()),void(this.state=_);case 61:case 62:case 96:return this.currentAttr.offset=this.offset,void(this.state=b);default:return this.currentAttr.offset=this.offset,void(this.state=b)}while(this.offset<this.$cachedLength)},i.prototype._entityInAttrValue=function(){var e=this._buf.charCodeAt(this.offset+1);switch(e){case 9:case 32:return this.offset++,!1;default:return this.currentAttr.content+=this._buf.substring(this.currentAttr.segmentOffset,this.offset),this.charRefState=this.state===x?H:j,this.state=O,!0}},i.prototype._attrValueState=function(){var e,t=this.state===x?34:39,n=0;this.currentAttr.segmentOffset=this.offset;do switch(e=this._buf.charCodeAt(this.offset)){case 34:case 39:if(this.offset++,e===t&&n!==this.offset-1)return void this.emitValueToken(S);break;case 92:n=this.offset,this.offset++;break;case 38:if(this._decodeEntities&&this._entityInAttrValue())return;this.offset++;break;default:this.offset++}while(this.offset<this.$cachedLength);this.cb.parseError(m.UNEXPECTED_EOF,this.context()),this.emitValueToken(S)},i.prototype._nqValueState=function(){var e,t=0;this.currentAttr.segmentOffset=this.offset;do if(e=this.charCode(),e>96)this.offset++;else{switch(e){case 10:case 13:case 9:case 32:case 62:return void this.emitValueToken(E);case 38:if(this._decodeEntities&&this._entityInAttrValue())return;break;case 92:t=this.offset;break;case 60:case 61:case 96:this.cb.parseError(m.ILLEGAL_CHAR,this.context());break;case 34:case 39:t!==this.offset-1&&this.cb.parseError(m.UNEXPECTED_CHAR,this.context())}this.offset++}while(this.offset<this.$cachedLength);this.cb.parseError(m.UNEXPECTED_EOF,this.context()),this.emitValueToken(E)},i.prototype._endTagState=function(){if(this.hasNext()){var e=this.charCode();if(e>=65&&90>=e||e>=97&&122>=e)return this.state=k,void this.emitStructureToken(c.END_TAG_OPEN,this.offset-2,this.offset);if(60===e)return this.cb.parseError(m.UNEXPECTED_CHAR,this.context()),void(this.state=_);this.cb.parseError(m.UNEXPECTED_CHAR,this.context()),this.state=B}else this.emitStructureToken(c.START_TAG_VOID_CLOSE,-1,-1),this.cb.parseError(m.UNEXPECTED_EOF,this.context())},i.prototype._selfClosingState=function(){return this.hasNext()?this._la(62,1)?(this.emitStructureToken(c.START_TAG_VOID_CLOSE,this.offset,this.offset+2),this.state=_,void(this.offset+=2)):(this.cb.parseError(m.UNEXPECTED_CHAR,this.context()),this.state=C,void this.offset++):void this.cb.parseError(m.UNEXPECTED_EOF,this.context())},i.prototype._contextChangeState=function(){this.mark();var e,t=!1;do{if(e=this.offset,this._m(60)&&this._m(47)&&this._ml(115)&&(t=!1,this._ml(99)&&this._ml(114)&&this._ml(105)&&this._ml(112)&&this._ml(116)&&(t=!0),t||this._ml(116)&&this._ml(121)&&this._ml(108)&&this._ml(101)&&(t=!0),t))switch(this.charCodeAt(this.offset)){case 32:case 47:case 62:return this.offset=e,this.emitMarkedToken(c.NR_CHAR_DATA),this.offset++,void(this.state=y)}this._countLines&&this._countNL(this.charCode()),this.offset++}while(this.offset<this.$cachedLength);this.emitMarkedToken(c.NR_CHAR_DATA)},i.prototype._textState=function(){this.mark();var e;do{switch(e=this._buf.charCodeAt(this.offset)){case 60:return this.emitMarkedToken(c.TEXT),void(this.state=_);case 0:this.cb.parseError(m.ILLEGAL_CHAR,this.context());break;case 38:if(this._decodeEntities)return this.emitMarkedToken(c.TEXT),this.charRefState=K,void(this.state=O);break;case 10:case 13:this._countLines&&this._countNL(e)}this.offset++}while(this.offset<this.$cachedLength);this.emitMarkedToken(c.TEXT),this.state=_},i.prototype._charRefState=function(){this.mark(),this.offset++;var e=this.charCode();switch(e){case 35:return this.offset++,void this._decimalReference();case 9:case 32:case 38:case 60:this.state=W[this.charRefState];break;case 10:case 13:this._countLines&&this._countNL(e),this.state=W[this.charRefState];break;default:return this.charRefState===H&&34===e||this.charRefState===j&&39===e?void(this.state=W[this.charRefState]):void this._namedCharReference()}this.charRefState!==K&&(this.currentAttr.content+="&")},i.prototype._decimalReference=function(){var e,t,n,i,r=this._ml(88),o=!1;for(this.offset++;this.hasNext()&&(e=this.charCode(),e>=48&&57>=e||r&&(e>=97&&102>=e||e>=65&&70>=e));)this.offset++,o=!0;return 59===e?(this.offset++,n=parseInt(this._buf.substring(this.$mark+(r?3:2),this.offset),r?16:10),i=d.getEntityType(n),i===d.BAD_ERROR?this.cb.parseError(m.ILLEGAL_ENTITY,this.context()):i===d.BAD_REPLACE&&(n=d.decodeBadEntity(n)),t=String.fromCharCode(n),this.cb&&(this.charRefState===K?this.emitEntityToken(r?c.HEX_REFERENCE:c.DECIMAL_REFERENCE,t):this.currentAttr.content+=t),void(this.state=W[this.charRefState])):(o&&this.cb.parseError(m.ILLEGAL_ENTITY,this.context()),this.state=W[this.charRefState],void(this.offset=this.$mark+1))},i.prototype._namedCharReference=function(){for(var e,t,n=null;this.hasNext();){if(e=this["char"](),n=null===n?this.entityMatcher._m(e):n._m(e),n.isMiss())return";"===e&&this.cb.parseError(m.UNEXPECTED_CHAR,this.context()),this.state=W[this.charRefState],void(this.offset=this.$mark+1);if(n.isTerminal())return this.offset++,t=this.charCode(),59===t?(this.offset++,this.cb&&(this.charRefState===K?this.emitEntityToken(c.NAMED_REFERENCE,n.charValue()):this.currentAttr.content+=n.charValue()),void(this.state=W[this.charRefState])):(this.charRefState!==K?61===t?this.cb.parseError(m.UNEXPECTED_CHAR,this.context()):(t=this.charCodeAt(this.offset+1),(61===t||t>=48&&57>=t||t>=97&&102>=t||t>=65&&70>=t)&&(this.cb.parseError(m.UNEXPECTED_CHAR,this.context()),this.state=W[this.charRefState],this.offset=this.$mark)):this.emitEntityToken(c.NAMED_REFERENCE,n.charValue()),void(this.state=W[this.charRefState]));n.isHit()&&this.offset++}this.state=_},i.prototype._dataState=function(){var e=this.charCode();if(60===e)this.state=y,this.offset++,this.hasNext()||this.emitStructureToken(c.START_TAG_OPEN,this.offset-1,this.offset);else if(38===e)this.state=L;else{if(null!==this.contextTag){var t=G[this.contextTag];if(void 0!==t)return void(this.state=t)}this.state=L}},i.prototype._ss1=function(){switch(this.state){case _:return this._dataState();case y:return this._openState();case b:return this._nqValueState();case x:case w:return this._attrValueState();case S:return this._afterAttrNameState()}switch(this.state){case E:case C:return this._afterAttrNameState();case T:return this._attrNameState();case k:return this._tagNameState();case A:return this._beforeAttrValueState();case L:return this._textState()}switch(this.state){case M:return this._endTagState();case N:return this._selfClosingState();case O:return this._charRefState();case D:case R:return this._contextChangeState();case I:return this._commentState();case V:return this._commentEndState();case P:return this._doctypeState();case F:return this._markupDeclarationState();case B:return this._bogusCommentState();default:this.offset++}},i.prototype.scan=function(){for(;this.offset<this.$cachedLength;)this._ss1()},s.prototype.consumeToken=function(e){this._buf.push(e)},s.prototype.parseError=function(e,t){this._callback?this._callback(e,t):this._errors.push(new o(e,t))},a.prototype.setTagContext=function(e){this._$scanner.setTagContext(e)},a.prototype.nextToken=function(){var e=this.cb._buf;if(e.length>0)return e.shift();for(;0===e.length&&this._$scanner.hasNext();)this._$scanner._ss1();return e.length>0?e.shift():null},a.prototype.hasNext=function(){return this.cb._buf.length>0||this._$scanner.hasNext()},a.prototype._la=function(e){for(var t=this.cb._buf;e>t.length&&this._$scanner.hasNext();)this._$scanner._ss1();return t.length>=e?t[e-1].type:null},a.prototype.pop=function(e){var t=this.cb._buf;if(void 0===e)return void t.shift();for(var n=0;n<Math.min(e,t.length);n++)t.shift()},e.exports={newScanner:function(e,t,n){return new a(e,t,n)},fragment:function(e,t,n,r){var o=new i(e,n,r);o.setTagContext(t),l(o,n)},scan:function(e,t,n){t=t||{consumeToken:function(){},parseError:function(){}};var r=new i(e,t,n);l(r,t)},HtmlTokenTypes:c}},function(e,t,n){function i(e,t){this.data=e,this.matchType=t}i.prototype.isHit=function(){return 1===this.matchType},i.prototype.isMiss=function(){return 0===this.matchType},i.prototype.isTerminal=function(){return 2===this.matchType},i.prototype.charValue=function(){return 2===this.matchType?this.data._c:null},i.prototype._m=function(e){var t=this.data[e];return t?(this.data=t,this.matchType=void 0!==t._et?2:1):this.matchType=0,this},i.data=n(40),e.exports={_m:function(e){return new i(i.data)._m(e)}}},function(e,t){e.exports={A:{a:{c:{u:{t:{e:{_c:"Á",_et:1}}}}},c:{i:{r:{c:{_c:"Â",_et:1}}}},E:{l:{i:{g:{_c:"Æ",_et:1}}}},g:{r:{a:{v:{e:{_c:"À",_et:1}}}}},M:{P:{_c:"&",_et:1}},r:{i:{n:{g:{_c:"Å",_et:1}}}},t:{i:{l:{d:{e:{_c:"Ã",_et:1}}}}},u:{m:{l:{_c:"Ä",_et:1}}}},a:{a:{c:{u:{t:{e:{_c:"á",_et:1}}}}},c:{i:{r:{c:{_c:"â",_et:1}}},u:{t:{e:{_c:"´",_et:1}}}},e:{l:{i:{g:{_c:"æ",_et:1}}}},g:{r:{a:{v:{e:{_c:"à",_et:1}}}}},m:{p:{_c:"&",_et:1}},r:{i:{n:{g:{_c:"å",_et:1}}}},t:{i:{l:{d:{e:{_c:"ã",_et:1}}}}},u:{m:{l:{_c:"ä",_et:1}}}},b:{r:{v:{b:{a:{r:{_c:"¦",_et:1}}}}}},C:{c:{e:{d:{i:{l:{_c:"Ç",_et:1}}}}},O:{P:{Y:{_c:"©",_et:1}}}},c:{c:{e:{d:{i:{l:{_c:"ç",_et:1}}}}},e:{d:{i:{l:{_c:"¸",_et:1}}},n:{t:{_c:"¢",_et:1}}},o:{p:{y:{_c:"©",_et:1}}},u:{r:{r:{e:{n:{_c:"¤",_et:1}}}}}},d:{e:{g:{_c:"°",_et:1}},i:{v:{i:{d:{e:{_c:"÷",_et:1}}}}}},E:{a:{c:{u:{t:{e:{_c:"É",_et:1}}}}},c:{i:{r:{c:{_c:"Ê",_et:1}}}},g:{r:{a:{v:{e:{_c:"È",_et:1}}}}},T:{H:{_c:"Ð",_et:1}},u:{m:{l:{_c:"Ë",_et:1}}}},e:{a:{c:{u:{t:{e:{_c:"é",_et:1}}}}},c:{i:{r:{c:{_c:"ê",_et:1}}}},g:{r:{a:{v:{e:{_c:"è",_et:1}}}}},t:{h:{_c:"ð",_et:1}},u:{m:{l:{_c:"ë",_et:1}}}},f:{r:{a:{c:{1:{2:{_c:"½",_et:1},4:{_c:"¼",_et:1}},3:{4:{_c:"¾",_et:1}}}}}},G:{T:{_c:">",_et:1}},g:{t:{_c:">",_et:1}},I:{a:{c:{u:{t:{e:{_c:"Í",_et:1}}}}},c:{i:{r:{c:{_c:"Î",_et:1}}}},g:{r:{a:{v:{e:{_c:"Ì",_et:1}}}}},u:{m:{l:{_c:"Ï",_et:1}}}},i:{a:{c:{u:{t:{e:{_c:"í",_et:1}}}}},c:{i:{r:{c:{_c:"î",_et:1}}}},e:{x:{c:{l:{_c:"¡",_et:1}}}},g:{r:{a:{v:{e:{_c:"ì",_et:1}}}}},q:{u:{e:{s:{t:{_c:"¿",_et:1}}}}},u:{m:{l:{_c:"ï",_et:1}}}},l:{a:{q:{u:{o:{_c:"«",_et:1}}}},t:{_c:"<",_et:1}},L:{T:{_c:"<",_et:1}},m:{a:{c:{r:{_c:"¯",_et:1}}},i:{c:{r:{o:{_c:"µ",_et:1}}},d:{d:{o:{t:{_c:"·",_et:1}}}}}},n:{b:{s:{p:{_c:" ",_et:1}}},o:{t:{_c:"¬",_et:1}},t:{i:{l:{d:{e:{_c:"ñ",_et:1}}}}}},N:{t:{i:{l:{d:{e:{_c:"Ñ",_et:1}}}}}},O:{a:{c:{u:{t:{e:{_c:"Ó",_et:1}}}}},c:{i:{r:{c:{_c:"Ô",_et:1}}}},g:{r:{a:{v:{e:{_c:"Ò",_et:1}}}}},s:{l:{a:{s:{h:{_c:"Ø",_et:1}}}}},t:{i:{l:{d:{e:{_c:"Õ",_et:1}}}}},u:{m:{l:{_c:"Ö",_et:1}}}},o:{a:{c:{u:{t:{e:{_c:"ó",_et:1}}}}},c:{i:{r:{c:{_c:"ô",_et:1}}}},g:{r:{a:{v:{e:{_c:"ò",_et:1}}}}},r:{d:{f:{_c:"ª",_et:1},m:{_c:"º",_et:1}}},s:{l:{a:{s:{h:{_c:"ø",_et:1}}}}},t:{i:{l:{d:{e:{_c:"õ",_et:1}}}}},u:{m:{l:{_c:"ö",_et:1}}}},p:{a:{r:{a:{_c:"¶",_et:1}}},l:{u:{s:{m:{n:{_c:"±",_et:1}}}}},o:{u:{n:{d:{_c:"£",_et:1}}}}},Q:{U:{O:{T:{_c:'"',_et:1}}}},q:{u:{o:{t:{_c:'"',_et:1}}}},r:{a:{q:{u:{o:{_c:"»",_et:1}}}},e:{g:{_c:"®",_et:1}}},R:{E:{G:{_c:"®",_et:1}}},s:{e:{c:{t:{_c:"§",_et:1}}},h:{y:{_c:"­",_et:1}},u:{p:{1:{_c:"¹",_et:1},2:{_c:"²",_et:1},3:{_c:"³",_et:1}}},z:{l:{i:{g:{_c:"ß",_et:1}}}}},T:{H:{O:{R:{N:{_c:"Þ",_et:1}}}}},t:{h:{o:{r:{n:{_c:"þ",_et:1}}}},i:{m:{e:{s:{_c:"×",_et:1}}}}},U:{a:{c:{u:{t:{e:{_c:"Ú",_et:1}}}}},c:{i:{r:{c:{_c:"Û",_et:1}}}},g:{r:{a:{v:{e:{_c:"Ù",_et:1}}}}},u:{m:{l:{_c:"Ü",_et:1}}}},u:{a:{c:{u:{t:{e:{_c:"ú",_et:1}}}}},c:{i:{r:{c:{_c:"û",_et:1}}}},g:{r:{a:{v:{e:{_c:"ù",_et:1}}}}},m:{l:{_c:"¨",_et:1}},u:{m:{l:{_c:"ü",_et:1}}}},Y:{a:{c:{u:{t:{e:{_c:"Ý",_et:1}}}}}},y:{a:{c:{u:{t:{e:{_c:"ý",_et:1}}}}},e:{n:{_c:"¥",_et:1}},u:{m:{l:{_c:"ÿ",_et:1}}}}}},function(e,t){function n(e){if(0===e||128===e||e>=130&&142>=e||e>=145&&159>=e)return r;if(11===e||65534===e||65535===e)return o;if(e>=131070)switch(e){case 131070:case 131071:case 196606:case 196607:case 262142:case 262143:case 327678:case 327679:case 393214:case 393215:case 458750:case 458751:case 524286:case 524287:case 589822:case 589823:case 655358:case 655359:case 720894:case 720895:case 786430:case 786431:case 851966:case 851967:case 917502:case 917503:case 983038:case 983039:case 1048574:case 1048575:case 1114110:case 1114111:return r}return s}function i(e){switch(e){case 0:return 65533;case 128:return 8364;case 130:return 8218;case 131:return 402;case 132:return 8222;case 133:return 8230;case 134:return 8224;case 135:return 8225;case 136:return 710;case 137:return 8240;case 138:return 352;case 139:return 8249;case 140:return 338;case 142:return 381;case 145:return 8216;case 146:return 8217;case 147:return 8220;case 148:return 8221;case 149:return 8226;case 150:return 8211;case 151:return 8212;case 152:return 732;case 153:return 8482;case 154:return 353;case 155:return 8250;case 156:return 339;case 158:return 382;case 159:return 376}return 0}var r=1,o=2,s=0;e.exports={VALID:s,BAD_REPLACE:r,BAD_ERROR:o,getEntityType:n,decodeBadEntity:i}},function(e,t,n){function i(){}i.prototype.getMap=function(){return i.MAP},i.prototype.getReverseMap=function(){return i.RMAP},i.MAP=n(43),i.RMAP=Object.keys(i.MAP),e.exports=new i},function(e,t){e.exports={a:0,abbr:1,acronym:2,address:3,applet:4,area:5,article:6,aside:7,audio:8,b:9,base:10,basefont:11,bdi:12,bdo:13,big:14,blink:15,blockquote:16,body:17,br:18,button:19,canvas:20,caption:21,center:22,cite:23,code:24,col:25,colgroup:26,command:27,content:28,data:29,datalist:30,dd:31,del:32,details:33,dfn:34,dir:35,div:36,dl:37,dt:38,element:39,em:40,embed:41,fieldset:42,figcaption:43,figure:44,font:45,footer:46,form:47,frame:48,frameset:49,h1:50,h2:51,h3:52,h4:53,h5:54,h6:55,head:56,header:57,hgroup:58,hr:59,html:60,i:61,iframe:62,img:63,input:64,ins:65,isindex:66,kbd:67,keygen:68,label:69,legend:70,li:71,link:72,listing:73,main:74,map:75,mark:76,marquee:77,menu:78,menuitem:79,meta:80,meter:81,nav:82,nobr:83,noframes:84,noscript:85,object:86,ol:87,optgroup:88,option:89,output:90,p:91,param:92,picture:93,pre:94,progress:95,q:96,rp:97,rt:98,rtc:99,ruby:100,s:101,samp:102,script:103,section:104,select:105,shadow:106,small:107,source:108,span:109,strike:110,strong:111,style:112,sub:113,summary:114,sup:115,table:116,tbody:117,td:118,template:119,textarea:120,tfoot:121,th:122,thead:123,time:124,title:125,tr:126,track:127,tt:128,u:129,ul:130,"var":131,video:132,wbr:133}},function(e,t){e.exports=function(e,t,n){return e&&void 0!==e[t]?e[t]:n}},function(e,t,n){function i(e){this.pool=[],this.lookahead=Math.min(10,Math.abs(3*e)),this.poolOffset=0;for(var t=0;t<this.lookahead;t++)this.pool[t]=new r(-1,-1,-1,-1)}var r=n(46);i.prototype.poolToken=function(e,t,n,i){return this.poolOffset=this.poolOffset>=this.lookahead?0:this.poolOffset,this.pool[this.poolOffset++].init(e,t,n,i)},e.exports=function(e){return e&&void 0!==e.maxLookAhead&&e.maxLookAhead>0?new i(e.maxLookAhead):{poolToken:function(e,t,n,i){return new r(e,t,n,i)}}}},function(e,t,n){function i(e,t,n,i){this.start=void 0!==e?e:-1,this.end=void 0!==t?t:-1,this.type=void 0!==n?n:r.GENERIC,this.content=null,this.line=i||0,this.reference=null,this.tagId=void 0}var r=n(37);i.prototype.init=function(e,t,n,i){return this.start=e,this.end=t,this.line=i,this.type=n,this.content=null,this.reference=null,this.tagId=void 0,this},e.exports=i},function(e,t){function n(e){this.$filterMask=0;for(var t=0;t<e.filter.length;t++)this.$filterMask|=1<<e.filter[t]}n.prototype.accept=function(e){var t=1<<e;return(this.$filterMask&t)===t},e.exports=function(e,t){return t&&e&&e.filter&&Array.isArray(e.filter)?new n(e):{accept:function(){return!0}}}},function(e,t){e.exports={ILLEGAL_CHAR:12,UNEXPECTED_CHAR:13,UNEXPECTED_EOF:14,ILLEGAL_ENTITY:15}},function(e,t,n){var i=n(50);e.exports={91:{_os:new i(3,6,7,16,33,36,37,42,43,44,46,47,50,51,52,53,54,55,57,58,59,74,78,82,87,91,94,104,116,130),of:function(e){return this._os.has(e)},cf:function(e){switch(e){case 0:case 8:case 32:case 65:case 75:case 85:case 132:return!1;default:return!0}}},71:{of:function(e){return 71===e},cf:function(e){return!0}},38:{of:function(e){return 38===e||31===e},cf:function(e){return!1}},31:{of:function(e){return 38===e||31===e},cf:function(e){return!0}},98:{of:function(e){return 98===e||97===e},cf:function(e){return!0}},97:{of:function(e){return 98===e||97===e},cf:function(e){return!0}},88:{of:function(e){return 88===e},cf:function(e){return!0}},89:{of:function(e){return 88===e||89===e},cf:function(e){return!0}},123:{of:function(e){return 117===e||121===e},cf:function(e){return!1}},126:{of:function(e){return 126===e},cf:function(e){return!0}},118:{of:function(e){return 118===e||122===e},cf:function(e){return!0}},122:{of:function(e){return 118===e||122===e},cf:function(e){return!0}},121:{of:function(e){return 117===e},cf:function(e){return!0}},117:{of:function(e){return 117===e||121===e},cf:function(e){return!0}},voidRule:{_os:new i(5,10,18,25,41,59,63,64,68,72,79,80,92,108,127,133),of:function(e){return this._os.has(e)},cf:function(e){return!0}},formattingSet:{_os:new i(0,9,14,24,40,45,61,83,101,107,110,111,128,129),of:function(e){return this._os.has(e)},cf:function(e){return!0}}}},function(e,t){function n(e){var t=e/r;return t|t}function i(){this.sets=new Uint32Array(o);var e=arguments;Array.isArray(arguments[0])&&(e=arguments[0]);for(var t=0;t<e.length;t++)this.add(e[t])}var r=30,o=5;i.prototype.add=function(e){var t=n(e);if(t>=o)throw"Overflow Exception: number is too large";this.sets[t]|=1<<e-r*t},i.prototype.has=function(e){var t=n(e),i=1<<e-r*t;return(this.sets[t]&i)===i},e.exports=i},function(e,t){function n(e,t){this.start=e,this.end=t}function i(e,t,n){this.start=e,this.end=t,this.valueStart=t,this.parentAttr=n}function r(e,t){this.start=e,this.end=t,this.parentNode=null,this.contentStart=-1,this.closeStart=-1}n.prototype.contains=function(e){return e>=this.start&&e<this.end},i.prototype=Object.create(n.prototype),Object.defineProperty(i.prototype,"nameStart",{get:function(){return this.start}}),Object.defineProperty(i.prototype,"nameEnd",{get:function(){return this.start+this.parentAttr.name.length}}),i.prototype.inValue=function(e){return e>=this.valueStart&&e<this.end},i.prototype.inName=function(e){return e>=this.start&&e<this.start+this.parentAttr.name.length},r.prototype=Object.create(n.prototype),Object.defineProperty(r.prototype,"nameStart",{get:function(){return this.start+1}}),Object.defineProperty(r.prototype,"nameEnd",{get:function(){return this.start+1+this.parentNode.nodeName.length}}),Object.defineProperty(r.prototype,"closeNameStart",{get:function(){return this.closeStart+2}}),Object.defineProperty(this,"closeNameEnd",{get:function(){return this.closeStart+2+this.parentNode.nodeName.length}}),r.prototype.inContent=function(e){return this.isVoid?!1:e>=this.contentStart&&e<this.closeStart},r.prototype.inEndTag=function(e){return this.isVoid?!1:e>=this.closeStart&&e<=this.end},r.prototype.inAttributeList=function(e){return e>=this.nameEnd&&e<this.contentStart},r.prototype.inName=function(e){return e>=this.nameStart&&e<=this.nameEnd},e.exports={ElementLocation:r,AttrLocation:i,Location:n}},function(e,t,n){function i(e){this.openTags=[],this.ct=null,this.domOffsets=s(e,"offsets",!1),this.root=new o.Document(this.domOffsets),this.validateDOM=s(e,"validate",!1),this.idMap=s(e,"symbols",!0),this.currentTagName=null,this.validateDOM&&(this.problems=[])}var r=n(36),o=n(53),s=n(44),a="id";i.prototype.payload=function(){var e={};if(e.document=this.root,this.validateDOM){var t=this.problems;e.getProblems=function(){return t}}return e},i.prototype.onBegin=function(e){this.domOffsets&&this.root.setLocation(e)},i.prototype.onOpenTag=function(e,t){this.currentTagName=e;var n=this.currentTag(),i=this.root.createElement(e);this.domOffsets&&(t.closeStart=t.end,t.end=t.end,i.setLocation(t)),n.appendChild(i),this.openTags.push(i),this.ct=null},i.prototype.onText=function(e,t){var n=this.currentTag();if(n.childNodes&&n.childNodes.length>0){var i=n.childNodes.item(n.childNodes.length-1);if(i.getType()===o.Node.TEXT_NODE)return this.domOffsets&&(i.location.end=t.end),void(i.text+=e)}var r=this.root.createTextNode(e);this.domOffsets&&r.setLocation(t),n.appendChild(r)},i.prototype.onComment=function(){},i.prototype.currentTag=function(){return null!==this.ct?this.ct:0===this.openTags.length?this.root:(this.ct=this.openTags[this.openTags.length-1],this.ct)},i.prototype.onOpenTagEnd=function(e,t,n){if(this.currentTagName===e){var i=this.currentTag();this.domOffsets&&(i.location.end=n,i.location.contentStart=n)}},i.prototype.onSelfClosingEnd=function(e,t,n,i){var r=this.currentTag();r.isVoid=t,r.nodeName===e&&t&&(this.domOffsets&&(r.location.end=i,r.location.contentStart=i),this.openTags.pop(),this.ct=null)},i.prototype.onId=function(e,t,n){if(this.currentTagName===e){var i=this.currentTag();this.idMap&&this.root.addNamedElement(t,i);var r=this.root.createAttribute(a,t,!0);this.domOffsets&&r.setLocation(n),i.setAttributeNode(r)}},i.prototype.onAttribute=function(e,t,n,i){if(this.currentTagName===e){var r=this.root.createAttribute(t,n,!1),s=this.currentTag();this.domOffsets&&r.setLocation(i),s.nodeType===o.Node.ELEMENT_NODE&&s.setAttributeNode(r)}},i.prototype.onCloseTag=function(e,t,n,i){var r=null;do{if(r=this.currentTag(),t===!1&&(r.isClosed=!1),this.domOffsets&&(r.location.closeStart=n,r.location.end=i),r.nodeName===e)break;r.closed=!1,this.ct=null,this.openTags.pop()}while(this.openTags.length>0);this.ct=null,this.openTags.pop()},i.prototype.onError=function(e){this.validateDOM&&this.problems.push(e)},e.exports={parse:function(e,t){void 0===t&&(t={}),t.maxLookAhead=3;var n=new i(t);return r.parse(e,n,t),n.payload()},DOM:o}},function(e,t){function n(e){this._w=e}function i(e){var t=e.filter(function(e){return e.getType()===r.ELEMENT_NODE});return new n(t)}function r(){this.nodeType=0,this._children=null}function o(e,t,n){if(e.nodeName===t&&n.push(e),e.hasChildren())for(var i,s=0;s<e._children.length;s++)i=e._children[s],i.getType()===r.ELEMENT_NODE&&o(i,t,n)}function s(e,t){if(e.location.contains(t)){if(!e.hasChildren())return e;for(var n=null,i=0;i<e._children.length;i++){if(n=e._children[i],n.location.contains(t))return s(n,t);if(n.end>=t)break}return e}return null}function a(e,t,n){this.name=e,this.value=t,this.isId=n}function l(e){if(e.length>0)switch(e.charAt(0)){case'"':return 2;case"'":return 1}return-1}function c(e){Object.defineProperty(e,"childElementCount",{get:function(){for(var e=0,t=0;t<this._children.length;t++)this._children[t].getType()===r.ELEMENT_NODE&&e++;return e}}),Object.defineProperty(e,"firstElementChild",{get:function(){for(var e=0;e<this._children.length;e++)if(this._children[e].getType()===r.ELEMENT_NODE)return this._children[e];return null}}),Object.defineProperty(e,"lastElementChild",{get:function(){for(var e=this._children.length-1;e>=0;e--)if(this._children[e].getType()===r.ELEMENT_NODE)return this._children[e];return null}})}function h(e){r.call(this),this.nodeName=e,this._children=[],this.nodeType=r.ELEMENT_NODE,this.attributes=null,this.status=0,this.status|=m,this.previousSibling=null,this.nextSibling=null,this.parentNode=null}function d(e,t,n){return n===!0?e|=t:e&=~t,e}function u(e){this.wholeText=e,this.nodeName="#text",this.nodeType=r.TEXT_NODE}function p(e){this.text=e,this.nodeName="#comment",this.nodeType=r.COMMENT_NODE}function f(e){r.call(this),this.nodeName="#document",this.nodeType=r.DOCUMENT_NODE,this._children=[],this.previousSibling=null,this.nextSibling=null,this.parentNode=null,this.table={},this.trackOffsets=void 0!==e&&e,this.trackOffsets&&(this.getElementAtOffset=function(e){return s(this,e)})}n.prototype.item=function(e){return this._w[e]},n.prototype.forEach=function(e){
return this._w.forEach(e)},Object.defineProperty(n.prototype,"length",{get:function(){return this._w.length}}),Object.defineProperty(r.prototype,"children",{get:function(){return i(this._children)}}),Object.defineProperty(r.prototype,"childNodes",{get:function(){return new n(this._children)}}),Object.defineProperty(r.prototype,"firstChild",{get:function(){return null!==this._children&&this._children.length>0?this._children[0]:null}}),Object.defineProperty(r.prototype,"lastChild",{get:function(){return null!==this._children&&this._children.length>0?this._children[this._children.length-1]:null}}),r.prototype.hasChildren=function(){return this._children&&this._children.length>0},r.prototype.getType=function(){return this.nodeType},r.prototype.appendChild=function(e){if(null===this._children&&(this._children=[]),e.parentNode=this,this._children.length>0){var t=this._children[this._children.length-1];t.nextSibling=e,e.previousSibling=t}this._children.push(e)},r.ELEMENT_NODE=1,r.TEXT_NODE=3,r.COMMENT_NODE=8,r.DOCUMENT_NODE=9,a.prototype={get rawValue(){var e=l(this.value);return-1===e?this.value:this.value&&this.value.length>2?this.value.substring(1,this.value.length-1):""}},a.prototype.setLocation=function(e){this.location=e,this.location.parentAttr=this},a.prototype.toDOMString=function(){var e=this.rawValue;if(e.length>0){var t=[];t.push(this.name),t.push("=");var n=l(this.value);return n>0&&t.push(2===n?'"':"'"),t.push(e),n>0&&t.push(2===n?'"':"'"),t.join("")}return this.name};var g=2,m=4,v=8;h.prototype=Object.create(r.prototype),c(h.prototype),Object.defineProperty(h.prototype,"isVoid",{get:function(){return(this.status&g)===g},set:function(e){this.status=d(this.status,g,e)}}),Object.defineProperty(h.prototype,"isClosed",{get:function(){return(this.status&m)===m},set:function(e){this.status=d(this.status,m,e)}}),Object.defineProperty(h.prototype,"isSelfClosing",{get:function(){return(this.status&v)===v},set:function(e){this.status=d(this.status,v,e)}}),Object.defineProperty(h.prototype,"id",{get:function(){return this.getAttribute("id")}}),h.prototype.setLocation=function(e){this.location=e,this.location.parentNode=this},h.prototype.getAttributeForOffset=function(e){if(this.hasAttributes()&&this.location.inAttributeList(e))for(var t in this.attributes)if(this.attributes.hasOwnProperty(t)){var n=this.attributes[t];if(n.location.contains(e))return n;if(n.location.end>e)break}return null},h.prototype.setAttribute=function(e,t,n){void 0!==n?this.setAttributeNode(new a(e,("s"===n?"'":'"')+t+("s"===n?"'":'"'))):this.setAttributeNode(new a(e,t))},h.prototype.setIdAttribute=function(e,t){this.setAttribute("id",e,t)},h.prototype.hasAttributes=function(){return this.attributes},h.prototype.setAttributeNode=function(e){null===this.attributes&&(this.attributes={}),this.attributes[e.name]=e},h.prototype.getAttributeNode=function(e){if(this.attributes){var t=this.attributes[e];return t||(t=this.attributes[e.toLowerCase()]),t}return null},h.prototype.getAttribute=function(e){var t=this.getAttributeNode(e);return t?t.value:null},h.prototype.hasAttribute=function(e){return this.attributes&&(void 0!==this.attributes[e]||void 0!==this.attributes[e.toLowerCase()])},h.prototype.getAttributes=function(){return this.attributes?this.attributes:{}},h.prototype.getElementsByTagName=function(e){var t=[];return o(this,e,t),new n(t)},h.prototype.toDOMString=function(){var e=[];if(e.push("<"),e.push(this.nodeName),this.attributes){var t=this;Object.keys(this.attributes).forEach(function(n){e.push(" "),e.push(t.attributes[n].toDOMString())})}return this.isVoid&&0===this.childElementCount?(e.push("/>"),e.join("")):(e.push(">"),this._children.forEach(function(t){e.push(t.toDOMString())}),this.isClosed&&(e.push("</"),e.push(this.nodeName),e.push(">")),e.join(""))},u.prototype=Object.create(r.prototype),u.prototype.setLocation=function(e){this.location=e},u.prototype.toDOMString=function(){return this.wholeText},p.prototype=Object.create(r.prototype),p.prototype.setLocation=function(e){this.location=e},p.prototype.toDOMString=function(){return"<!-- "+this.text+"-->"},f.prototype=Object.create(r.prototype),c(f.prototype),Object.defineProperty(f.prototype,"documentElement",{get:function(){return this._children.length>0?this._children[0]:null}}),f.prototype.setLocation=function(e){this.location=e},f.prototype.addNamedElement=function(e,t){this.table[e]=t},f.prototype.createAttribute=function(e,t,n){return new a(e,void 0!==t?t:null,void 0!==n?n:"id"===e)},f.prototype.createElement=function(e){return new h(e,this.trackOffsets)},f.prototype.createTextNode=function(e){return new u(e)},f.prototype.createCommentNode=function(e){return new p(e)},f.prototype.getElementsByTagName=function(e){var t=[];return o(this,e,t),new n(t)},f.prototype.getElementById=function(e){return this.table[e]},f.prototype.toDOMString=function(){var e=[];return this._children.forEach(function(t){e.push(t.toDOMString())}),e.join("")},f.prototype.toString=function(){function e(e,t){return"previousSibling"===e||"nextSibling"===e||"parentNode"===e?null!==t?t.nodeName:null:"_children"===e?t.slice():"parentAttr"===e?t.name:t}return JSON.stringify(this,e,"	")},e.exports={Document:f,Node:{ELEMENT_NODE:r.ELEMENT_NODE,TEXT_NODE:r.TEXT_NODE,COMMENT_NODE:r.COMMENT_NODE,DOCUMENT_NODE:r.DOCUMENT_NODE}}},function(e,t,n){var i=n(55).html;e.exports=function(e,t){var n=e.toDOMString();return t&&t.raw===!0?n:i(n,t)}},function(e,t,n){function i(e,t,n){var i=function(t,n){return e.js_beautify(t,n)};return i.js=e.js_beautify,i.css=t.css_beautify,i.html=n.html_beautify,i.js_beautify=e.js_beautify,i.css_beautify=t.css_beautify,i.html_beautify=n.html_beautify,i}var r,o;r=[n(56),n(57),n(58)],o=function(e,t,n){return i(e,t,n)}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var i,r;Object.values||(Object.values=function(e){if(e!==Object(e))throw new TypeError("Object.values called on a non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(e[t]);return n}),function(){function n(e,t){var n,i={};for(n in e)n!==t&&(i[n]=e[n]);if(t in e)for(n in e[t])i[n]=e[t][n];return i}function o(e,t){function i(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function r(e){return e.replace(/^\s+|\s+$/g,"")}function o(e){return e.replace(/^\s+/g,"")}function s(e){e=e||u.before_newline;var t=Object.values(u);if(!i(e,t))throw new Error("Invalid Option Value: The option 'operator_position' must be one of the following values\n"+t+"\nYou passed in: '"+e+"'");return e}function a(e,t){"use strict";function a(e,t){var n=0;e&&(n=e.indentation_level,!z.just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level));var i={mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:e?e.line_indent_level:n,start_line_index:z.get_line_number(),ternary_depth:0};return i}function l(e,t){for(var n=e.newlines,i=oe.keep_array_indentation&&C(ee.mode),r=Y,o=0;o<e.comments_before.length;o++)Y=e.comments_before[o],l(Y,t),re[Y.type](t);if(Y=r,i)for(var s=0;n>s;s+=1)v(s>0,t);else if(oe.max_preserve_newlines&&n>oe.max_preserve_newlines&&(n=oe.max_preserve_newlines),oe.preserve_newlines&&e.newlines>1){v(!1,t);for(var a=1;n>a;a+=1)v(!0,t)}}function g(e){e=e.replace(d.allLineBreaks,"\n");for(var t=[],n=e.indexOf("\n");-1!==n;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");return e.length&&t.push(e),t}function m(e){if(e=void 0===e?!1:e,!z.just_added_newline()){var t=oe.preserve_newlines&&Y.wanted_newline||e,n=i(ee.last_text,q.positionable_operators)||i(Y.text,q.positionable_operators);if(n){var r=i(ee.last_text,q.positionable_operators)&&i(oe.operator_position,p)||i(Y.text,q.positionable_operators);t=t&&r}if(t)v(!1,!0);else if(oe.wrap_line_length){if("TK_RESERVED"===J&&i(ee.last_text,he))return;var o=z.current_line.get_character_count()+Y.text.length+(z.space_before_token?1:0);o>=oe.wrap_line_length&&v(!1,!0)}}}function v(e,t){if(!t&&";"!==ee.last_text&&","!==ee.last_text&&"="!==ee.last_text&&"TK_OPERATOR"!==J)for(var n=N(1);!(ee.mode!==f.Statement||ee.if_block&&n&&"TK_RESERVED"===n.type&&"else"===n.text||ee.do_block);)T();z.add_new_line(e)&&(ee.multiline_frame=!0)}function _(){z.just_added_newline()&&(oe.keep_array_indentation&&C(ee.mode)&&Y.wanted_newline?(z.current_line.push(Y.whitespace_before),z.space_before_token=!1):z.set_indent(ee.indentation_level)&&(ee.line_indent_level=ee.indentation_level))}function y(e){if(z.raw)return void z.add_raw_token(Y);if(oe.comma_first&&"TK_COMMA"===J&&z.just_added_newline()&&","===z.previous_line.last()){var t=z.previous_line.pop();z.previous_line.is_empty()&&(z.previous_line.push(t),z.trim(!0),z.current_line.pop(),z.trim()),_(),z.add_token(","),z.space_before_token=!0}e=e||Y.text,_(),z.add_token(e)}function x(){ee.indentation_level+=1}function w(){ee.indentation_level>0&&(!ee.parent||ee.indentation_level>ee.parent.indentation_level)&&(ee.indentation_level-=1)}function b(e){ee?(ne.push(ee),te=ee):te=a(null,e),ee=a(te,e)}function C(e){return e===f.ArrayLiteral}function E(e){return i(e,[f.Expression,f.ForInitializer,f.Conditional])}function T(){ne.length>0&&(te=ee,ee=ne.pop(),te.mode===f.Statement&&z.remove_redundant_indentation(te))}function S(){return ee.parent.mode===f.ObjectLiteral&&ee.mode===f.Statement&&(":"===ee.last_text&&0===ee.ternary_depth||"TK_RESERVED"===J&&i(ee.last_text,["get","set"]))}function k(){return"TK_RESERVED"===J&&i(ee.last_text,["var","let","const"])&&"TK_WORD"===Y.type||"TK_RESERVED"===J&&"do"===ee.last_text||"TK_RESERVED"===J&&i(ee.last_text,["return","throw"])&&!Y.wanted_newline||"TK_RESERVED"===J&&"else"===ee.last_text&&("TK_RESERVED"!==Y.type||"if"!==Y.text||Y.comments_before.length)||"TK_END_EXPR"===J&&(te.mode===f.ForInitializer||te.mode===f.Conditional)||"TK_WORD"===J&&ee.mode===f.BlockStatement&&!ee.in_case&&"--"!==Y.text&&"++"!==Y.text&&"function"!==Q&&"TK_WORD"!==Y.type&&"TK_RESERVED"!==Y.type||ee.mode===f.ObjectLiteral&&(":"===ee.last_text&&0===ee.ternary_depth||"TK_RESERVED"===J&&i(ee.last_text,["get","set"]))?(b(f.Statement),x(),l(Y,!0),S()||m("TK_RESERVED"===Y.type&&i(Y.text,["do","for","if","while"])),!0):!1}function A(e,t){for(var n=0;n<e.length;n++){var i=r(e[n]);if(i.charAt(0)!==t)return!1}return!0}function L(e,t){for(var n,i=0,r=e.length;r>i;i++)if(n=e[i],n&&0!==n.indexOf(t))return!1;return!0}function M(e){return i(e,["case","return","do","if","throw","else"])}function N(e){var t=X+(e||0);return 0>t||t>=se.length?null:se[t]}function O(){k()||l(Y);var e=f.Expression;if("["===Y.text){if("TK_WORD"===J||")"===ee.last_text)return"TK_RESERVED"===J&&i(ee.last_text,q.line_starters)&&(z.space_before_token=!0),b(e),y(),x(),void(oe.space_in_paren&&(z.space_before_token=!0));e=f.ArrayLiteral,C(ee.mode)&&("["===ee.last_text||","===ee.last_text&&("]"===Q||"}"===Q))&&(oe.keep_array_indentation||v())}else"TK_RESERVED"===J&&"for"===ee.last_text?e=f.ForInitializer:"TK_RESERVED"===J&&i(ee.last_text,["if","while"])&&(e=f.Conditional);";"===ee.last_text||"TK_START_BLOCK"===J?v():"TK_END_EXPR"===J||"TK_START_EXPR"===J||"TK_END_BLOCK"===J||"."===ee.last_text?m(Y.wanted_newline):"TK_RESERVED"===J&&"("===Y.text||"TK_WORD"===J||"TK_OPERATOR"===J?"TK_RESERVED"===J&&("function"===ee.last_word||"typeof"===ee.last_word)||"*"===ee.last_text&&(i(Q,["function","yield"])||ee.mode===f.ObjectLiteral&&i(Q,["{",","]))?oe.space_after_anon_function&&(z.space_before_token=!0):"TK_RESERVED"!==J||!i(ee.last_text,q.line_starters)&&"catch"!==ee.last_text||oe.space_before_conditional&&(z.space_before_token=!0):z.space_before_token=!0,"("===Y.text&&"TK_RESERVED"===J&&"await"===ee.last_word&&(z.space_before_token=!0),"("===Y.text&&("TK_EQUALS"===J||"TK_OPERATOR"===J)&&(S()||m()),"("===Y.text&&"TK_WORD"!==J&&"TK_RESERVED"!==J&&m(),b(e),y(),oe.space_in_paren&&(z.space_before_token=!0),x()}function D(){for(;ee.mode===f.Statement;)T();l(Y),ee.multiline_frame&&m("]"===Y.text&&C(ee.mode)&&!oe.keep_array_indentation),oe.space_in_paren&&("TK_START_EXPR"!==J||oe.space_in_empty_paren?z.space_before_token=!0:(z.trim(),z.space_before_token=!1)),"]"===Y.text&&oe.keep_array_indentation?(y(),T()):(T(),y()),z.remove_redundant_indentation(te),ee.do_while&&te.mode===f.Conditional&&(te.mode=f.Expression,ee.do_block=!1,ee.do_while=!1)}function R(){l(Y);var e=N(1),t=N(2);b(t&&(i(t.text,[":",","])&&i(e.type,["TK_STRING","TK_WORD","TK_RESERVED"])||i(e.text,["get","set","..."])&&i(t.type,["TK_WORD","TK_RESERVED"]))?i(Q,["class","interface"])?f.BlockStatement:f.ObjectLiteral:"TK_OPERATOR"===J&&"=>"===ee.last_text?f.BlockStatement:i(J,["TK_EQUALS","TK_START_EXPR","TK_COMMA","TK_OPERATOR"])||"TK_RESERVED"===J&&i(ee.last_text,["return","throw","import","default"])?f.ObjectLiteral:f.BlockStatement);var n=!e.comments_before.length&&"}"===e.text,r=n&&"function"===ee.last_word&&"TK_END_EXPR"===J;if(oe.brace_preserve_inline){var o=0,s=null;ee.inline_frame=!0;do if(o+=1,s=N(o),s.wanted_newline){ee.inline_frame=!1;break}while("TK_EOF"!==s.type&&("TK_END_BLOCK"!==s.type||s.opened!==Y))}("expand"===oe.brace_style||"none"===oe.brace_style&&Y.wanted_newline)&&!ee.inline_frame?"TK_OPERATOR"!==J&&(r||"TK_EQUALS"===J||"TK_RESERVED"===J&&M(ee.last_text)&&"else"!==ee.last_text)?z.space_before_token=!0:v(!1,!0):(!C(te.mode)||"TK_START_EXPR"!==J&&"TK_COMMA"!==J||(("TK_COMMA"===J||oe.space_in_paren)&&(z.space_before_token=!0),("TK_COMMA"===J||"TK_START_EXPR"===J&&ee.inline_frame)&&(m(),te.multiline_frame=te.multiline_frame||ee.multiline_frame,ee.multiline_frame=!1)),"TK_OPERATOR"!==J&&"TK_START_EXPR"!==J&&("TK_START_BLOCK"!==J||ee.inline_frame?z.space_before_token=!0:v())),y(),x()}function I(){for(l(Y);ee.mode===f.Statement;)T();var e="TK_START_BLOCK"===J;ee.inline_frame&&!e?z.space_before_token=!0:"expand"===oe.brace_style?e||v():e||(C(ee.mode)&&oe.keep_array_indentation?(oe.keep_array_indentation=!1,v(),oe.keep_array_indentation=!0):v()),T(),y()}function P(){if("TK_RESERVED"===Y.type)if(i(Y.text,["set","get"])&&ee.mode!==f.ObjectLiteral)Y.type="TK_WORD";else if(i(Y.text,["as","from"])&&!ee.import_block)Y.type="TK_WORD";else if(ee.mode===f.ObjectLiteral){var e=N(1);":"===e.text&&(Y.type="TK_WORD")}if(k()?"TK_RESERVED"===J&&i(ee.last_text,["var","let","const"])&&"TK_WORD"===Y.type&&(ee.declaration_statement=!0):!Y.wanted_newline||E(ee.mode)||"TK_OPERATOR"===J&&"--"!==ee.last_text&&"++"!==ee.last_text||"TK_EQUALS"===J||!oe.preserve_newlines&&"TK_RESERVED"===J&&i(ee.last_text,["var","let","const","set","get"])?l(Y):(l(Y),v()),ee.do_block&&!ee.do_while){if("TK_RESERVED"===Y.type&&"while"===Y.text)return z.space_before_token=!0,y(),z.space_before_token=!0,void(ee.do_while=!0);v(),ee.do_block=!1}if(ee.if_block)if(ee.else_block||"TK_RESERVED"!==Y.type||"else"!==Y.text){for(;ee.mode===f.Statement;)T();ee.if_block=!1,ee.else_block=!1}else ee.else_block=!0;if("TK_RESERVED"===Y.type&&("case"===Y.text||"default"===Y.text&&ee.in_case_statement))return v(),(ee.case_body||oe.jslint_happy)&&(w(),ee.case_body=!1),y(),ee.in_case=!0,void(ee.in_case_statement=!0);if(("TK_COMMA"===J||"TK_START_EXPR"===J||"TK_EQUALS"===J||"TK_OPERATOR"===J)&&(S()||m()),"TK_RESERVED"===Y.type&&"function"===Y.text)return(i(ee.last_text,["}",";"])||z.just_added_newline()&&!i(ee.last_text,["(","[","{",":","=",","])&&"TK_OPERATOR"!==J)&&(z.just_added_blankline()||Y.comments_before.length||(v(),v(!0))),"TK_RESERVED"===J||"TK_WORD"===J?"TK_RESERVED"===J&&i(ee.last_text,["get","set","new","return","export","async"])?z.space_before_token=!0:"TK_RESERVED"===J&&"default"===ee.last_text&&"export"===Q?z.space_before_token=!0:v():"TK_OPERATOR"===J||"="===ee.last_text?z.space_before_token=!0:(ee.multiline_frame||!E(ee.mode)&&!C(ee.mode))&&v(),y(),void(ee.last_word=Y.text);if(ie="NONE","TK_END_BLOCK"===J?te.inline_frame?ie="SPACE":"TK_RESERVED"===Y.type&&i(Y.text,["else","catch","finally","from"])?"expand"===oe.brace_style||"end-expand"===oe.brace_style||"none"===oe.brace_style&&Y.wanted_newline?ie="NEWLINE":(ie="SPACE",z.space_before_token=!0):ie="NEWLINE":"TK_SEMICOLON"===J&&ee.mode===f.BlockStatement?ie="NEWLINE":"TK_SEMICOLON"===J&&E(ee.mode)?ie="SPACE":"TK_STRING"===J?ie="NEWLINE":"TK_RESERVED"===J||"TK_WORD"===J||"*"===ee.last_text&&(i(Q,["function","yield"])||ee.mode===f.ObjectLiteral&&i(Q,["{",","]))?ie="SPACE":"TK_START_BLOCK"===J?ie=ee.inline_frame?"SPACE":"NEWLINE":"TK_END_EXPR"===J&&(z.space_before_token=!0,ie="NEWLINE"),"TK_RESERVED"===Y.type&&i(Y.text,q.line_starters)&&")"!==ee.last_text&&(ie=ee.inline_frame||"else"===ee.last_text||"export"===ee.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===Y.type&&i(Y.text,["else","catch","finally"]))if(("TK_END_BLOCK"!==J||te.mode!==f.BlockStatement||"expand"===oe.brace_style||"end-expand"===oe.brace_style||"none"===oe.brace_style&&Y.wanted_newline)&&!ee.inline_frame)v();else{z.trim(!0);var t=z.current_line;"}"!==t.last()&&v(),z.space_before_token=!0}else"NEWLINE"===ie?"TK_RESERVED"===J&&M(ee.last_text)?z.space_before_token=!0:"TK_END_EXPR"!==J?"TK_START_EXPR"===J&&"TK_RESERVED"===Y.type&&i(Y.text,["var","let","const"])||":"===ee.last_text||("TK_RESERVED"===Y.type&&"if"===Y.text&&"else"===ee.last_text?z.space_before_token=!0:v()):"TK_RESERVED"===Y.type&&i(Y.text,q.line_starters)&&")"!==ee.last_text&&v():ee.multiline_frame&&C(ee.mode)&&","===ee.last_text&&"}"===Q?v():"SPACE"===ie&&(z.space_before_token=!0);y(),ee.last_word=Y.text,"TK_RESERVED"===Y.type&&("do"===Y.text?ee.do_block=!0:"if"===Y.text?ee.if_block=!0:"import"===Y.text?ee.import_block=!0:ee.import_block&&"TK_RESERVED"===Y.type&&"from"===Y.text&&(ee.import_block=!1))}function B(){k()?z.space_before_token=!1:l(Y);for(var e=N(1);!(ee.mode!==f.Statement||ee.if_block&&e&&"TK_RESERVED"===e.type&&"else"===e.text||ee.do_block);)T();ee.import_block&&(ee.import_block=!1),y()}function F(){k()?z.space_before_token=!0:(l(Y),"TK_RESERVED"===J||"TK_WORD"===J||ee.inline_frame?z.space_before_token=!0:"TK_COMMA"===J||"TK_START_EXPR"===J||"TK_EQUALS"===J||"TK_OPERATOR"===J?S()||m():v()),y()}function V(){k()||l(Y),ee.declaration_statement&&(ee.declaration_assignment=!0),z.space_before_token=!0,y(),z.space_before_token=!0}function K(){l(Y,!0),y(),z.space_before_token=!0,ee.declaration_statement?(E(ee.parent.mode)&&(ee.declaration_assignment=!1),ee.declaration_assignment?(ee.declaration_assignment=!1,v(!1,!0)):oe.comma_first&&m()):ee.mode===f.ObjectLiteral||ee.mode===f.Statement&&ee.parent.mode===f.ObjectLiteral?(ee.mode===f.Statement&&T(),ee.inline_frame||v()):oe.comma_first&&m()}function j(){var e="*"===Y.text&&("TK_RESERVED"===J&&i(ee.last_text,["function","yield"])||i(J,["TK_START_BLOCK","TK_COMMA","TK_END_BLOCK","TK_SEMICOLON"])),t=i(Y.text,["-","+"])&&(i(J,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||i(ee.last_text,q.line_starters)||","===ee.last_text);if(k());else{var n=!e;l(Y,n)}if("TK_RESERVED"===J&&M(ee.last_text))return z.space_before_token=!0,void y();if("*"===Y.text&&"TK_DOT"===J)return void y();if("::"===Y.text)return void y();if("TK_OPERATOR"===J&&i(oe.operator_position,p)&&m(),":"===Y.text&&ee.in_case)return ee.case_body=!0,x(),y(),v(),void(ee.in_case=!1);var r=!0,o=!0,s=!1;if(":"===Y.text?0===ee.ternary_depth?r=!1:(ee.ternary_depth-=1,s=!0):"?"===Y.text&&(ee.ternary_depth+=1),!t&&!e&&oe.preserve_newlines&&i(Y.text,q.positionable_operators)){var a=":"===Y.text,c=a&&s,h=a&&!s;switch(oe.operator_position){case u.before_newline:return z.space_before_token=!h,y(),(!a||c)&&m(),void(z.space_before_token=!0);case u.after_newline:return z.space_before_token=!0,!a||c?N(1).wanted_newline?v(!1,!0):m():z.space_before_token=!1,y(),void(z.space_before_token=!0);case u.preserve_newline:return h||m(),r=!(z.just_added_newline()||h),z.space_before_token=r,y(),void(z.space_before_token=!0)}}if(e){m(),r=!1;var d=N(1);o=d&&i(d.type,["TK_WORD","TK_RESERVED"])}else"..."===Y.text?(m(),r="TK_START_BLOCK"===J,o=!1):(i(Y.text,["--","++","!","~"])||t)&&(r=!1,o=!1,!Y.wanted_newline||"--"!==Y.text&&"++"!==Y.text||v(!1,!0),";"===ee.last_text&&E(ee.mode)&&(r=!0),"TK_RESERVED"===J?r=!0:"TK_END_EXPR"===J?r=!("]"===ee.last_text&&("--"===Y.text||"++"===Y.text)):"TK_OPERATOR"===J&&(r=i(Y.text,["--","-","++","+"])&&i(ee.last_text,["--","-","++","+"]),i(Y.text,["+","-"])&&i(ee.last_text,["--","++"])&&(o=!0)),(ee.mode!==f.BlockStatement||ee.inline_frame)&&ee.mode!==f.Statement||"{"!==ee.last_text&&";"!==ee.last_text||v());z.space_before_token=z.space_before_token||r,y(),z.space_before_token=o}function H(e){if(z.raw)return z.add_raw_token(Y),void(Y.directives&&"end"===Y.directives.preserve&&(z.raw=oe.test_output_raw));if(Y.directives)return v(!1,e),y(),"start"===Y.directives.preserve&&(z.raw=!0),void v(!1,!0);if(!d.newline.test(Y.text)&&!Y.wanted_newline)return z.space_before_token=!0,y(),void(z.space_before_token=!0);var t,n=g(Y.text),i=!1,r=!1,s=Y.whitespace_before,a=s.length;for(v(!1,e),n.length>1&&(i=A(n.slice(1),"*"),r=L(n.slice(1),s)),y(n[0]),t=1;t<n.length;t++)v(!1,!0),i?y(" "+o(n[t])):r&&n[t].length>a?y(n[t].substring(a)):z.add_token(n[t]);v(!1,e)}function U(e){Y.wanted_newline?v(!1,e):z.trim(!0),z.space_before_token=!0,y(),v(!1,e)}function W(){k()||l(Y,!0),"TK_RESERVED"===J&&M(ee.last_text)?z.space_before_token=!0:m(")"===ee.last_text&&oe.break_chained_methods),y()}function G(e){y(),"\n"===Y.text[Y.text.length-1]&&v(!1,e)}function $(){for(;ee.mode===f.Statement;)T();l(Y)}var z,X,q,Y,J,Q,Z,ee,te,ne,ie,re,oe,se=[],ae="";re={TK_START_EXPR:O,TK_END_EXPR:D,TK_START_BLOCK:R,TK_END_BLOCK:I,TK_WORD:P,TK_RESERVED:P,TK_SEMICOLON:B,TK_STRING:F,TK_EQUALS:V,TK_OPERATOR:j,TK_COMMA:K,TK_BLOCK_COMMENT:H,TK_COMMENT:U,TK_DOT:W,TK_UNKNOWN:G,TK_EOF:$},t=t?t:{},t=n(t,"js"),oe={},"expand-strict"===t.brace_style?t.brace_style="expand":"collapse-preserve-inline"===t.brace_style?t.brace_style="collapse,preserve-inline":void 0!==t.braces_on_own_line?t.brace_style=t.braces_on_own_line?"expand":"collapse":t.brace_style||(t.brace_style="collapse");var le=t.brace_style.split(/[^a-zA-Z0-9_\-]+/);for(oe.brace_style=le[0],oe.brace_preserve_inline=le[1]?le[1]:!1,oe.indent_size=t.indent_size?parseInt(t.indent_size,10):4,oe.indent_char=t.indent_char?t.indent_char:" ",oe.eol=t.eol?t.eol:"auto",oe.preserve_newlines=void 0===t.preserve_newlines?!0:t.preserve_newlines,oe.break_chained_methods=void 0===t.break_chained_methods?!1:t.break_chained_methods,oe.max_preserve_newlines=void 0===t.max_preserve_newlines?0:parseInt(t.max_preserve_newlines,10),oe.space_in_paren=void 0===t.space_in_paren?!1:t.space_in_paren,oe.space_in_empty_paren=void 0===t.space_in_empty_paren?!1:t.space_in_empty_paren,oe.jslint_happy=void 0===t.jslint_happy?!1:t.jslint_happy,oe.space_after_anon_function=void 0===t.space_after_anon_function?!1:t.space_after_anon_function,oe.keep_array_indentation=void 0===t.keep_array_indentation?!1:t.keep_array_indentation,oe.space_before_conditional=void 0===t.space_before_conditional?!0:t.space_before_conditional,oe.unescape_strings=void 0===t.unescape_strings?!1:t.unescape_strings,oe.wrap_line_length=void 0===t.wrap_line_length?0:parseInt(t.wrap_line_length,10),oe.e4x=void 0===t.e4x?!1:t.e4x,oe.end_with_newline=void 0===t.end_with_newline?!1:t.end_with_newline,oe.comma_first=void 0===t.comma_first?!1:t.comma_first,oe.operator_position=s(t.operator_position),oe.test_output_raw=void 0===t.test_output_raw?!1:t.test_output_raw,oe.jslint_happy&&(oe.space_after_anon_function=!0),t.indent_with_tabs&&(oe.indent_char="	",oe.indent_size=1),"auto"===oe.eol&&(oe.eol="\n",e&&d.lineBreak.test(e||"")&&(oe.eol=e.match(d.lineBreak)[0])),oe.eol=oe.eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),Z="";oe.indent_size>0;)Z+=oe.indent_char,oe.indent_size-=1;var ce=0;if(e&&e.length){for(;" "===e.charAt(ce)||"	"===e.charAt(ce);)ae+=e.charAt(ce),ce+=1;e=e.substring(ce)}J="TK_START_BLOCK",Q="",z=new c(Z,ae),z.raw=oe.test_output_raw,ne=[],b(f.BlockStatement),this.beautify=function(){var t;for(q=new h(e,oe,Z),se=q.tokenize(),X=0,Y=N();Y;)re[Y.type](),Q=ee.last_text,J=Y.type,ee.last_text=Y.text,X+=1,Y=N();return t=z.get_code(),oe.end_with_newline&&(t+="\n"),"\n"!==oe.eol&&(t=t.replace(/[\n]/g,oe.eol)),t};var he=["break","continue","return","throw"]}function l(e){var t=0,n=-1,i=[],r=!0;this.set_indent=function(i){t=e.baseIndentLength+i*e.indent_length,n=i},this.get_character_count=function(){return t},this.is_empty=function(){return r},this.last=function(){return this._empty?null:i[i.length-1]},this.push=function(e){i.push(e),t+=e.length,r=!1},this.pop=function(){var e=null;return r||(e=i.pop(),t-=e.length,r=0===i.length),e},this.remove_indent=function(){n>0&&(n-=1,t-=e.indent_length)},this.trim=function(){for(;" "===this.last();)i.pop(),t-=1;r=0===i.length},this.toString=function(){var t="";return this._empty||(n>=0&&(t=e.indent_cache[n]),t+=i.join("")),t}}function c(e,t){t=t||"",this.indent_cache=[t],this.baseIndentLength=t.length,this.indent_length=e.length,this.raw=!1;var n=[];this.baseIndentString=t,this.indent_string=e,this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.add_outputline=function(){this.previous_line=this.current_line,this.current_line=new l(this),n.push(this.current_line)},this.add_outputline(),this.get_line_number=function(){return n.length},this.add_new_line=function(e){return 1===this.get_line_number()&&this.just_added_newline()?!1:e||!this.just_added_newline()?(this.raw||this.add_outputline(),!0):!1},this.get_code=function(){var e=n.join("\n").replace(/[\r\n\t ]+$/,"");return e},this.set_indent=function(e){if(n.length>1){for(;e>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);return this.current_line.set_indent(e),!0}return this.current_line.set_indent(0),!1},this.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.add_outputline();this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1},this.add_token=function(e){this.add_space_before_token(),this.current_line.push(e)},this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},this.remove_redundant_indentation=function(e){if(!e.multiline_frame&&e.mode!==f.ForInitializer&&e.mode!==f.Conditional)for(var t=e.start_line_index,i=n.length;i>t;)n[t].remove_indent(),t++},this.trim=function(i){for(i=void 0===i?!1:i,this.current_line.trim(e,t);i&&n.length>1&&this.current_line.is_empty();)n.pop(),this.current_line=n[n.length-1],this.current_line.trim();this.previous_line=n.length>1?n[n.length-2]:null},this.just_added_newline=function(){return this.current_line.is_empty()},this.just_added_blankline=function(){if(this.just_added_newline()){if(1===n.length)return!0;var e=n[n.length-2];return e.is_empty()}return!1}}function h(e,t){function n(e){if(!e.match(E))return null;var t={};T.lastIndex=0;for(var n=T.exec(e);n;)t[n[1]]=n[2],n=T.exec(e);return t}function o(){var e,o=[];f=0,v="";var g=x.next();if(null===g)return["","TK_EOF"];var E;for(E=y.length?y[y.length-1]:new m("TK_START_BLOCK","{");i(g,a);)if(d.newline.test(g)?("\n"!==g||"\r"!==x.peek(-2))&&(f+=1,o=[]):o.push(g),g=x.next(),null===g)return["","TK_EOF"];if(o.length&&(v=o.join("")),l.test(g)||"."===g&&x.testChar(l)){var T=!0,A=!0,L=l;for("0"===g&&x.testChar(/[XxOoBb]/)?(T=!1,A=!1,L=x.testChar(/[Bb]/)?c:x.testChar(/[Oo]/)?h:u,g+=x.next()):"."===g?T=!1:(g="",x.back());x.testChar(L);)g+=x.next(),T&&"."===x.peek()&&(g+=x.next(),T=!1),A&&x.testChar(/[Ee]/)&&(g+=x.next(),x.testChar(/[+-]/)&&(g+=x.next()),A=!1,T=!1);return[g,"TK_WORD"]}if(d.isIdentifierStart(x.peekCharCode(-1))){if(x.hasNext())for(;d.isIdentifierChar(x.peekCharCode())&&(g+=x.next(),x.hasNext()););return"TK_DOT"===E.type||"TK_RESERVED"===E.type&&i(E.text,["set","get"])||!i(g,w)?[g,"TK_WORD"]:"in"===g||"of"===g?[g,"TK_OPERATOR"]:[g,"TK_RESERVED"]}if("("===g||"["===g)return[g,"TK_START_EXPR"];if(")"===g||"]"===g)return[g,"TK_END_EXPR"];if("{"===g)return[g,"TK_START_BLOCK"];if("}"===g)return[g,"TK_END_BLOCK"];if(";"===g)return[g,"TK_SEMICOLON"];if("/"===g){var M,N="";if("*"===x.peek()){x.next(),M=x.match(b),N="/*"+M[0];var O=n(N);return O&&"start"===O.ignore&&(M=x.match(S),N+=M[0]),N=N.replace(d.allLineBreaks,"\n"),[N,"TK_BLOCK_COMMENT",O]}if("/"===x.peek())return x.next(),M=x.match(C),N="//"+M[0],[N,"TK_COMMENT"]}var D=/<()([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/g;if("`"===g||"'"===g||'"'===g||("/"===g||t.e4x&&"<"===g&&x.test(D,-1))&&("TK_RESERVED"===E.type&&i(E.text,["return","case","throw","else","do","typeof","yield"])||"TK_END_EXPR"===E.type&&")"===E.text&&E.parent&&"TK_RESERVED"===E.parent.type&&i(E.parent.text,["if","while","for"])||i(E.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var R=g,I=!1,P=!1;if(e=g,"/"===R)for(var B=!1;x.hasNext()&&(I||B||x.peek()!==R)&&!x.testChar(d.newline);)e+=x.peek(),I?I=!1:(I="\\"===x.peek(),"["===x.peek()?B=!0:"]"===x.peek()&&(B=!1)),x.next();else if(t.e4x&&"<"===R){var F=/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/g;x.back();var V="",K=x.match(D);if(K){for(var j=K[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),H=0===j.indexOf("{"),U=0;K;){var W=!!K[1],G=K[2],$=!!K[K.length-1]||"![CDATA["===G.slice(0,8);if(!$&&(G===j||H&&G.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(W?--U:++U),V+=K[0],0>=U)break;K=x.match(F)}return K||(V+=x.match(/[\s\S]*/g)[0]),V=V.replace(d.allLineBreaks,"\n"),[V,"TK_STRING"]}}else{var z=function(t,n,i){for(var r;x.hasNext()&&(r=x.peek(),I||r!==t&&(n||!d.newline.test(r)));)(I||n)&&d.newline.test(r)?("\r"===r&&"\n"===x.peek(1)&&(x.next(),r=x.peek()),e+="\n"):e+=r,I?(("x"===r||"u"===r)&&(P=!0),I=!1):I="\\"===r,x.next(),i&&-1!==e.indexOf(i,e.length-i.length)&&("`"===t?z("}",n,"`"):z("`",n,"${"),x.hasNext()&&(e+=x.next()))};"`"===R?z("`",!0,"${"):z(R)}if(P&&t.unescape_strings&&(e=s(e)),x.peek()===R&&(e+=R,x.next(),"/"===R))for(;x.hasNext()&&d.isIdentifierStart(x.peekCharCode());)e+=x.next();return[e,"TK_STRING"]}if("#"===g){if(0===y.length&&"!"===x.peek()){for(e=g;x.hasNext()&&"\n"!==g;)g=x.next(),e+=g;return[r(e)+"\n","TK_UNKNOWN"]}var X="#";if(x.hasNext()&&x.testChar(l)){do g=x.next(),X+=g;while(x.hasNext()&&"#"!==g&&"="!==g);return"#"===g||("["===x.peek()&&"]"===x.peek(1)?(X+="[]",x.next(),x.next()):"{"===x.peek()&&"}"===x.peek(1)&&(X+="{}",x.next(),x.next())),[X,"TK_WORD"]}}if("<"===g&&("?"===x.peek()||"%"===x.peek())){x.back();var q=x.match(k);if(q)return g=q[0],g=g.replace(d.allLineBreaks,"\n"),[g,"TK_STRING"]}if("<"===g&&x.match(/\!--/g)){for(g="<!--";x.hasNext()&&!x.testChar(d.newline);)g+=x.next();return _=!0,[g,"TK_COMMENT"]}if("-"===g&&_&&x.match(/->/g))return _=!1,["-->","TK_COMMENT"];if("."===g)return"."===x.peek()&&"."===x.peek(1)?(g+=x.next()+x.next(),[g,"TK_OPERATOR"]):[g,"TK_DOT"];if(i(g,p)){for(;x.hasNext()&&i(g+x.peek(),p)&&(g+=x.next(),x.hasNext()););return","===g?[g,"TK_COMMA"]:"="===g?[g,"TK_EQUALS"]:[g,"TK_OPERATOR"]}return[g,"TK_UNKNOWN"]}function s(e){for(var t="",n=0,i=new g(e),r=null;i.hasNext();)if(r=i.match(/([\s]|[^\\]|\\\\)+/g),r&&(t+=r[0]),"\\"===i.peek()){if(i.next(),"x"===i.peek())r=i.match(/x([0-9A-Fa-f]{2})/g);else{if("u"!==i.peek()){t+="\\",i.hasNext()&&(t+=i.next());continue}r=i.match(/u([0-9A-Fa-f]{4})/g)}if(!r)return e;if(n=parseInt(r[1],16),n>126&&255>=n&&0===r[0].indexOf("x"))return e;if(n>=0&&32>n){t+="\\"+r[0];continue}t+=34===n||39===n||92===n?"\\"+String.fromCharCode(n):String.fromCharCode(n)}return t}var a="\n\r	 ".split(""),l=/[0-9]/,c=/[01]/,h=/[01234567]/,u=/[0123456789abcdefABCDEF]/;this.positionable_operators="!= !== % & && * ** + - / : < << <= == === > >= >> >>> ? ^ | ||".split(" ");var p=this.positionable_operators.concat("! %= &= *= **= ++ += , -- -= /= :: <<= = => >>= >>>= ^= |= ~ ...".split(" "));
this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var f,v,_,y,x,w=this.line_starters.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]),b=/([\s\S]*?)((?:\*\/)|$)/g,C=/([^\n\r\u2028\u2029]*)/g,E=/\/\* beautify( \w+[:]\w+)+ \*\//g,T=/ (\w+)[:](\w+)/g,S=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g,k=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;this.tokenize=function(){x=new g(e),_=!1,y=[];for(var t,n,i,r=null,s=[],a=[];!n||"TK_EOF"!==n.type;){for(i=o(),t=new m(i[1],i[0],f,v);"TK_COMMENT"===t.type||"TK_BLOCK_COMMENT"===t.type||"TK_UNKNOWN"===t.type;)"TK_BLOCK_COMMENT"===t.type&&(t.directives=i[2]),a.push(t),i=o(),t=new m(i[1],i[0],f,v);a.length&&(t.comments_before=a,a=[]),"TK_START_BLOCK"===t.type||"TK_START_EXPR"===t.type?(t.parent=n,s.push(r),r=t):("TK_END_BLOCK"===t.type||"TK_END_EXPR"===t.type)&&r&&("]"===t.text&&"["===r.text||")"===t.text&&"("===r.text||"}"===t.text&&"{"===r.text)&&(t.parent=r.parent,t.opened=r,r=s.pop()),y.push(t),n=t}return y}}var d={};!function(e){var t="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",n="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",i=new RegExp("["+t+"]"),r=new RegExp("["+t+n+"]");e.newline=/[\n\r\u2028\u2029]/,e.lineBreak=new RegExp("\r\n|"+e.newline.source),e.allLineBreaks=new RegExp(e.lineBreak.source,"g"),e.isIdentifierStart=function(e){return 65>e?36===e||64===e:91>e?!0:97>e?95===e:123>e?!0:e>=170&&i.test(String.fromCharCode(e))},e.isIdentifierChar=function(e){return 48>e?36===e:58>e?!0:65>e?!1:91>e?!0:97>e?95===e:123>e?!0:e>=170&&r.test(String.fromCharCode(e))}}(d);var u={before_newline:"before-newline",after_newline:"after-newline",preserve_newline:"preserve-newline"},p=[u.before_newline,u.preserve_newline],f={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},g=function(e){var t=e,n=t.length,i=0;this.back=function(){i-=1},this.hasNext=function(){return n>i},this.next=function(){var e=null;return this.hasNext()&&(e=t.charAt(i),i+=1),e},this.peek=function(e){var r=null;return e=e||0,e+=i,e>=0&&n>e&&(r=t.charAt(e)),r},this.peekCharCode=function(e){var r=0;return e=e||0,e+=i,e>=0&&n>e&&(r=t.charCodeAt(e)),r},this.test=function(e,n){return n=n||0,e.lastIndex=i+n,e.test(t)},this.testChar=function(e,t){var n=this.peek(t);return null!==n&&e.test(n)},this.match=function(e){e.lastIndex=i;var n=e.exec(t);return n&&n.index===i?i+=n[0].length:n=null,n}},m=function(e,t,n,i,r){this.type=e,this.text=t,this.comments_before=[],this.comments_after=[],this.newlines=n||0,this.wanted_newline=n>0,this.whitespace_before=i||"",this.parent=r||null,this.opened=null,this.directives=null},v=new a(e,t);return v.beautify()}i=[],r=function(){return{js_beautify:o}}.apply(t,i),!(void 0!==r&&(e.exports=r))}()},function(e,t,n){var i,r;!function(){function n(e,t){var n,i={};for(n in e)n!==t&&(i[n]=e[n]);if(t in e)for(n in e[t])i[n]=e[t][n];return i}function o(e,t){function i(){return S=e.charAt(++A),S||""}function r(t){var n="",r=A;return t&&h(),n=e.charAt(A+1)||"",A=r-1,i(),n}function l(t){for(var n=A;i();)if("\\"===S)i();else{if(-1!==t.indexOf(S))break;if("\n"===S)break}return e.substring(n,A+1)}function c(e){var t=A,n=l(e);return A=t-1,i(),n}function h(e){for(var t=0;k.test(r());)i(),"\n"===S&&e&&x&&(R.newLine(!0),t++);return v=t,t}function d(){var e="";for(S&&k.test(S)&&(e=S);k.test(i());)e+=S;return e}function u(t){var n=A;for(t="/"===r(),i();i();){if(!t&&"*"===S&&"/"===r()){i();break}if(t&&"\n"===S)return e.substring(n,A)}return e.substring(n,A)+S}function p(t){return e.substring(A-t.length,A).toLowerCase()===t}function f(){for(var t=0,n=A+1;n<e.length;n++){var i=e.charAt(n);if("{"===i)return!0;if("("===i)t+=1;else if(")"===i){if(0===t)return!1;t-=1}else if(";"===i||"}"===i)return!1}return!1}function g(){O++,M+=N}function m(){O--,M=M.slice(0,-_)}t=t||{},t=n(t,"css"),e=e||"";var v=0,_=t.indent_size?parseInt(t.indent_size,10):4,y=t.indent_char||" ",x=void 0===t.preserve_newlines?!1:t.preserve_newlines,w=void 0===t.selector_separator_newline?!0:t.selector_separator_newline,b=void 0===t.end_with_newline?!1:t.end_with_newline,C=void 0===t.newline_between_rules?!0:t.newline_between_rules,E=void 0===t.space_around_combinator?!1:t.space_around_combinator;E=E||(void 0===t.space_around_selector_separator?!1:t.space_around_selector_separator);var T=t.eol?t.eol:"auto";t.indent_with_tabs&&(y="	",_=1),"auto"===T&&(T="\n",e&&s.test(e||"")&&(T=e.match(s)[0])),T=T.replace(/\\r/,"\r").replace(/\\n/,"\n"),e=e.replace(a,"\n");var S,k=/^\s+$/,A=-1,L=0,M=e.match(/^[\t ]*/)[0],N=new Array(_+1).join(y),O=0,D=0,R={};R["{"]=function(e){R.singleSpace(),I.push(e),h(!0)||R.newLine()},R["}"]=function(e){e&&R.newLine(),I.push("}"),h(!0)||R.newLine()},R._lastCharWhitespace=function(){return k.test(I[I.length-1])},R.newLine=function(e){I.length&&(e||"\n"===I[I.length-1]?I[I.length-1]===M&&I.pop():R.trim(),I.push("\n"),M&&I.push(M))},R.singleSpace=function(){I.length&&!R._lastCharWhitespace()&&I.push(" ")},R.preserveSingleSpace=function(){H&&R.singleSpace()},R.trim=function(){for(;R._lastCharWhitespace();)I.pop()};for(var I=[],P=!1,B=!1,F=!1,V="",K="";;){var j=d(),H=""!==j,U=-1!==j.indexOf("\n");if(K=V,V=S,!S)break;if("/"===S&&"*"===r()){var W=0===O;(U||W)&&R.newLine(),I.push(u()),R.newLine(),W&&R.newLine(!0)}else if("/"===S&&"/"===r())U||"{"===K||R.trim(),R.singleSpace(),I.push(u()),R.newLine();else if("@"===S)if(R.preserveSingleSpace(),"{"===r())I.push(l("}"));else{I.push(S);var G=c(": ,;{}()[]/='\"");G.match(/[ :]$/)&&(i(),G=l(": ").replace(/\s$/,""),I.push(G),R.singleSpace()),G=G.replace(/\s$/,""),G in o.NESTED_AT_RULE&&(D+=1,G in o.CONDITIONAL_GROUP_RULE&&(F=!0))}else"#"===S&&"{"===r()?(R.preserveSingleSpace(),I.push(l("}"))):"{"===S?"}"===r(!0)?(h(),i(),R.singleSpace(),I.push("{"),R["}"](!1),2>v&&C&&0===O&&R.newLine(!0)):(g(),R["{"](S),F?(F=!1,P=O>D):P=O>=D):"}"===S?(m(),R["}"](!0),P=!1,B=!1,D&&D--,2>v&&C&&0===O&&R.newLine(!0)):":"===S?(h(),!P&&!F||p("&")||f()||p("(")?(p(" ")&&" "!==I[I.length-1]&&I.push(" "),":"===r()?(i(),I.push("::")):I.push(":")):(I.push(":"),B||(B=!0,R.singleSpace()))):'"'===S||"'"===S?(R.preserveSingleSpace(),I.push(l(S))):";"===S?(B=!1,I.push(S),h(!0)||R.newLine()):"("===S?p("url")?(I.push(S),h(),i()&&(")"!==S&&'"'!==S&&"'"!==S?I.push(l(")")):A--)):(L++,R.preserveSingleSpace(),I.push(S),h()):")"===S?(I.push(S),L--):","===S?(I.push(S),!h(!0)&&w&&!B&&1>L?R.newLine():R.singleSpace()):(">"===S||"+"===S||"~"===S)&&!B&&1>L?E?(R.singleSpace(),I.push(S),R.singleSpace()):(I.push(S),h(),S&&k.test(S)&&(S="")):"]"===S?I.push(S):"["===S?(R.preserveSingleSpace(),I.push(S)):"="===S?(h(),I.push("="),k.test(S)&&(S="")):(R.preserveSingleSpace(),I.push(S))}var $="";return M&&($+=M),$+=I.join("").replace(/[\r\n\t ]+$/,""),b&&($+="\n"),"\n"!==T&&($=$.replace(/[\n]/g,T)),$}var s=/\r\n|[\n\r\u2028\u2029]/,a=new RegExp(s.source,"g");o.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},o.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0},i=[],r=function(){return{css_beautify:o}}.apply(t,i),!(void 0!==r&&(e.exports=r))}()},function(e,t,n){var i,r;!function(){function o(e){return e.replace(/^\s+/g,"")}function s(e){return e.replace(/\s+$/g,"")}function a(e,t){var n,i={};for(n in e)n!==t&&(i[n]=e[n]);if(t in e)for(n in e[t])i[n]=e[t][n];return i}function l(e,t,n,i){function r(){function e(e){var t="",n=function(n){var i=t+n.toLowerCase();t=i.length<=e.length?i:i.substr(i.length-e.length,e.length)},i=function(){return-1===t.indexOf(e)};return{add:n,doesNotMatch:i}}return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=d,this.indent_body_inner_html=u,this.indent_head_inner_html=p,this.Utils={whitespace:"\n\r	 ".split(""),single_token:t.void_elements||["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","?php","basefont","isindex"],extra_liners:L,in_array:function(e,t){for(var n=0;n<t.length;n++)if(e===t[n])return!0;return!1}},this.is_whitespace=function(e){for(var t=0;t<e.length;t++)if(!this.Utils.in_array(e.charAt(t),this.Utils.whitespace))return!1;return!0},this.traverse_whitespace=function(){var e="";if(e=this.input.charAt(this.pos),this.Utils.in_array(e,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(e,this.Utils.whitespace);)x&&"\n"===e&&this.newlines<=w&&(this.newlines+=1),this.pos++,e=this.input.charAt(this.pos);return!0}return!1},this.space_or_wrap=function(e){return this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,e),this.print_indentation(e),!0):(this.line_char_count++,e.push(" "),!1)},this.get_content=function(){for(var e="",t=[],n=0;"<"!==this.input.charAt(this.pos)||2===n;){if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];if(2>n&&this.traverse_whitespace())this.space_or_wrap(t);else{if(e=this.input.charAt(this.pos),b){if("{"===e?n+=1:2>n&&(n=0),"}"===e&&n>0&&0===n--)break;var i=this.input.substr(this.pos,3);if("{{#"===i||"{{/"===i)break;if("{{!"===i)return[this.get_tag(),"TK_TAG_HANDLEBARS_COMMENT"];if("{{"===this.input.substr(this.pos,2)&&"{{else}}"===this.get_tag(!0))break}this.pos++,this.line_char_count++,t.push(e)}}return t.length?t.join(""):""},this.get_contents_to=function(e){if(this.pos===this.input.length)return["","TK_EOF"];var t="",n=new RegExp("</"+e+"\\s*>","igm");n.lastIndex=this.pos;var i=n.exec(this.input),r=i?i.index:this.input.length;return this.pos<r&&(t=this.input.substring(this.pos,r),this.pos=r),t},this.record_tag=function(e){this.tags[e+"count"]?(this.tags[e+"count"]++,this.tags[e+this.tags[e+"count"]]=this.indent_level):(this.tags[e+"count"]=1,this.tags[e+this.tags[e+"count"]]=this.indent_level),this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent,this.tags.parent=e+this.tags[e+"count"]},this.retrieve_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!==t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]],this.tags.parent=this.tags[t+"parent"]),delete this.tags[e+this.tags[e+"count"]+"parent"],delete this.tags[e+this.tags[e+"count"]],1===this.tags[e+"count"]?delete this.tags[e+"count"]:this.tags[e+"count"]--}},this.indent_to_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!==t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]])}},this.get_tag=function(e){var t,n,i,r,o="",s=[],a="",l=!1,c=!0,h=!1,d=this.pos,u=this.line_char_count,p=!1;e=void 0!==e?e:!1;do{if(this.pos>=this.input.length)return e&&(this.pos=d,this.line_char_count=u),s.length?s.join(""):["","TK_EOF"];if(o=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(o,this.Utils.whitespace))l=!0;else{if(("'"===o||'"'===o)&&(o+=this.get_unformatted(o),l=!0),"="===o&&(l=!1),r=this.input.substr(this.pos-1),!S||!h||p||">"!==o&&"/"!==o||r.match(/^\/?\s*>/)&&(l=!1,p=!0,this.print_newline(!1,s),this.print_indentation(s)),s.length&&"="!==s[s.length-1]&&">"!==o&&l){var f=this.space_or_wrap(s),g=f&&"/"!==o&&!T;if(l=!1,T&&"/"!==o){var m=!1;if(S&&c){var v=null!==r.match(/^\S*(="([^"]|\\")*")?\s*\/?\s*>/);m=!v}(!c||m)&&(this.print_newline(!1,s),this.print_indentation(s),g=!0)}if(g){h=!0;var x=E;k&&(x=s.indexOf(" ")+1);for(var w=0;x>w;w++)s.push(" ")}if(c)for(var C=0;C<s.length;C++)if(" "===s[C]){c=!1;break}}if(b&&"<"===i&&o+this.input.charAt(this.pos)==="{{"&&(o+=this.get_unformatted("}}"),s.length&&" "!==s[s.length-1]&&"<"!==s[s.length-1]&&(o=" "+o),l=!0),"<"!==o||i||(t=this.pos-1,i="<"),b&&!i&&s.length>=2&&"{"===s[s.length-1]&&"{"===s[s.length-2]&&(t="#"===o||"/"===o||"!"===o?this.pos-3:this.pos-2,i="{"),this.line_char_count++,s.push(o),s[1]&&("!"===s[1]||"?"===s[1]||"%"===s[1])){s=[this.get_comment(t)];break}if(b&&s[1]&&"{"===s[1]&&s[2]&&"!"===s[2]){s=[this.get_comment(t)];break}if(b&&"{"===i&&s.length>2&&"}"===s[s.length-2]&&"}"===s[s.length-1])break}}while(">"!==o);var A,L,M=s.join("");A=-1!==M.indexOf(" ")?M.indexOf(" "):-1!==M.indexOf("\n")?M.indexOf("\n"):"{"===M.charAt(0)?M.indexOf("}"):M.indexOf(">"),L="<"!==M.charAt(0)&&b?"#"===M.charAt(2)?3:2:1;var N=M.substring(L,A).toLowerCase();return"/"===M.charAt(M.length-2)||this.Utils.in_array(N,this.Utils.single_token)?e||(this.tag_type="SINGLE"):b&&"{"===M.charAt(0)&&"else"===N?e||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):this.is_unformatted(N,_)||this.is_unformatted(N,y)?(a=this.get_unformatted("</"+N+">",M),s.push(a),n=this.pos-1,this.tag_type="SINGLE"):"script"===N&&(-1===M.search("type")||M.search("type")>-1&&M.search(/\b(text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect)/)>-1)?e||(this.record_tag(N),this.tag_type="SCRIPT"):"style"===N&&(-1===M.search("type")||M.search("type")>-1&&M.search("text/css")>-1)?e||(this.record_tag(N),this.tag_type="STYLE"):"!"===N.charAt(0)?e||(this.tag_type="SINGLE",this.traverse_whitespace()):e||("/"===N.charAt(0)?(this.retrieve_tag(N.substring(1)),this.tag_type="END"):(this.record_tag(N),"html"!==N.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(s),this.Utils.in_array(N,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!==this.output[this.output.length-2]&&this.print_newline(!0,this.output))),e&&(this.pos=d,this.line_char_count=u),s.join("")},this.get_comment=function(e){var t="",n=">",i=!1;this.pos=e;var r=this.input.charAt(this.pos);for(this.pos++;this.pos<=this.input.length&&(t+=r,t.charAt(t.length-1)!==n.charAt(n.length-1)||-1===t.indexOf(n));)!i&&t.length<10&&(0===t.indexOf("<![if")?(n="<![endif]>",i=!0):0===t.indexOf("<![cdata[")?(n="]]>",i=!0):0===t.indexOf("<![")?(n="]>",i=!0):0===t.indexOf("<!--")?(n="-->",i=!0):0===t.indexOf("{{!--")?(n="--}}",i=!0):0===t.indexOf("{{!")?5===t.length&&-1===t.indexOf("{{!--")&&(n="}}",i=!0):0===t.indexOf("<?")?(n="?>",i=!0):0===t.indexOf("<%")&&(n="%>",i=!0)),r=this.input.charAt(this.pos),this.pos++;return t},this.get_unformatted=function(t,n){if(n&&-1!==n.toLowerCase().indexOf(t))return"";var i="",r="",o=!0,s=e(t);do{if(this.pos>=this.input.length)return r;if(i=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(i,this.Utils.whitespace)){if(!o){this.line_char_count--;continue}if("\n"===i||"\r"===i){r+="\n",this.line_char_count=0;continue}}r+=i,s.add(i),this.line_char_count++,o=!0,b&&"{"===i&&r.length&&"{"===r.charAt(r.length-2)&&(r+=this.get_unformatted("}}"))}while(s.doesNotMatch());return r},this.get_token=function(){var e;if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){var t=this.last_token.substr(7);return e=this.get_contents_to(t),"string"!=typeof e?e:[e,"TK_"+t]}if("CONTENT"===this.current_mode)return e=this.get_content(),"string"!=typeof e?e:[e,"TK_CONTENT"];if("TAG"===this.current_mode){if(e=this.get_tag(),"string"!=typeof e)return e;var n="TK_TAG_"+this.tag_type;return[e,n]}},this.get_full_indent=function(e){return e=this.indent_level+e||0,1>e?"":Array(e+1).join(this.indent_string)},this.is_unformatted=function(e,t){if(!this.Utils.in_array(e,t))return!1;if("a"!==e.toLowerCase()||!this.Utils.in_array("a",t))return!0;var n=this.get_tag(!0),i=(n||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!i||this.Utils.in_array(i[1],t)?!0:!1},this.printer=function(e,t,n,i,r){this.input=e||"",this.input=this.input.replace(/\r\n|[\r\u2028\u2029]/g,"\n"),this.output=[],this.indent_character=t,this.indent_string="",this.indent_size=n,this.brace_style=r,this.indent_level=0,this.wrap_line_length=i,this.line_char_count=0;for(var a=0;a<this.indent_size;a++)this.indent_string+=this.indent_character;this.print_newline=function(e,t){this.line_char_count=0,t&&t.length&&(e||"\n"!==t[t.length-1])&&("\n"!==t[t.length-1]&&(t[t.length-1]=s(t[t.length-1])),t.push("\n"))},this.print_indentation=function(e){for(var t=0;t<this.indent_level;t++)e.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(e){(!this.is_whitespace(e)||this.output.length)&&((e||""!==e)&&this.output.length&&"\n"===this.output[this.output.length-1]&&(this.print_indentation(this.output),e=o(e)),this.print_token_raw(e))},this.print_token_raw=function(e){this.newlines>0&&(e=s(e)),e&&""!==e&&(e.length>1&&"\n"===e.charAt(e.length-1)?(this.output.push(e.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(e));for(var t=0;t<this.newlines;t++)this.print_newline(t>0,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var l,d,u,p,f,g,m,v,_,y,x,w,b,C,E,T,S,k,A,L,M;for(t=t||{},t=a(t,"html"),void 0!==t.wrap_line_length&&0!==parseInt(t.wrap_line_length,10)||void 0===t.max_char||0===parseInt(t.max_char,10)||(t.wrap_line_length=t.max_char),d=void 0===t.indent_inner_html?!1:t.indent_inner_html,u=void 0===t.indent_body_inner_html?!0:t.indent_body_inner_html,p=void 0===t.indent_head_inner_html?!0:t.indent_head_inner_html,f=void 0===t.indent_size?4:parseInt(t.indent_size,10),g=void 0===t.indent_char?" ":t.indent_char,v=void 0===t.brace_style?"collapse":t.brace_style,m=0===parseInt(t.wrap_line_length,10)?32786:parseInt(t.wrap_line_length||250,10),_=t.unformatted||["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","address","big","dt","ins","strike","tt"],y=t.content_unformatted||["pre"],x=void 0===t.preserve_newlines?!0:t.preserve_newlines,w=x?isNaN(parseInt(t.max_preserve_newlines,10))?32786:parseInt(t.max_preserve_newlines,10):0,b=void 0===t.indent_handlebars?!1:t.indent_handlebars,C=void 0===t.wrap_attributes?"auto":t.wrap_attributes,E=isNaN(parseInt(t.wrap_attributes_indent_size,10))?f:parseInt(t.wrap_attributes_indent_size,10),T="force"===C.substr(0,"force".length),S="force-expand-multiline"===C,k="force-aligned"===C,A=void 0===t.end_with_newline?!1:t.end_with_newline,L="object"==typeof t.extra_liners&&t.extra_liners?t.extra_liners.concat():"string"==typeof t.extra_liners?t.extra_liners.split(","):"head,body,/html".split(","),M=t.eol?t.eol:"auto",t.indent_with_tabs&&(g="	",f=1),"auto"===M&&(M="\n",e&&c.test(e||"")&&(M=e.match(c)[0])),M=M.replace(/\\r/,"\r").replace(/\\n/,"\n"),e=e.replace(h,"\n"),l=new r,l.printer(e,g,f,m,v);;){var N=l.get_token();if(l.token_text=N[0],l.token_type=N[1],"TK_EOF"===l.token_type)break;switch(l.token_type){case"TK_TAG_START":l.print_newline(!1,l.output),l.print_token(l.token_text),l.indent_content&&(!l.indent_body_inner_html&&l.token_text.match(/<body(?:.*)>/)||!l.indent_head_inner_html&&l.token_text.match(/<head(?:.*)>/)||l.indent(),l.indent_content=!1),l.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":l.print_newline(!1,l.output),l.print_token(l.token_text),l.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"===l.last_token&&""===l.last_text){var O=(l.token_text.match(/\w+/)||[])[0],D=null;l.output.length&&(D=l.output[l.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),(null===D||D[1]!==O&&!l.Utils.in_array(D[1],_))&&l.print_newline(!1,l.output)}l.print_token(l.token_text),l.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var R=l.token_text.match(/^\s*<([a-z-]+)/i);R&&l.Utils.in_array(R[1],_)||l.print_newline(!1,l.output),l.print_token(l.token_text),l.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":for(var I=!1,P=l.output.length-1;P>=0&&"\n"!==l.output[P];P--)if(l.output[P].match(/{{#if/)){I=!0;break}I||l.print_newline(!1,l.output),l.print_token(l.token_text),l.indent_content&&(l.indent(),l.indent_content=!1),l.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_COMMENT":l.print_token(l.token_text),l.current_mode="TAG";break;case"TK_CONTENT":l.print_token(l.token_text),l.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==l.token_text){l.print_newline(!1,l.output);var B,F=l.token_text,V=1;"TK_SCRIPT"===l.token_type?B="function"==typeof n&&n:"TK_STYLE"===l.token_type&&(B="function"==typeof i&&i),"keep"===t.indent_scripts?V=0:"separate"===t.indent_scripts&&(V=-l.indent_level);var K=l.get_full_indent(V);if(B){var j=function(){this.eol="\n"};j.prototype=t;var H=new j;F=B(F.replace(/^\s*/,K),H)}else{var U=F.match(/^\s*/)[0],W=U.match(/[^\n\r]*$/)[0].split(l.indent_string).length-1,G=l.get_full_indent(V-W);F=F.replace(/^\s*/,K).replace(/\r\n|\r|\n/g,"\n"+G).replace(/\s+$/,"")}F&&(l.print_token_raw(F),l.print_newline(!0,l.output))}l.current_mode="TAG";break;default:""!==l.token_text&&l.print_token(l.token_text)}l.last_token=l.token_type,l.last_text=l.token_text}var $=l.output.join("").replace(/[\r\n\t ]+$/,"");return A&&($+="\n"),"\n"!==M&&($=$.replace(/[\n]/g,M)),$}var c=/\r\n|[\n\r\u2028\u2029]/,h=new RegExp(c.source,"g");i=[n,n(56),n(57)],r=function(e){var t=n(56),i=n(57);return{html_beautify:function(e,n){return l(e,n,t.js_beautify,i.css_beautify)}}}.apply(t,i),!(void 0!==r&&(e.exports=r))}()},function(e,t,n){var i,r,o;!function(n,s){r=[t],i=s,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(this,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.STAR="*"})},function(e,t,n){var i,r,o;!function(s,a){r=[t,n(2)],i=a,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(this,function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n){var i=e[t];{if(void 0!==i)return i;if(void 0===n||n===!0)return h}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(t),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a={},l={},c={},h=null,d=!1,u=function(){function e(){if(i(this,e),d)throw"There can only be one TagIndex";d=!0}return s(e,[{key:"registerTag",value:function(e){a[e.componentType]=e,l[e.htmlName]=e,c[e.qname.fullName]=e}},{key:"registerDefaultTag",value:function(e){h=e}},{key:"getByComponentType",value:function(e,t){return r(a,e,t)}},{key:"getByName",value:function(e,t){return r(l,e,t)}},{key:"getByClassName",value:function(e,t){return r(c,e,t)}},{key:"getAllTags",value:function(){return(0,o["default"])(l)}}]),e}();e["default"]=u})},function(e,t,n){var i,r,o;!function(s,a){r=[t,n(62)],i=a,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(this,function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0==t?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,"")}function o(e,t){e&&Object.keys(e).forEach(function(n){var i=e[n];t[n]=i instanceof s["default"]?new s["default"](i.name,i.compId,i.type):s["default"].coerce(i)})}Object.defineProperty(e,"__esModule",{value:!0});var s=n(t),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t){if(i(this,e),this.table={},this.counters={},this.idTable={},this.callbackTable={},t){o(t.table,this.table),o(t.idTable,this.idTable);var n=this;Object.keys(t.counters).forEach(function(e){n.counters[e]=t.counters[e]}),Object.keys(t.callbackTable).forEach(function(e){n.callbackTable[e]=t.callbackTable[e]})}}return a(e,[{key:"hasComponentId",value:function(e){return void 0!==this.table[e]}},{key:"hasId",value:function(e){return void 0!==this.idTable[e]}},{key:"getByComponentId",value:function(e){return this.table[e]}},{key:"getById",value:function(e){return this.idTable[e]}},{key:"addStaticEventHandler",value:function(e,t,n){var i=this.callbackTable[e];void 0===i&&(this.callbackTable[e]={},i=this.callbackTable[e]),i[t]=n}},{key:"getStaticEventHandler",value:function(e,t){return this.callbackTable[e]?this.callbackTable[e][t]:null}},{key:"getStaticEventHandlers",value:function(e){return this.callbackTable[e]}},{key:"addSymbol",value:function(e,t,n){this.table[e]&&(this.table[e].name=t,n&&(this.table[e].type=n)),this.table[e]=new s["default"](t,e,n),this.idTable[t]=this.table[e]}},{key:"removeSymbol",value:function(e){var t=this.idTable[e];return t?(this.idTable[e]=void 0,this.table[t.compId]=void 0,this.callbackTable[e]=void 0,t):null}},{key:"generateNewId",value:function(e){return void 0===this.counters[e.componentType]&&(this.counters[e.componentType]=1),r(e.qname.shortName)+this.counters[e.componentType]++}}]),e}();e["default"]=l})},function(e,t,n){var i,r,o;!function(s,a){r=[t,n(19)],i=a,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,i,r){n(this,e),this.name=t,this.compId=i,this.type=r}return i(e,[{key:"resolveType",value:function(){return this.type}}],[{key:"coerce",value:function(n){if(n.name&&n.compId&&n.type){var i=t.Type.coerce(n.type);if(i)return new e(n.name,n.compId,i)}}}]),e}();e["default"]=r})},function(e,t,n){var i,r,o;!function(n,s){r=[t],i=s,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i=function(){function e(n,i){t(this,e),this.symbolTable=n,this.typeIndex=i}return n(e,[{key:"onComponent",value:function(e){e.compId&&!this.symbolTable.hasComponentId(e.compId)&&this.symbolTable.addSymbol(e.compId,e.compName,this.typeIndex.getByName(e.sdkType))}},{key:"onContainerStart",value:function(){}},{key:"onContainerEnd",value:function(){}},{key:"onPage",value:function(){}}]),e}();e["default"]=i})},function(e,t,n){var i,r,o;!function(s,a){r=[t,n(65),n(61),n(34)],i=a,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(this,function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=(r(t),r(n),r(i)),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(){o(this,e),this.data=[]}return a(e,[{key:"push",value:function(e){this.data.push(e)}},{key:"pop",value:function(){this.data=this.data.splice(-1,1)}},{key:"peek",value:function(){return this.data[this.data.length-1]}}]),e}(),c=function(){function e(t,n){o(this,e),this.document=new s["default"].DOM.Document,this.container=n.getByName("container"),this.symbolTable=t,this.tagIndex=n,this.document.appendChild(this.document.createCommentNode("Page HTML is currently read-only")),this.document.appendChild(this.document.createCommentNode("Interactivity is added through JavaScript"));var i=this.document.createElement("html");this.document.appendChild(i),this.head=this.document.createElement("head"),i.appendChild(this.head);var r=this.document.createElement("body");i.appendChild(r),this.stack=new l,this.stack.push(i),this.stack.push(r)}return a(e,[{key:"getDOM",value:function(){return this.document}},{key:"onComponent",value:function(e){var t=this.tagIndex.getByComponentType(e.type),n=this.document.createElement(t.htmlName);this.stack.peek().appendChild(n),t.decorate(e,n,this.symbolTable,this.document)}},{key:"onContainerStart",value:function(){var e=this.document.createElement(this.container.htmlName);this.stack.peek().appendChild(e),this.stack.push(e)}},{key:"onContainerEnd",value:function(){this.stack.pop()}}]),e}();e["default"]=c})},function(e,t,n){var i,r,o;!function(n,s){r=[t],i=s,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i=function(){function e(){t(this,e),this.handlers=[]}return n(e,[{key:"addHandler",value:function(e){this.handlers.push(e)}},{key:"process",value:function(e){this.traverse(e.children)}},{key:"traverse",value:function(e){for(var t,n=0;n<e.length;n++){var i=e[n];if("Container"===i.type){for(t=0;t<this.handlers.length;t++)this.handlers[t].onContainerStart(i);for(this.traverse(i.children),t=0;t<this.handlers.length;t++)this.handlers[t].onContainerEnd(i)}else for(t=0;t<this.handlers.length;t++)this.handlers[t].onComponent(i)}}}]),e}();e["default"]=i})},function(e,t,n){var i,r,o;!function(s,a){r=[t,n(67)],i=a,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e}function r(e,n,i){var r=new c(e),o=r.scan(),s=null,a=[];return o.forEach(function(e){e.type===t.Selector.ID_SELECTOR?(s=n.getById(e.name),
s&&a.push(new t.Selector(e.name,t.Selector.ID_SELECTOR,s.resolveType()))):e.type===t.Selector.TYPE_SELECTOR&&(s=i.getByShortName(e.name),s.length>0&&a.push(new t.Selector(e.name,t.Selector.TYPE_SELECTOR,s[0])))}),a.length>1?new t.UnionSelector(a):a[0]}Object.defineProperty(e,"__esModule",{value:!0}),e.Tokenizer=void 0,e["default"]=r;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=1,a=2,l=3,c=e.Tokenizer=function(){function e(t){n(this,e),this.buffer=t,this.$length=t.length,this.state=s,this.offset=0,this.selectors=[],this.$selectorType=null}return o(e,[{key:"scan",value:function(){for(;this.offset<this.$length;)switch(this.state){case s:this._textState();break;case a:this._nameState();break;case l:this._afterNameState()}return this.selectors}},{key:"reset",value:function(){this.selectors=[],this.$selectorType=null,this.state=s,this.offset=0}},{key:"_textState",value:function(){for(var e=null;this.offset<this.$length;)switch(e=this.buffer.charCodeAt(this.offset)){case 46:return this.offset++,this.state=a,void(this.$selectorType=t.Selector.CLASS_SELECTOR);case 35:return this.offset++,this.state=a,void(this.$selectorType=t.Selector.ID_SELECTOR);case 32:this.offset++;break;default:if(i(e))return this.state=a,void(this.$selectorType=t.Selector.TYPE_SELECTOR);throw new Error("unknown character at position "+this.offset)}}},{key:"_nameState",value:function(){for(var e=null,t=this.offset;this.offset<this.$length;){e=this.buffer.charCodeAt(this.offset);{if(!i(e))break;this.offset++}}this.state=l,this.selectors.push({name:this.buffer.substring(t,this.offset),type:this.$selectorType})}},{key:"_afterNameState",value:function(){for(var e=null;this.offset<this.$length;){switch(e=this.buffer.charCodeAt(this.offset++)){case 32:continue;case 44:return void(this.state=s);default:if(!i(e))throw new Error("unknown character at position "+this.offset);return this.state=a,this.$selectorType=t.Selector.TYPE_SELECTOR,void this.offset--}break}}}]),e}()})},function(e,t,n){var i,r,o;!function(n,s){r=[t],i=s,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(this,function(e){"use strict";function t(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=e.names(),i={},r=0;r<n.length;r++)t.hasMember(n[r])&&(i[n[r]]=e.getMember(n[r]));return i}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e.Selector=function(){function e(t,n,r){i(this,e),this.name=t,this.selectorType=n,this._type=r}return o(e,null,[{key:"ID_SELECTOR",get:function(){return 1}},{key:"TYPE_SELECTOR",get:function(){return 2}},{key:"CLASS_SELECTOR",get:function(){return 3}}]),o(e,[{key:"resolveMembers",value:function(){return this._type.resolveMembers()}},{key:"hasMember",value:function(e){return this._type.hasMember(e)}},{key:"isType",value:function(e){return this._type.fullName===e}},{key:"getType",value:function(){return this._type}}]),e}();e.UnionSelector=function(e){function s(e){i(this,s);var n=t(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e.map(function(e){return e.name}),s.UNION_SELECTOR,e.map(function(e){return e._type})));return n.selectors=e,n.members=null,n}return n(s,e),o(s,null,[{key:"UNION_SELECTOR",get:function(){return 4}}]),o(s,[{key:"resolveMembers",value:function(){if(null===this.members){var e=this;this.selectors.forEach(function(t){null===e.members?e.members=t.resolveMembers():e.members=r(e.members,t._type)})}return this.members}},{key:"hasMember",value:function(e){return void 0!==this.resolveMembers()[e]}},{key:"isType",value:function(e){return!1}}]),s}(s)})},function(e,t,n){var i,r,o;!function(s,a){r=[t,n(34)],i=a,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(this,function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){var n=new u(e,t);return n.evaluate()}Object.defineProperty(e,"__esModule",{value:!0}),e.Problem=void 0,e["default"]=r;var o=n(t),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=o["default"].DOM,l=e.Problem=function(){function e(t,n,r,o){i(this,e),this.type=t,this.data=o,this.start=n,this.end=r}return s(e,null,[{key:"UNKNOWN_TAG",get:function(){return 1}},{key:"INVALID_CHILD_TAG",get:function(){return 2}},{key:"CHILDREN_NOT_ALLOWED",get:function(){return 3}},{key:"UNKNOWN_ATTRIBUTE",get:function(){return 4}},{key:"NOT_BOOLEAN",get:function(){return 5}},{key:"UNKNOWN_ENUM_VALUE",get:function(){return 6}},{key:"HTML_ERROR",get:function(){return 7}}]),e}(),c=function(){function e(t){i(this,e),this.id=t,this.properties=[]}return s(e,[{key:"add",value:function(e){this.properties.push(e)}},{key:"apply",value:function(e){var t=e[this.id];this.properties.forEach(function(e){e.apply(t)})}}]),e}(),h=function(){function e(){i(this,e),this.data={}}return s(e,[{key:"getOrAdd",value:function(e){return void 0===this.data[e]&&(this.data[e]=new c(e)),this.data[e]}},{key:"apply",value:function(e){var t=this;Object.keys(this.data).forEach(function(n){t.data[n].apply(e)})}}]),e}(),d=function(){function e(t,n,r,o){i(this,e),this.type=t,this.propertyName=n,this.value=r,this.readonly=o}return s(e,[{key:"apply",value:function(e){var t="id"===this.type?e.id:e[this.type][this.propertyName];if(this.readonly&&this.value!==t)throw this.propertyName+" is read only";"id"===this.type?e.id=this.value:e[this.type][this.propertyName]=t}}]),e}(),u=function(){function e(t,n){i(this,e),this.result=o["default"].parser.parse(t,{lint:!0,offsets:!0,validate:!0});var r=this.result.getProblems()||[];this.tagIndex=n.getTagIndex(),this.compResult=new h,r.length>0&&(r=r.map(function(e){return new l(l.HTML_ERROR,e.start,e.end,e)})),this.problems=r}return s(e,[{key:"_createResult",value:function(){return{valid:0===this.problems.length,problems:this.problems,result:this.compResult}}},{key:"evaluate",value:function(){var e=this;return this.result.document.children.forEach(function(t){return e._evaluateChild(t)?void 0:e._createResult()}),this._createResult()}},{key:"_evaluateChild",value:function(e){if(e.type!==a.ELEMENT_NODE)return!0;var t=this._evaluateTag(e);if(!t.result)return!1;var n=t.tag;if(e.children.length>0&&void 0===n.defaultcontent)return this.problems.push(new l(l.CHILDREN_NOT_ALLOWED,e.location.nameStart,e.location.nameEnd)),!1;for(var i=e.getAttributes(),r=i.id,o=Object.keys(i),s=void 0,c=void 0,h=void 0,u=0;u<o.length;u++){if(s=o[u],c=n.attribute(s),!c)return this.problems.push(new l(l.UNKNOWN_ATTRIBUTE,i[s].location.nameStart,i[s].location.nameEnd,{attr:s})),!1;if(h=i[s].rawValue,"bool"===c.type){var p=h.toLowerCase();if("true"!==p&&"false"!==p)return this.problems.push(new l(l.NOT_BOOLEAN,i[s].location.valueStart,i[s].location.end,{attr:s,value:h})),!1}else if("enum"===c.type){if(c.values[h.toUpperCase()]!==!0)return this.problems.push(new l(l.UNKNOWN_ENUM_VALUE,i[s].location.valueStart,i[s].location.end,{attr:s,value:h})),!1}else if("string"!==c.type&&"function"!==c.type)throw"unhandled rule for type:"+c.type;if(!c.accessor)throw"missing accessor information for "+s;void 0!==r&&this.compResult.getOrAdd(r.rawValue).add(new d(c.accessor.type,c.accessor.name,h,c.readonly))}if(void 0!==n.defaultcontent){if("html"===n.defaultcontent)return!0;for(var f=0;f<e.childNodes.length;f++){var g=e.childNodes.item(f),m=this._evaluateTag(g);if(!m.result)return!1;if(!this._evaluateChildType(m.tag.owningType,n.defaultcontent,g))return!1;if(!this._evaluateChild(g))return!1}}return!0}},{key:"_evaluateChildType",value:function(e,t,n){return e.inheritsFrom(t)?!0:(this.problems.push(new l(l.INVALID_CHILD_TAG,n.location.namestart,n.location.nameEnd)),!1)}},{key:"_evaluateTag",value:function(e){var t={tag:null,entry:null,result:!1},n=this.tagIndex.getByName(e.nodeName,!1);return void 0===n?(this.problems.push(new l(l.UNKNOWN_TAG,e.location.nameStart,e.location.nameEnd,{tag:e.nodeName})),t):(t.result=!0,t.tag=n,t)}}]),e}()})},function(e,t,n){var i,r,o;!function(n,s){r=[t],i=s,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(this,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={"wix-storage.Storage":{attributes:{},eventHandlers:{},synthetic:!1,inherits:{},members:{setItem:{description:"Stores an item in local or session storage.",kind:"function"},getItem:{description:"Gets an item from local or session storage.",kind:"function"},removeItem:{description:"Removes an item from local or session storage.",kind:"function"},clear:{description:"Removes **all** items from local or session storage.",kind:"function"}},description:"Used for storing local or session key/value data in the user's browser."},"$w.Document":{attributes:{},eventHandlers:{},synthetic:!1,inherits:{},members:{background:{description:"Gets an object containing information about the document's background, such as its image source.",kind:"member"},children:{description:"Gets the document's Header, Page, and Footer.",kind:"member"},type:{description:"Gets the document's type.",kind:"member"}},description:"A complete web page, which consists of a Header, Page, and Footer."},"$w.Document.BackgroundOptions":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"An object used by the `background` property that contains the background options."},"wix-site.SiteStructure":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"An object that contains information about the site's pages, prefixes, and lightboxes."},"wix-site.StructurePage":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"An object that contains information about a page on the site."},"wix-site.Prefix":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"An object that contains information about the site's prefixes."},"wix-site.StructureLightbox":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"An object that contains information about a lightbox on the site."},"$w.ReadyHandler":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"Function that runs when all page elements have finished loading."},"$w.RenderHandler":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"Function that runs when all page elements have finished rendering."},"$w.HtmlElementEventHandler":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:""},"$w.GalleryItemChangedEventHandler":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"Handles events fired when a gallery moves to a new image."},"$w.GalleryItemClickedEventHandler":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"Handles events fired when an image in a gallery is clicked."},"$w.HtmlComponentMessageEventHandler":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"Handles events fired when the code in an HtmlComponent sends a message."},"$w.KeyboardEventHandler":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"Handles events fired when the keyboard is pressed."},"$w.MouseEventHandler":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"Handles events fired when the mouse is clicked."},"$w.TableCellEventHandler":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"Handles events fired when a table cell is selected."},"$w.TableRowEventHandler":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"Handles events fired when a table row is selected."},"$w.EventHandler":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:""},"$w.Validator":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"Function that runs when custom validation is checked."},"$w.Anchor":{tagname:"Anchor",attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.Node":!0,"$w.ViewportMixin":!0},members:{name:{description:"Gets the name of an anchor.",kind:"member"}},description:"Anchors\n are invisible position markers which you can place anywhere on your site.\n They are a useful way to direct users to important sections.",viewernames:{"wysiwyg.common.components.anchor.viewer.Anchor":!0}},"$w.Background":{attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.Element":!0},members:{background:{description:"Gets an object containing information about the element's background.",kind:"member"}},description:"Provides functionality for background images in certain elements."},"$w.Gallery":{tagname:"gallery",attributes:{onCurrentItemChanged:{type:"function",readonly:!1,origin:"onCurrentItemChanged"},onItemClicked:{type:"function",readonly:!1,origin:"onItemClicked"}},eventHandlers:{onCurrentItemChanged:{type:"imageChanged",description:"Adds an event handler that runs when a gallery's current item changes."},onItemClicked:{type:"itemClicked",description:"Adds an event handler that runs when an item in a gallery is\n clicked."}},synthetic:!1,inherits:{"$w.Element":!0,"$w.HiddenCollapsedMixin":!0,"$w.PlayableMixin":!0,"$w.ClickableMixin":!0},members:{clickAction:{description:"Sets or gets the action that occurs when an item in the gallery is clicked.",kind:"member"},currentIndex:{description:"Gets the index of the gallery's current item.",kind:"member"},items:{description:"Sets or gets the items in a gallery.",kind:"member"},showNavigationButtons:{description:"Determines if a gallery's navigation arrows are shown.",kind:"member"},currentItem:{description:"Gets an object containing information about the current item.",kind:"member"},galleryCapabilities:{description:"Gets an object containing information about the gallery's capabilities.",kind:"member"}},description:"A gallery for displaying multiple items.",viewernames:{"wysiwyg.viewer.components.SlideShowGallery":!0,"wysiwyg.viewer.components.SliderGallery":!0,"wysiwyg.viewer.components.MatrixGallery":!0,"wysiwyg.viewer.components.PaginatedGridGallery":!0,"tpa.viewer.components.Thumbnails":!0,"tpa.viewer.components.StripShowcase":!0,"tpa.viewer.components.StripSlideshow":!0,"tpa.viewer.components.Collage":!0,"tpa.viewer.components.Masonry":!0,"tpa.viewer.components.Honeycomb":!0,"tpa.viewer.components.Accordion":!0,"wysiwyg.viewer.components.tpapps.TPA3DCarousel":!0,"wysiwyg.viewer.components.tpapps.TPA3DGallery":!0,"tpa.viewer.components.Impress":!0,"tpa.viewer.components.Freestyle":!0}},"$w.Box":{tagname:"Box",attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.Element":!0,"$w.HiddenCollapsedMixin":!0,"$w.ClickableMixin":!0,"$w.ContainableMixin":!0},members:{},description:"Container boxes\n are used to structure your site. You can attach\n any element to a container box and move the box around, which is a useful\n way to to keep elements together. Some actions performed on a box affect the\n elements it contains. For example, [hiding](#hide) a box also effectively\n hides all the elements in the box, although the values of the\n [hidden](#hidden) properties of the elements contained in the box do not change.",viewernames:{"mobile.core.components.Container":!0}},"$w.Button":{tagname:"button",attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.Element":!0,"$w.HiddenCollapsedMixin":!0,"$w.DisabledMixin":!0,"$w.LinkableMixin":!0,"$w.ClickableMixin":!0},members:{label:{description:"Sets or gets the label of a text button.",kind:"member"}},description:"A text button or an icon button.",viewernames:{"wysiwyg.viewer.components.SiteButton":!0,"wysiwyg.common.components.imagebutton.viewer.ImageButton":!0}},"$w.Checkbox":{tagname:"checkbox",attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.FormElement":!0,"$w.DisabledMixin":!0,"$w.HiddenCollapsedMixin":!0,"$w.FocusMixin":!0,"$w.ClickableMixin":!0},members:{checked:{description:"Sets or gets whether a checkbox is checked.",kind:"member"}},description:"Checkboxes are used for a single binary choice.",viewernames:{"wysiwyg.viewer.components.inputs.Checkbox":!0}},"$w.Column":{tagname:"column",attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.Element":!0,"$w.Background":!0,"$w.ClickableMixin":!0,"$w.ContainableMixin":!0},members:{},description:"A `Column` is a component part of a `ColumnStrip`.",viewernames:{"wysiwyg.viewer.components.Column":!0}},"$w.ColumnStrip":{tagname:"columnstrip",attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.Element":!0,"$w.HiddenCollapsedMixin":!0,"$w.ClickableMixin":!0,"$w.ContainableMixin":!0},members:{columns:{description:"Gets a list of all the columns contained in the column strip.",kind:"member"}},description:"A `ColumnStrip` is a strip of `Column` elements.",viewernames:{"wysiwyg.viewer.components.StripColumnsContainer":!0}},"$w.DatePicker":{tagname:"datepicker",attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.FormElement":!0,"$w.HiddenCollapsedMixin":!0,"$w.DisabledMixin":!0,"$w.FocusMixin":!0,"$w.ReadOnlyMixin":!0,"$w.ClickableMixin":!0},members:{maxDate:{description:"Sets or gets the latest date that a user can select.",kind:"member"},minDate:{description:"Sets or gets the earliest date that a user can select.",kind:"member"},disabledDates:{description:"Sets or gets the dates that a user cannot select.",kind:"member"},disabledDaysOfWeek:{description:"Sets or gets the days of the week that a user cannot select.",kind:"member"}},description:"A `DatePicker` is used for entering dates. It let's users populate a\n date field by picking a date using a calendar popup.",viewernames:{"wysiwyg.viewer.components.inputs.DatePicker":!0}},"$w.Dropdown":{tagname:"dropdown",attributes:{placeholder:{readonly:!1,type:"string",origin:"placeholder"},"selected-index":{readonly:!1,type:"string",origin:"selectedIndex"}},eventHandlers:{},synthetic:!1,inherits:{"$w.FormElement":!0,"$w.HiddenCollapsedMixin":!0,"$w.DisabledMixin":!0,"$w.FocusMixin":!0,"$w.ClickableMixin":!0},members:{options:{description:"Sets or gets the options in a dropdown.",kind:"member"},placeholder:{description:"Sets or gets the dropdown's placeholder text.",kind:"member"},selectedIndex:{description:"Sets or gets the index of the selected option.",kind:"member"}},description:"Dropdowns are used for selecting one of a number of options.\n They are especially useful when there are too many options to display using\n [radio buttons]($w.RadioButtonGroup.html). Dropdowns consist of a list\n of [options](#Option). Each [option](#Option) contains a label, which is\n what the user sees, and a value, which is what is used in code and stored in\n you collections.",viewernames:{"wysiwyg.viewer.components.inputs.ComboBoxInput":!0}},"$w.Footer":{tagname:"footer",attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.Element":!0,"$w.ClickableMixin":!0,"$w.ContainableMixin":!0},members:{},description:"The footer is the area of your site that appears at the bottom and\n throughout all of your pages.",viewernames:{"wysiwyg.viewer.components.FooterContainer":!0}},"$w.GoogleMap":{tagname:"GoogleMap",attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.Element":!0,"$w.HiddenCollapsedMixin":!0},members:{location:{description:"Sets or gets the location information of a map's marked location.",kind:"member"}},description:"A [Google Map element](https://www.wix.com/support/html5/article/adding-google-maps)\n that allows you to display a given location.",viewernames:{"wysiwyg.viewer.components.GoogleMap":!0}},"$w.Header":{tagname:"header",attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.Element":!0,"$w.ClickableMixin":!0,"$w.ContainableMixin":!0},members:{},description:"The header is the area of your site that appears at the top and\n throughout all of your pages.",viewernames:{"wysiwyg.viewer.components.HeaderContainer":!0}},"$w.HtmlComponent":{tagname:"IFrame",attributes:{onMessage:{type:"function",readonly:!1,origin:"onMessage"}},eventHandlers:{onMessage:{type:"message",description:"Adds an event handler that will run when the HTML Component\n sends a message."}},synthetic:!1,inherits:{"$w.IFrame":!0},members:{postMessage:{description:"Sends a message to the HTML Component.",kind:"function"},src:{description:"Sets or gets the URL of the HTML Component's code.",kind:"member"},scrolling:{description:"Sets or gets whether the HTML Component displays scrollbars.",kind:"member"}},description:"A container for internal or external HTML code. Messages can be sent\n from your page code to the code in an HTML component and from the HTML\n component to your page code using the [`postMessage()`](#postMessage) and\n [`onMessage()`](#onMessage) functions. To learn more about what code an HTML\n component can hold, see here.",viewernames:{"wysiwyg.viewer.components.HtmlComponent":!0}},"$w.Image":{tagname:"image",attributes:{alt:{readonly:!1,type:"string",origin:"alt"},tooltip:{readonly:!1,type:"string",origin:"tooltip"},src:{readonly:!1,type:"string",origin:"src"}},eventHandlers:{},synthetic:!1,inherits:{"$w.Element":!0,"$w.HiddenCollapsedMixin":!0,"$w.LinkableMixin":!0,"$w.ClickableMixin":!0},members:{alt:{description:"Sets or gets an image's alt text.",kind:"member"},tooltip:{description:"Sets or gets an image's tooltip.\n An image's tooltip text is displayed when a user hovers over the image\n or when the image opens in a popup.",kind:"member"},src:{description:"Sets or gets the file location of the image.",kind:"member"}},description:"Images are images stored in the Media Manager\n or retreived from an external web location.\n\n The URL formats for images are:\n\n + Images from the Media Manager: image:&sol;&sol;_&lt;filename&gt;_\n + Images from the web: http(s):&sol;&sol;_&lt;image url&gt;_",viewernames:{"wysiwyg.viewer.components.WPhoto":!0}},"$w.Page":{tagname:"page",attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.Element":!0,"$w.ClickableMixin":!0,"$w.ContainableMixin":!0},members:{description:{description:"Gets the page's SEO description.",kind:"member"},keywords:{description:"Gets the page's keywords.",kind:"member"},title:{description:"Gets the page's title.",kind:"member"},visibleInMenu:{description:"Indicates if the page is included in the site's menu.",kind:"member"}},description:"A page is a web page that can contain other elements.",viewernames:{"mobile.core.components.Page":!0}},"$w.RadioButtonGroup":{tagname:"RadioButtonGroup",attributes:{"selected-index":{readonly:!1,type:"string",origin:"selectedIndex"}},eventHandlers:{},synthetic:!1,inherits:{"$w.FormElement":!0,"$w.HiddenCollapsedMixin":!0,"$w.DisabledMixin":!0,"$w.FocusMixin":!0,"$w.ClickableMixin":!0},members:{options:{description:"Sets or gets the options in a radio button group.",kind:"member"},selectedIndex:{description:"Sets or gets the index of the selected option.",kind:"member"}},description:"Radio button groups are used for selecting one of a number of\n options. Radio button groups consist of a list of [options](#Option). Each\n [option](#Option) contains a label, which is what the user sees, and a\n value, which is what is used in code and stored in you collections.",viewernames:{"wysiwyg.viewer.components.inputs.RadioGroup":!0}},"$w.Shape":{tagname:"shape",attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.Element":!0,"$w.HiddenCollapsedMixin":!0,"$w.LinkableMixin":!0,"$w.ClickableMixin":!0},members:{},description:"A simple shape.",viewernames:{"wysiwyg.viewer.components.svgshape.SvgShape":!0}},"$w.Slide":{attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.Element":!0,"$w.Background":!0,"$w.ContainableMixin":!0},members:{name:{description:"Gets the name of the slide.",kind:"member"}},description:"A `Slide` from a `Slideshow` that can contain other elements.",viewernames:{"wysiwyg.viewer.components.BoxSlideShowSlide":!0}},"$w.Slideshow":{tagname:"box-slideshow",attributes:{onChange:{type:"function",readonly:!1,origin:"onChange"}},eventHandlers:{onChange:{type:"change",description:"Adds an event handler that runs when the slideshow moves to a new slide."}},synthetic:!1,inherits:{"$w.Element":!0,"$w.HiddenCollapsedMixin":!0,"$w.PlayableMixin":!0,"$w.ClickableMixin":!0,"$w.ContainableMixin":!0},members:{changeSlide:{description:"Change the slideshow's current slide to a specific slide or index.",kind:"function"},currentSlide:{description:"Gets the slideshow's current slide.",kind:"member"},slides:{description:"Gets a list of all the slides contained in the slideshow.",kind:"member"},currentIndex:{description:"Gets the index of the slideshow's current slide.",kind:"member"},showNavigationButtons:{description:"Sets or gets whether a slideshow's navigation buttons are shown.",kind:"member"},showSlideButtons:{description:"Set or returns whether a slideshow's slide buttons are shown.",kind:"member"}},description:"Slideshows are playable containers for slides.",viewernames:{"wysiwyg.viewer.components.BoxSlideShow":!0,"wysiwyg.viewer.components.StripContainerSlideShow":!0}},"$w.Table":{attributes:{onDataChange:{type:"function",readonly:!1,origin:"onDataChange"},onCellSelect:{type:"function",readonly:!1,origin:"onCellSelect"},onRowSelect:{type:"function",readonly:!1,origin:"onRowSelect"}},eventHandlers:{onDataChange:{type:"dataChange",description:"Adds an event handler that runs when the table's data is changed."},onCellSelect:{type:"cellSelect",description:"Adds an event handler that runs when a table cell is selected."},onRowSelect:{type:"rowSelect",description:"Adds an event handler that runs when a table row is selected."}},synthetic:!1,inherits:{"$w.Element":!0,"$w.HiddenCollapsedMixin":!0,"$w.ClickableMixin":!0},members:{refresh:{description:"Fetches the most current data and updates the table.",kind:"function"},selectRow:{description:"Selects a table row by index.",kind:"function"},updateRow:{description:"Updates a the row data of a single row at the specified index.",kind:"function"},pagination:{description:"Sets or gets the table's pagination parameters.",kind:"member"},columns:{description:"Sets or gets the defining properties of the columns in a table.",kind:"member"},dataFetcher:{description:"Sets the function that will be called when a new page of table data is to be displayed.",kind:"member"},rows:{description:"Sets or gets the table's row data.",kind:"member"}},description:"A table for displaying data.",viewernames:{"wysiwyg.viewer.components.Grid":!0}},"$w.Text":{tagname:"text",attributes:{html:{readonly:!1,type:"string",origin:"html"},text:{readonly:!1,type:"string",origin:"text"}},eventHandlers:{},synthetic:!1,inherits:{"$w.Element":!0,"$w.HiddenCollapsedMixin":!0,"$w.ClickableMixin":!0},members:{html:{description:"Sets or gets the contents of a text element using standard HTML.",kind:"member"},text:{description:"Sets or gets the plain-text contents of a text element.",kind:"member"}},description:"Provides functionality for text elements.",viewernames:{"wysiwyg.viewer.components.WRichText":!0},defaultcontent:"html"},"$w.TextBox":{tagname:"textarea",attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.FormElement":!0,"$w.DisabledMixin":!0,"$w.TextInputMixin":!0,"$w.HiddenCollapsedMixin":!0,"$w.FocusMixin":!0,"$w.ReadOnlyMixin":!0,"$w.ClickableMixin":!0},members:{wrap:{description:"Determines if the text will contain line breaks when its value is read.",kind:"member"}},description:"An input element for capturing large amounts of text.",viewernames:{"wysiwyg.viewer.components.inputs.TextAreaInput":!0}},"$w.TextInput":{tagname:"textinput",attributes:{"input-type":{readonly:!1,type:"string",origin:"inputType"}},eventHandlers:{},synthetic:!1,inherits:{"$w.FormElement":!0,"$w.HiddenCollapsedMixin":!0,"$w.DisabledMixin":!0,"$w.TextInputMixin":!0,"$w.FocusMixin":!0,"$w.ReadOnlyMixin":!0,"$w.ClickableMixin":!0},members:{max:{description:"Sets or gets the maximum value for a text input element whose\n type is set to **Number**.",kind:"member"},min:{description:"Sets or gets the minimum value for a text input element whose\n type is set to **Number**.",kind:"member"},inputType:{description:"Sets or gets the input type of an Input element.",kind:"member"}},description:"An input element for capturing small amounts of text.",viewernames:{"wysiwyg.viewer.components.inputs.TextInput":!0}},"$w.UploadButton":{tagname:"fileuploader",attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.FormElement":!0,"$w.HiddenCollapsedMixin":!0,"$w.DisabledMixin":!0,"$w.FocusMixin":!0},members:{startUpload:{description:"Uploads the files that the user has chosen.",kind:"function"},reset:{description:"Clears the files that are pending upload.",kind:"function"},buttonLabel:{description:"Sets or gets the label on the upload button.",kind:"member"},fileType:{description:"Sets or gets the type of file that a user can upload.",kind:"member"}},description:"An upload button enables users to upload files to your site.",viewernames:{"wysiwyg.viewer.components.inputs.FileUploader":!0}},"$w.Video":{tagname:"Video",attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.Element":!0,"$w.HiddenCollapsedMixin":!0},members:{videoUrl:{description:"Sets or gets the URL of the video.",kind:"member"}},description:"An element that displays a video from Vimeo or Youtube.",viewernames:{"wysiwyg.viewer.components.Video":!0}},"$w.GalleryItemChangedEvent":{attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.Event":!0},members:{item:{description:"Gets the gallery item.",kind:"member"},itemIndex:{description:"Gets the gallery item's index.",kind:"member"}},description:"Event that is fired when a gallery moves to a new image."},"$w.GalleryItemClickedEvent":{attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.GalleryItemChangedEvent":!0,"$w.Event":!0},members:{},description:"Event that is fired when an image in a gallery is clicked."},"$w.HtmlComponentMessageEvent":{attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.Event":!0},members:{data:{description:"Gets the event data.",kind:"member"}},description:"Event that is fired when the code in an HtmlComponent sends a message."},"$w.KeyboardEvent":{attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.Event":!0},members:{metaKey:{description:"Indicates if the ⌘ Command key on a Mac or ⊞ Windows key on a PC\n was pressed.",kind:"member"},altKey:{description:"Indicates if the Option key on a Mac or Alt key on a PC was pressed.",kind:"member"},shiftKey:{description:"Indicates if the Shift key was pressed.",kind:"member"},ctrlKey:{description:"Indicates if the Control (Ctrl) key was pressed.",kind:"member"},key:{description:"Gets the character that was pressed.",kind:"member"}},description:"Event that is fired when the keyboard is pressed."},"$w.MouseEvent":{attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.Event":!0},members:{pageX:{description:"Gets the distance in pixels between the mouse pointer and the\n left edge of the page.",kind:"member"},pageY:{
description:"Gets the distance in pixels between the mouse pointer and the\n top edge of the page.",kind:"member"},screenX:{description:"Gets the distance in pixels between the mouse pointer and the\n left edge of the screen or screens.",kind:"member"},screenY:{description:"Gets the distance in pixels between the mouse pointer and the\n top edge of the screen or screens.",kind:"member"},clientX:{description:"Gets the distance in pixels between the mouse pointer and the\n left edge of the browser's viewable area.",kind:"member"},clientY:{description:"Gets the distance in pixels between the mouse pointer and the\n top edge of the browser's viewable area.",kind:"member"},offsetX:{description:"Gets the distance in pixels between the mouse pointer and the\n left edge of the element that triggered this event.",kind:"member"},offsetY:{description:"Gets the distance in pixels between the mouse pointer and the\n top edge of the element that triggered this event.",kind:"member"}},description:"Event that is fired when the mouse is clicked."},"$w.TableCellEvent":{attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.Event":!0},members:{cellRowIndex:{description:"Gets the row index of the selected cell.",kind:"member"},cellColumnId:{description:"Gets the column ID of the selected cell.",kind:"member"},cellData:{description:"Gets the data from the selected cell.",kind:"member"}},description:"Event that is fired when a table cell is selected."},"$w.TableRowEvent":{attributes:{},eventHandlers:{},synthetic:!1,inherits:{"$w.Event":!0},members:{rowIndex:{description:"Gets the index of the selected row.",kind:"member"},rowData:{description:"Gets the data for the selected row.",kind:"member"}},description:"Event that is fired when a table row is selected."},"$w.Event":{attributes:{},eventHandlers:{},synthetic:!1,inherits:{},members:{target:{description:"Gets the element that the event was fired on.",kind:"member"},type:{description:"Gets the type of event that was fired.",kind:"member"}},description:"Events are fired when certain actions occur to elements."},"$w.Background.BackgroundOptions":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"An object used by the `background` property that contains the background options."},"$w.Gallery.GalleryCapabilities":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"An object used by the `galleryCapabilities` property that contains the capabilities of a gallery."},"$w.Gallery.GalleryItem":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"An object used by the Gallery properties `items` and `currentItem`."},"$w.Dropdown.Option":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"An object used by the `options` property that contains the attributes of a dropdown list item."},"$w.Element":{attributes:{onMouseIn:{type:"function",readonly:!1,origin:"onMouseIn"},onMouseOut:{type:"function",readonly:!1,origin:"onMouseOut"}},eventHandlers:{onMouseIn:{type:"mouseenter",description:"Adds an event handler that runs when the mouse pointer is moved\n onto the element."},onMouseOut:{type:"mouseleave",description:"Adds an event handler that runs when the mouse pointer is moved\n off of the element."}},inherits:{"$w.Node":!0,"$w.ViewportMixin":!0},members:{rendered:{description:"Indicates if an element is currently displayed on-screen.",kind:"member"}}},"$w.FormElement":{attributes:{onChange:{type:"function",readonly:!1,origin:"onChange"},onViewportEnter:{type:"function",readonly:!1,origin:"onViewportEnter"},onViewportLeave:{type:"function",readonly:!1,origin:"onViewportLeave"}},eventHandlers:{onChange:{type:"change",description:"Adds an event handler that runs when an input element's value\n is changed."},onViewportEnter:{type:"viewportEnter",description:"Adds an event handler that runs when an element is scrolled\n into the viewable part of the current window."},onViewportLeave:{type:"viewportLeave",description:"Adds an event handler that runs when an element is scrolled\n out of the viewable part of the current window."}},inherits:{"$w.Element":!0,"$w.ValidatableMixin":!0,"$w.RequiredMixin":!0},members:{scrollTo:{description:"Scrolls the page to the element using an animation.",kind:"function"},value:{description:"Sets or gets an element's value.",kind:"member"},id:{description:"Gets the elements's ID.",kind:"member"},parent:{description:"Gets the element's parent element.",kind:"member"},global:{description:"Indicates if an element appears on all pages or only on the current page.",kind:"member"},type:{description:"Gets the element's type.",kind:"member"}}},"$w.GoogleMap.MapLocation":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"An object used by the `location` property that\n contains the attributes of a marked map location."},"$w.HiddenCollapsedElement":{attributes:{onViewportEnter:{type:"function",readonly:!1,origin:"onViewportEnter"},onViewportLeave:{type:"function",readonly:!1,origin:"onViewportLeave"}},eventHandlers:{onViewportEnter:{type:"viewportEnter",description:"Adds an event handler that runs when an element is scrolled\n into the viewable part of the current window."},onViewportLeave:{type:"viewportLeave",description:"Adds an event handler that runs when an element is scrolled\n out of the viewable part of the current window."}},inherits:{"$w.Element":!0,"$w.HiddenCollapsedMixin":!0},members:{scrollTo:{description:"Scrolls the page to the element using an animation.",kind:"function"},id:{description:"Gets the elements's ID.",kind:"member"},parent:{description:"Gets the element's parent element.",kind:"member"},global:{description:"Indicates if an element appears on all pages or only on the current page.",kind:"member"},type:{description:"Gets the element's type.",kind:"member"}}},"$w.IFrame":{attributes:{onViewportEnter:{type:"function",readonly:!1,origin:"onViewportEnter"},onViewportLeave:{type:"function",readonly:!1,origin:"onViewportLeave"}},eventHandlers:{onViewportEnter:{type:"viewportEnter",description:"Adds an event handler that runs when an element is scrolled\n into the viewable part of the current window."},onViewportLeave:{type:"viewportLeave",description:"Adds an event handler that runs when an element is scrolled\n out of the viewable part of the current window."}},inherits:{"$w.Element":!0,"$w.HiddenCollapsedMixin":!0},members:{scrollTo:{description:"Scrolls the page to the element using an animation.",kind:"function"},id:{description:"Gets the elements's ID.",kind:"member"},parent:{description:"Gets the element's parent element.",kind:"member"},global:{description:"Indicates if an element appears on all pages or only on the current page.",kind:"member"},type:{description:"Gets the element's type.",kind:"member"}}},"$w.Node":{attributes:{},eventHandlers:{},inherits:{},members:{scrollTo:{description:"Scrolls the page to the element using an animation.",kind:"function"},id:{description:"Gets the elements's ID.",kind:"member"},parent:{description:"Gets the element's parent element.",kind:"member"},global:{description:"Indicates if an element appears on all pages or only on the current page.",kind:"member"},type:{description:"Gets the element's type.",kind:"member"}}},"$w.RadioButtonGroup.Option":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"An object used by the `options` property that contains the attributes of a radio button item."},"$w.Table.PaginationParam":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"An object used by the `pagination` property that\ncontains the pagination parameters which determine if and how the table\nis paginated."},"$w.Table.Column":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"An object used by the `columns` property that\n contains the properties that define a table column. Table columns do not\n store any data."},"$w.UploadButton.File":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"The object used by the `value` property that represents\n files ready for upload."},"$w.UploadButton.UploadedFile":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"The object returned by the `startUpload()` function's\n Promise that contains the URL of the successfully uploaded file."},"$w.UploadButton.UploadError":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"The object returned by the `startUpload()` function's\n Promise when an upload fails."},"$w.ClickableMixin":{attributes:{onClick:{type:"function",readonly:!1,origin:"onClick"},onDblClick:{type:"function",readonly:!1,origin:"onDblClick"}},eventHandlers:{onClick:{type:"click",description:"Adds an event handler that runs when the element is clicked."},onDblClick:{type:"dblClick",description:"Adds an event handler that runs when the element is double-clicked."}},inherits:{},members:{}},"$w.CollapsedMixin":{attributes:{collapsed:{readonly:!0,type:"bool",origin:"collapsed"}},eventHandlers:{},inherits:{},members:{collapse:{description:"Collapses the element and sets its `collapsed` property to `true`.",kind:"function"},expand:{description:"Expands the element and sets its `collapsed` property to `false`.",kind:"function"},collapsed:{description:"Indicates if the element is collapsed or expanded.",kind:"member"}}},"$w.ContainableMixin":{attributes:{},eventHandlers:{},inherits:{},members:{children:{description:"Gets an array of the elements that are contained within the element.",kind:"member"}}},"$w.DisabledMixin":{attributes:{enabled:{readonly:!0,type:"bool",origin:"enabled"}},eventHandlers:{},inherits:{},members:{disable:{description:"Disables the element and sets its `enabled` property to `false`.",kind:"function"},enable:{description:"Enables the element and sets its `enabled` property to `true`.",kind:"function"},enabled:{description:"Indicates if the element is enabled or disabled.",kind:"member"}}},"$w.FocusMixin":{attributes:{onFocus:{type:"function",readonly:!1,origin:"onFocus"},onBlur:{type:"function",readonly:!1,origin:"onBlur"}},eventHandlers:{onFocus:{type:"focus",description:"Adds an event handler that runs when the element receives focus."},onBlur:{type:"blur",description:"Adds an event handler that runs when the element loses focus."}},inherits:{},members:{focus:{description:"Places focus on the element.",kind:"function"},blur:{description:"Removes focus from the element.",kind:"function"}}},"$w.HiddenCollapsedMixin":{attributes:{},eventHandlers:{},inherits:{"$w.HiddenMixin":!0,"$w.CollapsedMixin":!0},members:{}},"$w.HiddenMixin":{attributes:{hidden:{readonly:!0,type:"bool",origin:"hidden"},visible:{readonly:!0,type:"bool",origin:"isVisible"}},eventHandlers:{},inherits:{},members:{hide:{description:"Hides the element and sets its `hidden` property\n to `true`, using an animation if specified.",kind:"function"},show:{description:"Shows the element and sets its `hidden` property\n to `false`, using an animation if specified.",kind:"function"},hidden:{description:"Indicates if the element is visible or hidden.",kind:"member"},isVisible:{description:"Indicates if the element is actually visible.",kind:"member"}}},"$w.LinkableMixin":{attributes:{target:{readonly:!1,type:"string",origin:"target"},link:{readonly:!1,type:"string",origin:"link"}},eventHandlers:{},inherits:{},members:{link:{description:"Sets or gets the element's link.",kind:"member"},target:{description:"Sets or gets the target of the element's link.",kind:"member"}}},"$w.PlayableMixin":{attributes:{onPause:{type:"function",readonly:!1,origin:"onPause"},onPlay:{type:"function",readonly:!1,origin:"onPlay"}},eventHandlers:{onPause:{type:"autoplayOff",description:"Adds an event handler that runs when playback is paused."},onPlay:{type:"autoplayOn",description:"Adds an event handler that runs when playback is started or restarted."}},inherits:{},members:{pause:{description:"Pauses playback.",kind:"function"},play:{description:"Begins or resumes playback.",kind:"function"},next:{description:"Moves to the next item.",kind:"function"},previous:{description:"Moves to the previous image or slide.",kind:"function"},isPlaying:{description:"Indicates if the element is currently playing.",kind:"member"}}},"$w.ReadOnlyMixin":{attributes:{},eventHandlers:{},inherits:{},members:{readOnly:{description:"Sets or gets if a user can modify the value of the input element.",kind:"member"}}},"$w.RequiredMixin":{attributes:{required:{readonly:!1,type:"bool",origin:"required"}},eventHandlers:{},inherits:{},members:{required:{description:"Sets or gets whether an input element is required to have a value.",kind:"member"}}},"$w.TextInputMixin":{attributes:{onKeyPress:{type:"function",readonly:!1,origin:"onKeyPress"},placeholder:{readonly:!1,type:"string",origin:"placeholder"}},eventHandlers:{onKeyPress:{type:"keyPress",description:"Adds an event handler that runs when the cursor is inside the\n input element and a key is pressed."}},inherits:{},members:{placeholder:{description:"Sets or gets the element's placeholder text.",kind:"member"},maxLength:{description:"Sets or gets the maximum number of characters that can be entered.",kind:"member"}}},"$w.ValidatableMixin":{attributes:{},eventHandlers:{},inherits:{},members:{onCustomValidation:{description:"Adds an event handler that runs when the element's validation is checked.",kind:"function"},updateValidityIndication:{description:"Updates the element's visual validity indication based on it's current validity state.",kind:"function"},resetValidityIndication:{description:"Resets the element's visual validity indication.",kind:"function"},valid:{description:"Indicates if an input element's value is valid.",kind:"member"},validationMessage:{description:"Gets a message indicating why the element is invalid, or an\n empty string if the message is valid.",kind:"member"},validity:{description:"Gets a ValidityState object that contains\n detailed information about the validity states of the element.",kind:"member"}}},"$w.ValidatableMixin.ValidityState":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"Contains detailed information about the validity states of an element."},"$w.ViewportMixin":{attributes:{onViewportEnter:{type:"function",readonly:!1,origin:"onViewportEnter"},onViewportLeave:{type:"function",readonly:!1,origin:"onViewportLeave"}},eventHandlers:{onViewportEnter:{type:"viewportEnter",description:"Adds an event handler that runs when an element is scrolled\n into the viewable part of the current window."},onViewportLeave:{type:"viewportLeave",description:"Adds an event handler that runs when an element is scrolled\n out of the viewable part of the current window."}},inherits:{},members:{}},"wix-users.LoginOptions":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"An object used by the `promptLogin()` function to determine how the login dialog box appears."},"wix-users.User":{attributes:{},eventHandlers:{},synthetic:!1,inherits:{},members:{getEmail:{description:"Gets the email of the current user.",kind:"function"},id:{description:"Gets the user's ID.",kind:"member"},loggedIn:{description:"Indicated whether the user is logged in or not.",kind:"member"},role:{description:"Gets the user's role.",kind:"member"}},description:"A site user."},"wix-window.WindowSizeInfo":{attributes:{},eventHandlers:{},synthetic:!0,inherits:{},members:{},description:"An object returned by the `getBoundingRect()` function that contains information about the window's size, the document's size, and the current scroll position."}}})}])}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof n&&n.amd)n("acorn/dist/acorn",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.acorn=e()}}(function(){return function e(n,i,r){function o(a,l){if(!i[a]){if(!n[a]){var c="function"==typeof t&&t;if(!l&&c)return c(a,!0);if(s)return s(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var d=i[a]={exports:{}};n[a][0].call(d.exports,function(e){var t=n[a][1][e];return o(t?t:e)},d,d.exports,e,n,i,r)}return i[a].exports}for(var s="function"==typeof t&&t,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){var i=e("./tokentype"),r=e("./state"),o=e("./parseutil"),s=r.Parser.prototype;s.checkPropClash=function(e,t){if(!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var n=e.key,i=void 0;switch(n.type){case"Identifier":i=n.name;break;case"Literal":i=String(n.value);break;default:return}var r=e.kind;if(this.options.ecmaVersion>=6)return void("__proto__"===i&&"init"===r&&(t.proto&&this.raiseRecoverable(n.start,"Redefinition of __proto__ property"),t.proto=!0));i="$"+i;var o=t[i];if(o){var s="init"!==r;((this.strict||s)&&o[r]||!(s^o.init))&&this.raiseRecoverable(n.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[r]=!0}},s.parseExpression=function(e,t){var n=this.start,r=this.startLoc,o=this.parseMaybeAssign(e,t);if(this.type===i.types.comma){var s=this.startNodeAt(n,r);for(s.expressions=[o];this.eat(i.types.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return o},s.parseMaybeAssign=function(e,t,n){if(this.inGenerator&&this.isContextual("yield"))return this.parseYield();var r=!1;t||(t=new o.DestructuringErrors,r=!0);var s=this.start,a=this.startLoc;(this.type==i.types.parenL||this.type==i.types.name)&&(this.potentialArrowAt=this.start);var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,s,a)),this.type.isAssign){this.checkPatternErrors(t,!0),r||o.DestructuringErrors.call(t);var c=this.startNodeAt(s,a);return c.operator=this.value,c.left=this.type===i.types.eq?this.toAssignable(l):l,t.shorthandAssign=0,this.checkLVal(l),this.next(),c.right=this.parseMaybeAssign(e),this.finishNode(c,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),l},s.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,o=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return o;if(this.eat(i.types.question)){var s=this.startNodeAt(n,r);return s.test=o,s.consequent=this.parseMaybeAssign(),this.expect(i.types.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return o},s.parseExprOps=function(e,t){var n=this.start,i=this.startLoc,r=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)?r:this.parseExprOp(r,n,i,-1,e)},s.parseExprOp=function(e,t,n,r,o){var s=this.type.binop;if(null!=s&&(!o||this.type!==i.types._in)&&s>r){var a=this.type===i.types.logicalOR||this.type===i.types.logicalAND,l=this.value;this.next();var c=this.start,h=this.startLoc,d=this.parseExprOp(this.parseMaybeUnary(null,!1),c,h,s,o),u=this.buildBinary(t,n,e,d,l,a);return this.parseExprOp(u,t,n,r,o)}return e},s.buildBinary=function(e,t,n,i,r,o){var s=this.startNodeAt(e,t);return s.left=n,s.operator=r,s.right=i,this.finishNode(s,o?"LogicalExpression":"BinaryExpression")},s.parseMaybeUnary=function(e,t){var n=this.start,r=this.startLoc,o=void 0;if(this.type.prefix){var s=this.startNode(),a=this.type===i.types.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),a?this.checkLVal(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):t=!0,o=this.finishNode(s,a?"UpdateExpression":"UnaryExpression")}else{if(o=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var s=this.startNodeAt(n,r);s.operator=this.value,s.prefix=!1,s.argument=o,this.checkLVal(o),this.next(),o=this.finishNode(s,"UpdateExpression")}}return!t&&this.eat(i.types.starstar)?this.buildBinary(n,r,o,this.parseMaybeUnary(null,!1),"**",!1):o},s.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,i=this.parseExprAtom(e),r="ArrowFunctionExpression"===i.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);return this.checkExpressionErrors(e)||r?i:this.parseSubscripts(i,t,n)},s.parseSubscripts=function(e,t,n,r){for(;;)if(this.eat(i.types.dot)){var o=this.startNodeAt(t,n);o.object=e,o.property=this.parseIdent(!0),o.computed=!1,e=this.finishNode(o,"MemberExpression")}else if(this.eat(i.types.bracketL)){var o=this.startNodeAt(t,n);o.object=e,o.property=this.parseExpression(),o.computed=!0,this.expect(i.types.bracketR),e=this.finishNode(o,"MemberExpression")}else if(!r&&this.eat(i.types.parenL)){var o=this.startNodeAt(t,n);o.callee=e,o.arguments=this.parseExprList(i.types.parenR,!1),e=this.finishNode(o,"CallExpression")}else{if(this.type!==i.types.backQuote)return e;var o=this.startNodeAt(t,n);o.tag=e,o.quasi=this.parseTemplate(),e=this.finishNode(o,"TaggedTemplateExpression")}},s.parseExprAtom=function(e){var t=void 0,n=this.potentialArrowAt==this.start;switch(this.type){case i.types._super:this.inFunction||this.raise(this.start,"'super' outside of function or class");case i.types._this:var r=this.type===i.types._this?"ThisExpression":"Super";return t=this.startNode(),this.next(),this.finishNode(t,r);case i.types.name:var o=this.start,s=this.startLoc,a=this.parseIdent(this.type!==i.types.name);return n&&!this.canInsertSemicolon()&&this.eat(i.types.arrow)?this.parseArrowExpression(this.startNodeAt(o,s),[a]):a;case i.types.regexp:var l=this.value;return t=this.parseLiteral(l.value),t.regex={pattern:l.pattern,flags:l.flags},t;case i.types.num:case i.types.string:return this.parseLiteral(this.value);case i.types._null:case i.types._true:case i.types._false:return t=this.startNode(),t.value=this.type===i.types._null?null:this.type===i.types._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case i.types.parenL:return this.parseParenAndDistinguishExpression(n);case i.types.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(i.types.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case i.types.braceL:return this.parseObj(!1,e);case i.types._function:return t=this.startNode(),this.next(),this.parseFunction(t,!1);case i.types._class:return this.parseClass(this.startNode(),!1);case i.types._new:return this.parseNew();case i.types.backQuote:return this.parseTemplate();default:this.unexpected()}},s.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(t,"Literal")},s.parseParenExpression=function(){this.expect(i.types.parenL);var e=this.parseExpression();return this.expect(i.types.parenR),e},s.parseParenAndDistinguishExpression=function(e){var t=this.start,n=this.startLoc,r=void 0;if(this.options.ecmaVersion>=6){this.next();for(var s=this.start,a=this.startLoc,l=[],c=!0,h=new o.DestructuringErrors,d=void 0,u=void 0;this.type!==i.types.parenR;){if(c?c=!1:this.expect(i.types.comma),this.type===i.types.ellipsis){d=this.start,l.push(this.parseParenItem(this.parseRest()));break}this.type!==i.types.parenL||u||(u=this.start),l.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var p=this.start,f=this.startLoc;if(this.expect(i.types.parenR),e&&!this.canInsertSemicolon()&&this.eat(i.types.arrow))return this.checkPatternErrors(h,!0),u&&this.unexpected(u),this.parseParenArrowList(t,n,l);l.length||this.unexpected(this.lastTokStart),d&&this.unexpected(d),this.checkExpressionErrors(h,!0),l.length>1?(r=this.startNodeAt(s,a),r.expressions=l,this.finishNodeAt(r,"SequenceExpression",p,f)):r=l[0]}else r=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(t,n);return g.expression=r,this.finishNode(g,"ParenthesizedExpression")}return r},s.parseParenItem=function(e){return e},s.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var a=[];s.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(i.types.dot))return e.meta=t,e.property=this.parseIdent(!0),"target"!==e.property.name&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inFunction||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty");var n=this.start,r=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),n,r,!0),this.eat(i.types.parenL)?e.arguments=this.parseExprList(i.types.parenR,!1):e.arguments=a,this.finishNode(e,"NewExpression")},s.parseTemplateElement=function(){var e=this.startNode();return e.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),e.tail=this.type===i.types.backQuote,this.finishNode(e,"TemplateElement")},s.parseTemplate=function(){var e=this.startNode();this.next(),e.expressions=[];var t=this.parseTemplateElement();for(e.quasis=[t];!t.tail;)this.expect(i.types.dollarBraceL),e.expressions.push(this.parseExpression()),this.expect(i.types.braceR),e.quasis.push(t=this.parseTemplateElement());return this.next(),this.finishNode(e,"TemplateLiteral")},s.parseObj=function(e,t){var n=this.startNode(),r=!0,o={};for(n.properties=[],this.next();!this.eat(i.types.braceR);){if(r)r=!1;else if(this.expect(i.types.comma),this.afterTrailingComma(i.types.braceR))break;var s=this.startNode(),a=void 0,l=void 0,c=void 0;this.options.ecmaVersion>=6&&(s.method=!1,s.shorthand=!1,(e||t)&&(l=this.start,c=this.startLoc),e||(a=this.eat(i.types.star))),this.parsePropertyName(s),this.parsePropertyValue(s,e,a,l,c,t),this.checkPropClash(s,o),n.properties.push(this.finishNode(s,"Property"))}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},s.parsePropertyValue=function(e,t,n,r,o,s){if(this.eat(i.types.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,s),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===i.types.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n);else if(this.options.ecmaVersion>=5&&!e.computed&&"Identifier"===e.key.type&&("get"===e.key.name||"set"===e.key.name)&&this.type!=i.types.comma&&this.type!=i.types.braceR){(n||t)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var a="get"===e.kind?0:1;if(e.value.params.length!==a){var l=e.value.start;"get"===e.kind?this.raiseRecoverable(l,"getter should have no params"):this.raiseRecoverable(l,"setter should have exactly one param")}"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((this.keywords.test(e.key.name)||(this.strict?this.reservedWordsStrictBind:this.reservedWords).test(e.key.name)||this.inGenerator&&"yield"==e.key.name)&&this.raiseRecoverable(e.key.start,"'"+e.key.name+"' can not be used as shorthand property"),e.kind="init",t?e.value=this.parseMaybeDefault(r,o,e.key):this.type===i.types.eq&&s?(s.shorthandAssign||(s.shorthandAssign=this.start),e.value=this.parseMaybeDefault(r,o,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected()},s.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(i.types.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(i.types.bracketR),e.key;e.computed=!1}return e.key=this.type===i.types.num||this.type===i.types.string?this.parseExprAtom():this.parseIdent(!0)},s.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=!1,e.expression=!1)},s.parseMethod=function(e){var t=this.startNode(),n=this.inGenerator;return this.inGenerator=e,this.initFunction(t),this.expect(i.types.parenL),t.params=this.parseBindingList(i.types.parenR,!1,!1),this.options.ecmaVersion>=6&&(t.generator=e),this.parseFunctionBody(t,!1),this.inGenerator=n,this.finishNode(t,"FunctionExpression")},s.parseArrowExpression=function(e,t){var n=this.inGenerator;return this.inGenerator=!1,this.initFunction(e),e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0),this.inGenerator=n,this.finishNode(e,"ArrowFunctionExpression")},s.parseFunctionBody=function(e,t){var n=t&&this.type!==i.types.braceL;if(n)e.body=this.parseMaybeAssign(),e.expression=!0;else{var r=this.inFunction,o=this.labels;this.inFunction=!0,this.labels=[],e.body=this.parseBlock(!0),e.expression=!1,this.inFunction=r,this.labels=o}if(this.strict||!n&&e.body.body.length&&this.isUseStrict(e.body.body[0])){var s=this.strict;this.strict=!0,e.id&&this.checkLVal(e.id,!0),this.checkParams(e),this.strict=s}else t&&this.checkParams(e)},s.checkParams=function(e){for(var t={},n=0;n<e.params.length;n++)this.checkLVal(e.params[n],!0,t)},s.parseExprList=function(e,t,n,r){for(var o=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(i.types.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===i.types.comma?a=null:this.type===i.types.ellipsis?(a=this.parseSpread(r),this.type===i.types.comma&&r&&!r.trailingComma&&(r.trailingComma=this.lastTokStart)):a=this.parseMaybeAssign(!1,r),o.push(a)}return o},s.parseIdent=function(e){var t=this.startNode();return e&&"never"==this.options.allowReserved&&(e=!1),this.type===i.types.name?(!e&&(this.strict?this.reservedWordsStrict:this.reservedWords).test(this.value)&&(this.options.ecmaVersion>=6||-1==this.input.slice(this.start,this.end).indexOf("\\"))&&this.raiseRecoverable(this.start,"The keyword '"+this.value+"' is reserved"),!e&&this.inGenerator&&"yield"===this.value&&this.raiseRecoverable(this.start,"Can not use 'yield' as identifier inside a generator"),t.name=this.value):e&&this.type.keyword?t.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(t,"Identifier")},s.parseYield=function(){var e=this.startNode();return this.next(),this.type==i.types.semi||this.canInsertSemicolon()||this.type!=i.types.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(i.types.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,"YieldExpression")}},{"./parseutil":9,"./state":10,"./tokentype":14}],2:[function(e,t,n){function i(e,t){for(var n=65536,i=0;i<t.length;i+=2){if(n+=t[i],n>e)return!1;if(n+=t[i+1],n>=e)return!0}}function r(e,t){return 65>e?36===e:91>e?!0:97>e?95===e:123>e?!0:65535>=e?e>=170&&d.test(String.fromCharCode(e)):t===!1?!1:i(e,p)}function o(e,t){return 48>e?36===e:58>e?!0:65>e?!1:91>e?!0:97>e?95===e:123>e?!0:65535>=e?e>=170&&u.test(String.fromCharCode(e)):t===!1?!1:i(e,p)||i(e,f)}n.__esModule=!0,n.isIdentifierStart=r,n.isIdentifierChar=o;var s={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",7:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"};n.reservedWords=s;var a="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",l={5:a,6:a+" const class extends export import super"};n.keywords=l;var c="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢴऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿕ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞭꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",h="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఃా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഁ-ഃാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ູົຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭ᳲ-᳴᳸᳹᷀-᷵᷼-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣐-꣙꣠-꣱꤀-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",d=new RegExp("["+c+"]"),u=new RegExp("["+c+h+"]");
c=h=null;var p=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,17,26,6,37,11,29,3,35,5,7,2,4,43,157,99,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,26,45,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,785,52,76,44,33,24,27,35,42,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,287,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,25,391,63,32,0,449,56,1288,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,881,68,12,0,67,12,16481,1,3071,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,1340,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,10591,541],f=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,1306,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,52,0,13,2,49,13,10,2,4,9,83,11,168,11,6,9,7,3,57,0,2,6,3,1,3,2,10,0,11,1,3,6,4,4,316,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,423,9,20855,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,3617,6,792618,239]},{}],3:[function(e,t,n){function i(e,t){return new s.Parser(t,e).parse()}function r(e,t,n){var i=new s.Parser(n,e,t);return i.nextToken(),i.parseExpression()}function o(e,t){return new s.Parser(t,e)}n.__esModule=!0,n.parse=i,n.parseExpressionAt=r,n.tokenizer=o;var s=e("./state");e("./parseutil"),e("./statement"),e("./lval"),e("./expression"),e("./location"),n.Parser=s.Parser,n.plugins=s.plugins;var a=e("./options");n.defaultOptions=a.defaultOptions;var l=e("./locutil");n.Position=l.Position,n.SourceLocation=l.SourceLocation,n.getLineInfo=l.getLineInfo;var c=e("./node");n.Node=c.Node;var h=e("./tokentype");n.TokenType=h.TokenType,n.tokTypes=h.types;var d=e("./tokencontext");n.TokContext=d.TokContext,n.tokContexts=d.types;var u=e("./identifier");n.isIdentifierChar=u.isIdentifierChar,n.isIdentifierStart=u.isIdentifierStart;var p=e("./tokenize");n.Token=p.Token;var f=e("./whitespace");n.isNewLine=f.isNewLine,n.lineBreak=f.lineBreak,n.lineBreakG=f.lineBreakG;var g="3.1.0";n.version=g},{"./expression":1,"./identifier":2,"./location":4,"./locutil":5,"./lval":6,"./node":7,"./options":8,"./parseutil":9,"./state":10,"./statement":11,"./tokencontext":12,"./tokenize":13,"./tokentype":14,"./whitespace":16}],4:[function(e,t,n){"use strict";var i=e("./state"),r=e("./locutil"),o=i.Parser.prototype;o.raise=function(e,t){var n=r.getLineInfo(this.input,e);t+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(t);throw i.pos=e,i.loc=n,i.raisedAt=this.pos,i},o.raiseRecoverable=o.raise,o.curPosition=function(){return this.options.locations?new r.Position(this.curLine,this.pos-this.lineStart):void 0}},{"./locutil":5,"./state":10}],5:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=1,i=0;;){o.lineBreakG.lastIndex=i;var r=o.lineBreakG.exec(e);if(!(r&&r.index<t))return new s(n,t-i);++n,i=r.index+r[0].length}}n.__esModule=!0,n.getLineInfo=r;var o=e("./whitespace"),s=function(){function e(t,n){i(this,e),this.line=t,this.column=n}return e.prototype.offset=function(t){return new e(this.line,this.column+t)},e}();n.Position=s;var a=function l(e,t,n){i(this,l),this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};n.SourceLocation=a},{"./whitespace":16}],6:[function(e,t,n){"use strict";var i=e("./tokentype"),r=e("./state"),o=e("./util"),s=r.Parser.prototype;s.toAssignable=function(e,t){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":break;case"ObjectExpression":e.type="ObjectPattern";for(var n=0;n<e.properties.length;n++){var i=e.properties[n];"init"!==i.kind&&this.raise(i.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(i.value,t)}break;case"ArrayExpression":e.type="ArrayPattern",this.toAssignableList(e.elements,t);break;case"AssignmentExpression":if("="!==e.operator){this.raise(e.left.end,"Only '=' operator can be used for specifying default value.");break}e.type="AssignmentPattern",delete e.operator;case"AssignmentPattern":"YieldExpression"===e.right.type&&this.raise(e.right.start,"Yield expression cannot be a default value");break;case"ParenthesizedExpression":e.expression=this.toAssignable(e.expression,t);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}return e},s.toAssignableList=function(e,t){var n=e.length;if(n){var i=e[n-1];if(i&&"RestElement"==i.type)--n;else if(i&&"SpreadElement"==i.type){i.type="RestElement";var r=i.argument;this.toAssignable(r,t),"Identifier"!==r.type&&"MemberExpression"!==r.type&&"ArrayPattern"!==r.type&&this.unexpected(r.start),--n}t&&"RestElement"===i.type&&"Identifier"!==i.argument.type&&this.unexpected(i.argument.start)}for(var o=0;n>o;o++){var s=e[o];s&&this.toAssignable(s,t)}return e},s.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(e),this.finishNode(t,"SpreadElement")},s.parseRest=function(e){var t=this.startNode();return this.next(),e?t.argument=this.type===i.types.name?this.parseIdent():this.unexpected():t.argument=this.type===i.types.name||this.type===i.types.bracketL?this.parseBindingAtom():this.unexpected(),this.finishNode(t,"RestElement")},s.parseBindingAtom=function(){if(this.options.ecmaVersion<6)return this.parseIdent();switch(this.type){case i.types.name:return this.parseIdent();case i.types.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(i.types.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case i.types.braceL:return this.parseObj(!0);default:this.unexpected()}},s.parseBindingList=function(e,t,n,r){for(var o=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(i.types.comma),t&&this.type===i.types.comma)o.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===i.types.ellipsis){var a=this.parseRest(r);this.parseBindingListItem(a),o.push(a),this.type===i.types.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var l=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(l),o.push(l)}return o},s.parseBindingListItem=function(e){return e},s.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(i.types.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},s.checkLVal=function(e,t,n){switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(o.has(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0);break;case"MemberExpression":t&&this.raiseRecoverable(e.start,(t?"Binding":"Assigning to")+" member expression");break;case"ObjectPattern":for(var i=0;i<e.properties.length;i++)this.checkLVal(e.properties[i].value,t,n);break;case"ArrayPattern":for(var i=0;i<e.elements.length;i++){var r=e.elements[i];r&&this.checkLVal(r,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}}},{"./state":10,"./tokentype":14,"./util":15}],7:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n,i){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=i),this.options.ranges&&(e.range[1]=n),e}n.__esModule=!0;var o=e("./state"),s=e("./locutil"),a=function c(e,t,n){i(this,c),this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new s.SourceLocation(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])};n.Node=a;var l=o.Parser.prototype;l.startNode=function(){return new a(this,this.start,this.startLoc)},l.startNodeAt=function(e,t){return new a(this,e,t)},l.finishNode=function(e,t){return r.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},l.finishNodeAt=function(e,t,n,i){return r.call(this,e,t,n,i)}},{"./locutil":5,"./state":10}],8:[function(e,t,n){"use strict";function i(e){var t={};for(var n in a)t[n]=e&&o.has(e,n)?e[n]:a[n];return null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),o.isArray(t.onToken)&&!function(){var e=t.onToken;t.onToken=function(t){return e.push(t)}}(),o.isArray(t.onComment)&&(t.onComment=r(t,t.onComment)),t}function r(e,t){return function(n,i,r,o,a,l){var c={type:n?"Block":"Line",value:i,start:r,end:o};e.locations&&(c.loc=new s.SourceLocation(this,a,l)),e.ranges&&(c.range=[r,o]),t.push(c)}}n.__esModule=!0,n.getOptions=i;var o=e("./util"),s=e("./locutil"),a={ecmaVersion:6,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}};n.defaultOptions=a},{"./locutil":5,"./util":15}],9:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=e("./tokentype"),o=e("./state"),s=e("./whitespace"),a=o.Parser.prototype;a.isUseStrict=function(e){return this.options.ecmaVersion>=5&&"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"use strict"===e.expression.raw.slice(1,-1)},a.eat=function(e){return this.type===e?(this.next(),!0):!1},a.isContextual=function(e){return this.type===r.types.name&&this.value===e},a.eatContextual=function(e){return this.value===e&&this.eat(r.types.name)},a.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},a.canInsertSemicolon=function(){return this.type===r.types.eof||this.type===r.types.braceR||s.lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},a.insertSemicolon=function(){return this.canInsertSemicolon()?(this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0):void 0},a.semicolon=function(){this.eat(r.types.semi)||this.insertSemicolon()||this.unexpected()},a.afterTrailingComma=function(e){return this.type==e?(this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),this.next(),!0):void 0},a.expect=function(e){this.eat(e)||this.unexpected()},a.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")};var l=function c(){i(this,c),this.shorthandAssign=0,this.trailingComma=0};n.DestructuringErrors=l,a.checkPatternErrors=function(e,t){var n=e&&e.trailingComma;return t?void(n&&this.raise(n,"Comma is not permitted after the rest element")):!!n},a.checkExpressionErrors=function(e,t){var n=e&&e.shorthandAssign;return t?void(n&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns")):!!n}},{"./state":10,"./tokentype":14,"./whitespace":16}],10:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return new RegExp("^("+e.replace(/ /g,"|")+")$")}n.__esModule=!0;var o=e("./identifier"),s=e("./tokentype"),a=e("./whitespace"),l=e("./options"),c={};n.plugins=c;var h=function(){function e(t,n,c){i(this,e),this.options=t=l.getOptions(t),this.sourceFile=t.sourceFile,this.keywords=r(o.keywords[t.ecmaVersion>=6?6:5]);var h=t.allowReserved?"":o.reservedWords[t.ecmaVersion]+("module"==t.sourceType?" await":"");this.reservedWords=r(h);var d=(h?h+" ":"")+o.reservedWords.strict;this.reservedWordsStrict=r(d),this.reservedWordsStrictBind=r(d+" "+o.reservedWords.strictBind),this.input=String(n),this.containsEsc=!1,this.loadPlugins(t.plugins),c?(this.pos=c,this.lineStart=Math.max(0,this.input.lastIndexOf("\n",c)),this.curLine=this.input.slice(0,this.lineStart).split(a.lineBreak).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=s.types.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.strict=this.inModule="module"===t.sourceType,this.potentialArrowAt=-1,this.inFunction=this.inGenerator=!1,this.labels=[],0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2)}return e.prototype.isKeyword=function(e){return this.keywords.test(e)},e.prototype.isReservedWord=function(e){return this.reservedWords.test(e)},e.prototype.extend=function(e,t){this[e]=t(this[e])},e.prototype.loadPlugins=function(e){for(var t in e){var n=c[t];if(!n)throw new Error("Plugin '"+t+"' not found");n(this,e[t])}},e.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},e}();n.Parser=h},{"./identifier":2,"./options":8,"./tokentype":14,"./whitespace":16}],11:[function(e,t,n){"use strict";var i=e("./tokentype"),r=e("./state"),o=e("./whitespace"),s=e("./identifier"),a=e("./parseutil"),l=r.Parser.prototype;l.parseTopLevel=function(e){var t=!0;for(e.body||(e.body=[]);this.type!==i.types.eof;){var n=this.parseStatement(!0,!0);e.body.push(n),t&&(this.isUseStrict(n)&&this.setStrict(!0),t=!1)}return this.next(),this.options.ecmaVersion>=6&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")};var c={kind:"loop"},h={kind:"switch"};l.isLet=function(){if(this.type!==i.types.name||this.options.ecmaVersion<6||"let"!=this.value)return!1;o.skipWhiteSpace.lastIndex=this.pos;var e=o.skipWhiteSpace.exec(this.input),t=this.pos+e[0].length,n=this.input.charCodeAt(t);if(91===n||123==n)return!0;if(s.isIdentifierStart(n,!0)){for(var r=t+1;s.isIdentifierChar(this.input.charCodeAt(r,!0));++r);var a=this.input.slice(t,r);if(!this.isKeyword(a))return!0}return!1},l.parseStatement=function(e,t){var n=this.type,r=this.startNode(),o=void 0;switch(this.isLet()&&(n=i.types._var,o="let"),n){case i.types._break:case i.types._continue:return this.parseBreakContinueStatement(r,n.keyword);case i.types._debugger:return this.parseDebuggerStatement(r);case i.types._do:return this.parseDoStatement(r);case i.types._for:return this.parseForStatement(r);case i.types._function:return!e&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(r);case i.types._class:return e||this.unexpected(),this.parseClass(r,!0);case i.types._if:return this.parseIfStatement(r);case i.types._return:return this.parseReturnStatement(r);case i.types._switch:return this.parseSwitchStatement(r);case i.types._throw:return this.parseThrowStatement(r);case i.types._try:return this.parseTryStatement(r);case i.types._const:case i.types._var:return o=o||this.value,e||"var"==o||this.unexpected(),this.parseVarStatement(r,o);case i.types._while:return this.parseWhileStatement(r);case i.types._with:return this.parseWithStatement(r);case i.types.braceL:return this.parseBlock();case i.types.semi:return this.parseEmptyStatement(r);case i.types._export:case i.types._import:return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),n===i.types._import?this.parseImport(r):this.parseExport(r);default:var s=this.value,a=this.parseExpression();return n===i.types.name&&"Identifier"===a.type&&this.eat(i.types.colon)?this.parseLabeledStatement(r,s,a):this.parseExpressionStatement(r,a)}},l.parseBreakContinueStatement=function(e,t){var n="break"==t;this.next(),this.eat(i.types.semi)||this.insertSemicolon()?e.label=null:this.type!==i.types.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var o=this.labels[r];if(null==e.label||o.name===e.label.name){if(null!=o.kind&&(n||"loop"===o.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},l.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},l.parseDoStatement=function(e){return this.next(),this.labels.push(c),e.body=this.parseStatement(!1),this.labels.pop(),this.expect(i.types._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(i.types.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},l.parseForStatement=function(e){if(this.next(),this.labels.push(c),this.expect(i.types.parenL),this.type===i.types.semi)return this.parseFor(e,null);var t=this.isLet();if(this.type===i.types._var||this.type===i.types._const||t){var n=this.startNode(),r=t?"let":this.value;return this.next(),this.parseVar(n,!0,r),this.finishNode(n,"VariableDeclaration"),!(this.type===i.types._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==n.declarations.length||"var"!==r&&n.declarations[0].init?this.parseFor(e,n):this.parseForIn(e,n)}var o=new a.DestructuringErrors,s=this.parseExpression(!0,o);return this.type===i.types._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.checkPatternErrors(o,!0),this.toAssignable(s),this.checkLVal(s),this.parseForIn(e,s)):(this.checkExpressionErrors(o,!0),this.parseFor(e,s))},l.parseFunctionStatement=function(e){return this.next(),this.parseFunction(e,!0)},l.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement(!1),e.alternate=this.eat(i.types._else)?this.parseStatement(!1):null,this.finishNode(e,"IfStatement")},l.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(i.types.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},l.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(i.types.braceL),this.labels.push(h);for(var t,n=!1;this.type!=i.types.braceR;)if(this.type===i.types._case||this.type===i.types._default){var r=this.type===i.types._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(i.types.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(!0));return t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},l.parseThrowStatement=function(e){return this.next(),o.lineBreak.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var d=[];l.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===i.types._catch){var t=this.startNode();this.next(),this.expect(i.types.parenL),t.param=this.parseBindingAtom(),this.checkLVal(t.param,!0),this.expect(i.types.parenR),t.body=this.parseBlock(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(i.types._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},l.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},l.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(c),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,"WhileStatement")},l.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement(!1),this.finishNode(e,"WithStatement")},l.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},l.parseLabeledStatement=function(e,t,n){for(var r=0;r<this.labels.length;++r)this.labels[r].name===t&&this.raise(n.start,"Label '"+t+"' is already declared");for(var o=this.type.isLoop?"loop":this.type===i.types._switch?"switch":null,r=this.labels.length-1;r>=0;r--){var s=this.labels[r];if(s.statementStart!=e.start)break;s.statementStart=this.start,s.kind=o}return this.labels.push({name:t,kind:o,statementStart:this.start}),e.body=this.parseStatement(!0),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},l.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},l.parseBlock=function(e){var t=this.startNode(),n=!0,r=void 0;for(t.body=[],this.expect(i.types.braceL);!this.eat(i.types.braceR);){var o=this.parseStatement(!0);t.body.push(o),n&&e&&this.isUseStrict(o)&&(r=this.strict,this.setStrict(this.strict=!0)),n=!1}return r===!1&&this.setStrict(!1),this.finishNode(t,"BlockStatement")},l.parseFor=function(e,t){return e.init=t,this.expect(i.types.semi),e.test=this.type===i.types.semi?null:this.parseExpression(),this.expect(i.types.semi),e.update=this.type===i.types.parenR?null:this.parseExpression(),this.expect(i.types.parenR),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,"ForStatement")},l.parseForIn=function(e,t){var n=this.type===i.types._in?"ForInStatement":"ForOfStatement";return this.next(),e.left=t,e.right=this.parseExpression(),this.expect(i.types.parenR),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,n)},l.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r),this.eat(i.types.eq)?r.init=this.parseMaybeAssign(t):"const"!==n||this.type===i.types._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"==r.id.type||t&&(this.type===i.types._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(i.types.comma))break}return e},l.parseVarId=function(e){e.id=this.parseBindingAtom(),this.checkLVal(e.id,!0)},l.parseFunction=function(e,t,n){this.initFunction(e),this.options.ecmaVersion>=6&&(e.generator=this.eat(i.types.star));var r=this.inGenerator;return this.inGenerator=e.generator,(t||this.type===i.types.name)&&(e.id=this.parseIdent()),this.parseFunctionParams(e),this.parseFunctionBody(e,n),this.inGenerator=r,this.finishNode(e,t?"FunctionDeclaration":"FunctionExpression")},l.parseFunctionParams=function(e){this.expect(i.types.parenL),e.params=this.parseBindingList(i.types.parenR,!1,!1,!0)},l.parseClass=function(e,t){this.next(),this.parseClassId(e,t),this.parseClassSuper(e);var n=this.startNode(),r=!1;for(n.body=[],this.expect(i.types.braceL);!this.eat(i.types.braceR);)if(!this.eat(i.types.semi)){var o=this.startNode(),s=this.eat(i.types.star),a=this.type===i.types.name&&"static"===this.value;this.parsePropertyName(o),o["static"]=a&&this.type!==i.types.parenL,o["static"]&&(s&&this.unexpected(),s=this.eat(i.types.star),this.parsePropertyName(o)),o.kind="method";var l=!1;if(!o.computed){var c=o.key;s||"Identifier"!==c.type||this.type===i.types.parenL||"get"!==c.name&&"set"!==c.name||(l=!0,o.kind=c.name,c=this.parsePropertyName(o)),!o["static"]&&("Identifier"===c.type&&"constructor"===c.name||"Literal"===c.type&&"constructor"===c.value)&&(r&&this.raise(c.start,"Duplicate constructor in the same class"),l&&this.raise(c.start,"Constructor can't have get/set modifier"),s&&this.raise(c.start,"Constructor can't be a generator"),o.kind="constructor",r=!0)}if(this.parseClassMethod(n,o,s),l){var h="get"===o.kind?0:1;if(o.value.params.length!==h){var d=o.value.start;"get"===o.kind?this.raiseRecoverable(d,"getter should have no params"):this.raiseRecoverable(d,"setter should have exactly one param")}"set"===o.kind&&"RestElement"===o.value.params[0].type&&this.raise(o.value.params[0].start,"Setter cannot use rest params")}}return e.body=this.finishNode(n,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},l.parseClassMethod=function(e,t,n){t.value=this.parseMethod(n),e.body.push(this.finishNode(t,"MethodDefinition"))},l.parseClassId=function(e,t){e.id=this.type===i.types.name?this.parseIdent():t?this.unexpected():null},l.parseClassSuper=function(e){e.superClass=this.eat(i.types._extends)?this.parseExprSubscripts():null},l.parseExport=function(e){if(this.next(),this.eat(i.types.star))return this.expectContextual("from"),e.source=this.type===i.types.string?this.parseExprAtom():this.unexpected(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(i.types._default)){var t=this.type==i.types.parenL,n=this.parseMaybeAssign(),r=!0;return t||"FunctionExpression"!=n.type&&"ClassExpression"!=n.type||(r=!1,n.id&&(n.type="FunctionExpression"==n.type?"FunctionDeclaration":"ClassDeclaration")),e.declaration=n,r&&this.semicolon(),this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(!0),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(),this.eatContextual("from"))e.source=this.type===i.types.string?this.parseExprAtom():this.unexpected();else{for(var o=0;o<e.specifiers.length;o++)(this.keywords.test(e.specifiers[o].local.name)||this.reservedWords.test(e.specifiers[o].local.name))&&this.unexpected(e.specifiers[o].local.start);e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},l.shouldParseExportStatement=function(){return this.type.keyword||this.isLet()},l.parseExportSpecifiers=function(){var e=[],t=!0;for(this.expect(i.types.braceL);!this.eat(i.types.braceR);){if(t)t=!1;else if(this.expect(i.types.comma),this.afterTrailingComma(i.types.braceR))break;var n=this.startNode();n.local=this.parseIdent(this.type===i.types._default),n.exported=this.eatContextual("as")?this.parseIdent(!0):n.local,e.push(this.finishNode(n,"ExportSpecifier"))}return e},l.parseImport=function(e){return this.next(),this.type===i.types.string?(e.specifiers=d,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===i.types.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},l.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===i.types.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,!0),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(i.types.comma))return e}if(this.type===i.types.star){var n=this.startNode();return this.next(),this.expectContextual("as"),n.local=this.parseIdent(),this.checkLVal(n.local,!0),e.push(this.finishNode(n,"ImportNamespaceSpecifier")),e}for(this.expect(i.types.braceL);!this.eat(i.types.braceR);){if(t)t=!1;else if(this.expect(i.types.comma),this.afterTrailingComma(i.types.braceR))break;var n=this.startNode();n.imported=this.parseIdent(!0),this.eatContextual("as")?n.local=this.parseIdent():(n.local=n.imported,this.isKeyword(n.local.name)&&this.unexpected(n.local.start),this.reservedWordsStrict.test(n.local.name)&&this.raise(n.local.start,"The keyword '"+n.local.name+"' is reserved")),this.checkLVal(n.local,!0),e.push(this.finishNode(n,"ImportSpecifier"))}return e}},{"./identifier":2,"./parseutil":9,"./state":10,"./tokentype":14,"./whitespace":16}],12:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=e("./state"),o=e("./tokentype"),s=e("./whitespace"),a=function h(e,t,n,r){i(this,h),this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r};n.TokContext=a;var l={b_stat:new a("{",!1),b_expr:new a("{",!0),b_tmpl:new a("${",!0),p_stat:new a("(",!1),p_expr:new a("(",!0),q_tmpl:new a("`",!0,!0,function(e){return e.readTmplToken()}),f_expr:new a("function",!0)};n.types=l;var c=r.Parser.prototype;c.initialContext=function(){return[l.b_stat]},c.braceIsBlock=function(e){if(e===o.types.colon){var t=this.curContext();if(t===l.b_stat||t===l.b_expr)return!t.isExpr}return e===o.types._return?s.lineBreak.test(this.input.slice(this.lastTokEnd,this.start)):e===o.types._else||e===o.types.semi||e===o.types.eof||e===o.types.parenR?!0:e==o.types.braceL?this.curContext()===l.b_stat:!this.exprAllowed},c.updateContext=function(e){var t=void 0,n=this.type;n.keyword&&e==o.types.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},o.types.parenR.updateContext=o.types.braceR.updateContext=function(){if(1==this.context.length)return void(this.exprAllowed=!0);var e=this.context.pop();e===l.b_stat&&this.curContext()===l.f_expr?(this.context.pop(),this.exprAllowed=!1):e===l.b_tmpl?this.exprAllowed=!0:this.exprAllowed=!e.isExpr},o.types.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?l.b_stat:l.b_expr),this.exprAllowed=!0},o.types.dollarBraceL.updateContext=function(){this.context.push(l.b_tmpl),this.exprAllowed=!0},o.types.parenL.updateContext=function(e){var t=e===o.types._if||e===o.types._for||e===o.types._with||e===o.types._while;this.context.push(t?l.p_stat:l.p_expr),this.exprAllowed=!0},o.types.incDec.updateContext=function(){},o.types._function.updateContext=function(e){!e.beforeExpr||e===o.types.semi||e===o.types._else||e===o.types.colon&&this.curContext()===l.b_stat||this.context.push(l.f_expr),this.exprAllowed=!1},o.types.backQuote.updateContext=function(){this.curContext()===l.q_tmpl?this.context.pop():this.context.push(l.q_tmpl),this.exprAllowed=!1}},{"./state":10,"./tokentype":14,"./whitespace":16}],13:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n,i){try{return new RegExp(e,t)}catch(r){if(void 0!==n)throw r instanceof SyntaxError&&i.raise(n,"Error parsing regular expression: "+r.message),r}}function o(e){return 65535>=e?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(1023&e)+56320))}n.__esModule=!0;var s=e("./identifier"),a=e("./tokentype"),l=e("./state"),c=e("./locutil"),h=e("./whitespace"),d=function g(e){i(this,g),this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new c.SourceLocation(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])};n.Token=d;var u=l.Parser.prototype,p="object"==typeof Packages&&"[object JavaPackage]"==Object.prototype.toString.call(Packages);u.next=function(){this.options.onToken&&this.options.onToken(new d(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},u.getToken=function(){return this.next(),new d(this)},"undefined"!=typeof Symbol&&(u[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===a.types.eof,value:t}}}}),u.setStrict=function(e){if(this.strict=e,this.type===a.types.num||this.type===a.types.string){if(this.pos=this.start,this.options.locations)for(;this.pos<this.lineStart;)this.lineStart=this.input.lastIndexOf("\n",this.lineStart-2)+1,--this.curLine;this.nextToken()}},u.curContext=function(){return this.context[this.context.length-1]},u.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(a.types.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},u.readToken=function(e){
return s.isIdentifierStart(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},u.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(55295>=e||e>=57344)return e;var t=this.input.charCodeAt(this.pos+1);return(e<<10)+t-56613888},u.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations){h.lineBreakG.lastIndex=t;for(var i=void 0;(i=h.lineBreakG.exec(this.input))&&i.index<this.pos;)++this.curLine,this.lineStart=i.index+i[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())},u.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&10!==i&&13!==i&&8232!==i&&8233!==i;)++this.pos,i=this.input.charCodeAt(this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},u.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&14>e||e>=5760&&h.nonASCIIwhitespace.test(String.fromCharCode(e))))break e;++this.pos}}},u.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},u.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&57>=e)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(a.types.ellipsis)):(++this.pos,this.finishToken(a.types.dot))},u.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(a.types.assign,2):this.finishOp(a.types.slash,1)},u.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,i=42===e?a.types.star:a.types.modulo;return this.options.ecmaVersion>=7&&42===t&&(++n,i=a.types.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(a.types.assign,n+1):this.finishOp(i,n)},u.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?a.types.logicalOR:a.types.logicalAND,2):61===t?this.finishOp(a.types.assign,2):this.finishOp(124===e?a.types.bitwiseOR:a.types.bitwiseAND,1)},u.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(a.types.assign,2):this.finishOp(a.types.bitwiseXOR,1)},u.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45==t&&62==this.input.charCodeAt(this.pos+2)&&h.lineBreak.test(this.input.slice(this.lastTokEnd,this.pos))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(a.types.incDec,2):61===t?this.finishOp(a.types.assign,2):this.finishOp(a.types.plusMin,1)},u.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(a.types.assign,n+1):this.finishOp(a.types.bitShift,n)):33==t&&60==e&&45==this.input.charCodeAt(this.pos+2)&&45==this.input.charCodeAt(this.pos+3)?(this.inModule&&this.unexpected(),this.skipLineComment(4),this.skipSpace(),this.nextToken()):(61===t&&(n=2),this.finishOp(a.types.relational,n))},u.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(a.types.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(a.types.arrow)):this.finishOp(61===e?a.types.eq:a.types.prefix,1)},u.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(a.types.parenL);case 41:return++this.pos,this.finishToken(a.types.parenR);case 59:return++this.pos,this.finishToken(a.types.semi);case 44:return++this.pos,this.finishToken(a.types.comma);case 91:return++this.pos,this.finishToken(a.types.bracketL);case 93:return++this.pos,this.finishToken(a.types.bracketR);case 123:return++this.pos,this.finishToken(a.types.braceL);case 125:return++this.pos,this.finishToken(a.types.braceR);case 58:return++this.pos,this.finishToken(a.types.colon);case 63:return++this.pos,this.finishToken(a.types.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(a.types.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(a.types.prefix,1)}this.raise(this.pos,"Unexpected character '"+o(e)+"'")},u.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};var f=!!r("￿","u");u.readRegexp=function(){for(var e=this,t=void 0,n=void 0,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var o=this.input.charAt(this.pos);if(h.lineBreak.test(o)&&this.raise(i,"Unterminated regular expression"),t)t=!1;else{if("["===o)n=!0;else if("]"===o&&n)n=!1;else if("/"===o&&!n)break;t="\\"===o}++this.pos}var s=this.input.slice(i,this.pos);++this.pos;var l=this.readWord1(),c=s,d="";if(l){var u=/^[gim]*$/;this.options.ecmaVersion>=6&&(u=/^[gimuy]*$/),u.test(l)||this.raise(i,"Invalid regular expression flag"),l.indexOf("u")>=0&&(f?d="u":(c=c.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(t,n,r){return n=Number("0x"+n),n>1114111&&e.raise(i+r+3,"Code point out of bounds"),"x"}),c=c.replace(/\\u([a-fA-F0-9]{4})|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"),d=d.replace("u","")))}var g=null;return p||(r(c,d,i,this),g=r(s,l)),this.finishToken(a.types.regexp,{pattern:s,flags:l,value:g})},u.readInt=function(e,t){for(var n=this.pos,i=0,r=0,o=null==t?1/0:t;o>r;++r){var s=this.input.charCodeAt(this.pos),a=void 0;if(a=s>=97?s-97+10:s>=65?s-65+10:s>=48&&57>=s?s-48:1/0,a>=e)break;++this.pos,i=i*e+a}return this.pos===n||null!=t&&this.pos-n!==t?null:i},u.readRadixNumber=function(e){this.pos+=2;var t=this.readInt(e);return null==t&&this.raise(this.start+2,"Expected number in radix "+e),s.isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(a.types.num,t)},u.readNumber=function(e){var t=this.pos,n=!1,i=48===this.input.charCodeAt(this.pos);e||null!==this.readInt(10)||this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);46===r&&(++this.pos,this.readInt(10),n=!0,r=this.input.charCodeAt(this.pos)),(69===r||101===r)&&(r=this.input.charCodeAt(++this.pos),(43===r||45===r)&&++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number"),n=!0),s.isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var o=this.input.slice(t,this.pos),l=void 0;return n?l=parseFloat(o):i&&1!==o.length?/[89]/.test(o)||this.strict?this.raise(t,"Invalid number"):l=parseInt(o,8):l=parseInt(o,10),this.finishToken(a.types.num,l)},u.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t=void 0;if(123===e){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.raise(n,"Code point out of bounds")}else t=this.readHexChar(4);return t},u.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===e)break;92===i?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):(h.isNewLine(i)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(a.types.string,t)},u.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos===this.start&&this.type===a.types.template?36===n?(this.pos+=2,this.finishToken(a.types.dollarBraceL)):(++this.pos,this.finishToken(a.types.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(a.types.template,e));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(h.isNewLine(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},u.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return o(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\x0B";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&55>=t){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(n,8);return i>255&&(n=n.slice(0,-1),i=parseInt(n,8)),"0"!==n&&(this.strict||e)&&this.raise(this.pos-2,"Octal literal in strict mode"),this.pos+=n.length-1,String.fromCharCode(i)}return String.fromCharCode(t)}},u.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.raise(t,"Bad character escape sequence"),n},u.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(s.isIdentifierChar(r,i))this.pos+=65535>=r?1:2;else{if(92!==r)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var a=this.pos;117!=this.input.charCodeAt(++this.pos)&&this.raise(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var l=this.readCodePoint();(t?s.isIdentifierStart:s.isIdentifierChar)(l,i)||this.raise(a,"Invalid Unicode escape"),e+=o(l),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},u.readWord=function(){var e=this.readWord1(),t=a.types.name;return(this.options.ecmaVersion>=6||!this.containsEsc)&&this.keywords.test(e)&&(t=a.keywords[e]),this.finishToken(t,e)}},{"./identifier":2,"./locutil":5,"./state":10,"./tokentype":14,"./whitespace":16}],14:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){return new s(e,{beforeExpr:!0,binop:t})}function o(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t.keyword=e,h[e]=c["_"+e]=new s(e,t)}n.__esModule=!0;var s=function d(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];i(this,d),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};n.TokenType=s;var a={beforeExpr:!0},l={startsExpr:!0},c={num:new s("num",l),regexp:new s("regexp",l),string:new s("string",l),name:new s("name",l),eof:new s("eof"),bracketL:new s("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new s("]"),braceL:new s("{",{beforeExpr:!0,startsExpr:!0}),braceR:new s("}"),parenL:new s("(",{beforeExpr:!0,startsExpr:!0}),parenR:new s(")"),comma:new s(",",a),semi:new s(";",a),colon:new s(":",a),dot:new s("."),question:new s("?",a),arrow:new s("=>",a),template:new s("template"),ellipsis:new s("...",a),backQuote:new s("`",l),dollarBraceL:new s("${",{beforeExpr:!0,startsExpr:!0}),eq:new s("=",{beforeExpr:!0,isAssign:!0}),assign:new s("_=",{beforeExpr:!0,isAssign:!0}),incDec:new s("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new s("prefix",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:r("||",1),logicalAND:r("&&",2),bitwiseOR:r("|",3),bitwiseXOR:r("^",4),bitwiseAND:r("&",5),equality:r("==/!=",6),relational:r("</>",7),bitShift:r("<</>>",8),plusMin:new s("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:r("%",10),star:r("*",10),slash:r("/",10),starstar:new s("**",{beforeExpr:!0})};n.types=c;var h={};n.keywords=h,o("break"),o("case",a),o("catch"),o("continue"),o("debugger"),o("default",a),o("do",{isLoop:!0,beforeExpr:!0}),o("else",a),o("finally"),o("for",{isLoop:!0}),o("function",l),o("if"),o("return",a),o("switch"),o("throw",a),o("try"),o("var"),o("const"),o("while",{isLoop:!0}),o("with"),o("new",{beforeExpr:!0,startsExpr:!0}),o("this",l),o("super",l),o("class"),o("extends",a),o("export"),o("import"),o("null",l),o("true",l),o("false",l),o("in",{beforeExpr:!0,binop:7}),o("instanceof",{beforeExpr:!0,binop:7}),o("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),o("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),o("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},{}],15:[function(e,t,n){"use strict";function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.__esModule=!0,n.isArray=i,n.has=r},{}],16:[function(e,t,n){function i(e){return 10===e||13===e||8232===e||8233==e}n.__esModule=!0,n.isNewLine=i;var r=/\r\n?|\n|\u2028|\u2029/;n.lineBreak=r;var o=new RegExp(r.source,"g");n.lineBreakG=o;var s=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/;n.nonASCIIwhitespace=s;var a=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g;n.skipWhiteSpace=a},{}]},{},[3])(3)}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof n&&n.amd)n("estraverse/estraverse",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.estraverse=e()}}(function(){return function e(n,i,r){function o(a,l){if(!i[a]){if(!n[a]){var c="function"==typeof t&&t;if(!l&&c)return c(a,!0);if(s)return s(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var d=i[a]={exports:{}};n[a][0].call(d.exports,function(e){var t=n[a][1][e];return o(t?t:e)},d,d.exports,e,n,i,r)}return i[a].exports}for(var s="function"==typeof t&&t,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){!function i(t){"use strict";function n(){}function r(e){var t,n,i={};for(t in e)e.hasOwnProperty(t)&&(n=e[t],"object"==typeof n&&null!==n?i[t]=r(n):i[t]=n);return i}function o(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function s(e,t){var n,i,r,o;for(i=e.length,r=0;i;)n=i>>>1,o=r+n,t(e[o])?i=n:(r=o+1,i-=n+1);return r}function a(e,t){var n,i,r,o;for(i=e.length,r=0;i;)n=i>>>1,o=r+n,t(e[o])?(r=o+1,i-=n+1):i=n;return r}function l(e,t){var n,i,r,o=C(t);for(i=0,r=o.length;r>i;i+=1)n=o[i],e[n]=t[n];return e}function c(e,t){this.parent=e,this.key=t}function h(e,t,n,i){this.node=e,this.path=t,this.wrap=n,this.ref=i}function d(){}function u(e){return null==e?!1:"object"==typeof e&&"string"==typeof e.type}function p(e,t){return(e===_.ObjectExpression||e===_.ObjectPattern)&&"properties"===t}function f(e,t){var n=new d;return n.traverse(e,t)}function g(e,t){var n=new d;return n.replace(e,t)}function m(e,t){var n;return n=s(t,function(t){return t.range[0]>e.range[0]}),e.extendedRange=[e.range[0],e.range[1]],n!==t.length&&(e.extendedRange[1]=t[n].range[0]),n-=1,n>=0&&(e.extendedRange[0]=t[n].range[1]),e}function v(e,t,n){var i,o,s,a,l=[];if(!e.range)throw new Error("attachComments needs range information");if(!n.length){if(t.length){for(s=0,o=t.length;o>s;s+=1)i=r(t[s]),i.extendedRange=[0,e.range[0]],l.push(i);e.leadingComments=l}return e}for(s=0,o=t.length;o>s;s+=1)l.push(m(r(t[s]),n));return a=0,f(e,{enter:function(e){for(var t;a<l.length&&(t=l[a],!(t.extendedRange[1]>e.range[0]));)t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),l.splice(a,1)):a+=1;return a===l.length?x.Break:l[a].extendedRange[0]>e.range[1]?x.Skip:void 0}}),a=0,f(e,{leave:function(e){for(var t;a<l.length&&(t=l[a],!(e.range[1]<t.extendedRange[0]));)e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),l.splice(a,1)):a+=1;return a===l.length?x.Break:l[a].extendedRange[0]>e.range[1]?x.Skip:void 0}}),e}var _,y,x,w,b,C,E,T,S;return y=Array.isArray,y||(y=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),n(o),n(a),b=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}(),C=Object.keys||function(e){var t,n=[];for(t in e)n.push(t);return n},_={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},w={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["local","exported"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","defaults","body"],FunctionExpression:["id","params","defaults","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},E={},T={},S={},x={Break:E,Skip:T,Remove:S},c.prototype.replace=function(e){this.parent[this.key]=e},c.prototype.remove=function(){return y(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},d.prototype.path=function(){function e(e,t){if(y(t))for(i=0,r=t.length;r>i;++i)e.push(t[i]);else e.push(t)}var t,n,i,r,o,s;if(!this.__current.path)return null;for(o=[],t=2,n=this.__leavelist.length;n>t;++t)s=this.__leavelist[t],e(o,s.path);return e(o,this.__current.path),o},d.prototype.type=function(){var e=this.current();return e.type||this.__current.wrap},d.prototype.parents=function(){var e,t,n;for(n=[],e=1,t=this.__leavelist.length;t>e;++e)n.push(this.__leavelist[e].node);return n},d.prototype.current=function(){return this.__current.node},d.prototype.__execute=function(e,t){var n,i;return i=void 0,n=this.__current,this.__current=t,this.__state=null,e&&(i=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=n,i},d.prototype.notify=function(e){this.__state=e},d.prototype.skip=function(){this.notify(T)},d.prototype["break"]=function(){this.notify(E)},d.prototype.remove=function(){this.notify(S)},d.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback="iteration"===t.fallback,this.__keys=w,t.keys&&(this.__keys=l(b(this.__keys),t.keys))},d.prototype.traverse=function(e,t){var n,i,r,o,s,a,l,c,d,f,g,m;for(this.__initialize(e,t),m={},n=this.__worklist,i=this.__leavelist,n.push(new h(e,null,null,null)),i.push(new h(null,null,null,null));n.length;)if(r=n.pop(),r!==m){if(r.node){if(a=this.__execute(t.enter,r),this.__state===E||a===E)return;if(n.push(m),i.push(r),this.__state===T||a===T)continue;if(o=r.node,s=o.type||r.wrap,f=this.__keys[s],!f){if(!this.__fallback)throw new Error("Unknown node type "+s+".");f=C(o)}for(c=f.length;(c-=1)>=0;)if(l=f[c],g=o[l])if(y(g)){for(d=g.length;(d-=1)>=0;)if(g[d]){if(p(s,f[c]))r=new h(g[d],[l,d],"Property",null);else{if(!u(g[d]))continue;r=new h(g[d],[l,d],null,null)}n.push(r)}}else u(g)&&n.push(new h(g,l,null,null))}}else if(r=i.pop(),a=this.__execute(t.leave,r),this.__state===E||a===E)return},d.prototype.replace=function(e,t){function n(e){var t,n,r,o;if(e.ref.remove())for(n=e.ref.key,o=e.ref.parent,t=i.length;t--;)if(r=i[t],r.ref&&r.ref.parent===o){if(r.ref.key<n)break;--r.ref.key}}var i,r,o,s,a,l,d,f,g,m,v,_,x;for(this.__initialize(e,t),v={},i=this.__worklist,r=this.__leavelist,_={root:e},l=new h(e,null,null,new c(_,"root")),i.push(l),r.push(l);i.length;)if(l=i.pop(),l!==v){if(a=this.__execute(t.enter,l),void 0!==a&&a!==E&&a!==T&&a!==S&&(l.ref.replace(a),l.node=a),(this.__state===S||a===S)&&(n(l),l.node=null),this.__state===E||a===E)return _.root;if(o=l.node,o&&(i.push(v),r.push(l),this.__state!==T&&a!==T)){if(s=o.type||l.wrap,g=this.__keys[s],!g){if(!this.__fallback)throw new Error("Unknown node type "+s+".");g=C(o)}for(d=g.length;(d-=1)>=0;)if(x=g[d],m=o[x])if(y(m)){for(f=m.length;(f-=1)>=0;)if(m[f]){if(p(s,g[d]))l=new h(m[f],[x,f],"Property",new c(m,f));else{if(!u(m[f]))continue;l=new h(m[f],[x,f],null,new c(m,f))}i.push(l)}}else u(m)&&i.push(new h(m,x,null,new c(o,x)))}}else if(l=r.pop(),a=this.__execute(t.leave,l),void 0!==a&&a!==E&&a!==T&&a!==S&&l.ref.replace(a),(this.__state===S||a===S)&&n(l),this.__state===E||a===E)return _.root;return _.root},t.version=e("./package.json").version,t.Syntax=_,t.traverse=f,t.replace=g,t.attachComments=v,t.VisitorKeys=w,t.VisitorOption=x,t.Controller=d,t.cloneEnvironment=function(){return i({})},t}(n)},{"./package.json":2}],2:[function(e,t,n){t.exports={name:"estraverse",description:"ECMAScript JS AST traversal functions",homepage:"https://github.com/estools/estraverse",main:"estraverse.js",version:"4.1.1",engines:{node:">=0.10.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/estraverse.git"},devDependencies:{chai:"^2.1.1","coffee-script":"^1.8.0",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.2.1",jshint:"^2.5.6",mocha:"^2.1.0"},license:"BSD-2-Clause",scripts:{test:"npm run-script lint && npm run-script unit-test",lint:"jshint estraverse.js","unit-test":"mocha --compilers coffee:coffee-script/register"}}},{}]},{},[1])(1)}),function(){function e(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function t(e){return e.replace(/^\s+|\s+$/g,"")}function i(e){return e.replace(/^\s+/g,"")}function r(e,t){"use strict";var n=new o(e,t);return n.beautify()}function o(n,r){"use strict";function o(e,t){var n=0;e&&(n=e.indentation_level,!U.just_added_newline()&&e.line_indent_level>n&&(n=e.line_indent_level));var i={mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:e?e.line_indent_level:n,start_line_index:U.get_line_number(),ternary_depth:0};return i}function s(e){var t=e.newlines,n=te.keep_array_indentation&&y(Y.mode);if(n)for(i=0;t>i;i+=1)p(i>0);else if(te.max_preserve_newlines&&t>te.max_preserve_newlines&&(t=te.max_preserve_newlines),te.preserve_newlines&&e.newlines>1){p();for(var i=1;t>i;i+=1)p(!0)}$=e,ee[$.type]()}function d(e){e=e.replace(/\x0d/g,"");for(var t=[],n=e.indexOf("\n");-1!==n;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");return e.length&&t.push(e),t}function u(e){if(e=void 0===e?!1:e,!U.just_added_newline())if(te.preserve_newlines&&$.wanted_newline||e)p(!1,!0);else if(te.wrap_line_length){var t=U.current_line.get_character_count()+$.text.length+(U.space_before_token?1:0);t>=te.wrap_line_length&&p(!1,!0)}}function p(e,t){if(!t&&";"!==Y.last_text&&","!==Y.last_text&&"="!==Y.last_text&&"TK_OPERATOR"!==z)for(;Y.mode===h.Statement&&!Y.if_block&&!Y.do_block;)w();U.add_new_line(e)&&(Y.multiline_frame=!0)}function f(){U.just_added_newline()&&(te.keep_array_indentation&&y(Y.mode)&&$.wanted_newline?(U.current_line.push($.whitespace_before),U.space_before_token=!1):U.set_indent(Y.indentation_level)&&(Y.line_indent_level=Y.indentation_level))}function g(e){return U.raw?void U.add_raw_token($):(te.comma_first&&"TK_COMMA"===z&&U.just_added_newline()&&","===U.previous_line.last()&&(U.previous_line.pop(),f(),U.add_token(","),U.space_before_token=!0),e=e||$.text,f(),void U.add_token(e))}function m(){Y.indentation_level+=1}function v(){Y.indentation_level>0&&(!Y.parent||Y.indentation_level>Y.parent.indentation_level)&&(Y.indentation_level-=1)}function _(e){Y?(Q.push(Y),J=Y):J=o(null,e),Y=o(J,e)}function y(e){return e===h.ArrayLiteral}function x(t){return e(t,[h.Expression,h.ForInitializer,h.Conditional])}function w(){Q.length>0&&(J=Y,Y=Q.pop(),J.mode===h.Statement&&U.remove_redundant_indentation(J))}function b(){return Y.parent.mode===h.ObjectLiteral&&Y.mode===h.Statement&&(":"===Y.last_text&&0===Y.ternary_depth||"TK_RESERVED"===z&&e(Y.last_text,["get","set"]))}function C(){return"TK_RESERVED"===z&&e(Y.last_text,["var","let","const"])&&"TK_WORD"===$.type||"TK_RESERVED"===z&&"do"===Y.last_text||"TK_RESERVED"===z&&"return"===Y.last_text&&!$.wanted_newline||"TK_RESERVED"===z&&"else"===Y.last_text&&("TK_RESERVED"!==$.type||"if"!==$.text)||"TK_END_EXPR"===z&&(J.mode===h.ForInitializer||J.mode===h.Conditional)||"TK_WORD"===z&&Y.mode===h.BlockStatement&&!Y.in_case&&"--"!==$.text&&"++"!==$.text&&"function"!==X&&"TK_WORD"!==$.type&&"TK_RESERVED"!==$.type||Y.mode===h.ObjectLiteral&&(":"===Y.last_text&&0===Y.ternary_depth||"TK_RESERVED"===z&&e(Y.last_text,["get","set"]))?(_(h.Statement),m(),"TK_RESERVED"===z&&e(Y.last_text,["var","let","const"])&&"TK_WORD"===$.type&&(Y.declaration_statement=!0),b()||u("TK_RESERVED"===$.type&&e($.text,["do","for","if","while"])),!0):!1}function E(e,n){for(var i=0;i<e.length;i++){var r=t(e[i]);if(r.charAt(0)!==n)return!1}return!0}function T(e,t){for(var n,i=0,r=e.length;r>i;i++)if(n=e[i],n&&0!==n.indexOf(t))return!1;return!0}function S(t){return e(t,["case","return","do","if","throw","else"])}function k(e){var t=W+(e||0);return 0>t||t>=ne.length?null:ne[t]}function A(){C();var t=h.Expression;if("["===$.text){if("TK_WORD"===z||")"===Y.last_text)return"TK_RESERVED"===z&&e(Y.last_text,G.line_starters)&&(U.space_before_token=!0),_(t),g(),m(),void(te.space_in_paren&&(U.space_before_token=!0));t=h.ArrayLiteral,y(Y.mode)&&("["===Y.last_text||","===Y.last_text&&("]"===X||"}"===X))&&(te.keep_array_indentation||p())}else"TK_RESERVED"===z&&"for"===Y.last_text?t=h.ForInitializer:"TK_RESERVED"===z&&e(Y.last_text,["if","while"])&&(t=h.Conditional);";"===Y.last_text||"TK_START_BLOCK"===z?p():"TK_END_EXPR"===z||"TK_START_EXPR"===z||"TK_END_BLOCK"===z||"."===Y.last_text?u($.wanted_newline):"TK_RESERVED"===z&&"("===$.text||"TK_WORD"===z||"TK_OPERATOR"===z?"TK_RESERVED"===z&&("function"===Y.last_word||"typeof"===Y.last_word)||"*"===Y.last_text&&"function"===X?te.space_after_anon_function&&(U.space_before_token=!0):"TK_RESERVED"!==z||!e(Y.last_text,G.line_starters)&&"catch"!==Y.last_text||te.space_before_conditional&&(U.space_before_token=!0):U.space_before_token=!0,"("===$.text&&"TK_RESERVED"===z&&"await"===Y.last_word&&(U.space_before_token=!0),"("===$.text&&("TK_EQUALS"===z||"TK_OPERATOR"===z)&&(b()||u()),_(t),g(),te.space_in_paren&&(U.space_before_token=!0),m()}function L(){for(;Y.mode===h.Statement;)w();Y.multiline_frame&&u("]"===$.text&&y(Y.mode)&&!te.keep_array_indentation),te.space_in_paren&&("TK_START_EXPR"!==z||te.space_in_empty_paren?U.space_before_token=!0:(U.trim(),U.space_before_token=!1)),
"]"===$.text&&te.keep_array_indentation?(g(),w()):(w(),g()),U.remove_redundant_indentation(J),Y.do_while&&J.mode===h.Conditional&&(J.mode=h.Expression,Y.do_block=!1,Y.do_while=!1)}function M(){var t=k(1),n=k(2);_(n&&(":"===n.text&&e(t.type,["TK_STRING","TK_WORD","TK_RESERVED"])||e(t.text,["get","set"])&&e(n.type,["TK_WORD","TK_RESERVED"]))?e(X,["class","interface"])?h.BlockStatement:h.ObjectLiteral:h.BlockStatement);var i=!t.comments_before.length&&"}"===t.text,r=i&&"function"===Y.last_word&&"TK_END_EXPR"===z;"expand"===te.brace_style||"none"===te.brace_style&&$.wanted_newline?"TK_OPERATOR"!==z&&(r||"TK_EQUALS"===z||"TK_RESERVED"===z&&S(Y.last_text)&&"else"!==Y.last_text)?U.space_before_token=!0:p(!1,!0):"TK_OPERATOR"!==z&&"TK_START_EXPR"!==z?"TK_START_BLOCK"===z?p():U.space_before_token=!0:y(J.mode)&&","===Y.last_text&&("}"===X?U.space_before_token=!0:p()),g(),m()}function N(){for(;Y.mode===h.Statement;)w();var e="TK_START_BLOCK"===z;"expand"===te.brace_style?e||p():e||(y(Y.mode)&&te.keep_array_indentation?(te.keep_array_indentation=!1,p(),te.keep_array_indentation=!0):p()),w(),g()}function O(){if("TK_RESERVED"===$.type&&Y.mode!==h.ObjectLiteral&&e($.text,["set","get"])&&($.type="TK_WORD"),"TK_RESERVED"===$.type&&Y.mode===h.ObjectLiteral){var t=k(1);":"==t.text&&($.type="TK_WORD")}if(C()||!$.wanted_newline||x(Y.mode)||"TK_OPERATOR"===z&&"--"!==Y.last_text&&"++"!==Y.last_text||"TK_EQUALS"===z||!te.preserve_newlines&&"TK_RESERVED"===z&&e(Y.last_text,["var","let","const","set","get"])||p(),Y.do_block&&!Y.do_while){if("TK_RESERVED"===$.type&&"while"===$.text)return U.space_before_token=!0,g(),U.space_before_token=!0,void(Y.do_while=!0);p(),Y.do_block=!1}if(Y.if_block)if(Y.else_block||"TK_RESERVED"!==$.type||"else"!==$.text){for(;Y.mode===h.Statement;)w();Y.if_block=!1,Y.else_block=!1}else Y.else_block=!0;if("TK_RESERVED"===$.type&&("case"===$.text||"default"===$.text&&Y.in_case_statement))return p(),(Y.case_body||te.jslint_happy)&&(v(),Y.case_body=!1),g(),Y.in_case=!0,void(Y.in_case_statement=!0);if("TK_RESERVED"===$.type&&"function"===$.text&&((e(Y.last_text,["}",";"])||U.just_added_newline()&&!e(Y.last_text,["[","{",":","=",","]))&&(U.just_added_blankline()||$.comments_before.length||(p(),p(!0))),"TK_RESERVED"===z||"TK_WORD"===z?"TK_RESERVED"===z&&e(Y.last_text,["get","set","new","return","export","async"])?U.space_before_token=!0:"TK_RESERVED"===z&&"default"===Y.last_text&&"export"===X?U.space_before_token=!0:p():"TK_OPERATOR"===z||"="===Y.last_text?U.space_before_token=!0:(Y.multiline_frame||!x(Y.mode)&&!y(Y.mode))&&p()),("TK_COMMA"===z||"TK_START_EXPR"===z||"TK_EQUALS"===z||"TK_OPERATOR"===z)&&(b()||u()),"TK_RESERVED"===$.type&&e($.text,["function","get","set"]))return g(),void(Y.last_word=$.text);if(Z="NONE","TK_END_BLOCK"===z?"TK_RESERVED"===$.type&&e($.text,["else","catch","finally"])?"expand"===te.brace_style||"end-expand"===te.brace_style||"none"===te.brace_style&&$.wanted_newline?Z="NEWLINE":(Z="SPACE",U.space_before_token=!0):Z="NEWLINE":"TK_SEMICOLON"===z&&Y.mode===h.BlockStatement?Z="NEWLINE":"TK_SEMICOLON"===z&&x(Y.mode)?Z="SPACE":"TK_STRING"===z?Z="NEWLINE":"TK_RESERVED"===z||"TK_WORD"===z||"*"===Y.last_text&&"function"===X?Z="SPACE":"TK_START_BLOCK"===z?Z="NEWLINE":"TK_END_EXPR"===z&&(U.space_before_token=!0,Z="NEWLINE"),"TK_RESERVED"===$.type&&e($.text,G.line_starters)&&")"!==Y.last_text&&(Z="else"===Y.last_text||"export"===Y.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===$.type&&e($.text,["else","catch","finally"]))if("TK_END_BLOCK"!==z||"expand"===te.brace_style||"end-expand"===te.brace_style||"none"===te.brace_style&&$.wanted_newline)p();else{U.trim(!0);var n=U.current_line;"}"!==n.last()&&p(),U.space_before_token=!0}else"NEWLINE"===Z?"TK_RESERVED"===z&&S(Y.last_text)?U.space_before_token=!0:"TK_END_EXPR"!==z?"TK_START_EXPR"===z&&"TK_RESERVED"===$.type&&e($.text,["var","let","const"])||":"===Y.last_text||("TK_RESERVED"===$.type&&"if"===$.text&&"else"===Y.last_text?U.space_before_token=!0:p()):"TK_RESERVED"===$.type&&e($.text,G.line_starters)&&")"!==Y.last_text&&p():Y.multiline_frame&&y(Y.mode)&&","===Y.last_text&&"}"===X?p():"SPACE"===Z&&(U.space_before_token=!0);g(),Y.last_word=$.text,"TK_RESERVED"===$.type&&"do"===$.text&&(Y.do_block=!0),"TK_RESERVED"===$.type&&"if"===$.text&&(Y.if_block=!0)}function D(){for(C()&&(U.space_before_token=!1);Y.mode===h.Statement&&!Y.if_block&&!Y.do_block;)w();g()}function R(){C()?U.space_before_token=!0:"TK_RESERVED"===z||"TK_WORD"===z?U.space_before_token=!0:"TK_COMMA"===z||"TK_START_EXPR"===z||"TK_EQUALS"===z||"TK_OPERATOR"===z?b()||u():p(),g()}function I(){C(),Y.declaration_statement&&(Y.declaration_assignment=!0),U.space_before_token=!0,g(),U.space_before_token=!0}function P(){return Y.declaration_statement?(x(Y.parent.mode)&&(Y.declaration_assignment=!1),g(),void(Y.declaration_assignment?(Y.declaration_assignment=!1,p(!1,!0)):(U.space_before_token=!0,te.comma_first&&u()))):(g(),void(Y.mode===h.ObjectLiteral||Y.mode===h.Statement&&Y.parent.mode===h.ObjectLiteral?(Y.mode===h.Statement&&w(),p()):(U.space_before_token=!0,te.comma_first&&u())))}function B(){if(C(),"TK_RESERVED"===z&&S(Y.last_text))return U.space_before_token=!0,void g();if("*"===$.text&&"TK_DOT"===z)return void g();if(":"===$.text&&Y.in_case)return Y.case_body=!0,m(),g(),p(),void(Y.in_case=!1);if("::"===$.text)return void g();"TK_OPERATOR"===z&&u();var t=!0,n=!0;e($.text,["--","++","!","~"])||e($.text,["-","+"])&&(e(z,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||e(Y.last_text,G.line_starters)||","===Y.last_text)?(t=!1,n=!1,!$.wanted_newline||"--"!==$.text&&"++"!==$.text||p(!1,!0),";"===Y.last_text&&x(Y.mode)&&(t=!0),"TK_RESERVED"===z?t=!0:"TK_END_EXPR"===z?t=!("]"===Y.last_text&&("--"===$.text||"++"===$.text)):"TK_OPERATOR"===z&&(t=e($.text,["--","-","++","+"])&&e(Y.last_text,["--","-","++","+"]),e($.text,["+","-"])&&e(Y.last_text,["--","++"])&&(n=!0)),Y.mode!==h.BlockStatement&&Y.mode!==h.Statement||"{"!==Y.last_text&&";"!==Y.last_text||p()):":"===$.text?0===Y.ternary_depth?t=!1:Y.ternary_depth-=1:"?"===$.text?Y.ternary_depth+=1:"*"===$.text&&"TK_RESERVED"===z&&"function"===Y.last_text&&(t=!1,n=!1),U.space_before_token=U.space_before_token||t,g(),U.space_before_token=n}function F(){if(U.raw)return U.add_raw_token($),void($.directives&&"end"===$.directives.preserve&&(te.test_output_raw||(U.raw=!1)));if($.directives)return p(!1,!0),g(),"start"===$.directives.preserve&&(U.raw=!0),void p(!1,!0);if(!c.newline.test($.text)&&!$.wanted_newline)return U.space_before_token=!0,g(),void(U.space_before_token=!0);var e,t=d($.text),n=!1,r=!1,o=$.whitespace_before,s=o.length;for(p(!1,!0),t.length>1&&(E(t.slice(1),"*")?n=!0:T(t.slice(1),o)&&(r=!0)),g(t[0]),e=1;e<t.length;e++)p(!1,!0),n?g(" "+i(t[e])):r&&t[e].length>s?g(t[e].substring(s)):U.add_token(t[e]);p(!1,!0)}function V(){$.wanted_newline?p(!1,!0):U.trim(!0),U.space_before_token=!0,g(),p(!1,!0)}function K(){C(),"TK_RESERVED"===z&&S(Y.last_text)?U.space_before_token=!0:u(")"===Y.last_text&&te.break_chained_methods),g()}function j(){g(),"\n"===$.text[$.text.length-1]&&p()}function H(){for(;Y.mode===h.Statement;)w()}var U,W,G,$,z,X,q,Y,J,Q,Z,ee,te,ne=[],ie="";for(ee={TK_START_EXPR:A,TK_END_EXPR:L,TK_START_BLOCK:M,TK_END_BLOCK:N,TK_WORD:O,TK_RESERVED:O,TK_SEMICOLON:D,TK_STRING:R,TK_EQUALS:I,TK_OPERATOR:B,TK_COMMA:P,TK_BLOCK_COMMENT:F,TK_COMMENT:V,TK_DOT:K,TK_UNKNOWN:j,TK_EOF:H},r=r?r:{},te={},void 0!==r.braces_on_own_line&&(te.brace_style=r.braces_on_own_line?"expand":"collapse"),te.brace_style=r.brace_style?r.brace_style:te.brace_style?te.brace_style:"collapse","expand-strict"===te.brace_style&&(te.brace_style="expand"),te.indent_size=r.indent_size?parseInt(r.indent_size,10):4,te.indent_char=r.indent_char?r.indent_char:" ",te.eol=r.eol?r.eol:"\n",te.preserve_newlines=void 0===r.preserve_newlines?!0:r.preserve_newlines,te.break_chained_methods=void 0===r.break_chained_methods?!1:r.break_chained_methods,te.max_preserve_newlines=void 0===r.max_preserve_newlines?0:parseInt(r.max_preserve_newlines,10),te.space_in_paren=void 0===r.space_in_paren?!1:r.space_in_paren,te.space_in_empty_paren=void 0===r.space_in_empty_paren?!1:r.space_in_empty_paren,te.jslint_happy=void 0===r.jslint_happy?!1:r.jslint_happy,te.space_after_anon_function=void 0===r.space_after_anon_function?!1:r.space_after_anon_function,te.keep_array_indentation=void 0===r.keep_array_indentation?!1:r.keep_array_indentation,te.space_before_conditional=void 0===r.space_before_conditional?!0:r.space_before_conditional,te.unescape_strings=void 0===r.unescape_strings?!1:r.unescape_strings,te.wrap_line_length=void 0===r.wrap_line_length?0:parseInt(r.wrap_line_length,10),te.e4x=void 0===r.e4x?!1:r.e4x,te.end_with_newline=void 0===r.end_with_newline?!1:r.end_with_newline,te.comma_first=void 0===r.comma_first?!1:r.comma_first,te.test_output_raw=void 0===r.test_output_raw?!1:r.test_output_raw,te.jslint_happy&&(te.space_after_anon_function=!0),r.indent_with_tabs&&(te.indent_char="	",te.indent_size=1),te.eol=te.eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),q="";te.indent_size>0;)q+=te.indent_char,te.indent_size-=1;var re=0;if(n&&n.length){for(;" "===n.charAt(re)||"	"===n.charAt(re);)ie+=n.charAt(re),re+=1;n=n.substring(re)}z="TK_START_BLOCK",X="",U=new a(q,ie),U.raw=te.test_output_raw,Q=[],_(h.BlockStatement),this.beautify=function(){var e,t;for(G=new l(n,te,q),ne=G.tokenize(),W=0;e=k();){for(var i=0;i<e.comments_before.length;i++)s(e.comments_before[i]);s(e),X=Y.last_text,z=e.type,Y.last_text=e.text,W+=1}return t=U.get_code(),te.end_with_newline&&(t+="\n"),"\n"!=te.eol&&(t=t.replace(/[\n]/g,te.eol)),t}}function s(e){var t=0,n=-1,i=[],r=!0;this.set_indent=function(i){t=e.baseIndentLength+i*e.indent_length,n=i},this.get_character_count=function(){return t},this.is_empty=function(){return r},this.last=function(){return this._empty?null:i[i.length-1]},this.push=function(e){i.push(e),t+=e.length,r=!1},this.pop=function(){var e=null;return r||(e=i.pop(),t-=e.length,r=0===i.length),e},this.remove_indent=function(){n>0&&(n-=1,t-=e.indent_length)},this.trim=function(){for(;" "===this.last();){i.pop();t-=1}r=0===i.length},this.toString=function(){var t="";return this._empty||(n>=0&&(t=e.indent_cache[n]),t+=i.join("")),t}}function a(e,t){t=t||"",this.indent_cache=[t],this.baseIndentLength=t.length,this.indent_length=e.length,this.raw=!1;var n=[];this.baseIndentString=t,this.indent_string=e,this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.add_outputline=function(){this.previous_line=this.current_line,this.current_line=new s(this),n.push(this.current_line)},this.add_outputline(),this.get_line_number=function(){return n.length},this.add_new_line=function(e){return 1===this.get_line_number()&&this.just_added_newline()?!1:e||!this.just_added_newline()?(this.raw||this.add_outputline(),!0):!1},this.get_code=function(){var e=n.join("\n").replace(/[\r\n\t ]+$/,"");return e},this.set_indent=function(e){if(n.length>1){for(;e>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);return this.current_line.set_indent(e),!0}return this.current_line.set_indent(0),!1},this.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.add_outputline();this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1},this.add_token=function(e){this.add_space_before_token(),this.current_line.push(e)},this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},this.remove_redundant_indentation=function(e){if(!e.multiline_frame&&e.mode!==h.ForInitializer&&e.mode!==h.Conditional)for(var t=e.start_line_index,i=n.length;i>t;)n[t].remove_indent(),t++},this.trim=function(i){for(i=void 0===i?!1:i,this.current_line.trim(e,t);i&&n.length>1&&this.current_line.is_empty();)n.pop(),this.current_line=n[n.length-1],this.current_line.trim();this.previous_line=n.length>1?n[n.length-2]:null},this.just_added_newline=function(){return this.current_line.is_empty()},this.just_added_blankline=function(){if(this.just_added_newline()){if(1===n.length)return!0;var e=n[n.length-2];return e.is_empty()}return!1}}function l(n,i,r){function o(e){if(!e.match(C))return null;var t={};E.lastIndex=0;for(var n=E.exec(e);n;)t[n[1]]=n[2],n=E.exec(e);return t}function s(){var r,s=[];if(f=0,g="",_>=y)return["","TK_EOF"];var C;C=v.length?v[v.length-1]:new d("TK_START_BLOCK","{");var E=n.charAt(_);for(_+=1;e(E,l);){if(c.newline.test(E)?("\n"!==E||"\r"!==n.charAt(_-2))&&(f+=1,s=[]):s.push(E),_>=y)return["","TK_EOF"];E=n.charAt(_),_+=1}if(s.length&&(g=s.join("")),h.test(E)){var k=!0,A=!0,L=h;for("0"===E&&y>_&&/[Xx]/.test(n.charAt(_))?(k=!1,A=!1,E+=n.charAt(_),_+=1,L=u):(E="",_-=1);y>_&&L.test(n.charAt(_));)E+=n.charAt(_),_+=1,k&&y>_&&"."===n.charAt(_)&&(E+=n.charAt(_),_+=1,k=!1),A&&y>_&&/[Ee]/.test(n.charAt(_))&&(E+=n.charAt(_),_+=1,y>_&&/[+-]/.test(n.charAt(_))&&(E+=n.charAt(_),_+=1),A=!1,k=!1);return[E,"TK_WORD"]}if(c.isIdentifierStart(n.charCodeAt(_-1))){if(y>_)for(;c.isIdentifierChar(n.charCodeAt(_))&&(E+=n.charAt(_),_+=1,_!==y););return"TK_DOT"===C.type||"TK_RESERVED"===C.type&&e(C.text,["set","get"])||!e(E,x)?[E,"TK_WORD"]:"in"===E?[E,"TK_OPERATOR"]:[E,"TK_RESERVED"]}if("("===E||"["===E)return[E,"TK_START_EXPR"];if(")"===E||"]"===E)return[E,"TK_END_EXPR"];if("{"===E)return[E,"TK_START_BLOCK"];if("}"===E)return[E,"TK_END_BLOCK"];if(";"===E)return[E,"TK_SEMICOLON"];if("/"===E){var M="";if("*"===n.charAt(_)){_+=1,w.lastIndex=_;var N=w.exec(n);M="/*"+N[0],_+=N[0].length;var O=o(M);return O&&"start"===O.ignore&&(T.lastIndex=_,N=T.exec(n),M+=N[0],_+=N[0].length),M=M.replace(c.lineBreak,"\n"),[M,"TK_BLOCK_COMMENT",O]}if("/"===n.charAt(_)){_+=1,b.lastIndex=_;var N=b.exec(n);return M="//"+N[0],_+=N[0].length,[M,"TK_COMMENT"]}}if("`"===E||"'"===E||'"'===E||("/"===E||i.e4x&&"<"===E&&n.slice(_-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/))&&("TK_RESERVED"===C.type&&e(C.text,["return","case","throw","else","do","typeof","yield"])||"TK_END_EXPR"===C.type&&")"===C.text&&C.parent&&"TK_RESERVED"===C.parent.type&&e(C.parent.text,["if","while","for"])||e(C.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var D=E,R=!1,I=!1;if(r=E,"/"===D)for(var P=!1;y>_&&(R||P||n.charAt(_)!==D)&&!c.newline.test(n.charAt(_));)r+=n.charAt(_),R?R=!1:(R="\\"===n.charAt(_),"["===n.charAt(_)?P=!0:"]"===n.charAt(_)&&(P=!1)),_+=1;else if(i.e4x&&"<"===D){var B=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/g,F=n.slice(_-1),V=B.exec(F);if(V&&0===V.index){for(var K=V[2],j=0;V;){var H=!!V[1],U=V[2],W=!!V[V.length-1]||"![CDATA["===U.slice(0,8);if(U!==K||W||(H?--j:++j),0>=j)break;V=B.exec(F)}var G=V?V.index+V[0].length:F.length;return F=F.slice(0,G),_+=G-1,F=F.replace(c.lineBreak,"\n"),[F,"TK_STRING"]}}else for(;y>_&&(R||n.charAt(_)!==D&&("`"===D||!c.newline.test(n.charAt(_))));)(R||"`"===D)&&c.newline.test(n.charAt(_))?("\r"===n.charAt(_)&&"\n"===n.charAt(_+1)&&(_+=1),r+="\n"):r+=n.charAt(_),R?(("x"===n.charAt(_)||"u"===n.charAt(_))&&(I=!0),R=!1):R="\\"===n.charAt(_),_+=1;if(I&&i.unescape_strings&&(r=a(r)),y>_&&n.charAt(_)===D&&(r+=D,_+=1,"/"===D))for(;y>_&&c.isIdentifierStart(n.charCodeAt(_));)r+=n.charAt(_),_+=1;return[r,"TK_STRING"]}if("#"===E){if(0===v.length&&"!"===n.charAt(_)){for(r=E;y>_&&"\n"!==E;)E=n.charAt(_),r+=E,_+=1;return[t(r)+"\n","TK_UNKNOWN"]}var $="#";if(y>_&&h.test(n.charAt(_))){do E=n.charAt(_),$+=E,_+=1;while(y>_&&"#"!==E&&"="!==E);return"#"===E||("["===n.charAt(_)&&"]"===n.charAt(_+1)?($+="[]",_+=2):"{"===n.charAt(_)&&"}"===n.charAt(_+1)&&($+="{}",_+=2)),[$,"TK_WORD"]}}if("<"===E&&("?"===n.charAt(_)||"%"===n.charAt(_))){S.lastIndex=_-1;var z=S.exec(n);if(z)return E=z[0],_+=E.length-1,E=E.replace(c.lineBreak,"\n"),[E,"TK_STRING"]}if("<"===E&&"<!--"===n.substring(_-1,_+3)){for(_+=3,E="<!--";!c.newline.test(n.charAt(_))&&y>_;)E+=n.charAt(_),_++;return m=!0,[E,"TK_COMMENT"]}if("-"===E&&m&&"-->"===n.substring(_-1,_+2))return m=!1,_+=2,["-->","TK_COMMENT"];if("."===E)return[E,"TK_DOT"];if(e(E,p)){for(;y>_&&e(E+n.charAt(_),p)&&(E+=n.charAt(_),_+=1,!(_>=y)););return","===E?[E,"TK_COMMA"]:"="===E?[E,"TK_EQUALS"]:[E,"TK_OPERATOR"]}return[E,"TK_UNKNOWN"]}function a(e){for(var t,n=!1,i="",r=0,o="",s=0;n||r<e.length;)if(t=e.charAt(r),r++,n){if(n=!1,"x"===t)o=e.substr(r,2),r+=2;else{if("u"!==t){i+="\\"+t;continue}o=e.substr(r,4),r+=4}if(!o.match(/^[0123456789abcdefABCDEF]+$/))return e;if(s=parseInt(o,16),s>=0&&32>s){i+="x"===t?"\\x"+o:"\\u"+o;continue}if(34===s||39===s||92===s)i+="\\"+String.fromCharCode(s);else{if("x"===t&&s>126&&255>=s)return e;i+=String.fromCharCode(s)}}else"\\"===t?n=!0:i+=t;return i}var l="\n\r	 ".split(""),h=/[0-9]/,u=/[0123456789abcdefABCDEF]/,p="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: => <%= <% %> <?= <? ?>".split(" ");this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var f,g,m,v,_,y,x=this.line_starters.concat(["do","in","else","get","set","new","catch","finally","typeof","yield","async","await"]),w=/([\s\S]*?)((?:\*\/)|$)/g,b=/([^\n\r\u2028\u2029]*)/g,C=/\/\* beautify( \w+[:]\w+)+ \*\//g,E=/ (\w+)[:](\w+)/g,T=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g,S=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;this.tokenize=function(){y=n.length,_=0,m=!1,v=[];for(var e,t,i,r=null,o=[],a=[];!t||"TK_EOF"!==t.type;){for(i=s(),e=new d(i[1],i[0],f,g);"TK_COMMENT"===e.type||"TK_BLOCK_COMMENT"===e.type||"TK_UNKNOWN"===e.type;)"TK_BLOCK_COMMENT"===e.type&&(e.directives=i[2]),a.push(e),i=s(),e=new d(i[1],i[0],f,g);a.length&&(e.comments_before=a,a=[]),"TK_START_BLOCK"===e.type||"TK_START_EXPR"===e.type?(e.parent=t,o.push(r),r=e):("TK_END_BLOCK"===e.type||"TK_END_EXPR"===e.type)&&r&&("]"===e.text&&"["===r.text||")"===e.text&&"("===r.text||"}"===e.text&&"{"===r.text)&&(e.parent=r.parent,r=o.pop()),v.push(e),t=e}return v}}var c={};!function(e){var t="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",n="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",i=new RegExp("["+t+"]"),r=new RegExp("["+t+n+"]");e.newline=/[\n\r\u2028\u2029]/,e.lineBreak=/\r\n|[\n\r\u2028\u2029]/g,e.isIdentifierStart=function(e){return 65>e?36===e:91>e?!0:97>e?95===e:123>e?!0:e>=170&&i.test(String.fromCharCode(e))},e.isIdentifierChar=function(e){return 48>e?36===e:58>e?!0:65>e?!1:91>e?!0:97>e?95===e:123>e?!0:e>=170&&r.test(String.fromCharCode(e))}}(c);var h={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},d=function(e,t,n,i,r,o){this.type=e,this.text=t,this.comments_before=[],this.newlines=n||0,this.wanted_newline=n>0,this.whitespace_before=i||"",this.parent=null,this.directives=null};"function"==typeof n&&n.amd?n("js-beautify/beautify",[],function(){return{js_beautify:r}}):"undefined"!=typeof exports?exports.js_beautify=r:"undefined"!=typeof window?window.js_beautify=r:"undefined"!=typeof global&&(global.js_beautify=r)}(),function(e,i){if("object"==typeof exports&&"object"==typeof module)module.exports=i(t("acorn/dist/acorn"),t("estraverse/estraverse"),t("js-beautify/beautify"));else if("function"==typeof n&&n.amd)n("wix-code/wixCodeParser",["acorn/dist/acorn","estraverse/estraverse","js-beautify/beautify"],i);else{var r="object"==typeof exports?i(t("acorn/dist/acorn"),t("estraverse/estraverse"),t("js-beautify/beautify")):i(e["acorn/dist/acorn"],e["estraverse/estraverse"],e["js-beautify/beautify"]);for(var o in r)("object"==typeof exports?exports:e)[o]=r[o]}}(this,function(e,t,n){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var i=n(1);e.exports={codeExportsService:i}},function(e,t,n){"use strict";function i(e){return"ExportNamedDeclaration"===e.type||"ExportDefaultDeclaration"===e.type}function r(e){return"FunctionDeclaration"===e.type}function o(e){return"VariableDeclaration"===e.type}function s(e,t){return e.type===t.type&&e.id.name===t.id.name}function a(e,t){r(e)?t(e):o(e)&&e.declarations.forEach(function(e){t(e)})}function l(e,t){w.traverse(e,{enter:function(e){i(e)&&a(e.declaration,t)}})}function c(e,t){var n=!1;return l(e,function(e){return t(e)?(n=!0,w.VisitorOption.Break):void 0}),n}function h(e,t){return r(t)?e+t.body.range[0]+1:o(t)?e+t.range[1]-1:e+t.end}function d(e,t,n){if(!i(e))throw new TypeError("Provided: `"+t+"` is not a export statement.");if(c(n,s.bind(this,e.declaration)))throw new Error("An export statement with the given name: `"+e.declaration.id.name+"` already exists.")}function u(e){try{return x.parse(e,{sourceType:"module",ranges:!0})}catch(t){throw new Error("Failed to parse provided code.")}}function p(e,t,n){var i="\n\n"+b(t,n||C),r=u(i).body[0],o=void 0;try{o=u(e)}catch(s){}return o&&d(r,t,o),{newCode:e+i,diff:{code:i,insertAt:e.length},caretOffset:h(e.length,r.declaration)}}function f(e,t){return e===t.id.name}function g(e,t){var n=u(e);return c(n,f.bind(this,t))}function m(e,t){function n(e,t){return e.slice(0,t.length)===t}return e.id&&e.id.name&&n(e.id.name,t)}function v(e,t){var n=u(e),i=[];return l(n,function(e){m(e,t)&&i.push(e.id.name)}),i}function _(e,t){var n=u(e),i=0,r=!1;return l(n,function(e){return f(t,e)?(i=h(0,e),r=!0,w.VisitorOption.Break):void 0}),{found:r,caretOffset:i}}function y(e,t,n){var i=_(e,t),r=i.found,o=i.caretOffset,s=r?e.replace(t,n):null,a=r?o+(n.length-t.length):null;return{newCode:s,found:r,caretOffset:a}}var x=n(2),w=n(3),b=n(4).js_beautify,C={indent_size:1,indent_char:"	",indent_with_tabs:!0,jslint_happy:!0,indent_inner_html:!0,max_preserve_newlines:2,preserve_newlines:!0,good_stuff:!0,selector_separator_newline:!0};e.exports={getCaretInfoForExportStatement:_,exportStatementsWithPrefix:v,exportStatementExists:g,addExport:p,renameExportStatement:y}},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n}])}),n("wix-code/commands/formatter/core/formatterCommand",["orion/Deferred"],function(e){function t(e){this.formatter=this.createFormatter(e)}return t.prototype.createFormatter=function(e){throw new Error("Create Formatter is NOT implemented - options are: "+e)},t.prototype.doFormat=function(e,t,n){return this.formatter.format(t,n)},t.prototype.execute=function(t){var n=this;return e.all([t.getText(),t.getSelection()]).then(function(i){var r=i[0],o=i[1];return e.when(n.doFormat(t,r,o)).then(function(n){if(null===n)return null;var i=[];return n.fragment?(i.push(t.setText(n.text,n.textStart,n.textEnd)),i.push(t.setSelection(n.selectionStart,n.selectionEnd))):(i.push(t.setText(n.text)),i.push(t.setCaretOffset(o.start))),e.all(i)})})},t}),n("wix-code/commands/formatter/core/formatter",["wix-code/utils/textUtils"],function(e){function t(e){this.options=e}return t.prototype.format=function(e,t){return this.formatFragment(e,t)},t.prototype.formatFragment=function(t,n){if(e.isSpanningSelection(n,t.length,!1)){var i=n.start,r=n.end,o=e.processLines(t.substring(i,r),function(t,n){var i=e.getStartOfContent(0,t),r=t.substring(i);return(n.length>0?"\n":"")+r}),s=e.getStartOfLine(i,t,!1);s=-1!==s?s:i;var a=e.getStartOfLine(i,t,!0),l=this.formatCode(o,s,r);if(null===l)return null;if(s===a){var c=t.substring(s,e.getStartOfContent(s,t));l=e.processLines(l,function(e,t){return(t.length>0?"\n":"")+c+e})}var h={};return h.text=l,h.textStart=s,h.textEnd=r,h.fragment=!0,h.selectionStart=i,h.selectionEnd=n.end+(l.length-(n.end-s)),h}return this.formatDocument(t)},t.prototype.formatCode=function(e,t,n){throw new Error("Unimplemented"+e+t+n)},t.prototype.formatDocument=function(e){var t=this.formatCode(e,0,e.length),n={};return n.text=t,n.fragment=!1,n},t}),n("wix-code/commands/formatter/javascript/jsFormatter",["wix-code/commands/formatter/core/formatter","js-beautify/beautify"],function(e,t){function n(){e.call(this,i)}var i={indent_size:1,indent_char:"	",indent_with_tabs:!0,jslint_happy:!0,indent_inner_html:!0,max_preserve_newlines:2,preserve_newlines:!0,good_stuff:!0,selector_separator_newline:!0};return n.prototype=Object.create(e.prototype),n.prototype.formatCode=function(e){return t.js_beautify(e,this.options)},n}),n("wix-code/commands/formatter/javascript/jsFormatterCommand",["wix-code/commands/formatter/core/formatterCommand","wix-code/commands/formatter/javascript/jsFormatter"],function(e,t){function n(t){e.call(this,t)}return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.createFormatter=function(e){return new t(e)},n}),n("eslint/conf/globals",[],function(){return{builtin:{Array:!1,ArrayBuffer:!1,Boolean:!1,constructor:!1,DataView:!1,Date:!1,decodeURI:!1,decodeURIComponent:!1,encodeURI:!1,encodeURIComponent:!1,Error:!1,escape:!1,eval:!1,EvalError:!1,Float32Array:!1,Float64Array:!1,Function:!1,hasOwnProperty:!1,Infinity:!1,Int16Array:!1,Int32Array:!1,Int8Array:!1,isFinite:!1,isNaN:!1,isPrototypeOf:!1,JSON:!1,Map:!1,Math:!1,NaN:!1,Number:!1,Object:!1,parseFloat:!1,parseInt:!1,Promise:!1,propertyIsEnumerable:!1,Proxy:!1,RangeError:!1,ReferenceError:!1,Reflect:!1,RegExp:!1,Set:!1,String:!1,Symbol:!1,SyntaxError:!1,System:!1,toLocaleString:!1,toString:!1,TypeError:!1,Uint16Array:!1,Uint32Array:!1,Uint8Array:!1,Uint8ClampedArray:!1,undefined:!1,unescape:!1,URIError:!1,valueOf:!1,WeakMap:!1,WeakSet:!1},browser:{addEventListener:!1,alert:!1,AnalyserNode:!1,AnimationEvent:!1,applicationCache:!1,ApplicationCache:!1,ApplicationCacheErrorEvent:!1,atob:!1,Attr:!1,Audio:!1,AudioBuffer:!1,AudioBufferSourceNode:!1,AudioContext:!1,AudioDestinationNode:!1,AudioListener:!1,AudioNode:!1,AudioParam:!1,AudioProcessingEvent:!1,AutocompleteErrorEvent:!1,BarProp:!1,BatteryManager:!1,BeforeUnloadEvent:!1,BiquadFilterNode:!1,Blob:!1,blur:!1,btoa:!1,Cache:!1,caches:!1,CacheStorage:!1,cancelAnimationFrame:!1,CanvasGradient:!1,CanvasPattern:!1,CanvasRenderingContext2D:!1,CDATASection:!1,ChannelMergerNode:!1,ChannelSplitterNode:!1,CharacterData:!1,clearInterval:!1,clearTimeout:!1,clientInformation:!1,ClientRect:!1,ClientRectList:!1,ClipboardEvent:!1,close:!1,closed:!1,CloseEvent:!1,Comment:!1,CompositionEvent:!1,confirm:!1,console:!1,ConvolverNode:!1,crypto:!1,Crypto:!1,CryptoKey:!1,CSS:!1,CSSFontFaceRule:!1,CSSImportRule:!1,CSSKeyframeRule:!1,CSSKeyframesRule:!1,CSSMediaRule:!1,CSSPageRule:!1,CSSRule:!1,CSSRuleList:!1,CSSStyleDeclaration:!1,CSSStyleRule:!1,CSSStyleSheet:!1,CSSSupportsRule:!1,CSSUnknownRule:!1,CSSViewportRule:!1,CustomEvent:!1,DataTransfer:!1,DataTransferItem:!1,DataTransferItemList:!1,Debug:!1,defaultStatus:!1,defaultstatus:!1,DelayNode:!1,DeviceMotionEvent:!1,DeviceOrientationEvent:!1,devicePixelRatio:!1,dispatchEvent:!1,document:!1,Document:!1,DocumentFragment:!1,DocumentType:!1,DOMError:!1,DOMException:!1,DOMImplementation:!1,DOMParser:!1,DOMSettableTokenList:!1,DOMStringList:!1,DOMStringMap:!1,DOMTokenList:!1,DragEvent:!1,DynamicsCompressorNode:!1,Element:!1,ElementTimeControl:!1,ErrorEvent:!1,event:!1,Event:!1,EventSource:!1,EventTarget:!1,external:!1,fetch:!1,File:!1,FileError:!1,FileList:!1,FileReader:!1,find:!1,focus:!1,FocusEvent:!1,FontFace:!1,FormData:!1,frameElement:!1,frames:!1,GainNode:!1,Gamepad:!1,GamepadButton:!1,GamepadEvent:!1,getComputedStyle:!1,getSelection:!1,HashChangeEvent:!1,Headers:!1,history:!1,History:!1,HTMLAllCollection:!1,HTMLAnchorElement:!1,HTMLAppletElement:!1,HTMLAreaElement:!1,HTMLAudioElement:!1,HTMLBaseElement:!1,HTMLBlockquoteElement:!1,HTMLBodyElement:!1,HTMLBRElement:!1,HTMLButtonElement:!1,HTMLCanvasElement:!1,HTMLCollection:!1,HTMLContentElement:!1,HTMLDataListElement:!1,HTMLDetailsElement:!1,HTMLDialogElement:!1,HTMLDirectoryElement:!1,HTMLDivElement:!1,HTMLDListElement:!1,HTMLDocument:!1,HTMLElement:!1,HTMLEmbedElement:!1,HTMLFieldSetElement:!1,HTMLFontElement:!1,HTMLFormControlsCollection:!1,HTMLFormElement:!1,HTMLFrameElement:!1,HTMLFrameSetElement:!1,HTMLHeadElement:!1,HTMLHeadingElement:!1,HTMLHRElement:!1,HTMLHtmlElement:!1,HTMLIFrameElement:!1,HTMLImageElement:!1,HTMLInputElement:!1,HTMLIsIndexElement:!1,HTMLKeygenElement:!1,HTMLLabelElement:!1,HTMLLayerElement:!1,HTMLLegendElement:!1,HTMLLIElement:!1,HTMLLinkElement:!1,HTMLMapElement:!1,HTMLMarqueeElement:!1,HTMLMediaElement:!1,HTMLMenuElement:!1,HTMLMetaElement:!1,HTMLMeterElement:!1,HTMLModElement:!1,HTMLObjectElement:!1,HTMLOListElement:!1,HTMLOptGroupElement:!1,HTMLOptionElement:!1,HTMLOptionsCollection:!1,HTMLOutputElement:!1,HTMLParagraphElement:!1,HTMLParamElement:!1,HTMLPictureElement:!1,HTMLPreElement:!1,HTMLProgressElement:!1,HTMLQuoteElement:!1,HTMLScriptElement:!1,HTMLSelectElement:!1,HTMLShadowElement:!1,HTMLSourceElement:!1,HTMLSpanElement:!1,HTMLStyleElement:!1,HTMLTableCaptionElement:!1,HTMLTableCellElement:!1,HTMLTableColElement:!1,HTMLTableElement:!1,HTMLTableRowElement:!1,HTMLTableSectionElement:!1,HTMLTemplateElement:!1,HTMLTextAreaElement:!1,HTMLTitleElement:!1,HTMLTrackElement:!1,HTMLUListElement:!1,HTMLUnknownElement:!1,HTMLVideoElement:!1,IDBCursor:!1,IDBCursorWithValue:!1,IDBDatabase:!1,IDBEnvironment:!1,IDBFactory:!1,IDBIndex:!1,IDBKeyRange:!1,IDBObjectStore:!1,IDBOpenDBRequest:!1,IDBRequest:!1,IDBTransaction:!1,IDBVersionChangeEvent:!1,Image:!1,ImageBitmap:!1,ImageData:!1,indexedDB:!1,innerHeight:!1,innerWidth:!1,InputEvent:!1,InputMethodContext:!1,Intl:!1,KeyboardEvent:!1,length:!1,localStorage:!1,location:!1,Location:!1,locationbar:!1,matchMedia:!1,MediaElementAudioSourceNode:!1,MediaEncryptedEvent:!1,MediaError:!1,MediaKeyError:!1,MediaKeyEvent:!1,MediaKeyMessageEvent:!1,MediaKeys:!1,MediaKeySession:!1,MediaKeyStatusMap:!1,MediaKeySystemAccess:!1,MediaList:!1,MediaQueryList:!1,MediaQueryListEvent:!1,MediaSource:!1,MediaStreamAudioDestinationNode:!1,MediaStreamAudioSourceNode:!1,MediaStreamEvent:!1,MediaStreamTrack:!1,menubar:!1,MessageChannel:!1,MessageEvent:!1,MessagePort:!1,MIDIAccess:!1,MIDIConnectionEvent:!1,MIDIInput:!1,MIDIInputMap:!1,MIDIMessageEvent:!1,MIDIOutput:!1,MIDIOutputMap:!1,MIDIPort:!1,MimeType:!1,MimeTypeArray:!1,MouseEvent:!1,moveBy:!1,moveTo:!1,MutationEvent:!1,MutationObserver:!1,MutationRecord:!1,name:!1,NamedNodeMap:!1,navigator:!1,Navigator:!1,Node:!1,NodeFilter:!1,NodeIterator:!1,NodeList:!1,Notification:!1,OfflineAudioCompletionEvent:!1,OfflineAudioContext:!1,offscreenBuffering:!1,onbeforeunload:!0,onblur:!0,onerror:!0,onfocus:!0,onload:!0,onresize:!0,
onunload:!0,open:!1,openDatabase:!1,opener:!1,opera:!1,Option:!1,OscillatorNode:!1,outerHeight:!1,outerWidth:!1,PageTransitionEvent:!1,pageXOffset:!1,pageYOffset:!1,parent:!1,Path2D:!1,performance:!1,Performance:!1,PerformanceEntry:!1,PerformanceMark:!1,PerformanceMeasure:!1,PerformanceNavigation:!1,PerformanceResourceTiming:!1,PerformanceTiming:!1,PeriodicWave:!1,Permissions:!1,PermissionStatus:!1,personalbar:!1,Plugin:!1,PluginArray:!1,PopStateEvent:!1,postMessage:!1,print:!1,ProcessingInstruction:!1,ProgressEvent:!1,prompt:!1,PushManager:!1,PushSubscription:!1,RadioNodeList:!1,Range:!1,ReadableByteStream:!1,ReadableStream:!1,removeEventListener:!1,Request:!1,requestAnimationFrame:!1,resizeBy:!1,resizeTo:!1,Response:!1,RTCIceCandidate:!1,RTCSessionDescription:!1,screen:!1,Screen:!1,screenLeft:!1,ScreenOrientation:!1,screenTop:!1,screenX:!1,screenY:!1,ScriptProcessorNode:!1,scroll:!1,scrollbars:!1,scrollBy:!1,scrollTo:!1,scrollX:!1,scrollY:!1,SecurityPolicyViolationEvent:!1,Selection:!1,self:!1,ServiceWorker:!1,ServiceWorkerContainer:!1,ServiceWorkerRegistration:!1,sessionStorage:!1,setInterval:!1,setTimeout:!1,ShadowRoot:!1,SharedWorker:!1,showModalDialog:!1,speechSynthesis:!1,SpeechSynthesisEvent:!1,SpeechSynthesisUtterance:!1,status:!1,statusbar:!1,stop:!1,Storage:!1,StorageEvent:!1,styleMedia:!1,StyleSheet:!1,StyleSheetList:!1,SubtleCrypto:!1,SVGAElement:!1,SVGAltGlyphDefElement:!1,SVGAltGlyphElement:!1,SVGAltGlyphItemElement:!1,SVGAngle:!1,SVGAnimateColorElement:!1,SVGAnimatedAngle:!1,SVGAnimatedBoolean:!1,SVGAnimatedEnumeration:!1,SVGAnimatedInteger:!1,SVGAnimatedLength:!1,SVGAnimatedLengthList:!1,SVGAnimatedNumber:!1,SVGAnimatedNumberList:!1,SVGAnimatedPathData:!1,SVGAnimatedPoints:!1,SVGAnimatedPreserveAspectRatio:!1,SVGAnimatedRect:!1,SVGAnimatedString:!1,SVGAnimatedTransformList:!1,SVGAnimateElement:!1,SVGAnimateMotionElement:!1,SVGAnimateTransformElement:!1,SVGAnimationElement:!1,SVGCircleElement:!1,SVGClipPathElement:!1,SVGColor:!1,SVGColorProfileElement:!1,SVGColorProfileRule:!1,SVGComponentTransferFunctionElement:!1,SVGCSSRule:!1,SVGCursorElement:!1,SVGDefsElement:!1,SVGDescElement:!1,SVGDiscardElement:!1,SVGDocument:!1,SVGElement:!1,SVGElementInstance:!1,SVGElementInstanceList:!1,SVGEllipseElement:!1,SVGEvent:!1,SVGExternalResourcesRequired:!1,SVGFEBlendElement:!1,SVGFEColorMatrixElement:!1,SVGFEComponentTransferElement:!1,SVGFECompositeElement:!1,SVGFEConvolveMatrixElement:!1,SVGFEDiffuseLightingElement:!1,SVGFEDisplacementMapElement:!1,SVGFEDistantLightElement:!1,SVGFEDropShadowElement:!1,SVGFEFloodElement:!1,SVGFEFuncAElement:!1,SVGFEFuncBElement:!1,SVGFEFuncGElement:!1,SVGFEFuncRElement:!1,SVGFEGaussianBlurElement:!1,SVGFEImageElement:!1,SVGFEMergeElement:!1,SVGFEMergeNodeElement:!1,SVGFEMorphologyElement:!1,SVGFEOffsetElement:!1,SVGFEPointLightElement:!1,SVGFESpecularLightingElement:!1,SVGFESpotLightElement:!1,SVGFETileElement:!1,SVGFETurbulenceElement:!1,SVGFilterElement:!1,SVGFilterPrimitiveStandardAttributes:!1,SVGFitToViewBox:!1,SVGFontElement:!1,SVGFontFaceElement:!1,SVGFontFaceFormatElement:!1,SVGFontFaceNameElement:!1,SVGFontFaceSrcElement:!1,SVGFontFaceUriElement:!1,SVGForeignObjectElement:!1,SVGGElement:!1,SVGGeometryElement:!1,SVGGlyphElement:!1,SVGGlyphRefElement:!1,SVGGradientElement:!1,SVGGraphicsElement:!1,SVGHKernElement:!1,SVGICCColor:!1,SVGImageElement:!1,SVGLangSpace:!1,SVGLength:!1,SVGLengthList:!1,SVGLinearGradientElement:!1,SVGLineElement:!1,SVGLocatable:!1,SVGMarkerElement:!1,SVGMaskElement:!1,SVGMatrix:!1,SVGMetadataElement:!1,SVGMissingGlyphElement:!1,SVGMPathElement:!1,SVGNumber:!1,SVGNumberList:!1,SVGPaint:!1,SVGPathElement:!1,SVGPathSeg:!1,SVGPathSegArcAbs:!1,SVGPathSegArcRel:!1,SVGPathSegClosePath:!1,SVGPathSegCurvetoCubicAbs:!1,SVGPathSegCurvetoCubicRel:!1,SVGPathSegCurvetoCubicSmoothAbs:!1,SVGPathSegCurvetoCubicSmoothRel:!1,SVGPathSegCurvetoQuadraticAbs:!1,SVGPathSegCurvetoQuadraticRel:!1,SVGPathSegCurvetoQuadraticSmoothAbs:!1,SVGPathSegCurvetoQuadraticSmoothRel:!1,SVGPathSegLinetoAbs:!1,SVGPathSegLinetoHorizontalAbs:!1,SVGPathSegLinetoHorizontalRel:!1,SVGPathSegLinetoRel:!1,SVGPathSegLinetoVerticalAbs:!1,SVGPathSegLinetoVerticalRel:!1,SVGPathSegList:!1,SVGPathSegMovetoAbs:!1,SVGPathSegMovetoRel:!1,SVGPatternElement:!1,SVGPoint:!1,SVGPointList:!1,SVGPolygonElement:!1,SVGPolylineElement:!1,SVGPreserveAspectRatio:!1,SVGRadialGradientElement:!1,SVGRect:!1,SVGRectElement:!1,SVGRenderingIntent:!1,SVGScriptElement:!1,SVGSetElement:!1,SVGStopElement:!1,SVGStringList:!1,SVGStylable:!1,SVGStyleElement:!1,SVGSVGElement:!1,SVGSwitchElement:!1,SVGSymbolElement:!1,SVGTests:!1,SVGTextContentElement:!1,SVGTextElement:!1,SVGTextPathElement:!1,SVGTextPositioningElement:!1,SVGTitleElement:!1,SVGTransform:!1,SVGTransformable:!1,SVGTransformList:!1,SVGTRefElement:!1,SVGTSpanElement:!1,SVGUnitTypes:!1,SVGURIReference:!1,SVGUseElement:!1,SVGViewElement:!1,SVGViewSpec:!1,SVGVKernElement:!1,SVGZoomAndPan:!1,SVGZoomEvent:!1,Text:!1,TextDecoder:!1,TextEncoder:!1,TextEvent:!1,TextMetrics:!1,TextTrack:!1,TextTrackCue:!1,TextTrackCueList:!1,TextTrackList:!1,TimeEvent:!1,TimeRanges:!1,toolbar:!1,top:!1,Touch:!1,TouchEvent:!1,TouchList:!1,TrackEvent:!1,TransitionEvent:!1,TreeWalker:!1,UIEvent:!1,URL:!1,ValidityState:!1,VTTCue:!1,WaveShaperNode:!1,WebGLActiveInfo:!1,WebGLBuffer:!1,WebGLContextEvent:!1,WebGLFramebuffer:!1,WebGLProgram:!1,WebGLRenderbuffer:!1,WebGLRenderingContext:!1,WebGLShader:!1,WebGLShaderPrecisionFormat:!1,WebGLTexture:!1,WebGLUniformLocation:!1,WebSocket:!1,WheelEvent:!1,window:!1,Window:!1,Worker:!1,XDomainRequest:!1,XMLDocument:!1,XMLHttpRequest:!1,XMLHttpRequestEventTarget:!1,XMLHttpRequestProgressEvent:!1,XMLHttpRequestUpload:!1,XMLSerializer:!1,XPathEvaluator:!1,XPathException:!1,XPathExpression:!1,XPathNamespace:!1,XPathNSResolver:!1,XPathResult:!1,XSLTProcessor:!1},worker:{applicationCache:!1,atob:!1,BroadcastChannel:!1,btoa:!1,Cache:!1,caches:!1,clearInterval:!1,clearTimeout:!1,close:!0,console:!1,fetch:!1,FileReaderSync:!1,FormData:!1,Headers:!1,IDBCursor:!1,IDBCursorWithValue:!1,IDBDatabase:!1,IDBFactory:!1,IDBIndex:!1,IDBKeyRange:!1,IDBObjectStore:!1,IDBOpenDBRequest:!1,IDBRequest:!1,IDBTransaction:!1,IDBVersionChangeEvent:!1,ImageData:!1,importScripts:!0,indexedDB:!1,location:!1,MessageChannel:!1,MessagePort:!1,name:!1,navigator:!1,Notification:!1,onclose:!0,onconnect:!0,onerror:!0,onlanguagechange:!0,onmessage:!0,onoffline:!0,ononline:!0,onrejectionhandled:!0,onunhandledrejection:!0,performance:!1,Performance:!1,PerformanceEntry:!1,PerformanceMark:!1,PerformanceMeasure:!1,PerformanceNavigation:!1,PerformanceResourceTiming:!1,PerformanceTiming:!1,postMessage:!0,Promise:!1,Request:!1,Response:!1,self:!0,ServiceWorkerRegistration:!1,setInterval:!1,setTimeout:!1,TextDecoder:!1,TextEncoder:!1,URL:!1,WebSocket:!1,Worker:!1,XMLHttpRequest:!1},node:{__dirname:!1,__filename:!1,arguments:!1,Buffer:!1,clearImmediate:!1,clearInterval:!1,clearTimeout:!1,console:!1,exports:!0,GLOBAL:!1,global:!1,module:!1,process:!1,require:!1,root:!1,setImmediate:!1,setInterval:!1,setTimeout:!1},commonjs:{exports:!0,module:!1,require:!1},amd:{define:!1,require:!1},mocha:{after:!1,afterEach:!1,before:!1,beforeEach:!1,context:!1,describe:!1,it:!1,mocha:!1,setup:!1,specify:!1,suite:!1,suiteSetup:!1,suiteTeardown:!1,teardown:!1,test:!1,xcontext:!1,xdescribe:!1,xit:!1,xspecify:!1},jasmine:{afterAll:!1,afterEach:!1,beforeAll:!1,beforeEach:!1,describe:!1,expect:!1,fail:!1,fdescribe:!1,fit:!1,it:!1,jasmine:!1,pending:!1,runs:!1,spyOn:!1,waits:!1,waitsFor:!1,xdescribe:!1,xit:!1},jest:{afterEach:!1,beforeEach:!1,describe:!1,expect:!1,it:!1,jest:!1,pit:!1,require:!1,xdescribe:!1,xit:!1},qunit:{asyncTest:!1,deepEqual:!1,equal:!1,expect:!1,module:!1,notDeepEqual:!1,notEqual:!1,notOk:!1,notPropEqual:!1,notStrictEqual:!1,ok:!1,propEqual:!1,QUnit:!1,raises:!1,start:!1,stop:!1,strictEqual:!1,test:!1,"throws":!1},phantomjs:{console:!0,exports:!0,phantom:!0,require:!0,WebPage:!0},couch:{emit:!1,exports:!1,getRow:!1,log:!1,module:!1,provides:!1,require:!1,respond:!1,send:!1,start:!1,sum:!1},rhino:{defineClass:!1,deserialize:!1,gc:!1,help:!1,importClass:!1,importPackage:!1,java:!1,load:!1,loadClass:!1,Packages:!1,print:!1,quit:!1,readFile:!1,readUrl:!1,runCommand:!1,seal:!1,serialize:!1,spawn:!1,sync:!1,toint32:!1,version:!1},nashorn:{__DIR__:!1,__FILE__:!1,__LINE__:!1,com:!1,edu:!1,exit:!1,Java:!1,java:!1,javafx:!1,JavaImporter:!1,javax:!1,JSAdapter:!1,load:!1,loadWithNewGlobal:!1,org:!1,Packages:!1,print:!1,quit:!1},wsh:{ActiveXObject:!0,Enumerator:!0,GetObject:!0,ScriptEngine:!0,ScriptEngineBuildVersion:!0,ScriptEngineMajorVersion:!0,ScriptEngineMinorVersion:!0,VBArray:!0,WScript:!0,WSH:!0,XDomainRequest:!0},jquery:{$:!1,jQuery:!1},yui:{Y:!1,YUI:!1,YUI_config:!1},shelljs:{cat:!1,cd:!1,chmod:!1,config:!1,cp:!1,dirs:!1,echo:!1,env:!1,error:!1,exec:!1,exit:!1,find:!1,grep:!1,ls:!1,mkdir:!1,mv:!1,popd:!1,pushd:!1,pwd:!1,rm:!1,sed:!1,target:!1,tempdir:!1,test:!1,which:!1},prototypejs:{$:!1,$$:!1,$A:!1,$break:!1,$continue:!1,$F:!1,$H:!1,$R:!1,$w:!1,Abstract:!1,Ajax:!1,Autocompleter:!1,Builder:!1,Class:!1,Control:!1,Draggable:!1,Draggables:!1,Droppables:!1,Effect:!1,Element:!1,Enumerable:!1,Event:!1,Field:!1,Form:!1,Hash:!1,Insertion:!1,ObjectRange:!1,PeriodicalExecuter:!1,Position:!1,Prototype:!1,Scriptaculous:!1,Selector:!1,Sortable:!1,SortableObserver:!1,Sound:!1,Template:!1,Toggle:!1,Try:!1},meteor:{$:!1,_:!1,Accounts:!1,App:!1,Assets:!1,Blaze:!1,check:!1,Cordova:!1,DDP:!1,DDPServer:!1,Deps:!1,EJSON:!1,Email:!1,HTTP:!1,Log:!1,Match:!1,Meteor:!1,Mongo:!1,MongoInternals:!1,Npm:!1,Package:!1,Plugin:!1,process:!1,Random:!1,ReactiveDict:!1,ReactiveVar:!1,Router:!1,Session:!1,share:!1,Spacebars:!1,Template:!1,Tinytest:!1,Tracker:!1,UI:!1,Utils:!1,WebApp:!1,WebAppInternals:!1},mongo:{_isWindows:!1,_rand:!1,BulkWriteResult:!1,cat:!1,cd:!1,connect:!1,db:!1,getHostName:!1,getMemInfo:!1,hostname:!1,listFiles:!1,load:!1,ls:!1,md5sumFile:!1,mkdir:!1,Mongo:!1,ObjectId:!1,PlanCache:!1,pwd:!1,quit:!1,removeFile:!1,rs:!1,sh:!1,UUID:!1,version:!1,WriteResult:!1},applescript:{$:!1,Application:!1,Automation:!1,console:!1,delay:!1,Library:!1,ObjC:!1,ObjectSpecifier:!1,Path:!1,Progress:!1,Ref:!1},serviceworker:{caches:!1,Cache:!1,CacheStorage:!1,Client:!1,clients:!1,Clients:!1,ExtendableEvent:!1,ExtendableMessageEvent:!1,FetchEvent:!1,importScripts:!1,registration:!1,self:!1,ServiceWorker:!1,ServiceWorkerContainer:!1,ServiceWorkerGlobalScope:!1,ServiceWorkerMessageEvent:!1,ServiceWorkerRegistration:!1,skipWaiting:!1,WindowClient:!1},embertest:{andThen:!1,click:!1,currentPath:!1,currentRouteName:!1,currentUrl:!1,fillIn:!1,find:!1,keyEvent:!1,triggerEvent:!1,visit:!1},protractor:{$:!1,$$:!1,browser:!1,By:!1,by:!1,DartObject:!1,element:!1,protractor:!1},"shared-node-browser":{clearInterval:!1,clearTimeout:!1,console:!1,setInterval:!1,setTimeout:!1},webextensions:{browser:!1,chrome:!1,opr:!1}}}),n("wix-code/orion-overrides/eslint/conf/globals",["eslint/conf/globals","wix-code/constants"],function(e,t){function n(t){e.builtin[t]=!1}var i=[t.WIX_DOLLAR,t.CONSOLE],r=["setTimeout","setInterval","clearInterval","clearTimeout","fetch","atob","btoa"];return i.forEach(n),r.forEach(n),e}),n("eslint/conf/environments",["./globals"],function(e){var t={builtin:e.builtin,browser:{globals:e.browser},node:{globals:e.node,ecmaFeatures:{globalReturn:!0}},commonjs:{globals:e.commonjs,ecmaFeatures:{globalReturn:!0}},worker:{globals:e.worker},amd:{globals:e.amd},mocha:{globals:e.mocha},jasmine:{globals:e.jasmine},jest:{globals:e.jest},phantomjs:{globals:e.phantom},jquery:{globals:e.jquery},qunit:{globals:e.qunit},prototypejs:{globals:e.prototypejs},shelljs:{globals:e.shelljs},meteor:{globals:e.meteor},mongo:{globals:e.mongo},protractor:{globals:e.protractor},applescript:{globals:e.applescript},nashorn:{globals:e.nashorn},serviceworker:{globals:e.serviceworker},embertest:{globals:e.embertest},webextensions:{globals:e.webextensions},es6:{ecmaFeatures:{arrowFunctions:!0,blockBindings:!0,regexUFlag:!0,regexYFlag:!0,templateStrings:!0,binaryLiterals:!0,octalLiterals:!0,unicodeCodePointEscapes:!0,superInFunctions:!0,defaultParams:!0,restParams:!0,forOf:!0,objectLiteralComputedProperties:!0,objectLiteralShorthandMethods:!0,objectLiteralShorthandProperties:!0,objectLiteralDuplicateProperties:!0,generators:!0,destructuring:!0,classes:!0,spread:!0,newTarget:!0}}};return t}),n("javascript/finder",["estraverse/estraverse","eslint/conf/environments"],function(e,t){e.VisitorKeys.RecoveredNode||(e.VisitorKeys.RecoveredNode=[]);var n={visitor:null,punc:"\n	\r (){}[]:;,.+=-*^&@!%~`'\"/\\",findWord:function(e,t){if(e&&t>-1){for(var n=this.punc.indexOf(e.charAt(t))>-1,i=n&&t>0?t-1:t;i>=0&&!(this.punc.indexOf(e.charAt(i))>-1);)i--;var r=i;for(i=t;i<=e.length&&!(this.punc.indexOf(e.charAt(i))>-1);)i++;return(r===t||n&&r===t-1)&&i===t?null:r===t?e.substring(r,i):e.substring(r+1,i)}return null},findNode:function(t,n,i){var r=null,o=i&&i.parents?[]:null,s=i&&i.next?i.next:!1;if("number"==typeof t&&t>-1&&n&&e.traverse(n,{enter:function(n){if(n.type&&n.range){if(!s&&n.type===e.Syntax.Program&&t<n.range[0])return e.VisitorOption.Break;var i=!1;if((n.range[0]===t&&r&&r.range[1]===t&&"ClassBody"===n.type||"FunctionExpression"===n.type&&r&&"Identifier"===r.type)&&(i=!0),!i&&n.range[0]<=t||i&&n.range[0]<t)r=n,o&&o.push(n);else if(s&&(r=n,o&&o.push(n)),r.type!==e.Syntax.Program)return e.VisitorOption.Break}},leave:function(e){o&&t>e.range[1]&&o.pop()}}),r&&o&&o.length>0){var a=o[o.length-1];"Program"!==a.type&&a.range[0]===r.range[0]&&a.range[1]===r.range[1]&&o.pop(),r.parents=o}return r},findNodeAfterComment:function(t,n){var i=null,r=[];if(Array.isArray(t.range)&&n){var o=t.range[1];e.traverse(n,{enter:function(t,n){if(t.type&&t.range)if(n&&r.push(n),o>t.range[0])i=t;else if(i=t,t.type!==e.Syntax.Program)return e.VisitorOption.Break}})}return i&&(i.parents=r),i},findNodesForRange:function(t,n,i){var r=[];return t&&e.traverse(t,{enter:function(t){return t.range[0]>=n&&t.range[0]<i&&r.push(t),t.range[0]>=i?e.VisitorOption.BREAK:void 0}}),r},findToken:function(e,t){if("number"==typeof e&&e>-1&&t&&t.length>0){var n,i=0,r=t.length-1,o=0;if(n=t[0],e>=n.range[0]&&e<n.range[1])return n.index=0,n;if(n=t[r],e>=n.range[0])return n.index=r,n;for(n=null;r>=i;){if(o=Math.floor((i+r)/2),n=t[o],e<n.range[0])r=o-1;else if(e>n.range[1])i=o+1;else if(e===n.range[1]){var s=t[o+1];if(s.range[0]!==n.range[1])return n.index=o,n;i=o+1}else if(e>=n.range[0]&&e<n.range[1])return n.index=o,n;if(i===r)return n=t[i],e>=n.range[0]&&e<=n.range[1]?(n.index=i,n):null}}return null},findComment:function(e,t){if(t.comments){for(var n=t.comments,i=n.length,r=0;i>r;r++){var o=n[r];if(o.range[0]<e&&o.range[1]>=e)return o;if(e===t.range[1]&&e===o.range[1])return o;if(e>t.range[1]&&e<=o.range[1])return o;if(o.range[0]>e)return null}return null}},findScriptBlocks:function(e,t){var n=[],i=null,r=/<\s*script([^>]*)(?:\/>|>((?:.|\r?\n)*?)<\s*\/script[^<>]*>)/gi,o=/(type|language)\s*=\s*"([^"]*)"/i,s=/src\s*=\s*"([^"]*)"/i,a=this.findHtmlCommentBlocks(e,t);e:for(;null!==(i=r.exec(e));){var l=i[1],c=i[2],h=null;if(l){var d=o.exec(l);if(d&&d[2]){var u=d[2];if("language"===d[1]&&(u="text/"+u),!/^(application|text)\/(ecmascript|javascript(\d.\d)?|livescript|jscript|x\-ecmascript|x\-javascript)$/gi.test(u))continue}var p=s.exec(l);p&&(h=p[1])}if(c||!h){if(void 0!==c){var f=i.index+i[0].indexOf(">")+1;if("number"!=typeof t||t>=f&&f+c.length>=t){for(var g=0;g<a.length;g++)if(a[g].start<=f&&a[g].end>=f)continue e;n.push({text:c,offset:f,dependencies:h})}}}else n.push({text:"",offset:0,dependencies:h})}var m={blur:!0,change:!0,click:!0,dblclick:!0,focus:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,mousedown:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,reset:!0,select:!0,submit:!0,unload:!0},v=/(\s+)on(\w*)(\s*=\s*")([^"]*)"/gi,_=0;e:for(;null!==(i=v.exec(e));){_++;var y=i[1],x=i[2],w=i[3];if(c=i[4],x&&x.toLowerCase()in m&&(c||(c=""),f=i.index+y.length+2+x.length+w.length,"number"!=typeof t||t>=f&&f+c.length>=t)){for(var b=0;b<a.length;b++)if(a[b].start<=f&&a[b].end>=f)continue e;n.push({text:c,offset:f,isWrappedFunctionCall:!0})}}return n},findHtmlCommentBlocks:function(e,t){for(var n=[],i=null,r=/<!--((?:.|\r?\n)*?)-->/gi;null!=(i=r.exec(e));){var o=i[1];o.length<1||("number"!=typeof t||i.index<=t&&i.index+o.length>=i.index)&&n.push({text:o,start:i.index,end:i.index+o.length})}return n},findESLintEnvForMember:function(e){var n=Object.keys(t);if(n)for(var i=n.length,r=0;i>r;r++){var o=t[n[r]];if("undefined"!=typeof o[e])return n[r];var s=o.globals;if(s&&"undefined"!=typeof s[e])return n[r]}return null},findDirective:function(e,t){if(e&&"undefined"!=typeof t)for(var n=e.comments.length,i=0;n>i;i++){var r=/^\s*(eslint-\w+|eslint|globals?)(\s|$)/.exec(e.comments[i].value);if(null!==r&&"undefined"!=typeof r&&r[1]===t)return e.comments[i]}return null},findCommentForNode:function i(e){var t=e.leadingComments,n=null;if(t&&t.length>0){if(n=t[t.length-1],"Block"===n.type)return n.node=e,n}else if("Property"===e.type){if(n=i(e.key))return n.node=e,n}else if("FunctionDeclaration"===e.type&&(n=i(e.id)))return n.node=e,n;return n=Object.create(null),n.node=e,n.value="",n},findParentFunction:function(e){if(e)if(e.parents)for(var t=e.parents,n=t.pop();n;){if("FunctionDeclaration"===n.type||"FunctionExpression"===n.type)return n;n=t.pop()}else if(e.parent)for(n=e.parent;n;){if("FunctionDeclaration"===n.type||"FunctionExpression"===n.type)return n;n=n.parent}return null},findCompletionKind:function(e,t){var i=this.findNode(t,e,{parents:!0});if(i){if("Literal"===i.type)switch(typeof i.value){case"boolean":case"number":if(t>i.range[0]&&t<=i.range[1])return{kind:"unknown"};break;case"string":if(t>i.range[0]&&t<i.range[1])return{kind:"string"};break;case"object":if(i.regex&&t>i.range[0]&&t<=i.range[1])return{kind:"regex"}}if(i.parents&&i.parents.length>0){var r=i.parents.pop();switch(r.type){case"MemberExpression":return{kind:"member"};case"Program":case"BlockStatement":break;case"VariableDeclarator":if(!r.init||t<r.init.range[0])return{kind:"unknown"};break;case"FunctionDeclaration":case"FunctionExpression":if(t<r.body.range[0])return{kind:"unknown"};break;case"Property":return t-1>=r.value.range[0]&&t-1<=r.value.range[1]?{kind:"prop"}:{kind:"unknown"};case"SwitchStatement":return{kind:"swtch"}}}}return i=n.findComment(t,e),i?{kind:"doc",node:i}:{kind:"top"}},findTemplatesForKind:function(e,t,n){for(var i=[],r=0,o=e.length;o>r;r++){var s=e[r];s.nodes&&s.nodes[t]&&(s.ecma<=n||void 0===s.ecma)&&i.push(s)}return i}};return n}),n("wix-code/utils/astHelpers",["wix-code/constants"],function(e){function t(t){return t&&t.type===e.AssignmentExpression}function n(t){return t&&t.type===e.CallExpression}function i(t){return t&&t.type==e.MemberExpression}function r(t){return t.type===e.ExpressionStatement}function o(e){return n(e)||t(e)||i(e)}function s(t,n){return t&&t.type===e.Identifier&&(void 0===n||t.name===n)}return{isCallExpression:n,isMemberExpression:i,isExpression:o,isIdentifier:s,isAssignmentExpression:t,isExpressionStatement:r}}),n("wix-code/utils/selectorParser",["wix-code/constants","wix-code/codemodel","wix-code/utils/astHelpers"],function(e,t,n){function i(t){return t?n.isIdentifier(t.callee,e.WIX_DOLLAR)?t:n.isIdentifier(t,e.WIX_DOLLAR)?t.parentNode:null:null}function r(e){return n.isMemberExpression(e)&&n.isCallExpression(e.object)?e.object:n.isExpressionStatement(e)&&n.isCallExpression(e.expression)?e.expression:n.isCallExpression(e)?e.callee:null}return t=t["default"],{WIX_DOLLAR:e.WIX_DOLLAR,isWixSelector:function(e){var t=r(e);return null!==i(t)},isWixSelectorFn:function(e){return null!==i(e)},getSelectorLiteral:function(t){var n=r(t);if(n){var o=i(n);if(o&&1===o.arguments.length&&o.arguments[0].type===e.Literal)return o.arguments[0]}return null},resolveSelector:function(e,n){if(!e||!n)return null;var i=this.getSelectorLiteral(e);return i?t.parseSelector(i.value,n)||null:null},getSelectorCandidate:r}}),n("wix-code/tern/ternUtils",["estraverse/estraverse","wix-code/constants","wix-code/utils/selectorParser","wix-code/utils/astHelpers"],function(e,t,n,i){function r(e,t,n,i,r){var o=e.scopeAt(t,n.range[0]),s=e.expressionType({node:n,state:o});if(s){if(s.propertyOf&&s.propertyOf.origin===i)return s.propertyOf;var a=s.getType();if(a&&null!==a&&a.origin===i)return void 0===r?!0:a.name===r}return!1}function o(n,i){i=i||[t.ImportDefaultSpecifier,t.ImportSpecifier];var r=[];return e.traverse(n,{enter:function(e){if(s(e)){var n={node:e,specifiers:[]};e.specifiers.forEach(function(e){i.indexOf(e.type)>=0&&e.local.type===t.Identifier&&n.specifiers.push(e)}),r.push(n)}}}),r}function s(e){return e.type===t.ImportDeclaration&&e.source&&e.source.type===t.Literal}function a(e){return e.source.value}function l(e,t,i){if(n.isWixSelectorFn(t)){var r=n.resolveSelector(t,e);if(r){var o=r.resolveMembers();return{selector:r,memberName:i.name,node:i,isValid:o&&o.hasMember(i.name),member:o&&o.getMember(i.name)}}}}function c(e,t){return{calleeObject:e,member:t}}function h(e){return e&&e.type===t.AssignmentExpression}function d(e,t){if(i.isCallExpression(e)){var n=e.callee;if(n&&i.isCallExpression(n.object)){var r=n.property;if(void 0!==t&&!i.isIdentifier(r,t))return;return c(n.object,r)}}else{if(h(e)){if(t&&e.left.property.name!==t)return;return c(e.left.object,e.left.property)}if(i.isMemberExpression(e)){if(t&&e.property.name!==t)return;return c(e.object,e.property)}}}function u(e,t,n){var i=d(e,n);return i?l(t,i.calleeObject,i.member):void 0}function p(e,t){var n=e[t.shift()];return n&&t.length>0?p(n,t):n}return{imports:o,isType:r,isImport:s,getImportName:a,resolveWixMemberAccess:u,safeGet:p}}),n("wix-code/media/mediaNodeValidator",["wix-code/constants","wix-code/tern/ternUtils","wix-code/utils/selectorParser"],function(e,t,n){function i(e,t){return Array.isArray(e)?e.every(function(e){return t.indexOf(e.fullName)>-1}):t.indexOf(e.fullName)>-1}function r(t,r){if(t&&t.parentNode){var c=t.parentNode;if(c.type===e.AssignmentExpression&&(c=c.left),c.type===e.MemberExpression&&c.property.name===o){if(c.object.type===e.CallExpression){var h=n.resolveSelector(c.object,r);return h&&i(h.getType(),a)}if(c.object.type===e.MemberExpression&&c.object.property.name===s){var h=n.resolveSelector(c.object.object,r);return h&&i(h.getType(),l)}}}}var o="src",s="background",a=["$w.Image"],l=["$w.Document","$w.Slide","$w.Column"];return{isSource:r}}),n("text!wix-code/media/mediaHoverTemplate.html",[],function(){return'<img id="hoveImage" height="100" width="150" class="media-hover-image" src=""/>\n<p class="media-hover-suggestion">Type an image url or <br> <span class="media-hover-link" id="openMediaManager">Open Media Manager</span> </p>\n'}),n("wix-code/media/mediaHover",["wix-code/constants","javascript/finder","wix-code/media/mediaNodeValidator","wix-code/media/mediaManager","text!wix-code/media/mediaHoverTemplate.html"],function(e,t,n,i,r){function o(e){this.astManager=e,this.symbols=null}function s(e,t,n){return e?i.isWixUri(e)?i.getUrlFromImageData(i.extractImageDataFromWixCodeUri(e),t,n):e:"http://static.parastorage.com/services/santa-resources/resources/editor/addPanelData/sections/imageSection/imageUploader.png"}function a(e,t,n){var o=n.createElement("div"),a=n.createRange(),l=a.createContextualFragment(r),c=l.getElementById("hoveImage");c.setAttribute("src",s(t.value,c.getAttribute("width"),c.getAttribute("height")));var h=l.getElementById("openMediaManager");return h.addEventListener("click",function(){return i.open().then(function(n){n&&e.setText('"'+n+'"',t.start,t.end)})}),o.appendChild(l),o}return o.prototype.computeHoverInfo=function(i,r){if(null===this.symbols)return null;var o=this;return this.astManager.getAST(i).then(function(s){var l=t.findNode(r.offset,s,{parents:!0});return n.isSource(l,o.symbols)&&l.type===e.Literal?{type:"wixhtml",getContent:a.bind(null,i,l)}:null})},o.prototype.onChanged=function(e){this.symbols=e},o}),n("wix-code/media/mediaAssist",["javascript/finder","wix-code/media/mediaNodeValidator","wix-code/constants","wix-code/media/mediaManager","wix-code/media/mediaUtils"],function(e,t,n,i,r){function o(e,t,n){this.editor=e,this.astManager=t,this.symbolTable=null,this.proposalStyle=n,this.registerChainedAssistListener()}function s(e){return e.type===n.Literal?"string"==typeof e.value:!1}function a(e){return e.type===n.Identifier&&e.parentNode.type===n.MemberExpression}function l(e,t){var r=!0,o=!1;s(t)?r=!1:a(t)&&(o=!0);var l=i.getRecentlyUsedUris().map(c.bind(null,e,r,o));return l.length&&l.unshift({proposal:"",description:"Recently Used Images",style:"noemphasis_title",unselectable:!0}),l.unshift({relevance:100,style:"emphasis",overwrite:!1,wixtype:n.CMD_MEDIA_MANAGER,wrapWithQuotes:r,addEquals:o,kind:"js",name:"Open Media Manager...",proposal:"",hover:{type:"markdown",content:"Open the Media Manager to select one of your images"}}),l}function c(e,t,o,s){var a=e?e.width-p:334,l=e?e.height-p:154,c=i.extractImageDataFromWixCodeUri(s),h=i.getUrlFromImageData(c,a,l),d=r.buildProposal(t,o,s);return{relevance:100,style:"emphasis",overwrite:!1,wixtype:n.CMD_MEDIA_IMAGE,kind:"js",name:c.title,proposal:d,hover:{type:"markdown",content:"!["+c.title+"]("+h+")"}}}function h(e,t){return s(e)?e.start!==t&&e.end>t:!0}function d(n,i,r,o,s){return n.getAST(i).then(function(n){var i=e.findNode(o,n,{parents:!0});return t.isSource(i,r)&&h(i,o)?s(i):void 0})}function u(e){var t=e.data&&e.data.proposal,i=t&&e.data.proposal.kind,r=t.wixtype!==n.CMD_MEDIA_MANAGER&&t.wixtype!==n.CMD_MEDIA_IMAGE;return t&&i&&r?{kind:e.data.proposal.kind,offset:e.data.end}:void 0}var p=16;return o.prototype.onChanged=function(e){this.symbolTable=e},o.prototype.computeContentAssist=function(e,t){return null===this.symbolTable?null:d(this.astManager,e,this.symbolTable,t.offset,l.bind(null,this.proposalStyle))},o.prototype.registerChainedAssistListener=function(){var e=this.editor.getEditorContext(),t=this.editor.getContentAssist(),n=this;t.addEventListener("ProposalApplied",function(i){var r=u(i);return r&&"js"===r.kind&&r.offset&&n.symbolTable?d(n.astManager,e,n.symbolTable,r.offset,t.activate.bind(t,void 0,!0)):void 0})},o}),n("wix-code/services/validator",["wix-code/utils/selectorParser","wix-code/utils/astHelpers","wix-code/tern/ternUtils","estraverse/estraverse"],function(e,t,n,i){function r(){this.set={}}function o(e){this.symbols=null,this.astManager=e}function s(e,t,n,i,r){if(!t.hasRange(n)){t.add(n);var o={id:i,description:r,severity:"error",start:n.range[0],end:n.range[1]};e.push(o)}}function a(t,n,i,r){var o=e.resolveSelector(r,i),a=e.getSelectorLiteral(r);!o&&a&&s(t,n,a,"unknown-selector",'"'+a.value+'" is not a valid selector name')}function l(e,n,i,r){r.member&&(t.isCallExpression(i)&&"function"!==r.member.kind&&s(e,n,r.node,"not-a-function",'"'+r.memberName+'" is a property'),t.isAssignmentExpression(i)&&"member"!==r.member.kind&&s(e,n,r.node,"not-a-property",'"'+r.memberName+'" is a function'))}function c(e,t,i,r){var o=n.resolveWixMemberAccess(r,i);o&&(o.isValid?l(e,t,r,o):s(e,t,o.node,"unknown-method",'"'+o.memberName+'" is undefined'))}return r.prototype._hash=function(e){return e.range[0]+"."+e.range[1]},r.prototype.hasRange=function(e){return this.set[this._hash(e)]===!0},r.prototype.add=function(e){this.set[this._hash(e)]=!0},o.prototype.onChanged=function(e){this.symbols=e},o.prototype.computeProblems=function(n){var o=this;return o.astManager.getAST(n).then(function(n){var s=[],l=new r;return i.traverse(n,{enter:function(n){e.isWixSelector(n)&&a(s,l,o.symbols,n),t.isExpression(n)&&c(s,l,o.symbols,n)}}),s})},o}),n("wix-code/editor/registryManager",[],function(){function e(){n={}}function t(e,t,i,r,o){n[t]&&n[t].unregister(),n[t]=e.registerService(i,r,o)}var n={};return{registerService:t,reset:e}}),n("wix-code/services/commandService",["orion/commands","orion/util","wix-code/constants"],function(e,t,n){function i(e){var n=e[0],i=void 0!==e[1]&&null!==e[1]?!!e[1]:!1,r=void 0!==e[2]&&null!==e[2]?!!e[2]:!1,o=void 0!==e[3]&&null!==e[3]?!!e[3]:!1,s=void 0!==e[4]&&null!==e[4]?!!e[4]:!1,a={};return a.cancelable=!0,a.bubbles=!0,a.location=0,a.keyLocation=0,"string"==typeof n?a.keyCode=n.toUpperCase().charCodeAt(0):a.keyCode=n,t.isMac?(a.metaKey=i,a.ctrlKey=s):a.ctrlKey=i,a.shiftKey=r,a.altKey=o,a.type="keydown",a}function r(e,t){a=e,l=t}function o(t){var n=a.findCommand(t);if(!n)throw new Error("Could not execute command with id `"+t+"`: command not found");if(!n.callback)throw new Error("Could not execute command with id `"+t+"`: command has no callback");var i={},r=new e.CommandInvocation(i,void 0,void 0,n,a);a._invoke(r)}function s(t){var n=i(t);e.processKey(n)}var a,l;return r.prototype.undo=function(){o(n.commandIds.UNDO)},r.prototype.redo=function(){o(n.commandIds.REDO)},r.prototype.formatCode=function(){s(n.shortcuts.FORMAT_CODE)},r.prototype.searchReplaceCode=function(){l.invokeAction(n.actionIds.FIND_REPLACE)},r}),n("wix-code/services/transport/wixService",[],function(){function e(e){this.serviceRegistry=null,this.listeners=[],this.serviceId=e}return e.prototype.init=function(e){this.serviceRegistry=e},e.prototype.addListener=function(e){this.listeners.push(e)},e.prototype.update=function(e){this.listeners.forEach(function(t){t.onChanged(e)}),this.serviceRegistry.getService(this.serviceId).update(e)},e}),n("wix-code/document",[],function(){return document}),n("wix-code/editor/wixCodeKeyBindings",["orion/editor/keyModes","orion/keyBinding","orion/util"],function(e,t,n){function i(t){e.KeyMode.call(this,t)}function r(e){n.isMac&&e.push({actionID:"redo",keyBinding:new t.KeyBinding("y",!0),predefined:!0})}function o(e){e.push({actionID:"noop",keyBinding:new t.KeyBinding("d",!0,!1,!1),predefined:!0})}return i.prototype=new e.KeyMode,i.prototype.createKeyBindings=function(){var e=[];return r(e),o(e),e},i}),n("javascript/javascriptProject",["orion/Deferred"],function(e){function t(e){this.projectMeta=null,this.map=Object.create(null),this.registry=e,this.fileClient=null,this.handlers=[a]}function n(e,t){Object.keys(e).forEach(function(i){Array.isArray(t[i])&&Array.isArray(e[i])?t[i]=[].concat(t[i],e[i]):"object"==typeof t[i]&&null!==t[i]?(e[i]=e[i]||Object.create(null),n(e[i],t[i])):t[i]=e[i]})}function i(e,t){if(t&&t.contents)try{var n=JSON.parse(t.contents);if(Object.keys(n).length>0)return e.eslint=n,e.eslint}catch(i){}return null}function r(e,t){Array.isArray(e)&&e.forEach(function(e){var n,i,r,a;switch(t){case"onCreated":a=e.result?e.result.Name:void 0,n=e.result?e.result.Location:void 0;break;case"onDeleted":n=e.deleteLocation,a=o(e.deleteLocation);break;case"onModified":a=o(e),n=e;break;case"onMoved":i=e.result?e.result.Location:void 0,r=e.result?e.result.Name:void 0,a=o(e.source),n=e.source}delete this.map[n],s.call(this,t,this,n,a,i,r)}.bind(this))}function o(e){var t=e.lastIndexOf("/");return t>-1?e.substr(t+1):e}function s(e){if(Array.isArray(this.handlers)){var t=Array.prototype.slice.call(arguments);this.handlers.forEach(function(n){var i=n[e];"function"==typeof i&&i.apply(n,t.slice(1))}.bind(this))}}var a={_update:function(e,t){(t===e.ESLINTRC||t===e.ESLINTRC_JS||t===e.ESLINTRC_JSON||t===e.PACKAGE_JSON)&&delete e.map.eslint},onModified:function(e,t,n){this._update(e,n)},onDeleted:function(e,t,n){this._update(e,n)},onCreated:function(e,t,n){this._update(e,n)},onMoved:function(e,t,n,i,r){this._update(e,n)},onProjectChanged:function(e,t,n){delete e.map.eslint}},l=!1;return t.prototype.TERN_PROJECT=".tern-project",t.prototype.ESLINTRC=".eslintrc",t.prototype.ESLINTRC_JS=".eslintrc.js",t.prototype.ESLINTRC_YAML=".eslintrc.yaml",t.prototype.ESLINTRC_YML=".eslintrc.yml",t.prototype.ESLINTRC_JSON=".eslintrc.json",t.prototype.PROJECT_JSON="project.json",t.prototype.PACKAGE_JSON="package.json",t.prototype.JSCONFIG_JSON="jsconfig.json",t.prototype.NODE_MODULES="node_modules",t.prototype.addHandler=function(e){this.handlers.push(e)},t.prototype.getProjectPath=function(){return this.projectMeta?this.projectMeta.Location:null},t.prototype.getEcmaLevel=function(){
return this.ecma>4&&this.ecma<8?(new e).resolve(this.ecma):this.getFile(this.TERN_PROJECT).then(function(e){if(this.ecma=6,e)try{var t=JSON.parse(e.contents);t.ecmaVersion>4&&t.ecmaVersion<8&&(this.ecma=t.ecmaVersion)}catch(n){this.ecma=6}return this.ecma}.bind(this))},t.prototype.getFile=function(t){if(!this.projectMeta)return(new e).resolve(null);var n=this.projectMeta.Location+t;return this.map[n]?(new e).resolve(this.map[n]):this.getFileClient().read(n,!1,!1,{readIfExists:!0}).then(function(e){return this.map[n]={name:n,contents:e,project:this.projectMeta.Location},this.map[n]}.bind(this),function(){return null})},t.prototype.initFrom=function(t){return l?(new e).resolve():(l=!0,this.getFileClient().read(t,!0,!1,{readIfExists:!0}).then(function(e){e&&this.onInputChanged({file:e})}.bind(this)))},t.prototype.updateFile=function(e,t,i){return this.projectMeta?this.getFile(e).then(function(r){if(r){var o=r.contents;if("string"==typeof o){var s;return o.length?(s=JSON.parse(o),n(i,s)):s=i,this.getFileClient().write(this.projectMeta.Location+e,JSON.stringify(s,null,"	"))}if(t)return this.getFileClient().createFile(this.projectMeta.Location,e).then(function(e){return this.getFileClient().write(e.Location,JSON.stringify(i,null,"	"))}.bind(this))}}.bind(this)):void 0},t.prototype.getFileClient=function(){return this.fileClient||(this.fileClient=this.registry.getService("orion.core.file.client")),this.fileClient},t.prototype.getESlintOptions=function(){if(this.map.eslint)return(new e).resolve(this.map.eslint);var t;return this.getFile(this.ESLINTRC_JS).then(function(e){return t=i(this.map,e),t?t:this.getFile(this.ESLINTRC_JSON).then(function(e){return t=i(this.map,e),t?t:this.getFile(this.ESLINTRC).then(function(e){return t=i(this.map,e),t?t:this.getFile(this.PACKAGE_JSON).then(function(e){return e&&e.contents&&(t=JSON.parse(e.contents),null!==t.eslintConfig&&"object"==typeof t.eslintConfig&&Object.keys(t.eslintConfig).length>0)?(this.map.eslint=t.eslintConfig,this.map.eslint):null}.bind(this))}.bind(this))}.bind(this))}.bind(this))},t.prototype.onInputChanged=function(e){l=!0;var t,n=e.file;if(n){var i=n.parents?n.parents:n.Parents;Array.isArray(i)&&(t=i.length>0?i[i.length-1]:n)}if(t){if(!this.projectMeta||t.Location!==this.projectMeta.Location)return this.projectMeta=t,delete this.ecma,void s.call(this,"onProjectChanged",this,e,t.Location);s.call(this,"onInputChanged",this,e,t.Location)}else delete this.ecma,s.call(this,"onProjectChanged",this,e,null)},t.prototype.onFileChanged=function(e){e&&"Changed"===e.type&&(r.call(this,e.modified,"onModified"),r.call(this,e.deleted,"onDeleted"),r.call(this,e.created,"onCreated"),r.call(this,e.moved,"onMoved"))},t}),n("javascript/lru",[],function(){function e(e,t){var n=Object.create(null);return n._p=null,n._n=null,n._v={key:e,value:t},n}function t(e){"undefined"==typeof e?this._max=-1:this._max=e,this._start=this._end=null,this._size=0,this._cache=Object.create(null)}return t.prototype.clear=function(){this._cache=Object.create(null),this._start=null,this._end=null,this._size=0},t.prototype.size=function(){return this._size},t.prototype.containsKey=function(e){return"undefined"!=typeof this._cache[e]},t.prototype.put=function(t,n){-1!==this._max&&this._size+1>this._max&&this.remove(this._end._v.key),this.remove(t);var i=e(t,n);this._start?(i=e(t,n),i._n=this._start,this._start._p=i,this._start=i):this._start=this._end=i,this._cache[t]=i,this._size++},t.prototype.get=function(e){if(this._size>0){var t=this._cache[e];if(t&&t._v)return t._v.value}return null},t.prototype.remove=function(e){if(0===this._size)return null;var t=this._cache[e];if(t){var n=t._p;this._end===t&&(this._end=n);var i=t._n;return this._start===t&&(this._start=t._n),n&&(n._n=i),i&&(i._p=n),delete this._cache[e],this._size--,t._v.value}return null},t.prototype.keys=function n(){var n=[];if(this._end)for(var e=this._end;e;)n.push(e._v.key),e=e._p;return n},t}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof n&&n.amd)n("acorn/dist/acorn_loose",["acorn/dist/acorn"],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(t.acorn||(t.acorn={})).loose=e()}}(function(){return function e(n,i,r){function o(a,l){if(!i[a]){if(!n[a]){var c="function"==typeof t&&t;if(!l&&c)return c(a,!0);if(s)return s(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var d=i[a]={exports:{}};n[a][0].call(d.exports,function(e){var t=n[a][1][e];return o(t?t:e)},d,d.exports,e,n,i,r)}return i[a].exports}for(var s="function"==typeof t&&t,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,n,i){"use strict";n.exports="undefined"!=typeof acorn?acorn:t("acorn/dist/acorn")},{}],2:[function(e,t,n){"use strict";var i=e("./state"),r=e("./parseutil"),o=e(".."),s=i.LooseParser.prototype;s.checkLVal=function(e){if(!e)return e;switch(e.type){case"Identifier":case"MemberExpression":return e;case"ParenthesizedExpression":return e.expression=this.checkLVal(e.expression),e;default:return this.dummyIdent()}},s.parseExpression=function(e){var t=this.storeCurrentPos(),n=this.parseMaybeAssign(e);if(this.tok.type===o.tokTypes.comma){var i=this.startNodeAt(t);for(i.expressions=[n];this.eat(o.tokTypes.comma);)i.expressions.push(this.parseMaybeAssign(e));return this.finishNode(i,"SequenceExpression")}return n},s.parseParenExpression=function(){this.pushCx(),this.expect(o.tokTypes.parenL);var e=this.parseExpression();return this.popCx(),this.expect(o.tokTypes.parenR),e},s.parseMaybeAssign=function(e){if(this.toks.isContextual("yield")){var t=this.startNode();return this.next(),this.semicolon()||this.canInsertSemicolon()||this.tok.type!=o.tokTypes.star&&!this.tok.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(o.tokTypes.star),t.argument=this.parseMaybeAssign()),this.finishNode(t,"YieldExpression")}var n=this.storeCurrentPos(),i=this.parseMaybeConditional(e);if(this.tok.type.isAssign){var t=this.startNodeAt(n);return t.operator=this.tok.value,t.left=this.tok.type===o.tokTypes.eq?this.toAssignable(i):this.checkLVal(i),this.next(),t.right=this.parseMaybeAssign(e),this.finishNode(t,"AssignmentExpression")}return i},s.parseMaybeConditional=function(e){var t=this.storeCurrentPos(),n=this.parseExprOps(e);if(this.eat(o.tokTypes.question)){var i=this.startNodeAt(t);return i.test=n,i.consequent=this.parseMaybeAssign(),i.alternate=this.expect(o.tokTypes.colon)?this.parseMaybeAssign(e):this.dummyIdent(),this.finishNode(i,"ConditionalExpression")}return n},s.parseExprOps=function(e){var t=this.storeCurrentPos(),n=this.curIndent,i=this.curLineStart;return this.parseExprOp(this.parseMaybeUnary(!1),t,-1,e,n,i)},s.parseExprOp=function(e,t,n,i,r,s){if(this.curLineStart!=s&&this.curIndent<r&&this.tokenStartsLine())return e;var a=this.tok.type.binop;if(null!=a&&(!i||this.tok.type!==o.tokTypes._in)&&a>n){var l=this.startNodeAt(t);if(l.left=e,l.operator=this.tok.value,this.next(),this.curLineStart!=s&&this.curIndent<r&&this.tokenStartsLine())l.right=this.dummyIdent();else{var c=this.storeCurrentPos();l.right=this.parseExprOp(this.parseMaybeUnary(!1),c,a,i,r,s)}return this.finishNode(l,/&&|\|\|/.test(l.operator)?"LogicalExpression":"BinaryExpression"),this.parseExprOp(l,t,n,i,r,s)}return e},s.parseMaybeUnary=function(e){var t=this.storeCurrentPos(),n=void 0;if(this.tok.type.prefix){var i=this.startNode(),r=this.tok.type===o.tokTypes.incDec;r||(e=!0),i.operator=this.tok.value,i.prefix=!0,this.next(),i.argument=this.parseMaybeUnary(!0),r&&(i.argument=this.checkLVal(i.argument)),n=this.finishNode(i,r?"UpdateExpression":"UnaryExpression")}else if(this.tok.type===o.tokTypes.ellipsis){var i=this.startNode();this.next(),i.argument=this.parseMaybeUnary(e),n=this.finishNode(i,"SpreadElement")}else for(n=this.parseExprSubscripts();this.tok.type.postfix&&!this.canInsertSemicolon();){var i=this.startNodeAt(t);i.operator=this.tok.value,i.prefix=!1,i.argument=this.checkLVal(n),this.next(),n=this.finishNode(i,"UpdateExpression")}if(!e&&this.eat(o.tokTypes.starstar)){var i=this.startNodeAt(t);return i.operator="**",i.left=n,i.right=this.parseMaybeUnary(!1),this.finishNode(i,"BinaryExpression")}return n},s.parseExprSubscripts=function(){var e=this.storeCurrentPos();return this.parseSubscripts(this.parseExprAtom(),e,!1,this.curIndent,this.curLineStart)},s.parseSubscripts=function(e,t,n,i,r){for(;;){if(this.curLineStart!=r&&this.curIndent<=i&&this.tokenStartsLine()){if(this.tok.type!=o.tokTypes.dot||this.curIndent!=i)return e;--i}if(this.eat(o.tokTypes.dot)){var s=this.startNodeAt(t);s.object=e,this.curLineStart!=r&&this.curIndent<=i&&this.tokenStartsLine()?s.property=this.dummyIdent():s.property=this.parsePropertyAccessor()||this.dummyIdent(),s.computed=!1,e=this.finishNode(s,"MemberExpression")}else if(this.tok.type==o.tokTypes.bracketL){this.pushCx(),this.next();var s=this.startNodeAt(t);s.object=e,s.property=this.parseExpression(),s.computed=!0,this.popCx(),this.expect(o.tokTypes.bracketR),e=this.finishNode(s,"MemberExpression")}else if(n||this.tok.type!=o.tokTypes.parenL){if(this.tok.type!=o.tokTypes.backQuote)return e;var s=this.startNodeAt(t);s.tag=e,s.quasi=this.parseTemplate(),e=this.finishNode(s,"TaggedTemplateExpression")}else{var s=this.startNodeAt(t);s.callee=e,s.arguments=this.parseExprList(o.tokTypes.parenR),e=this.finishNode(s,"CallExpression")}}},s.parseExprAtom=function(){var e=void 0;switch(this.tok.type){case o.tokTypes._this:case o.tokTypes._super:var t=this.tok.type===o.tokTypes._this?"ThisExpression":"Super";return e=this.startNode(),this.next(),this.finishNode(e,t);case o.tokTypes.name:var n=this.storeCurrentPos(),i=this.parseIdent();return this.eat(o.tokTypes.arrow)?this.parseArrowExpression(this.startNodeAt(n),[i]):i;case o.tokTypes.regexp:e=this.startNode();var s=this.tok.value;return e.regex={pattern:s.pattern,flags:s.flags},e.value=s.value,e.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(e,"Literal");case o.tokTypes.num:case o.tokTypes.string:return e=this.startNode(),e.value=this.tok.value,e.raw=this.input.slice(this.tok.start,this.tok.end),this.next(),this.finishNode(e,"Literal");case o.tokTypes._null:case o.tokTypes._true:case o.tokTypes._false:return e=this.startNode(),e.value=this.tok.type===o.tokTypes._null?null:this.tok.type===o.tokTypes._true,e.raw=this.tok.type.keyword,this.next(),this.finishNode(e,"Literal");case o.tokTypes.parenL:var a=this.storeCurrentPos();this.next();var l=this.parseExpression();if(this.expect(o.tokTypes.parenR),this.eat(o.tokTypes.arrow))return this.parseArrowExpression(this.startNodeAt(a),l.expressions||(r.isDummy(l)?[]:[l]));if(this.options.preserveParens){var c=this.startNodeAt(a);c.expression=l,l=this.finishNode(c,"ParenthesizedExpression")}return l;case o.tokTypes.bracketL:return e=this.startNode(),e.elements=this.parseExprList(o.tokTypes.bracketR,!0),this.finishNode(e,"ArrayExpression");case o.tokTypes.braceL:return this.parseObj();case o.tokTypes._class:return this.parseClass();case o.tokTypes._function:return e=this.startNode(),this.next(),this.parseFunction(e,!1);case o.tokTypes._new:return this.parseNew();case o.tokTypes.backQuote:return this.parseTemplate();default:return this.dummyIdent()}},s.parseNew=function(){var e=this.startNode(),t=this.curIndent,n=this.curLineStart,i=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(o.tokTypes.dot))return e.meta=i,e.property=this.parseIdent(!0),this.finishNode(e,"MetaProperty");var r=this.storeCurrentPos();return e.callee=this.parseSubscripts(this.parseExprAtom(),r,!0,t,n),this.tok.type==o.tokTypes.parenL?e.arguments=this.parseExprList(o.tokTypes.parenR):e.arguments=[],this.finishNode(e,"NewExpression")},s.parseTemplateElement=function(){var e=this.startNode();return e.value={raw:this.input.slice(this.tok.start,this.tok.end).replace(/\r\n?/g,"\n"),cooked:this.tok.value},this.next(),e.tail=this.tok.type===o.tokTypes.backQuote,this.finishNode(e,"TemplateElement")},s.parseTemplate=function(){var e=this.startNode();this.next(),e.expressions=[];var t=this.parseTemplateElement();for(e.quasis=[t];!t.tail;)this.next(),e.expressions.push(this.parseExpression()),this.expect(o.tokTypes.braceR)?t=this.parseTemplateElement():(t=this.startNode(),t.value={cooked:"",raw:""},t.tail=!0,this.finishNode(t,"TemplateElement")),e.quasis.push(t);return this.expect(o.tokTypes.backQuote),this.finishNode(e,"TemplateLiteral")},s.parseObj=function(){var e=this.startNode();e.properties=[],this.pushCx();var t=this.curIndent+1,n=this.curLineStart;for(this.eat(o.tokTypes.braceL),this.curIndent+1<t&&(t=this.curIndent,n=this.curLineStart);!this.closes(o.tokTypes.braceR,t,n);){var i=this.startNode(),s=void 0,a=void 0;if(this.options.ecmaVersion>=6&&(a=this.storeCurrentPos(),i.method=!1,i.shorthand=!1,s=this.eat(o.tokTypes.star)),this.parsePropertyName(i),r.isDummy(i.key))r.isDummy(this.parseMaybeAssign())&&this.next(),this.eat(o.tokTypes.comma);else{if(this.eat(o.tokTypes.colon))i.kind="init",i.value=this.parseMaybeAssign();else if(this.options.ecmaVersion>=6&&(this.tok.type===o.tokTypes.parenL||this.tok.type===o.tokTypes.braceL))i.kind="init",i.method=!0,i.value=this.parseMethod(s);else if(this.options.ecmaVersion>=5&&"Identifier"===i.key.type&&!i.computed&&("get"===i.key.name||"set"===i.key.name)&&this.tok.type!=o.tokTypes.comma&&this.tok.type!=o.tokTypes.braceR)i.kind=i.key.name,this.parsePropertyName(i),i.value=this.parseMethod(!1);else{if(i.kind="init",this.options.ecmaVersion>=6)if(this.eat(o.tokTypes.eq)){var l=this.startNodeAt(a);l.operator="=",l.left=i.key,l.right=this.parseMaybeAssign(),i.value=this.finishNode(l,"AssignmentExpression")}else i.value=i.key;else i.value=this.dummyIdent();i.shorthand=!0}e.properties.push(this.finishNode(i,"Property")),this.eat(o.tokTypes.comma)}}return this.popCx(),this.eat(o.tokTypes.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),this.finishNode(e,"ObjectExpression")},s.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(o.tokTypes.bracketL))return e.computed=!0,e.key=this.parseExpression(),void this.expect(o.tokTypes.bracketR);e.computed=!1}var t=this.tok.type===o.tokTypes.num||this.tok.type===o.tokTypes.string?this.parseExprAtom():this.parseIdent();e.key=t||this.dummyIdent()},s.parsePropertyAccessor=function(){return this.tok.type===o.tokTypes.name||this.tok.type.keyword?this.parseIdent():void 0},s.parseIdent=function(){var e=this.tok.type===o.tokTypes.name?this.tok.value:this.tok.type.keyword;if(!e)return this.dummyIdent();var t=this.startNode();return this.next(),t.name=e,this.finishNode(t,"Identifier")},s.initFunction=function(e){e.id=null,e.params=[],this.options.ecmaVersion>=6&&(e.generator=!1,e.expression=!1)},s.toAssignable=function(e,t){if(!e||"Identifier"==e.type||"MemberExpression"==e.type&&!t);else if("ParenthesizedExpression"==e.type)e.expression=this.toAssignable(e.expression,t);else{if(this.options.ecmaVersion<6)return this.dummyIdent();if("ObjectExpression"==e.type){e.type="ObjectPattern";for(var n=e.properties,i=0;i<n.length;i++)n[i].value=this.toAssignable(n[i].value,t)}else if("ArrayExpression"==e.type)e.type="ArrayPattern",this.toAssignableList(e.elements,t);else if("SpreadElement"==e.type)e.type="RestElement",e.argument=this.toAssignable(e.argument,t);else{if("AssignmentExpression"!=e.type)return this.dummyIdent();e.type="AssignmentPattern",delete e.operator}}return e},s.toAssignableList=function(e,t){for(var n=0;n<e.length;n++)e[n]=this.toAssignable(e[n],t);return e},s.parseFunctionParams=function(e){return e=this.parseExprList(o.tokTypes.parenR),this.toAssignableList(e,!0)},s.parseMethod=function(e){var t=this.startNode();return this.initFunction(t),t.params=this.parseFunctionParams(),t.generator=e||!1,t.expression=this.options.ecmaVersion>=6&&this.tok.type!==o.tokTypes.braceL,t.body=t.expression?this.parseMaybeAssign():this.parseBlock(),this.finishNode(t,"FunctionExpression")},s.parseArrowExpression=function(e,t){return this.initFunction(e),e.params=this.toAssignableList(t,!0),e.expression=this.tok.type!==o.tokTypes.braceL,e.body=e.expression?this.parseMaybeAssign():this.parseBlock(),this.finishNode(e,"ArrowFunctionExpression")},s.parseExprList=function(e,t){this.pushCx();var n=this.curIndent,i=this.curLineStart,s=[];for(this.next();!this.closes(e,n+1,i);)if(this.eat(o.tokTypes.comma))s.push(t?null:this.dummyIdent());else{var a=this.parseMaybeAssign();if(r.isDummy(a)){if(this.closes(e,n,i))break;this.next()}else s.push(a);this.eat(o.tokTypes.comma)}return this.popCx(),this.eat(e)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),s}},{"..":1,"./parseutil":4,"./state":5}],3:[function(e,t,n){function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){var n=new a.LooseParser(e,t);return n.next(),n.parseTopLevel()}n.__esModule=!0,n.parse_dammit=r;var o=e(".."),s=i(o),a=e("./state");e("./tokenize"),e("./statement"),e("./expression"),n.LooseParser=a.LooseParser,n.pluginsLoose=a.pluginsLoose,s.defaultOptions.tabSize=4,s.parse_dammit=r,s.LooseParser=a.LooseParser,s.pluginsLoose=a.pluginsLoose},{"..":1,"./expression":2,"./state":5,"./statement":6,"./tokenize":7}],4:[function(e,t,n){"use strict";function i(e){return"✖"==e.name}n.__esModule=!0,n.isDummy=i},{}],5:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var r=e(".."),o={};n.pluginsLoose=o;var s=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(i(this,e),this.toks=r.tokenizer(t,n),this.options=this.toks.options,this.input=this.toks.input,this.tok=this.last={type:r.tokTypes.eof,start:0,end:0},this.options.locations){var o=this.toks.curPosition();this.tok.loc=new r.SourceLocation(this.toks,o,o)}this.ahead=[],this.context=[],this.curIndent=0,this.curLineStart=0,this.nextLineStart=this.lineEnd(this.curLineStart)+1,this.options.pluginsLoose=n.pluginsLoose||{},this.loadPlugins(this.options.pluginsLoose)}return e.prototype.startNode=function(){return new r.Node(this.toks,this.tok.start,this.options.locations?this.tok.loc.start:null)},e.prototype.storeCurrentPos=function(){return this.options.locations?[this.tok.start,this.tok.loc.start]:this.tok.start},e.prototype.startNodeAt=function(e){return this.options.locations?new r.Node(this.toks,e[0],e[1]):new r.Node(this.toks,e)},e.prototype.finishNode=function(e,t){return e.type=t,e.end=this.last.end,this.options.locations&&(e.loc.end=this.last.loc.end),this.options.ranges&&(e.range[1]=this.last.end),e},e.prototype.dummyNode=function(e){var t=this.startNode();return t.type=e,t.end=t.start,this.options.locations&&(t.loc.end=t.loc.start),this.options.ranges&&(t.range[1]=t.start),this.last={type:r.tokTypes.name,start:t.start,end:t.start,loc:t.loc},t},e.prototype.dummyIdent=function(){var e=this.dummyNode("Identifier");return e.name="✖",e},e.prototype.dummyString=function(){var e=this.dummyNode("Literal");return e.value=e.raw="✖",e},e.prototype.eat=function(e){return this.tok.type===e?(this.next(),!0):!1},e.prototype.isContextual=function(e){return this.tok.type===r.tokTypes.name&&this.tok.value===e},e.prototype.eatContextual=function(e){return this.tok.value===e&&this.eat(r.tokTypes.name)},e.prototype.canInsertSemicolon=function(){return this.tok.type===r.tokTypes.eof||this.tok.type===r.tokTypes.braceR||r.lineBreak.test(this.input.slice(this.last.end,this.tok.start))},e.prototype.semicolon=function(){return this.eat(r.tokTypes.semi)},e.prototype.expect=function(e){if(this.eat(e))return!0;for(var t=1;2>=t;t++)if(this.lookAhead(t).type==e){for(var n=0;t>n;n++)this.next();return!0}},e.prototype.pushCx=function(){this.context.push(this.curIndent)},e.prototype.popCx=function(){this.curIndent=this.context.pop()},e.prototype.lineEnd=function(e){for(;e<this.input.length&&!r.isNewLine(this.input.charCodeAt(e));)++e;return e},e.prototype.indentationAfter=function(e){for(var t=0;;++e){var n=this.input.charCodeAt(e);if(32===n)++t;else{if(9!==n)return t;t+=this.options.tabSize}}},e.prototype.closes=function(e,t,n,i){return this.tok.type===e||this.tok.type===r.tokTypes.eof?!0:n!=this.curLineStart&&this.curIndent<t&&this.tokenStartsLine()&&(!i||this.nextLineStart>=this.input.length||this.indentationAfter(this.nextLineStart)<t)},e.prototype.tokenStartsLine=function(){for(var e=this.tok.start-1;e>=this.curLineStart;--e){var t=this.input.charCodeAt(e);if(9!==t&&32!==t)return!1}return!0},e.prototype.extend=function(e,t){this[e]=t(this[e])},e.prototype.loadPlugins=function(e){for(var t in e){var n=o[t];if(!n)throw new Error("Plugin '"+t+"' not found");n(this,e[t])}},e}();n.LooseParser=s},{"..":1}],6:[function(e,t,n){"use strict";var i=e("./state"),r=e("./parseutil"),o=e(".."),s=i.LooseParser.prototype;s.parseTopLevel=function(){var e=this.startNodeAt(this.options.locations?[0,o.getLineInfo(this.input,0)]:0);for(e.body=[];this.tok.type!==o.tokTypes.eof;){var t=this.parseStatement();if(t.end===t.start)break;e.body.push(t)}return this.last=this.tok,this.options.ecmaVersion>=6&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")},s.parseStatement=function(){var e=this.tok.type,t=this.startNode(),n=void 0;switch(this.toks.isLet()&&(e=o.tokTypes._var,n="let"),e){case o.tokTypes._break:case o.tokTypes._continue:this.next();var i=e===o.tokTypes._break;return this.semicolon()||this.canInsertSemicolon()?t.label=null:(t.label=this.tok.type===o.tokTypes.name?this.parseIdent():null,this.semicolon()),this.finishNode(t,i?"BreakStatement":"ContinueStatement");case o.tokTypes._debugger:return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement");case o.tokTypes._do:return this.next(),t.body=this.parseStatement(),t.test=this.eat(o.tokTypes._while)?this.parseParenExpression():this.dummyIdent(),this.semicolon(),this.finishNode(t,"DoWhileStatement");case o.tokTypes._for:if(this.next(),this.pushCx(),this.expect(o.tokTypes.parenL),this.tok.type===o.tokTypes.semi)return this.parseFor(t,null);var s=this.toks.isLet();if(s||this.tok.type===o.tokTypes._var||this.tok.type===o.tokTypes._const){var a=this.parseVar(!0,s?"let":this.tok.value);return 1!==a.declarations.length||this.tok.type!==o.tokTypes._in&&!this.isContextual("of")?this.parseFor(t,a):this.parseForIn(t,a)}var l=this.parseExpression(!0);return this.tok.type===o.tokTypes._in||this.isContextual("of")?this.parseForIn(t,this.toAssignable(l)):this.parseFor(t,l);case o.tokTypes._function:return this.next(),this.parseFunction(t,!0);case o.tokTypes._if:return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement(),t.alternate=this.eat(o.tokTypes._else)?this.parseStatement():null,this.finishNode(t,"IfStatement");case o.tokTypes._return:return this.next(),this.eat(o.tokTypes.semi)||this.canInsertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement");case o.tokTypes._switch:var c=this.curIndent,h=this.curLineStart;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.pushCx(),this.expect(o.tokTypes.braceL);for(var d=void 0;!this.closes(o.tokTypes.braceR,c,h,!0);)if(this.tok.type===o.tokTypes._case||this.tok.type===o.tokTypes._default){var u=this.tok.type===o.tokTypes._case;d&&this.finishNode(d,"SwitchCase"),t.cases.push(d=this.startNode()),d.consequent=[],this.next(),u?d.test=this.parseExpression():d.test=null,this.expect(o.tokTypes.colon)}else d||(t.cases.push(d=this.startNode()),d.consequent=[],d.test=null),d.consequent.push(this.parseStatement());return d&&this.finishNode(d,"SwitchCase"),this.popCx(),this.eat(o.tokTypes.braceR),this.finishNode(t,"SwitchStatement");case o.tokTypes._throw:return this.next(),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement");case o.tokTypes._try:if(this.next(),t.block=this.parseBlock(),t.handler=null,this.tok.type===o.tokTypes._catch){var p=this.startNode();this.next(),this.expect(o.tokTypes.parenL),p.param=this.toAssignable(this.parseExprAtom(),!0),this.expect(o.tokTypes.parenR),p.body=this.parseBlock(),t.handler=this.finishNode(p,"CatchClause")}return t.finalizer=this.eat(o.tokTypes._finally)?this.parseBlock():null,t.handler||t.finalizer?this.finishNode(t,"TryStatement"):t.block;case o.tokTypes._var:case o.tokTypes._const:return this.parseVar(!1,n||this.tok.value);case o.tokTypes._while:return this.next(),t.test=this.parseParenExpression(),t.body=this.parseStatement(),this.finishNode(t,"WhileStatement");case o.tokTypes._with:return this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement(),this.finishNode(t,"WithStatement");case o.tokTypes.braceL:return this.parseBlock();case o.tokTypes.semi:return this.next(),this.finishNode(t,"EmptyStatement");case o.tokTypes._class:return this.parseClass(!0);case o.tokTypes._import:return this.parseImport();case o.tokTypes._export:return this.parseExport();default:var f=this.parseExpression();return r.isDummy(f)?(this.next(),this.tok.type===o.tokTypes.eof?this.finishNode(t,"EmptyStatement"):this.parseStatement()):e===o.tokTypes.name&&"Identifier"===f.type&&this.eat(o.tokTypes.colon)?(t.body=this.parseStatement(),t.label=f,this.finishNode(t,"LabeledStatement")):(t.expression=f,this.semicolon(),this.finishNode(t,"ExpressionStatement"))}},s.parseBlock=function(){var e=this.startNode();this.pushCx(),this.expect(o.tokTypes.braceL);var t=this.curIndent,n=this.curLineStart;for(e.body=[];!this.closes(o.tokTypes.braceR,t,n,!0);)e.body.push(this.parseStatement());return this.popCx(),this.eat(o.tokTypes.braceR),this.finishNode(e,"BlockStatement")},s.parseFor=function(e,t){return e.init=t,e.test=e.update=null,this.eat(o.tokTypes.semi)&&this.tok.type!==o.tokTypes.semi&&(e.test=this.parseExpression()),this.eat(o.tokTypes.semi)&&this.tok.type!==o.tokTypes.parenR&&(e.update=this.parseExpression()),this.popCx(),this.expect(o.tokTypes.parenR),e.body=this.parseStatement(),this.finishNode(e,"ForStatement")},s.parseForIn=function(e,t){var n=this.tok.type===o.tokTypes._in?"ForInStatement":"ForOfStatement";return this.next(),e.left=t,e.right=this.parseExpression(),this.popCx(),this.expect(o.tokTypes.parenR),e.body=this.parseStatement(),this.finishNode(e,n)},s.parseVar=function(e,t){var n=this.startNode();n.kind=t,this.next(),n.declarations=[];do{var i=this.startNode();i.id=this.options.ecmaVersion>=6?this.toAssignable(this.parseExprAtom(),!0):this.parseIdent(),i.init=this.eat(o.tokTypes.eq)?this.parseMaybeAssign(e):null,n.declarations.push(this.finishNode(i,"VariableDeclarator"))}while(this.eat(o.tokTypes.comma));if(!n.declarations.length){var i=this.startNode();i.id=this.dummyIdent(),n.declarations.push(this.finishNode(i,"VariableDeclarator"))}return e||this.semicolon(),this.finishNode(n,"VariableDeclaration")},s.parseClass=function(e){var t=this.startNode();this.next(),this.tok.type===o.tokTypes.name?t.id=this.parseIdent():e?t.id=this.dummyIdent():t.id=null,t.superClass=this.eat(o.tokTypes._extends)?this.parseExpression():null,t.body=this.startNode(),t.body.body=[],this.pushCx();var n=this.curIndent+1,i=this.curLineStart;for(this.eat(o.tokTypes.braceL),this.curIndent+1<n&&(n=this.curIndent,i=this.curLineStart);!this.closes(o.tokTypes.braceR,n,i);)if(!this.semicolon()){var s=this.startNode(),a=void 0;this.options.ecmaVersion>=6&&(s["static"]=!1,a=this.eat(o.tokTypes.star)),this.parsePropertyName(s),r.isDummy(s.key)?(r.isDummy(this.parseMaybeAssign())&&this.next(),this.eat(o.tokTypes.comma)):("Identifier"!==s.key.type||s.computed||"static"!==s.key.name||this.tok.type==o.tokTypes.parenL||this.tok.type==o.tokTypes.braceL?s["static"]=!1:(s["static"]=!0,a=this.eat(o.tokTypes.star),this.parsePropertyName(s)),this.options.ecmaVersion>=5&&"Identifier"===s.key.type&&!s.computed&&("get"===s.key.name||"set"===s.key.name)&&this.tok.type!==o.tokTypes.parenL&&this.tok.type!==o.tokTypes.braceL?(s.kind=s.key.name,this.parsePropertyName(s),s.value=this.parseMethod(!1)):(s.computed||s["static"]||a||!("Identifier"===s.key.type&&"constructor"===s.key.name||"Literal"===s.key.type&&"constructor"===s.key.value)?s.kind="method":s.kind="constructor",s.value=this.parseMethod(a)),t.body.body.push(this.finishNode(s,"MethodDefinition")))}return this.popCx(),this.eat(o.tokTypes.braceR)||(this.last.end=this.tok.start,this.options.locations&&(this.last.loc.end=this.tok.loc.start)),this.semicolon(),this.finishNode(t.body,"ClassBody"),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},s.parseFunction=function(e,t){return this.initFunction(e),this.options.ecmaVersion>=6&&(e.generator=this.eat(o.tokTypes.star)),this.tok.type===o.tokTypes.name?e.id=this.parseIdent():t&&(e.id=this.dummyIdent()),e.params=this.parseFunctionParams(),e.body=this.parseBlock(),this.finishNode(e,t?"FunctionDeclaration":"FunctionExpression")},s.parseExport=function(){var e=this.startNode();if(this.next(),this.eat(o.tokTypes.star))return e.source=this.eatContextual("from")?this.parseExprAtom():this.dummyString(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(o.tokTypes._default)){var t=this.parseMaybeAssign();if(t.id)switch(t.type){case"FunctionExpression":t.type="FunctionDeclaration";break;case"ClassExpression":t.type="ClassDeclaration"}return e.declaration=t,this.semicolon(),this.finishNode(e,"ExportDefaultDeclaration")}return this.tok.type.keyword||this.toks.isLet()?(e.declaration=this.parseStatement(),e.specifiers=[],e.source=null):(e.declaration=null,e.specifiers=this.parseExportSpecifierList(),e.source=this.eatContextual("from")?this.parseExprAtom():null,this.semicolon()),this.finishNode(e,"ExportNamedDeclaration")},s.parseImport=function(){var e=this.startNode();if(this.next(),this.tok.type===o.tokTypes.string)e.specifiers=[],e.source=this.parseExprAtom(),e.kind="";else{var t=void 0;this.tok.type===o.tokTypes.name&&"from"!==this.tok.value&&(t=this.startNode(),t.local=this.parseIdent(),this.finishNode(t,"ImportDefaultSpecifier"),this.eat(o.tokTypes.comma)),e.specifiers=this.parseImportSpecifierList(),e.source=this.eatContextual("from")&&this.tok.type==o.tokTypes.string?this.parseExprAtom():this.dummyString(),t&&e.specifiers.unshift(t)}return this.semicolon(),this.finishNode(e,"ImportDeclaration")},s.parseImportSpecifierList=function(){var e=[];if(this.tok.type===o.tokTypes.star){var t=this.startNode();this.next(),t.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent(),e.push(this.finishNode(t,"ImportNamespaceSpecifier"))}else{var n=this.curIndent,i=this.curLineStart,s=this.nextLineStart;for(this.pushCx(),this.eat(o.tokTypes.braceL),this.curLineStart>s&&(s=this.curLineStart);!this.closes(o.tokTypes.braceR,n+(this.curLineStart<=s?1:0),i);){var t=this.startNode();if(this.eat(o.tokTypes.star))t.local=this.eatContextual("as")?this.parseIdent():this.dummyIdent(),this.finishNode(t,"ImportNamespaceSpecifier");else{if(this.isContextual("from"))break;if(t.imported=this.parseIdent(),r.isDummy(t.imported))break;t.local=this.eatContextual("as")?this.parseIdent():t.imported,this.finishNode(t,"ImportSpecifier")}e.push(t),this.eat(o.tokTypes.comma)}this.eat(o.tokTypes.braceR),this.popCx()}return e},s.parseExportSpecifierList=function(){var e=[],t=this.curIndent,n=this.curLineStart,i=this.nextLineStart;for(this.pushCx(),this.eat(o.tokTypes.braceL),this.curLineStart>i&&(i=this.curLineStart);!this.closes(o.tokTypes.braceR,t+(this.curLineStart<=i?1:0),n)&&!this.isContextual("from");){var s=this.startNode();if(s.local=this.parseIdent(),r.isDummy(s.local))break;s.exported=this.eatContextual("as")?this.parseIdent():s.local,this.finishNode(s,"ExportSpecifier"),e.push(s),this.eat(o.tokTypes.comma)}return this.eat(o.tokTypes.braceR),this.popCx(),e}},{"..":1,"./parseutil":4,"./state":5}],7:[function(e,t,n){"use strict";function i(e){return 14>e&&e>8||32===e||160===e||r.isNewLine(e)}var r=e(".."),o=e("./state"),s=o.LooseParser.prototype;
s.next=function(){if(this.last=this.tok,this.ahead.length?this.tok=this.ahead.shift():this.tok=this.readToken(),this.tok.start>=this.nextLineStart){for(;this.tok.start>=this.nextLineStart;)this.curLineStart=this.nextLineStart,this.nextLineStart=this.lineEnd(this.curLineStart)+1;this.curIndent=this.indentationAfter(this.curLineStart)}},s.readToken=function(){for(;;)try{return this.toks.next(),this.toks.type===r.tokTypes.dot&&"."===this.input.substr(this.toks.end,1)&&this.options.ecmaVersion>=6&&(this.toks.end++,this.toks.type=r.tokTypes.ellipsis),new r.Token(this.toks)}catch(e){if(!(e instanceof SyntaxError))throw e;var t=e.message,n=e.raisedAt,o=!0;if(/unterminated/i.test(t))if(n=this.lineEnd(e.pos+1),/string/.test(t))o={start:e.pos,end:n,type:r.tokTypes.string,value:this.input.slice(e.pos+1,n)};else if(/regular expr/i.test(t)){var s=this.input.slice(e.pos,n);try{s=new RegExp(s)}catch(e){}o={start:e.pos-1,end:n,type:r.tokTypes.regexp,value:s}}else o=/template/.test(t)?{start:e.pos,end:n,type:r.tokTypes.template,value:this.input.slice(e.pos,n)}:!1;else if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number|expected number in radix/i.test(t))for(;n<this.input.length&&!i(this.input.charCodeAt(n));)++n;else if(/character escape|expected hexadecimal/i.test(t))for(;n<this.input.length;){var a=this.input.charCodeAt(n++);if(34===a||39===a||r.isNewLine(a))break}else if(/unexpected character/i.test(t))n++,o=!1;else{if(!/regular expression/i.test(t))throw e;o=!0}if(this.resetTo(n),o===!0&&(o={start:n,end:n,type:r.tokTypes.name,value:"✖"}),o){if(this.options.locations&&(o.loc=new r.SourceLocation(this.toks,r.getLineInfo(this.input,o.start),r.getLineInfo(this.input,o.end))),this.options.onToken){var l=o.start;this.options.ranges&&(o.range=[o.start,o.end]);var c=o.end;if(c>this.input.length&&(c=this.input.length),c>l){var h=Object.create(null);h.type=o.type,h.value=o.value,o.range&&(h.range=[l,c]),o.loc&&(h.loc=o.loc),h.start=l,h.end=c,this.options.onToken(h)}}return o}}},s.resetTo=function(e){this.toks.pos=e;var t=this.input.charAt(e-1);if(this.toks.exprAllowed=!t||/[\[\{\(,;:?\/*=+\-~!|&%^<>]/.test(t)||/[enwfd]/.test(t)&&/\b(keywords|case|else|return|throw|new|in|(instance|type)of|delete|void)$/.test(this.input.slice(e-10,e)),this.options.locations){this.toks.curLine=1,this.toks.lineStart=r.lineBreakG.lastIndex=0;for(var n=void 0;(n=r.lineBreakG.exec(this.input))&&n.index<e;)++this.toks.curLine,this.toks.lineStart=n.index+n[0].length}},s.lookAhead=function(e){for(;e>this.ahead.length;)this.ahead.push(this.readToken());return this.ahead[e-1]}},{"..":1,"./state":5}]},{},[3])(3)}),n("javascript/util",[],function(){function e(e){return e.length<1?!1:isNaN(e.charCodeAt(0))?!1:e.toLocaleUpperCase().charAt(0)===e.charAt(0)}function t(e,t){if("string"!=typeof e||"string"!=typeof t)return!1;if(0===e.length)return!0;if(e.charAt(0).toLowerCase()!==t.charAt(0).toLowerCase())return!1;if(n(t,e))return!0;var r=t.toLowerCase();if(n(r,e))return!0;var o=e.toLowerCase(),s=e.indexOf("=");if(-1!==s&&n(t,e.substring(0,s)))return!0;if(e===o)return!1;if(n(r,o))return!0;var a=i(e),l=i(t);if(a.length>l.length)return!1;for(var c=0;c<a.length;++c)if(!n(l[c],a[c]))return!1;return!0}function n(e,t){return e.slice(0,t.length)===t}function i(t){for(var n=[],i=t.length-1;i>=0;--i)e(t.charAt(i))&&(n.push(t.substring(i)),t=t.substring(0,i));return 0!==t.length&&n.push(t),n.reverse()}function r(e,t,n){var i=s;return i.range[1]="string"==typeof n?n.length:0,i.loc.start.line=e.lineNumber,i.loc.start.column=0,i.loc.end.line=e.lineNumber,i.loc.end.column=e.column,i.errors=[e],i.sourceFile=Object.create(null),i.sourceFile.text=n,i.sourceFile.name=t,i}function o(e){var t=[];return e&&e.errors&&e.errors.forEach(function(e){var n=e?JSON.parse(JSON.stringify(e)):e;e instanceof Error&&(n.__isError=!0,n.lineNumber="number"==typeof n.lineNumber?n.lineNumber:e.lineNumber,n.message=n.message||e.message,n.name=n.name||e.name,n.stack=n.stack||e.stack);var i=e.message;n.message=i=i.replace(/^Line \d+: /,""),t.push(n)}),t}var s={type:"Program",body:[],comments:[],tokens:[],range:[0,0],loc:{start:{},end:{}}};return{isUpperCase:e,looselyMatches:t,startsWith:n,toCamelCaseParts:i,errorAST:r,serializeAstErrors:o}}),n("wix-code/orion-overrides/javascript/util",["javascript/util"],function(e){function t(e,t){return e.slice(0,t.length)===t}var n=e.looselyMatches;return e.looselyMatches=function(e,i){var r=n.call(this,e,i);return r?r:"$w("===e?'"'===i.charAt(0)&&"#"===i.charAt(1):'$w("'===e||"$w('"===e?"#"===i.charAt(0):!t(e,"$w(")||'"'!==e.charAt(3)&&"'"!==e.charAt(3)?!1:t(i,e.substr(4))},e}),n("javascript/orionAcorn",["javascript/util"],function(e){function t(){this.dependencies={},this.environments={},this.comments=[],this.tokens=[],this.leadingCommentsIndex=0,this.trailingCommentsIndex=0,this.errors=[],this.needReset=!0,this.currentOptions={}}function n(e,t,n,o){var s=t.length;if(0!==s)if("importScripts"===e.name)r(t,o,"browser");else if("Worker"===e.name)i(t[0],o,"browser");else if("require"===e.name){var a=t[0];"ObjectExpression"===a.type&&(n.amd=!0),"ArrayExpression"===a.type?(n.amd=!0,r(a.elements,o,"amd")):"Literal"===a.type&&(n.node=!0,i(a,o,"node")),s>1&&(a=t[1],"ArrayExpression"===a.type&&(n.node=!0,r(a.elements,o,"node")))}else"requirejs"===e.name?(a=t[0],"ArrayExpression"===a.type&&(n.amd=!0,r(a.elements,o,"amd"))):"define"===e.name&&s>0&&(a=t[0],"Literal"===a.type&&s>1&&(a=t[1]),"ArrayExpression"===a.type?(n.amd=!0,r(a.elements,o,"amd")):("FunctionExpression"===a.type||"ObjectExpression"===a.type)&&(n.amd=!0))}function i(e,t,n){"Literal"===e.type&&(t[e.value]||(t[e.value]={value:e.value,env:n}))}function r(e,t,n){for(var r=e.length,o=0;r>o;o++)i(e[o],t,n)}return t.prototype.reset=function(){this.comments=[],this.tokens=[],this.leadingCommentsIndex=0,this.trailingCommentsIndex=0},t.prototype.initialize=function(){this.dependencies={},this.environments={},this.reset(),this.errors=[],this.needReset=!0,this.currentOptions={}},t.prototype.onToken=function(e){var t="Punctuator",n=e.type.label,i=!1,r=e.value;switch(n){case"num":t="Numeric";break;case"regexp":t="RegularExpression",e.value="/"+r.pattern+"/"+(r.flags?r.flags:"");break;case"string":t="String";break;case"name":t="Identifier";break;case"eof":i=!0;break;default:var o=e.type.keyword;if(o)switch(o){case"null":t="Null";break;case"true":case"false":t="Boolean";break;default:t="Keyword"}}if(!i){var s=e.start,a=e.end;if(s>=a)return;var l=Object.create(null);l.type=t,l.index=this.tokens.length,e.range&&(l.range=e.range),e.loc&&(l.loc=e.loc),l.start=s,l.end=a,"undefined"==typeof r?l.value=n:l.value=e.value,this.tokens.push(l)}},t.prototype.onComment=function(e,t,n,i,r,o){var s={type:e?"Block":"Line",value:t,start:n,end:i};this.currentOptions.locations&&(s.loc={start:r,end:o}),this.currentOptions.ranges&&(s.range=[n,i]),this.comments.push(s)},t.prototype.acornPlugin=function(e,t){function r(e){var t,n,i={};for(t in e)e.hasOwnProperty(t)&&(n=e[t],"object"==typeof n&&null!==n?i[t]=r(n):i[t]=n);return i}if(t){var o=this;e.extend("raise",function(e){function t(e,t){for(var n=e.length,i=0;n>i;i++){var r=e[i];if(r.index===t.index&&r.message===t.message)return}e.push(t)}return function(n,i){try{return e.call(this,n,i)}catch(r){throw r instanceof SyntaxError&&o.needReset&&(o.reset(),o.needReset=!1),r.index=n,r.start=n,r.end=this.input.length>=n+1?n+1:this.input.length,t(o.errors,r),r}}}),e.extend("startNode",function(e){return function(){var t=e.call(this),n=o.comments.length;if(n!==o.leadingCommentsIndex){var i=o.leadingCommentsIndex;e:for(;n>i;i++){var s=o.comments[i];if(!(t.range[0]>=s.range[1]))break e;t.leadingComments||(t.leadingComments=[]),t.leadingComments.push(r(o.comments[i]))}o.leadingCommentsIndex=i}return t}}),e.extend("finishNode",function(e){return function(t,s){"CallExpression"===s||"NewExpression"===s?n(t.callee,t.arguments,o.environments,o.dependencies):"ImportDeclaration"===s?(i(t.source,o.dependencies,"es_modules"),o.environments.es_modules=!0):("ExportNamedDeclaration"===s||"ExportDefaultDeclaration"===s||"ExportAllDeclaration"===s)&&(o.environments.es_modules=!0);var a=e.call(this,t,s),l=o.comments.length;if(l!==o.trailingCommentsIndex){var c=o.trailingCommentsIndex;e:for(;l>c;c++){var h=o.comments[c];if(!(a.range[1]<=h.range[0]))break e;a.trailingComments||(a.trailingComments=[]),a.trailingComments.push(r(o.comments[c]))}o.trailingCommentsIndex=c}if(a.sourceFile=o.sourceFile,a.end>o.sourceFile.text.length){var d=o.sourceFile.text.length;a.end=d,a.range&&(a.range[1]=d)}return a}}),e.extend("skipBlockComment",function(e){return function(){var t=/\r\n?|\n|\u2028|\u2029/,n=new RegExp(t.source,"g"),i=this.curPosition(),r=this.pos,o=this.input.indexOf("*/",this.pos+=2);if(-1!==o)return this.pos-=2,e.call(this);if(this.pos+=2,this.options.locations){n.lastIndex=r;for(var s;(s=n.exec(this.input))&&s.index<this.pos;)++this.curLine,this.lineStart=s.index+s[0].length}if(this.options.onComment){var a=this.input.length;this.pos=a,this.options.onComment(!0,this.input.slice(r+2,a),r,a,i,this.curPosition())}}})}},t.prototype.preParse=function(e,t,n,i,r){this.initialize(),n.plugins||(n.plugins=Object.create(null)),n.plugins.acornPlugin=this.acornPlugin.bind(this),t.plugins={acornPlugin:!0},i.pluginsLoose||(i.pluginsLoose=Object.create(null)),i.pluginsLoose.acornPlugin=this.acornPlugin.bind(this),t.pluginsLoose={acornPlugin:!0},t.onToken=this.onToken.bind(this),t.onComment=this.onComment.bind(this),t.locations=!0,t.ranges=!0,t.sourceFile=!1,t.allowImportExportEverywhere=!1,t.sourceType||(t.sourceType="script"),t.allowHashBang=!0,("number"!=typeof t.ecmaVersion||t.ecmaVersion<3||t.ecmaVersion>7)&&(t.ecmaVersion=6),!t.directSourceFile&&r&&(t.directSourceFile={name:r,text:e}),this.sourceFile=t.directSourceFile,this.currentOptions={locations:t.locations,sourceFile:t.sourceFile,ranges:t.ranges}},t.prototype.postParse=function(t,n){Array.isArray(this.errors)&&0!==this.errors.length&&(t.errors?t.errors.concat(this.errors):t.errors=this.errors),t.comments=this.comments,t.tokens=this.tokens,t.dependencies||(t.dependencies=[]),Object.keys(this.dependencies).forEach(function(e){var n=this.dependencies[e];(this.environments.amd&&"node"===n.env||this.environments.node&&"amd"===n.env)&&(n.env="commonjs"),t.dependencies.push(n)}.bind(this)),t.environments=this.environments,t.errors=e.serializeAstErrors(t)},t}),n("javascript/astManager",["orion/Deferred","orion/objects","javascript/lru","acorn/dist/acorn","acorn/dist/acorn_loose","javascript/orionAcorn"],function(e,t,n,i,r,o){function s(e,t){this.cache=new n(10),this.orionAcorn=new o,this.jsProject=t,l=e}function a(e){if(l){var t=l.getService("orion.core.metrics.client");t&&t.logTiming("language tools","parse",e,"application/javascript")}}var l;return t.mixin(s.prototype,{getAST:function(t){return t.getFileMetadata().then(function(n){var i=this._getKey(n),r=this.cache.get(i);return r?(new e).resolve(r):t.getText().then(function(e){var t=Object.create(null);return this.jsProject?this.jsProject.getFile(this.jsProject.TERN_PROJECT).then(function(o){if(o&&o.contents){var s=JSON.parse(o.contents);s&&(t.ecmaVersion=s.ecmaVersion,s.sourceType&&(t.sourceType=s.sourceType))}return r=this.parse(e,n?n.location:"unknown",t),this.cache.put(i,r),r}.bind(this)):(r=this.parse(e,n?n.location:"unknown",t),this.cache.put(i,r),r)}.bind(this))}.bind(this))},_getKey:function(e){return"string"==typeof e?e:e&&e.location?e.location:"unknown"},parse:function(e,t,n){this.orionAcorn.initialize();var o=Date.now();this.orionAcorn.preParse(e,n,i,r,t);try{var s=i.parse.call(i,e,n)}catch(l){s=r.parse_dammit.call(r,e,n)}return this.orionAcorn.postParse(s,e),a(Date.now()-o),s},onModelChanging:function(e){this.inputChanged?this.inputChanged=null:this.cache.remove(this._getKey(e.file))},onInputChanged:function(e){this.inputChanged=e},onFileChanged:function(e){e&&"Changed"===e.type&&Array.isArray(e.modified)&&e.modified.forEach(function(e){"string"==typeof e&&this.cache.remove(this._getKey(e))}.bind(this))}}),{ASTManager:s}}),n("wix-code/orion-overrides/javascript/astManager",["javascript/astManager","estraverse/estraverse"],function(e,t){var n=e.ASTManager.prototype.getAST;return e.ASTManager.prototype.getAST=function(e){return n.call(this,e).then(function(e){return e.wixcodeDecorated||(e.wixcodeDecorated=!0,t.traverse(e,{enter:function(e,t){e&&(e.parentNode=t)}})),e})},e}),n("wix-code/editor/bootstrap",["wix-code/constants","wix-code/commands/formatter/javascript/jsFormatterCommand","wix-code/media/mediaHover","wix-code/media/mediaAssist","wix-code/services/validator","wix-code/editor/registryManager","orion/editor/tooltip","wix-code/services/commandService","wix-code/media/mediaManager","wix-code/services/transport/wixService","wix-code/document","wix-code/editor/wixCodeKeyBindings","orion/commandsProxy","javascript/javascriptProject","javascript/astManager"],function(e,t,n,i,r,o,s,a,l,c,h,d,u,p,f){function g(e){e.editorCommands.updateCommands(e)}function m(e){e.commandService=new a(e.commandRegistry,e.editor.getTextView())}function v(e,t){t.mediaManagementService&&l.initialize(t.mediaManagementService,e)}function _(e,t){t.autoSave&&e.setAutoSaveTimeout(t.autoSave),t.onSave&&e.addEventListener("Saving",t.onSave)}function y(){h.getElementsByClassName("textviewTooltip").item(0).removeAttribute("tabIndex")}function x(e,t){function n(e,n){return void 0!==t[e]?t[e]:n}var i=e.getSettings();i.contentAssistAutoTrigger=!0,i.lineNumberRuler=n("lineNumbers",!0),i.annotationRuler=n("annotations",!0),i.foldingRuler=n("folding",!0),i.overviewRuler=n("overviewRuler",!0),i.showOccurrences=n("showOccurrences",!0),i.autoPairBraces=n("autoPairBraces",!0),i.autoPairParentheses=n("autoPairParentheses",!0),i.autoPairSquareBrackets=n("autoPairSquareBrackets",!0),i.autoPairQuotations=n("autoPairQuotations",!0),i.smartIndentation=n("smartIndentation",!0),e.updateSettings(i)}function w(e,t){e.symbolService=new c("wix.code.symbols"),e.symbolService.init(e.serviceRegistry),e.symbolService.addListener({onChanged:function(){e.editor.onInputChanged({type:"InputChanged"})}}),"object"==typeof t.symbols&&e.symbolService.update(t.symbols),e.collectionService=new c("wix.code.collections"),e.collectionService.init(e.serviceRegistry),e.mediaService=new c("wix.code.media"),e.mediaService.init(e.serviceRegistry)}function b(e,t){var n=e.serviceRegistry,i=e.symbolService,r=new p(n),o=new f.ASTManager(n,r);E(n),T(o,n,i),S(e.editor,o,n,i,t.contentAssistTooltip),k(o,n),A(o,n,i),C(n,r)}function C(e,t){o.registerService(e,"wixcode.model.JavaScriptProject","orion.edit.model",{onInputChanged:t.onInputChanged.bind(t)},{contentType:["application/javascript","text/html","application/json"]})}function E(n){o.registerService(n,"wixcode.command.jsFormatter","orion.edit.command",new t,{name:"JavaScript Source Formatter",id:"wixcode.js.formatter",key:e.shortcuts.FORMAT_CODE,contentType:["application/javascript"]})}function T(e,t,i){var r=new n(e);i.addListener(r),o.registerService(t,"wixcode.media.hover","orion.edit.hover",r,{name:"Media Hover",contentType:["application/javascript"]})}function S(e,t,n,r,s){var a=new i(e,t,s);r.addListener(a),o.registerService(n,"wixcode.media.assist","orion.edit.contentassist",a,{name:"Media Assist",contentType:["application/javascript"],id:"wixcode.media.assist",charTriggers:"\\("})}function k(e,t){o.registerService(t,"wixcode.model.astManager","orion.edit.model",{onModelChanging:e.onModelChanging.bind(e)},{contentType:["application/javascript"],types:["ModelChanging","onInputChanged"]})}function A(e,t,n){var i=new r(e);n.addListener(i),o.registerService(t,"wixcode.validator","orion.edit.validator",i,{contentType:["application/javascript"]})}function L(e){var t=e.editor.getTextView(),n=new d(t);t.addKeyMode(n)}return function(e,t){y(),x(e,t),_(e.inputManager,t),v(e.editor,t),m(e),w(e,t),b(e,t),L(e),u.init(e.editor.getTextView()),g(e)}}),n("wix-code/services/textSearcherFactory",["orion/editor/find","orion/objects"],function(e,t){function n(t,n,i,r,o,s){this._customFindReplace=t,e.Find.call(this,n,o,s)}function i(e){return n.bind(n,e)}return n.prototype=new e.Find,t.mixin(n.prototype,{getFindString:function(){var t=this._customFindReplace.getFindString();return null===t||void 0===t?e.Find.prototype.getFindString.call(this):t},getReplaceString:function(){var t=this._customFindReplace.getReplaceString();return null===t||void 0===t?e.Find.prototype.getReplaceString(this):t},hide:function(){e.Find.prototype.hide.call(this),this._customFindReplace.hide()},show:function(t){e.Find.prototype.show.call(this,t);var n=t.findString,i=t.replaceString;this._customFindReplace.show({findString:n,replaceString:i})},next:function(){this.find(!0)},previous:function(){this.find(!1)},toggleRegex:function(e){this._toggleOption("regex",e)},toggleCaseSensitive:function(e){this._toggleOption("caseInsensitive",!e)},toggleWholeWord:function(e){this._toggleOption("wholeWord",e)},handleFindInput:function(){return this._incremental&&this.find(!0,null,!0),!0},_toggleOption:function(e,t){var n={};n[e]=t,this.setOptions(n)}}),{create:i}}),n("wix-code/editor/editorOptions",["orion/commonPreferences"],function(e){function t(t){var n={autoSave:!1};return t?e.mergeSettings(n,t):n}function n(e){return e?(e.editorConfig=t(e.editorConfig),e):{editorConfig:t()}}return{startupOptionsWithDefaults:n}}),n("text!wix-code/tern/tern-project.json",[],function(){return'{\n  "sourceType": "module"\n}'}),n("text!wix-code/editor/eslintrc.json",[],function(){return'{\n  "rules": {\n    "accessor-pairs" : 1,\n    "check-tern-plugin" : 1,\n    "curly" : 0,\n    "eqeqeq": 1,\n    "missing-doc" : 0,\n    "missing-nls" : 0,\n    "missing-requirejs": 1,\n    "new-parens" : 1,\n    "no-caller": 1,\n    "no-comma-dangle" : 0,\n    "no-cond-assign" : 2,\n    "no-console" : 0,\n    "no-constant-condition" : 2,\n    "no-control-regex" : 2,\n    "no-debugger" : 0,\n    "no-dupe-keys" : 2,\n    "no-duplicate-case": 2,\n    "no-else-return" : 1,\n    "no-empty-block" : 0,\n    "no-empty-character-class" : 2,\n    "no-empty-label" : 2,\n    "no-eq-null" : 1,\n    "no-eval" : 0,\n    "no-extra-boolean-cast" : 2,\n    "no-extra-parens": 0,\n    "no-extra-semi": 1,\n    "no-fallthrough" : 2,\n    "no-implied-eval" : 0,\n    "no-invalid-regexp": 2,\n    "no-irregular-whitespace" : 0,\n    "no-iterator": 2,\n    "no-jslint" : 1,\n    "no-mixed-spaces-and-tabs" : 0,\n    "no-negated-in-lhs" : 2,\n    "no-new-array": 1,\n    "no-new-func" : 1,\n    "no-new-object" : 1,\n    "no-new-wrappers" : 1,\n    "no-obj-calls" : 2,\n    "no-proto" : 2,\n    "no-redeclare" : 1,\n    "no-regex-spaces" : 2,\n    "no-reserved-keys" : 2,\n    "no-self-compare" : 2,\n    "no-self-assign" : 2,\n    "no-shadow" : 1,\n    "no-shadow-global" : 1,\n    "no-sparse-arrays" : 1,\n    "no-throw-literal" : 1,\n    "no-undef" : 2,\n    "no-undef-expression": 1,\n    "no-undef-init" : 1,\n    "no-unreachable" : 1,\n    "no-unused-params" : 1,\n    "no-unused-vars" : 1,\n    "no-use-before-define" : 1,\n    "no-with" : 1,\n    "radix" : 1,\n    "semi" : 1,\n    "type-checked-consistent-return" : 0,\n    "unnecessary-nls" : 0,\n    "unknown-require": 1,\n    "use-isnan" : 2,\n    "valid-typeof" : 2\n  }\n}'}),n("wix-code/editor",["orion/objects","embeddedEditor/builder/embeddedEditor","wix-code/codemodel","wix-code/wixCodeParser","wix-code/editor/bootstrap","orion/searchAndReplace/textSearcher","wix-code/services/textSearcherFactory","wix-code/editor/editorOptions","text!wix-code/tern/tern-project.json","text!wix-code/editor/eslintrc.json"],function(e,t,n,i,r,o,s,a,l,c){function h(e){d(e)}function d(e){e.customFindReplace?o.TextSearcher=s.create(e.customFindReplace):o.TextSearcher=null}function u(e){if(!p){p=new t(a.startupOptionsWithDefaults(e));var n=[{name:".tern-project",contents:l},{name:".eslintrc",contents:c}];f=p.startup().then(function(){return p.importFiles(n)})}}var p,f;return e.mixin(u.prototype,{create:function(e){return h(e),f.then(function(){return p.create(e).then(function(t){return r(t,e),t})})}}),{CodeEditor:u,codeModel:n,codeExportsService:i.codeExportsService}}),t.config({map:{"*":{"eslint/conf/globals":"wix-code/orion-overrides/eslint/conf/globals","eslint/lib/load-rules-async":"wix-code/orion-overrides/eslint/lib/load-rules-async","javascript/astManager":"wix-code/orion-overrides/javascript/astManager","javascript/contentAssist/proposalComparer":"wix-code/orion-overrides/javascript/contentAssist/proposalComparer","javascript/contentAssist/proposalSorter":"wix-code/orion-overrides/javascript/contentAssist/proposalSorter","javascript/contentAssist/ternAssist":"wix-code/orion-overrides/javascript/contentAssist/ternAssist","javascript/util":"wix-code/orion-overrides/javascript/util","orion/commandsProxy":"wix-code/orion-overrides/orion/commandsProxy","orion/editor/contentAssist":"wix-code/orion-overrides/orion/editor/contentAssist","orion/editor/editor":"wix-code/orion-overrides/orion/editor/editor","orion/editor/stylers/application_javascript/syntax":"wix-code/orion-overrides/orion/editor/stylers/application_javascript/syntax","orion/editor/tooltip":"wix-code/orion-overrides/orion/editor/tooltip","orion/serviceregistry":"wix-code/orion-overrides/orion/serviceregistry"},"wix-code/orion-overrides/eslint/conf/globals":{"eslint/conf/globals":"eslint/conf/globals"},"wix-code/orion-overrides/eslint/lib/load-rules-async":{"eslint/lib/load-rules-async":"eslint/lib/load-rules-async"},"wix-code/orion-overrides/javascript/astManager":{"javascript/astManager":"javascript/astManager"},"wix-code/orion-overrides/javascript/contentAssist/proposalComparer":{"javascript/contentAssist/proposalComparer":"javascript/contentAssist/proposalComparer"},"wix-code/orion-overrides/javascript/contentAssist/proposalSorter":{"javascript/contentAssist/proposalSorter":"javascript/contentAssist/proposalSorter"},"wix-code/orion-overrides/javascript/contentAssist/ternAssist":{"javascript/contentAssist/ternAssist":"javascript/contentAssist/ternAssist"},"wix-code/orion-overrides/javascript/util":{"javascript/util":"javascript/util"},"wix-code/orion-overrides/orion/commandsProxy":{"orion/commandsProxy":"orion/commandsProxy"},"wix-code/orion-overrides/orion/editor/contentAssist":{"orion/editor/contentAssist":"orion/editor/contentAssist"},"wix-code/orion-overrides/orion/editor/editor":{"orion/editor/editor":"orion/editor/editor"},"wix-code/orion-overrides/orion/editor/stylers/application_javascript/syntax":{"orion/editor/stylers/application_javascript/syntax":"orion/editor/stylers/application_javascript/syntax"},"wix-code/orion-overrides/orion/editor/tooltip":{"orion/editor/tooltip":"orion/editor/tooltip"},"wix-code/orion-overrides/orion/serviceregistry":{"orion/serviceregistry":"orion/serviceregistry"}}}),t("wix-code/editor")});