"use strict";define("editorHints/configurations/hintsData.json",[],function(){return{Pages_Navigation:{id:"Pages_Navigation",primaryHintTarget:"Pages_Navigation",hintTargetContainer:"topBar",userProfileProperty:"first_editor_pages_panel_opened",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["backFromPreview"],closeTriggers:["pagesPanelOpened"],isOneLiner:!0,isDesktopOnly:!1,customUIConfiguration:{dot:{targetOffsetX:-105,targetOffsetY:-20}}},SwitchEditor:{id:"SwitchEditor",primaryHintTarget:"SwitchEditor",hintTargetContainer:"topBar",userProfileProperty:"first_editor_mode",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["navigateToPage"],closeTriggers:["editorViewModeClicked"],isOneLiner:!0,isDesktopOnly:!1,customUIConfiguration:{dot:{targetOffsetX:-6,targetOffsetY:-4}}},XandY:{id:"XandY",primaryHintTarget:"XandY",hintTargetContainer:"toolBar",userProfileProperty:"",prerequisiteActions:{action:"openToolbar"},postActions:{},onTargetContainerAction:{},openTriggers:["mouseDragEnd"],closeTriggers:[],isOneLiner:!0,isDesktopOnly:!1},AddImage:{id:"AddImage",primaryHintTarget:"AddImage",hintTargetContainer:"addPanel",preHintTarget:"AddPanel",preHintTargetContainer:"leftBar",userProfileProperty:"image_added",prerequisiteActions:{action:"openPanel",actionProps:{panelName:"addPanelInfra.addPanel",panelProps:{category:"image"}}},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["addPanelClosed"],isOneLiner:!0,isDesktopOnly:!0,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT"}}},AddAnything:{id:"AddAnything",primaryHintTarget:"AddPanel",hintTargetContainer:"leftBar",userProfileProperty:"add_panel_open",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["addPanelOpened"],isOneLiner:!0,isDesktopOnly:!0,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT"}}},Preview:{id:"Preview",primaryHintTarget:"Preview",hintTargetContainer:"topBar",userProfileProperty:"preview_site",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["previewClicked"],isOneLiner:!0,isDesktopOnly:!1,customUIConfiguration:{dot:{targetOffsetY:-19}}},Help:{id:"Help",primaryHintTarget:"Help",hintTargetContainer:"topBar",userProfileProperty:"help_in_editor",prerequisiteActions:{action:"disableTopBarMenuDropDown"},postActions:{action:"enableTopBarMenuDropDown"},onTargetContainerAction:{},openTriggers:[],closeTriggers:["topBarMenuBarHelpDropDownOpened"],isOneLiner:!0,isDesktopOnly:!1},Undo:{id:"Undo",primaryHintTarget:"Undo",hintTargetContainer:"topBar",userProfileProperty:"undo",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["componentRemoved"],closeTriggers:["undoClicked"],isOneLiner:!0,isDesktopOnly:!1},ZoomOut:{id:"ZoomOut",primaryHintTarget:"ZoomOut",hintTargetContainer:"topBar",userProfileProperty:"zoomout",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["enterZoomOut"],isOneLiner:!0,isDesktopOnly:!1},FreeImages:{id:"FreeImages",primaryHintTarget:"FreeImages",hintTargetContainer:"addPanel",preHintTarget:"AddPanel",preHintTargetContainer:"leftBar",userProfileProperty:"add_image_free",prerequisiteActions:{action:"openPanel",actionProps:{panelName:"addPanelInfra.addPanel",panelProps:{category:"image"}}},postActions:{},onTargetContainerAction:{action:"switchAddPanelCategory",actionProps:{panelName:"addPanelInfra.addPanel",panelProps:{category:"image"}}},openTriggers:[],closeTriggers:["addPanelClosed"],isOneLiner:!0,isDesktopOnly:!0,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT"}}},ChangeBackgrounds:{id:"ChangeBackgrounds",primaryHintTarget:"ChangeBackgrounds",hintTargetContainer:"leftBar",userProfileProperty:"background_changed",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["changeBackgroundsClicked"],isOneLiner:!0,isDesktopOnly:!1,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT"}}},Text:{id:"Text",primaryHintTarget:"AddText",hintTargetContainer:"addPanel",preHintTarget:"AddPanel",preHintTargetContainer:"leftBar",userProfileProperty:"add_text_comp",prerequisiteActions:{action:"openPanel",actionProps:{panelName:"addPanelInfra.addPanel",panelProps:{category:"text"}}},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["addPanelClosed"],isOneLiner:!0,isDesktopOnly:!0,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT"}}},Galleries:{id:"Galleries",primaryHintTarget:"AddGallery",hintTargetContainer:"addPanel",preHintTarget:"AddPanel",preHintTargetContainer:"leftBar",userProfileProperty:"organize_image",prerequisiteActions:{action:"openPanel",actionProps:{panelName:"addPanelInfra.addPanel",panelProps:{category:"gallery"}}},postActions:{},onTargetContainerAction:{},openTriggers:["imageAdded"],closeTriggers:["addPanelClosed"],isOneLiner:!0,isDesktopOnly:!0,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT"}}},Buttons:{id:"Buttons",primaryHintTarget:"AddButton",hintTargetContainer:"addPanel",preHintTarget:"AddPanel",preHintTargetContainer:"leftBar",userProfileProperty:"add_button",prerequisiteActions:{action:"openPanel",actionProps:{panelName:"addPanelInfra.addPanel",panelProps:{category:"button"}}},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["addPanelClosed"],isOneLiner:!0,isDesktopOnly:!0,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT"}}},AppMarket:{id:"AppMarket",primaryHintTarget:"AppMarket",hintTargetContainer:"leftBar",userProfileProperty:"open_app_market",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["pageAdded"],closeTriggers:["appMarketPanelOpened"],isOneLiner:!0,isDesktopOnly:!0,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT"}}},Publish:{id:"Publish",primaryHintTarget:"Publish",hintTargetContainer:"topBar",userProfileProperty:"publish",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["publishClicked"],isOneLiner:!0,isDesktopOnly:!1,customUIConfiguration:{dot:{targetOffsetY:-19}}},RePublish:{id:"RePublish",primaryHintTarget:"Publish",hintTargetContainer:"topBar",userProfileProperty:"publish_second",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["publishClicked"],isOneLiner:!0,isDesktopOnly:!1,customUIConfiguration:{dot:{targetOffsetY:-19}}},Premium:{id:"Premium",primaryHintTarget:"Premium",hintTargetContainer:"topBar",userProfileProperty:"upgrade_in_editor",prerequisiteActions:{action:"disableTopBarMenuDropDown"},postActions:{action:"enableTopBarMenuDropDown"},onTargetContainerAction:{},openTriggers:[],closeTriggers:["topBarMenuBarUpgradeDropDownOpened"],isOneLiner:!0,isDesktopOnly:!1},GetFeedback:{id:"GetFeedback",primaryHintTarget:"GetFeedback",hintTargetContainer:"topBarSiteMenuPanel",preHintTarget:"SiteMenuBar",preHintTargetContainer:"topBar",userProfileProperty:"get_feedback",prerequisiteConditionCallback:{action:"topBarMenuBarItemVisible",actionProps:{menuItemKey:"FEEDBACK"}},prerequisiteActions:{action:"openTopBarMenuDropDown",actionProps:{menuItemIndex:0}},postActions:{action:"enableCloseTopBarMenuDropDown"},onTargetContainerAction:{},openTriggers:[],closeTriggers:["topBarMenuBarSiteDropDownClosed"],isOneLiner:!0,isDesktopOnly:!1,customUIConfiguration:{dot:{targetOffsetX:-14,targetOffsetY:-5}}},SiteSettings:{id:"SiteSettings",primaryHintTarget:"SiteSettings",hintTargetContainer:"topBarSiteMenuPanel",preHintTarget:"SiteMenuBar",preHintTargetContainer:"topBar",userProfileProperty:"site_settings",prerequisiteActions:{action:"openTopBarMenuDropDown",actionProps:{menuItemIndex:0}},postActions:{action:"enableCloseTopBarMenuDropDown"},onTargetContainerAction:{},openTriggers:[],closeTriggers:["topBarMenuBarSiteDropDownClosed"],isOneLiner:!0,isDesktopOnly:!1,customUIConfiguration:{dot:{targetOffsetX:-14,targetOffsetY:-5}}},Rulers:{id:"Rulers",primaryHintTarget:"Rulers",hintTargetContainer:"topBarToolsMenuPanel",preHintTarget:"ToolsMenuBar",preHintTargetContainer:"topBar",userProfileProperty:"apply_rulers",prerequisiteConditionCallback:{action:"topBarMenuBarItemVisible",actionProps:{menuItemKey:"RULERS"}},prerequisiteActions:{action:"openTopBarMenuDropDown",actionProps:{menuItemIndex:1}},postActions:{action:"enableCloseTopBarMenuDropDown"},onTargetContainerAction:{},openTriggers:[],closeTriggers:["topBarMenuBarToolsDropDownClosed"],isOneLiner:!0,isDesktopOnly:!1,customUIConfiguration:{dot:{targetOffsetX:-14,targetOffsetY:-5}}},HideControls:{id:"HideControls",primaryHintTarget:"HideControls",hintTargetContainer:"topBar",userProfileProperty:"hide_controls",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["hideControls"],isOneLiner:!0,isDesktopOnly:!0},Pages_NewPage:{id:"Pages_NewPage",primaryHintTarget:"Pages_NewPage",hintTargetContainer:"pagesPanel",preHintTarget:"Pages_Navigation",preHintTargetContainer:"topBar",userProfileProperty:"add_page",prerequisiteActions:{action:"openPanel",actionProps:{panelName:"rEditor.panels.pagesAndPopupsPanel"}},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["pagesPanelClosed"],isOneLiner:!0,isDesktopOnly:!0,customUIConfiguration:{dot:{preTargetOffsetX:-105,preTargetOffsetY:-20,targetOffsetY:-10}}},Pages_Rearrange:{id:"Pages_Rearrange",primaryHintTarget:"Pages_Rearrange",hintTargetContainer:"pagesPanel",userProfileProperty:"rearange_pages",prerequisiteActions:{},prerequisiteConditionCallback:{action:"multiplePages"},postActions:{},onTargetContainerAction:{},openTriggers:["pagesPanelOpened"],closeTriggers:["pagesPanelClosed"],isOneLiner:!0,isDesktopOnly:!0,customUIConfiguration:{dot:{bubbleAlignment:"BOTTOM"}}},Pages_DropdownMenu:{id:"Pages_DropdownMenu",primaryHintTarget:"Pages_Rearrange",hintTargetContainer:"pagesPanel",userProfileProperty:"subpage",prerequisiteActions:{},prerequisiteConditionCallback:{action:"multiplePages"},postActions:{},onTargetContainerAction:{},openTriggers:["pagesPanelOpened"],closeTriggers:["pagesPanelClosed"],isOneLiner:!0,isDesktopOnly:!0,customUIConfiguration:{dot:{bubbleAlignment:"BOTTOM"}}},Pages_Settings:{id:"Pages_Settings",primaryHintTarget:"Pages_Settings",hintTargetContainer:"pagesPanel",userProfileProperty:"page_settings",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["pagesPanelOpened"],closeTriggers:["pagesPanelClosed"],isOneLiner:!0,isDesktopOnly:!0,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT",targetOffsetX:-5,targetOffsetY:-3}}},MiniNavigation:{id:"MiniNavigation",primaryHintTarget:"MiniNavigation",hintTargetContainer:"innerNavigation",userProfileProperty:"",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["addPanelOpened"],closeTriggers:["addPanelClosed"],isOneLiner:!0,isDesktopOnly:!0,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT"}}},ForwardOrBack:{id:"ForwardOrBack",primaryHintTarget:"ForwardOrBack",hintTargetContainer:"rightClickPanel",userProfileProperty:"move_forward_back",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["rightClickMenuOpen"],closeTriggers:["rightClickMenuClose"],isOneLiner:!0,isDesktopOnly:!0,customUIConfiguration:{dot:{bubbleAlignment:"LEFT"}}},OverlappingItems:{id:"OverlappingItems",primaryHintTarget:"OverlappingItems",hintTargetContainer:"rightClickPanel",userProfileProperty:"overalpping",prerequisiteActions:{},prerequisiteConditionCallback:{action:"targetDOMNodeExist",actionProps:{dataHintIdAttr:"OverlappingItems"}},postActions:{},onTargetContainerAction:{},openTriggers:["rightClickMenuOpen"],closeTriggers:["rightClickMenuClose"],isOneLiner:!0,isDesktopOnly:!1,customUIConfiguration:{dot:{bubbleAlignment:"LEFT"}}},SiteHistory:{id:"SiteHistory",primaryHintTarget:"SiteHistory",hintTargetContainer:"topBarSiteMenuPanel",preHintTarget:"SiteMenuBar",preHintTargetContainer:"topBar",userProfileProperty:"site_history",prerequisiteActions:{action:"openTopBarMenuDropDown",actionProps:{menuItemIndex:0}},postActions:{action:"enableCloseTopBarMenuDropDown"},onTargetContainerAction:{},openTriggers:["savePanelClose"],closeTriggers:["topBarMenuBarSiteDropDownClosed"],isOneLiner:!0,isDesktopOnly:!1,customUIConfiguration:{dot:{targetOffsetX:-14,targetOffsetY:-5}}},ParallexVideoStripPreview:{id:"ParallexVideoStripPreview",primaryHintTarget:"Preview",hintTargetContainer:"topBar",userProfileProperty:"strip_with_video_or_parallex",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["ParallexStripAddedOrChanged","VideoStripAddedOrChanged"],closeTriggers:["previewClicked"],isOneLiner:!0,isDesktopOnly:!0,customUIConfiguration:{dot:{targetOffsetY:-19}}},VideoBackgroundStripPreview:{id:"VideoBackgroundStripPreview",primaryHintTarget:"Preview",hintTargetContainer:"topBar",userProfileProperty:"strip_with_video",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["VideoStripAddedOrChanged"],closeTriggers:["previewClicked"],isOneLiner:!0,isDesktopOnly:!0,customUIConfiguration:{dot:{targetOffsetY:-19}}},ParallexVideoPreview:{id:"ParallexVideoPreview",primaryHintTarget:"Preview",hintTargetContainer:"topBar",userProfileProperty:"strip_with_parallex",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["ParallexStripAddedOrChanged"],closeTriggers:["previewClicked"],isOneLiner:!0,isDesktopOnly:!0,customUIConfiguration:{dot:{targetOffsetY:-19}}},VideoBackgroundPreview:{id:"VideoBackgroundPreview",primaryHintTarget:"Preview",hintTargetContainer:"topBar",userProfileProperty:"video_background",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["VideoBackgroundAddedOrChanged"],closeTriggers:["previewClicked"],isOneLiner:!0,isDesktopOnly:!0,customUIConfiguration:{dot:{targetOffsetY:-19}}},MobileEditor_HiddenElements:{id:"MobileEditor_HiddenElements",primaryHintTarget:"MobileEditorHiddenElements",hintTargetContainer:"leftBar",userProfileProperty:"mobile_hide_elements",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["editorViewModeSwitchedToMobile"],closeTriggers:["hiddenItemsClicked"],isOneLiner:!0,isDesktopOnly:!1,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT"}}}}}),define("editorHints/configurations/hintsConfig.json",[],function(){return{daysBeforeHintCanShownAgain:7,userIdleDurationSec:3,minTimeBetweenHintsSec:{time1:540,time2:1980,time3:1},uiType:{overlay:{uiType:"overlay",configurations:{resetTimeoutTrigger:"hintClosed",closeHintOnOverlayClick:!0,enableTargetClick:!0,highlightCircleRadius:36,maxTargetWidthForCenterAlign:80,distanceFromTarget:30,marginFromWindow:60,contentWidth:240,oneLinerWidth:640}},dot:{uiType:"dot",configurations:{resetTimeoutTrigger:"hintShown",dotRadius:5,distanceFromTarget:-2,marginFromWindow:6,bubbleWidth:240,hintBubbleTimeoutSec:10}}},hints:{list1:{userIdleHints:["Undo","Preview","Help","Pages_Navigation","AddAnything","ChangeBackgrounds","AddImage","FreeImages","XandY","Text","Galleries","Buttons","AppMarket","SiteSettings","Publish","Pages_NewPage","Premium","SwitchEditor","HideControls","RePublish","GetFeedback","Rulers","ZoomOut"],actionTriggeredHints:["Pages_Rearrange","Pages_DropdownMenu","Pages_Settings","MiniNavigation","ForwardOrBack","OverlappingItems","MobileEditor_HiddenElements","SiteHistory","ParallexVideoStripPreview","VideoBackgroundPreview"]},list2:{userIdleHints:["AddAnything","ChangeBackgrounds","AddImage","Text","Galleries","Premium"],actionTriggeredHints:["Undo","ParallexVideoStripPreview","VideoBackgroundPreview","Pages_Navigation","XandY","AppMarket","SwitchEditor","Pages_Rearrange","Pages_DropdownMenu","Pages_Settings","MiniNavigation","ForwardOrBack","OverlappingItems","MobileEditor_HiddenElements","SiteHistory"]},list3:{userIdleHints:["Undo","AddImage","Pages_Navigation","Help","HideControls","Preview","SwitchEditor","GetFeedback","Publish"],actionTriggeredHints:["VideoBackgroundStripPreview","ParallexVideoPreview","VideoBackgroundPreview"]},list4:{userIdleHints:["Pages_Navigation","SiteHistory","Help","Undo","GetFeedback","Preview","Text","XandY","ChangeBackgrounds","ZoomOut","Rulers","RePublish","AppMarket"],actionTriggeredHints:["Pages_Rearrange","MiniNavigation","Pages_DropdownMenu","OverlappingItems","Pages_Settings","ParallexVideoStripPreview"]},idleList:{userIdleHints:["Undo","Preview","Help","Pages_Navigation","AddAnything","ChangeBackgrounds","AddImage","FreeImages","XandY","Text","Galleries","Buttons","AppMarket","SiteSettings","Publish","Pages_NewPage","Premium","SwitchEditor","HideControls","RePublish","GetFeedback","Rulers","ZoomOut"],actionTriggeredHints:[]},actionList:{userIdleHints:[],actionTriggeredHints:["Undo","ParallexVideoStripPreview","VideoBackgroundPreview","Pages_Navigation","XandY","AppMarket","SwitchEditor","Pages_Rearrange","Pages_DropdownMenu","Pages_Settings","MiniNavigation","ForwardOrBack","OverlappingItems","MobileEditor_HiddenElements","SiteHistory"]}}}}),define("editorHints/utils/hintsDataUtil",["lodash","panels","core","experiment","editorHints/configurations/hintsData.json","editorHints/configurations/hintsConfig.json"],function(e,t,n,i,r,o){function a(){var t=i.getValue("editorHintsConfigs");if(t){var n=t.match(/config([2-9]|1[0-6]?)$/);if(n)return e.parseInt(n[1])}}function s(e){var t="list"+(1+~~((e-1)/4));return o.hints[t]}function l(e){var t=0===e%2?"dot":"overlay";return o.uiType[t]}function d(e){var t="time"+(1+~~((e-1)/2%2));return o.minTimeBetweenHintsSec[t]}function p(t,n){var i=t[n];return e.pick(r,i)}function g(t){var n=p(t,"actionTriggeredHints"),i=e(n).flatMap(function(t){return e.map(t.openTriggers,function(e){return{trigger:e,hintData:t}})}).groupBy("trigger").mapValues(function(t){return e.map(t,"hintData")}).value();return i.userIdle=e.values(p(t,"userIdleHints")),i}return{getCurrentHintsConfiguration:s,getCurrentUiTypeConfiguration:l,getCurrentMinTimeoutBetweenHintsConfiguration:d,getUserIdleDuration:function(){return o.userIdleDurationSec},getDaysBeforeHintCanShownAgain:function(){return o.daysBeforeHintCanShownAgain},getActionToHintsMapping:g,getHintsConfigurationNumber:a}}),define("editorHints/utils/constants",["panels","core"],function(e,t){var n={ADD_PANEL_OPENED:"addPanelOpened",ADD_PANEL_CLOSED:"addPanelClosed",PAGES_PANEL_CLOSED:"pagesPanelClosed",PAGES_PANEL_OPENED:"pagesPanelOpened",EDITOR_VIEW_MODE_CLICKED:"editorViewModeClicked",APP_MARKET_PANEL_OPENED:"appMarketPanelOpened",HIDE_CONTROLS:"hideControls",SHOW_CONTROLS:"showControls",RIGHT_CLICK_MENU_OPEN:"rightClickMenuOpen",RIGHT_CLICK_MENU_CLOSE:"rightClickMenuClose",PREVIEW_CLICKED:"previewClicked",SAVE_PANEL_CLOSE:"savePanelClose",VIDEO_STRIP_ADDED_OR_CHANGED:"VideoStripAddedOrChanged",PARALLEX_STRIP_ADDED_OR_CHANGED:"ParallexStripAddedOrChanged",VIDEO_BACKGROUND_ADDED_OR_CHANGED:"VideoBackgroundAddedOrChanged",EDITOR_VIEW_MODE_SWITCHED_TO_MOBILE:"editorViewModeSwitchedToMobile",MOUSE_MOVE_START:"mouseMoveStart",MOUSE_MOVE_END:"mouseMoveEnd",MOUSE_DRAG_END:"mouseDragEnd",ENTER_ZOOM_MODE:"enterZoomOut",EXIT_ZOOM_MODE:"exitZoomOut",BACK_FROM_PREVIEW:"backFromPreview",IMAGE_ADDED:"imageAdded",PAGE_ADDED:"pageAdded",NAVIGATE_TO_PAGE:"navigateToPage",COMPONENT_REMOVED:"componentRemoved",UNDO_CLICKED:"undoClicked",CHANGED_BACKGROUNDS_CLICKED:"changeBackgroundsClicked",PUBLISH_CLICKED:"publishClicked",HIDDEN_ITEMS_CLICKED:"hiddenItemsClicked",TOP_BAR_MENU_BAR_DROP_DOWN_OPENED:"topBarMenuBarDropDownOpened",TOP_BAR_MENU_BAR_SITE_DROP_DOWN_OPENED:"topBarMenuBarSiteDropDownOpened",TOP_BAR_MENU_BAR_HELP_DROP_DOWN_OPENED:"topBarMenuBarHelpDropDownOpened",TOP_BAR_MENU_BAR_UPGRADE_DROP_DOWN_OPENED:"topBarMenuBarUpgradeDropDownOpened",TOP_BAR_MENU_BAR_DROP_DOWN_CLOSED:"topBarMenuBarDropDownClosed",TOP_BAR_MENU_BAR_SITE_DROP_DOWN_CLOSED:"topBarMenuBarSiteDropDownClosed",TOP_BAR_MENU_BAR_TOOLS_DROP_DOWN_CLOSED:"topBarMenuBarToolsDropDownClosed",SAVE_REMINDER_DISPLAYED:"saveReminderDisplayed"},i={TOP_BAR:"topBar",TOOL_BAR:"toolBar",LEFT_BAR:"leftBar",ADD_PANEL:"addPanel",PAGES_PANEL:"pagesPanel",INNER_NAVIGATION:"innerNavigation",RIGHT_CLICK_PANEL:"rightClickPanel",TOP_BAR_SITE_MENU_PANEL:"topBarSiteMenuPanel",TOP_BAR_TOOLS_MENU_PANEL:"topBarToolsMenuPanel"},r={};r[n.ADD_PANEL_OPENED]=i.ADD_PANEL,r[n.PAGES_PANEL_OPENED]=i.PAGES_PANEL,r[n.RIGHT_CLICK_MENU_OPEN]=i.RIGHT_CLICK_PANEL;var o={USER_PREFERENCES_HINTS_ENTRY_KEY:"hintsLastShownTime",USER_PREFERENCES_HINTS_COUNT_ENTRY_KEY:"shownHintsCount"};return{ACTIONS:n,HINTS_CONTAINERS:i,ACTIONS_TO_OPEN_CONTAINERS:r,BI:{CLICK_OVERLAY:"click_overlay",GOT_IT:"got_it",ON_TARGET:"on_target",CLICK_ESC:"esc",HINT_REPLACED:"hint_replaced"},START_USER_IDLE_TIMER_EVENTS:[t.bi.events.panels.PANEL_CLOSED.evid,n.MOUSE_MOVE_END,n.MOUSE_DRAG_END,t.bi.events.topbar.zoombar.zoom_mode_bar_exit_zoom_mode.evid,t.bi.events.editor.hide_tools.show_controls.evid],USER_PREFERENCES:o,ACTION_TRIGGERED_HINT_MIN_TIME_RATIO:2/3}}),define("editorHints/utils/biEventToAction",["lodash","panels","core","editorHints/utils/constants"],function(e,t,n,i){function r(){var e=i.ACTIONS,t={};return t[n.bi.events.panels.PANEL_CLOSED.evid]=[{actionId:e.ADD_PANEL_CLOSED,biEventParams:{panel_name:"addPanelInfra.addPanel"}},{actionId:e.PAGES_PANEL_CLOSED,biEventParams:{panel_name:"rEditor.panels.pagesAndPopupsPanel"}},{actionId:e.SAVE_PANEL_CLOSE,biEventParams:{panel_name:"savePublish.panels.save.siteWasSavedPanel"}}],t[n.bi.events.panels.PANEL_OPENED.evid]=[{actionId:e.ADD_PANEL_OPENED,biEventParams:{panel_name:"addPanelInfra.addPanel"}},{actionId:e.PAGES_PANEL_OPENED,biEventParams:{panel_name:"rEditor.panels.pagesAndPopupsPanel"}},{actionId:e.APP_MARKET_PANEL_OPENED,biEventParams:{panel_name:"tpa.compPanels.appMarketPanel"}},{actionId:e.CHANGED_BACKGROUNDS_CLICKED,biEventParams:{panel_name:"rEditor.panels.backgroundPanel"}},{actionId:e.HIDDEN_ITEMS_CLICKED,biEventParams:{panel_name:"mobileEditor.hiddenItemsPanel"}}],t[n.bi.events.topbar.top_bar_click.evid]=[{actionId:e.EDITOR_VIEW_MODE_CLICKED,biEventParams:{category:"editor_view_mode"}}],t[n.bi.events.editor.hide_tools.hide_controls.evid]=[{actionId:e.HIDE_CONTROLS}],t[n.bi.events.editor.hide_tools.show_controls.evid]=[{actionId:e.SHOW_CONTROLS}],t[n.bi.events.topbar.top_bar_zoom_mode_click.evid]=[{actionId:e.ENTER_ZOOM_MODE}],t[n.bi.events.topbar.zoombar.zoom_mode_bar_exit_zoom_mode.evid]=[{actionId:e.EXIT_ZOOM_MODE}],t[n.bi.events.rightClickMenu.RIGHT_CLICK_MENU_OPEN.evid]=[{actionId:e.RIGHT_CLICK_MENU_OPEN}],t[n.bi.events.rightClickMenu.RIGHT_CLICK_MENU_CLOSE.evid]=[{actionId:e.RIGHT_CLICK_MENU_CLOSE}],t[n.bi.events.preview.PREVIEW_CLICK.evid]=[{actionId:e.PREVIEW_CLICKED}],t[n.bi.events.stripContainerSettings.strip_background_panel_background_changed.evid]=[{actionId:e.PARALLEX_STRIP_ADDED_OR_CHANGED,biEventParams:{bg_scroll_with_site:"BackgroundParallax"}},{actionId:e.VIDEO_STRIP_ADDED_OR_CHANGED,biEventParams:{bg_media_type:"wixvideo"}}],t[n.bi.events.backgroundPanel.panel_background_changed.evid]=[{actionId:e.VIDEO_BACKGROUND_ADDED_OR_CHANGED,biEventParams:{bg_media_type:"wixvideo"}}],t[n.bi.events.topbar.editor_view_mode_switch.evid]=[{actionId:e.EDITOR_VIEW_MODE_SWITCHED_TO_MOBILE,biEventParams:{mode:"mobile"}}],t[n.bi.events.topbar.top_bar_Preview_Page_Back_to_Editor_click.evid]=[{actionId:e.BACK_FROM_PREVIEW}],t[e.MOUSE_DRAG_END]=[{actionId:e.MOUSE_DRAG_END}],t[n.bi.events.addPanel.COMPONENT_ADDED_TO_STAGE.evid]=[{actionId:e.IMAGE_ADDED,biEventParams:{category:"image",component_type:"wysiwyg.viewer.components.WPhoto"}},{actionId:e.PARALLEX_STRIP_ADDED_OR_CHANGED,biEventParams:{category:"strip",section:"add_section_label_strip_container_parallax"}},{actionId:e.PARALLEX_STRIP_ADDED_OR_CHANGED,biEventParams:{category:"strip",section:"add_section_label_columns_parallax"}},{actionId:e.VIDEO_STRIP_ADDED_OR_CHANGED,biEventParams:{category:"strip",preset_id:"Strip_Strip_Container_Classic_3"}},{actionId:e.VIDEO_STRIP_ADDED_OR_CHANGED,biEventParams:{category:"strip",preset_id:"Columns_ColumnsClassic_3"}}],t[n.bi.events.topbar.pages.top_bar_PAGES_Add_pages_expand_menu_selection_click.evid]=[{actionId:e.PAGE_ADDED,biEventParams:{category:"page"}}],t[n.bi.events.topbar.pages.top_bar_PAGES_navigate_to_page.evid]=[{actionId:e.NAVIGATE_TO_PAGE}],t[n.bi.events.editor.component_removed.evid]=[{actionId:e.COMPONENT_REMOVED}],t[n.bi.events.editor.undo_redo_component_change.evid]=[{actionId:e.UNDO_CLICKED,biEventParams:{type:"undo",origin:"topbar"}}],t[n.bi.events.publish.PUBLISH_CLICK.evid]=[{actionId:e.PUBLISH_CLICKED}],t[e.TOP_BAR_MENU_BAR_DROP_DOWN_OPENED]=[{actionId:e.TOP_BAR_MENU_BAR_SITE_DROP_DOWN_OPENED,biEventParams:{index:0}},{actionId:e.TOP_BAR_MENU_BAR_HELP_DROP_DOWN_OPENED,biEventParams:{index:2}},{actionId:e.TOP_BAR_MENU_BAR_UPGRADE_DROP_DOWN_OPENED,biEventParams:{index:3}}],t[e.TOP_BAR_MENU_BAR_DROP_DOWN_CLOSED]=[{actionId:e.TOP_BAR_MENU_BAR_SITE_DROP_DOWN_CLOSED,biEventParams:{index:0}},{actionId:e.TOP_BAR_MENU_BAR_TOOLS_DROP_DOWN_CLOSED,biEventParams:{index:1}}],t[n.bi.events.save.saveReminder.REMINDER_DISPLAYED.evid]=[{actionId:e.SAVE_REMINDER_DISPLAYED,biEventParams:{origin:"pop up message"}}],t}function o(t,n,i){var r=null,o=t[n.evid];if(o){var a=e(o).filter(function(t){return e.every(t.biEventParams,function(e,t){return i[t]===e})}).head();a&&(r=a.actionId)}return r}return{createBiEventToActionMapping:r,getActionIdByBiEvent:o}}),define("editorHints/utils/userPreferencesUtil",["lodash","editorHints/utils/constants"],function(e,t){function n(e,n,i){var r=e.getUserPreferences().global.get(t.USER_PREFERENCES.USER_PREFERENCES_HINTS_ENTRY_KEY)||{};r[n]=i,e.getUserPreferences().global.set(t.USER_PREFERENCES.USER_PREFERENCES_HINTS_ENTRY_KEY,r)}function i(e){var n=e.getUserPreferences().global.get(t.USER_PREFERENCES.USER_PREFERENCES_HINTS_COUNT_ENTRY_KEY)||0;return e.getUserPreferences().global.set(t.USER_PREFERENCES.USER_PREFERENCES_HINTS_COUNT_ENTRY_KEY,++n),n}function r(e,n){var i=e.getUserPreferences().global.get(t.USER_PREFERENCES.USER_PREFERENCES_HINTS_ENTRY_KEY);return i&&i[n]||null}function o(e){e.getUserPreferences().global.set(t.USER_PREFERENCES.USER_PREFERENCES_HINTS_ENTRY_KEY,{}),e.getUserPreferences().global.set(t.USER_PREFERENCES.USER_PREFERENCES_HINTS_COUNT_ENTRY_KEY,0)}function a(e,n){e.getUserPreferences().global.set(t.USER_PREFERENCES.USER_PREFERENCES_HINTS_ENTRY_KEY,n)}return{setShownHintInUserPreferences:n,incAndGetShowHintCountInUserPreferences:i,getHintLastShownTime:r,changeLastShowTimestamp:a,resetUserPreferences:o}}),define("editorHints/utils/preAndPostHintActions",["lodash"],function(e){function t(e){var t=e.editorAPI;t.toolbar.isToolbarEnabled()||t.toolbar.toggleToolbar()}function n(t){var n=t.editorAPI;e.some(n.panelManager.getOpenPanels(),{name:t.panelName})?n.panelManager.updatePanelProps(t.panelName,t.panelProps):n.panelManager.openPanel(t.panelName,t.panelProps)}function i(e){e.editorAPI.panelManager.updatePanelProps(e.panelName,e.panelProps)}function r(e){e.editorAPI.topBarMenuBar.openDropDown(e.menuItemIndex,!0)}function o(e){e.editorAPI.topBarMenuBar.enableClose()}function a(e){e.editorAPI.topBarMenuBar.disableDropDown()}function s(e){e.editorAPI.topBarMenuBar.enableDropDown()}function l(t){var n=t.editorAPI.mainMenu.getMenuItemsTreeForMainMenu();return e.sumBy(n,function(t){return 1+e.size(t.items)})>1}function d(e){return e.editorAPI.topBarMenuBar.shouldBeVisible(e.menuItemKey)}function p(e){return!!(e.targetContainer||window.document).querySelector('[data-hint-id="'+e.dataHintIdAttr+'"]')}return{openToolbar:t,openPanel:n,switchAddPanelCategory:i,openTopBarMenuDropDown:r,enableCloseTopBarMenuDropDown:o,disableTopBarMenuDropDown:a,enableTopBarMenuDropDown:s,multiplePages:l,topBarMenuBarItemVisible:d,targetDOMNodeExist:p}}),define("editorHints/hintsManager/managerHelper",["lodash","jquery","core","editorHints/utils/constants","editorHints/utils/userPreferencesUtil","editorHints/utils/preAndPostHintActions"],function(e,t,n,i,r,o){function a(t,n){var i=s(t,n);e.isEmpty(i)?t.hintsLock.reset():g(t,i,function(e){e&&c(t,e)})}function s(t,n){return e.filter(n,function(e){var n=t.editorAPI.get(),i=!e.prerequisiteConditionCallback||l(t,e,"prerequisiteConditionCallback"),r=n.isDesktopEditor()||!e.isDesktopOnly,o=d(t,e);return r&&i&&o})}function l(t,n,i){var r=n[i];if(r&&r.action){var a=t.registeredHintsContainers.get()[n.hintTargetContainer],s=e.assign({},r.actionProps,{editorAPI:t.editorAPI.get(),targetContainer:a});return o[r.action](s)}}function d(t,n){var i=r.getHintLastShownTime(t.editorAPI.get(),n.id),o=!!i&&p(t,i);return!i||!e.isEmpty(n.userProfileProperty)&&!o}function p(e,t){var n=e.minDaysBeforeHintCanShownAgain.get();return(e.timestamp.get()-t)/864e5<n}function g(t,n,i){if(e.isEmpty(n))t.hintsLock.reset();else{var r=e.head(n);e.isEmpty(r.userProfileProperty)?i(r):u(r.userProfileProperty,function(o){o?g(t,e.tail(n),i):i(r)})}}function u(n,i){var r=L+"?fields="+n+"&accept=json";t.ajax(r).complete(function(t,r){if("success"===r){var o=e.get(t,"responseJSON.payload.fields"),a=e.some(o,function(e){return e.name===n&&null!==e.value});i(a)}else i(!1)})}function c(e,t){T(e,t),P(e,t),h(e)}function T(e,t){_(t,e.uiType.get())&&l(e,t,"prerequisiteActions")}function _(t,n){var i="overlay"!==n&&t.preHintTarget;return!e.isEmpty(t.prerequisiteActions)&&!i}function P(t,n){var i=t.uiType.get(),r=n.customUIConfiguration?n.customUIConfiguration[i]||{}:{};n.uiConfiguration=e.defaults(r,t.uiConfigurations.get()),n.uiType=i,t.currentHintData.set(n)}function E(t){var n=t.currentHintData.get();n&&n.hintTargetContainer&&!e.isEmpty(n.onTargetContainerAction)&&l(t,n,"onTargetContainerAction")}function h(t){var n=t.currentHintData.get(),i=t.registeredHintsContainers.get();n&&C(n,i)&&(E(t),t.presenter.get().presentHint(n,m.bind(null,t),A.bind(null,t),e.get(i,n.preHintTargetContainer),e.get(i,n.hintTargetContainer)))}function C(t,n){var i="dot"===t.uiType&&e.has(n,t.preHintTargetContainer),r=e.has(n,t.hintTargetContainer);return i||r}function m(e,t){var n=e.timestamp.get();f(e,t,n),r.setShownHintInUserPreferences(e.editorAPI.get(),t.id,n),e.lastHintDisplayTime.set(n),"hintShown"===e.uiConfigurations.get().resetTimeoutTrigger&&(l(e,t,"postActions"),H(e))}function f(e,t,i){var o=e.editorAPI.get(),a=r.incAndGetShowHintCountInUserPreferences(o),s=e.lastHintDisplayTime.get(),l=s?Math.round((i-s)/6e4):0;o.bi.event(n.bi.events.commonControls.editorHints.hintShown,{count:a,name:t.id,timestamp:l,type:t.uiType})}function A(e,t,n){t===e.currentHintData.get()&&e.currentHintData.set(null),"hintClosed"===e.uiConfigurations.get().resetTimeoutTrigger&&(l(e,t,"postActions"),O(e,t,n),H(e))}function O(e,t,i){e.editorAPI.get().bi.event(n.bi.events.commonControls.editorHints.hintDismissed,{name:t.id,timestamp_ms:e.timestamp.get()-e.lastHintDisplayTime.get(),type:i})}function H(e){e.hintsLock.reset(),e.userIdleTimeoutHandler.clearTimeout(),e.lastTimerBetweenHintsReset.set(e.timestamp.get())}function D(t,n){var r=t.currentHintData.get();r&&(e.includes(r.closeTriggers,n)||n===i.ACTIONS.SAVE_REMINDER_DISPLAYED)&&t.presenter.get().hideHint()}function I(e,t){return e&&e.hintTargetContainer===i.ACTIONS_TO_OPEN_CONTAINERS[t]}function b(e,t,n){return 1e3*e-(n-t)}function v(e,t){var n=e.preHintTargetContainer===t,i=e.hintTargetContainer===t;return n||i}function N(t){return e.includes(i.START_USER_IDLE_TIMER_EVENTS,t.evid)}function y(t){return!t.toolsControl.areToolsHidden()&&e.isEmpty(t.panelManager.getOpenPanels())}function S(e,t){e.hints.registerForMouseEvents(R.bind(null,t),B.bind(null,t)),e.topBarMenuBar.registerForDropDownActions(w.bind(null,t),M.bind(null,t))}function R(e){e({evid:i.ACTIONS.MOUSE_MOVE_START})}function B(e,t,n){e({evid:t&&"DRAG"===t&&n?i.ACTIONS.MOUSE_DRAG_END:i.ACTIONS.MOUSE_MOVE_END})}function w(e,t){e({evid:i.ACTIONS.TOP_BAR_MENU_BAR_DROP_DOWN_OPENED},{index:t})}function M(e,t){e({evid:i.ACTIONS.TOP_BAR_MENU_BAR_DROP_DOWN_CLOSED},{index:t})}var L="https://editor.wix.com/_api/wix-bi-profile-webapp/userprofile";return{showNextApplicableHint:a,presentHint:h,closeCurrentHintIfNeeded:D,doesContainerToOpenBelongToCurrentHint:I,timeLeftToShowNextHint:b,isCurrentHintContainer:v,shouldStartUserIdleTimerAfterEvent:N,canShowUserIdleHintsOnEditor:y,resetTimeoutForNextHint:H,registerForEvents:S,showHint:c}}),define("editorHints/hintsManager/managerState",["lodash"],function(e){function t(e,t,n){b=e,v=t,N=n,I=null}function n(){return b}function i(){return v}function r(){return N.uiType}function o(){return N.uiConfigurations}function a(){return N.minTimeBetweenHints}function s(){return N.minDaysBeforeHintCanShownAgain}function l(){return y}function d(e,t){y[e]=t}function p(e){delete y[e]}function g(){return S}function u(){S=!0}function c(){S=!1}function T(){return O}function _(e){O=e}function P(){return H}function E(e){H=e}function h(){window.clearTimeout(D)}function C(e,t){D=window.setTimeout(e,t)}function m(){return I}function f(e){I=e}function A(){return e.now()}var O,H,D,I,b,v,N,y={},S=!1;return{init:t,editorAPI:{get:n},presenter:{get:i},uiType:{get:r},uiConfigurations:{get:o},minTimeBetweenHints:{get:a},minDaysBeforeHintCanShownAgain:{get:s},registeredHintsContainers:{get:l,add:d,remove:p},hintsLock:{get:g,set:u,reset:c},lastTimerBetweenHintsReset:{get:T,set:_},lastHintDisplayTime:{get:P,set:E},userIdleTimeoutHandler:{clearTimeout:h,setTimeout:C},currentHintData:{get:m,set:f},timestamp:{get:A}}}),define("editorHints/hintsManager/hintsManager",["lodash","core","editorHints/configurations/hintsData.json","editorHints/utils/hintsDataUtil","editorHints/utils/biEventToAction","editorHints/utils/userPreferencesUtil","editorHints/utils/constants","editorHints/hintsManager/managerHelper","editorHints/hintsManager/managerState","util"],function(e,t,n,i,r,o,a,s,l,d){function p(e,t){H=g(),l.init(t,e,H),l.lastTimerBetweenHintsReset.set(l.timestamp.get()),s.registerForEvents(t,_)}function g(){var e=i.getHintsConfigurationNumber(),t=i.getCurrentMinTimeoutBetweenHintsConfiguration(e);"true"===d.url.getParameterByName("isqa")&&(t=I);var n=i.getCurrentHintsConfiguration(e),o=i.getCurrentUiTypeConfiguration(e),a=r.createBiEventToActionMapping(),s=o.configurations,l=o.uiType,p=i.getDaysBeforeHintCanShownAgain(),g=u(n,l);return{actionToHintsMapping:i.getActionToHintsMapping(g),biEventToActionMapping:a,uiConfigurations:s,uiType:l,minTimeBetweenHints:t,minDaysBeforeHintCanShownAgain:p}}function u(t,n){if("dot"===n){var i={};return i.actionTriggeredHints=e.difference(t.actionTriggeredHints,D),i.userIdleHints=e.difference(t.userIdleHints,D),i}return t}function c(e,t){l.registeredHintsContainers.add(e,t);var n=l.currentHintData.get();n&&s.isCurrentHintContainer(n,e)&&s.presentHint(l)}function T(e){var t=l.currentHintData.get();l.registeredHintsContainers.remove(e),t&&t.hintTargetContainer===e&&l.presenter.get().hideHint()}function _(e,t){E(e);var n=r.getActionIdByBiEvent(H.biEventToActionMapping,e,t);if(n&&(s.closeCurrentHintIfNeeded(l,n),P(n))){l.hintsLock.set();var i=H.actionToHintsMapping[n];s.showNextApplicableHint(l,i)}}function P(e){var t=l.lastTimerBetweenHintsReset.get(),n=l.minTimeBetweenHints.get()*a.ACTION_TRIGGERED_HINT_MIN_TIME_RATIO,i=s.timeLeftToShowNextHint(n,t,l.timestamp.get()),r=s.doesContainerToOpenBelongToCurrentHint(l.currentHintData.get(),e);return!l.hintsLock.get()&&i<0&&!r}function E(e){l.userIdleTimeoutHandler.clearTimeout(),s.shouldStartUserIdleTimerAfterEvent(e)&&l.userIdleTimeoutHandler.setTimeout(h,1e3*i.getUserIdleDuration())}function h(){if(s.canShowUserIdleHintsOnEditor(l.editorAPI.get())){var e=s.timeLeftToShowNextHint(l.minTimeBetweenHints.get(),l.lastTimerBetweenHintsReset.get(),l.timestamp.get());if(e<0&&!l.hintsLock.get())l.hintsLock.set(),s.showNextApplicableHint(l,H.actionToHintsMapping.userIdle);else{var t=e>0?e:1e3*i.getUserIdleDuration();l.userIdleTimeoutHandler.setTimeout(h,t)}}}function C(){s.resetTimeoutForNextHint(l)}function m(){l.userIdleTimeoutHandler.clearTimeout(),l.hintsLock.reset(),l.currentHintData.set(null),p(l.presenter.get(),l.editorAPI.get())}function f(e){l.userIdleTimeoutHandler.clearTimeout(),l.currentHintData.get()&&l.presenter.get().hideHint();var t=n[e];t&&(l.hintsLock.set(),s.showHint(l,t))}function A(){l.userIdleTimeoutHandler.clearTimeout(),l.currentHintData.get()&&l.presenter.get().hideHint(),l.hintsLock.set(),s.showNextApplicableHint(l,H.actionToHintsMapping.userIdle)}function O(t){var n={},r=i.getCurrentHintsConfiguration(),a=e.union(r.actionTriggeredHints,r.userIdleHints);e.forEach(a,function(e){n[e]=t}),o.changeLastShowTimestamp(l.editorAPI.get(),n)}var H,D=["XandY"],I=1;return{init:p,onPresenterUnmount:C,registerOrUpdateHint:c,unRegisterHint:T,showHintById:f,showNextIdleHint:A,initHints:m,resetUserPreferences:function(){o.resetUserPreferences(l.editorAPI.get())},changeLastShowTimestampForAllHints:O,handleBiEvent:_}}),define("editorHints/hintsManager/hintsNotify",["reactDOM","react","lodash","editorHints/hintsManager/hintsManager"],function(e,t,n,i){return t.createClass({displayName:"hint",propTypes:{id:t.PropTypes.string.isRequired,children:t.PropTypes.element.isRequired},componentDidMount:function(){i.registerOrUpdateHint(this.props.id,e.findDOMNode(this))},componentDidUpdate:function(){i.registerOrUpdateHint(this.props.id,e.findDOMNode(this))},componentWillUnmount:function(){i.unRegisterHint(this.props.id)},render:function(){return t.Children.only(this.props.children)}})}),define("editorHints/presenters/hintContent.rt",["react","lodash","baseUI","util"],function(e,t,n,i){return function(){return e.createElement("div",{className:"hint-content-container "+(this.props.contentDescription?"":"title-only"),style:this.props.contentStyle},e.createElement("div",{className:"hint-title title"},this.getTitle()),this.props.contentDescription?e.createElement("div",{key:"hint-content-text",className:"hint-description"},i.translate(this.props.contentDescription)):null,e.createElement("footer",{className:"hint-footer"},e.createElement(n.button,{className:"hint-got-it",onClick:this.props.onGotItClick,label:this.props.gotItLabel})))}}),define("editorHints/presenters/hintContent",["react","lodash","util","editorHints/presenters/hintContent.rt"],function(e,t,n,i){return e.createClass({displayName:"hintContent",propTypes:{contentTitle:e.PropTypes.string.isRequired,contentDescription:e.PropTypes.string,gotItLabel:e.PropTypes.string.isRequired,contentStyle:e.PropTypes.object.isRequired,onGotItClick:e.PropTypes.func.isRequired},getTitle:function(){return n.translate(this.props.contentTitle).replace("\\n","\n")},render:i})}),define("editorHints/presenters/overlayHint.rt",["react","lodash","baseUI","editorHints/presenters/hintContent"],function(e,t,n,i){return function(){function t(t,n,i,r,o,a){var s=this.getScreenDimensions();return e.createElement("path",{className:"hint-highlight-path",d:"M0 0 h"+s.screenWidth+" v"+s.screenHeight+" h-"+s.screenWidth+" z\n             M"+r+" "+o+" a"+t+" "+t+" 0 1 0 0 -0.1 z",fillRule:"evenodd"})}function n(t,n,i,r,o,a){var s=this.getScreenDimensions(),l=n.left,d=n.right,p=n.top,g=d-l,u=n.bottom-n.top;return e.createElement("path",{className:"hint-target-wrapper-path",style:{pointerEvents:this.getHintTargetWrapperSvgPathPointerEventsValue()},d:"M0 0 h"+s.screenWidth+" v"+s.screenHeight+" h-"+s.screenWidth+" z\n             M"+l+" "+p+" h"+g+" v"+u+" h-"+g+" z",fillRule:"evenodd"})}function r(){var r=this.props.uiConfiguration.highlightCircleRadius,o=this.props.target.getBoundingClientRect(),a=this.getHighlightCircleStartPoints(o),s=a.startX,l=a.startY,d="Editor_Hints_"+this.props.hintId;return e.createElement("div",{className:"hint-overlay-container",onClick:this.handleOnOverlayClick.bind(this,s,l),style:{pointerEvents:this.getContainerPointerEventsValue()}},e.createElement(i,{contentTitle:this.props.isOneLiner?d+"_OneLiner":d+"_Title",contentDescription:this.props.isOneLiner?"":d+"_Description",gotItLabel:d+"_Close",contentStyle:this.getContentStyle(s,l),onGotItClick:this.handleGotItClick}),e.createElement("div",{className:"circle-shadow",style:this.getCircleShadowStyle(s,l)}),e.createElement("svg",{className:"hint-highlight"},t.apply(this,[r,o,a,s,l,d])),e.createElement("svg",{className:"hint-target-wrapper"},n.apply(this,[r,o,a,s,l,d])))}return r.apply(this,[])}}),define("editorHints/presenters/overlayHint",["react","lodash","util","core","editorHints/utils/constants","editorHints/presenters/overlayHint.rt"],function(e,t,n,i,r,o){function a(e,t,n,i,r){var o,a={};if(o=t?e.oneLinerWidth:e.contentWidth,a.maxWidth=o+"px",r+o+n<window.innerWidth)a.left=r<n?n:r+"px";else{var s=r+2*i;if(s-o<n){var l=window.innerWidth/2-o/2;a.left=l+"px"}else a.right=window.innerWidth-s+"px"}return a}function s(e,t,n,i){var r=n+e.distanceFromTarget,o=i+r;return window.innerHeight-o<t?{bottom:window.innerHeight-(i-r)+"px"}:{top:o+"px"}}return e.createClass({mixins:[i.mixins.editorAPIMixin,n.outerClickMixin],displayName:"overlayHint",propTypes:{target:e.PropTypes.object.isRequired,hintId:e.PropTypes.string.isRequired,uiConfiguration:e.PropTypes.object.isRequired,hideHint:e.PropTypes.func.isRequired,onHintShown:e.PropTypes.func.isRequired,onHideHint:e.PropTypes.func.isRequired,isOneLiner:e.PropTypes.bool.isRequired},componentWillMount:function(){var e=this.getEditorAPI();e.tooltips.disable(),e.disableRightClickMenuCloseOnOuterClick(),window.document.addEventListener("keydown",this.onKeyDown,!0),n.keyboardShortcuts.disable(),this.props.onHintShown()},componentWillUnmount:function(){var e=this.getEditorAPI();e.enableRightClickMenuCloseOnOuterClick(),e.tooltips.enable(),window.document.removeEventListener("keydown",this.onKeyDown,!0),n.keyboardShortcuts.enable(),this.props.onHideHint(this.closeType||r.BI.HINT_REPLACED)},getScreenDimensions:function(){return{screenWidth:window.innerWidth,screenHeight:window.innerHeight}},getCircleShadowStyle:function(e,t){var n=this.props.uiConfiguration.highlightCircleRadius;return{width:2*(n-2)+"px",height:2*(n-2)+"px",top:t-n+"px",left:e+"px",borderWidth:"2px"}},getHintTargetWrapperSvgPathPointerEventsValue:function(){return this.props.uiConfiguration.enableTargetClick?"visiblefill":"all"},getContainerPointerEventsValue:function(){return this.props.uiConfiguration.enableTargetClick?"none":"auto"},getContentStyle:function(e,n){var i=this.props.uiConfiguration,r=i.marginFromWindow,o=i.highlightCircleRadius,l=s(i,r,o,n),d=a(i,this.props.isOneLiner,r,o,e);return t.assign(l,d)},getHighlightCircleStartPoints:function(e){var t=e.left,n=e.right,i=e.top,r=e.bottom,o=this.props.uiConfiguration.highlightCircleRadius;return{startX:n-t<=this.props.uiConfiguration.maxTargetWidthForCenterAlign?(t+n)/2-o:t,startY:(i+r)/2}},handleOnOverlayClick:function(e,t,n){var i=r.BI.CLICK_OVERLAY,o=this.props.uiConfiguration.highlightCircleRadius,a=2*o,s=n.clientX>e&&n.clientX<e+a,l=n.clientY>t-o&&n.clientY<t+o;s&&l&&(i=r.BI.ON_TARGET),this.props.uiConfiguration.closeHintOnOverlayClick&&(this.closeType=i,this.props.hideHint())},handleGotItClick:function(e){e.stopPropagation(),this.closeType=r.BI.GOT_IT,this.props.hideHint()},onOuterClick:function(){this.closeType=r.BI.ON_TARGET,this.props.hideHint()},onKeyDown:function(e){27===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.closeType=r.BI.CLICK_ESC,this.props.hideHint())},render:o})}),define("editorHints/presenters/dotHint.rt",["react","lodash","baseUI"],function(e,t,n){return function(){function i(){var i=this.props.preTarget,r=this.props.target;return e.createElement("div",{key:"dotHintContainer",className:"dot-hint-container"},i?e.createElement("div",{key:"preTargetDot",className:t({dot:!0,"dot-animation":this.state.showAnimation}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),style:this.getPreTargetDotContainerPositionsStyle(i)}):null,r?e.createElement("div",{key:"primaryTargetDot",className:t({dot:!0,"dot-animation":this.state.showAnimation&&!i}).transform(function(e,t,n){t&&e.push(n)},[]).join(" "),style:this.getTargetDotContainerPositionsStyle(r)}):null,this.state.showBubble&&this.props.bubbleTarget?e.createElement(n.bubble,{key:"dotHintContent",value:this.getBubbleValue(),targetNode:this.props.bubbleTarget,width:this.props.uiConfiguration.bubbleWidth+"px",marginsFromWindow:this.props.uiConfiguration.marginFromWindow,alignment:this.getBubbleAlignment(),shouldTranslate:!1}):null)}return this.props.preTarget||this.props.target?i.apply(this,[]):null}}),define("editorHints/presenters/dotHint",["react","lodash","baseUI","util","uiConstants","editorHints/presenters/dotHint.rt"],function(e,t,n,i,r,o){return e.createClass({displayName:"dotHint",propTypes:{preTarget:e.PropTypes.object,target:e.PropTypes.object,bubbleTarget:e.PropTypes.object.isRequired,hintId:e.PropTypes.string.isRequired,uiConfiguration:e.PropTypes.object.isRequired,onHideHint:e.PropTypes.func.isRequired,onHintShown:e.PropTypes.func.isRequired,isOneLiner:e.PropTypes.bool.isRequired},getInitialState:function(){return{showBubble:!0,showAnimation:!0}},onTargetClick:function(){window.clearTimeout(this.timeoutId),this.setState({showBubble:!1,showAnimation:!1})},componentWillMount:function(){this.props.bubbleTarget.addEventListener("click",this.onTargetClick),this.timeoutId=window.setTimeout(this.closeBubble,1e3*this.props.uiConfiguration.hintBubbleTimeoutSec),this.props.onHintShown()},componentWillUnmount:function(){window.clearTimeout(this.timeoutId),this.props.bubbleTarget.removeEventListener("click",this.onTargetClick),this.props.onHideHint()},getDotContainerPositionsStyle:function(e,t,n){var i=e.getBoundingClientRect(),r=i.right,o=i.bottom,a=this.props.uiConfiguration.dotRadius,s=1;return"svg"===e.tagName&&(s=-2),{left:r+t-a+s+"px",top:o+n-a+s+"px",width:2*a,height:2*a}},getTargetDotContainerPositionsStyle:function(e){var t=this.props.uiConfiguration.targetOffsetX||0,n=this.props.uiConfiguration.targetOffsetY||0;return this.getDotContainerPositionsStyle(e,t,n)},getPreTargetDotContainerPositionsStyle:function(e){var t=this.props.uiConfiguration.preTargetOffsetX||0,n=this.props.uiConfiguration.preTargetOffsetY||0;return this.getDotContainerPositionsStyle(e,t,n)},closeBubble:function(){this.setState({showAnimation:!1},function(){this.setState({showBubble:!1,showAnimation:!0})})},getBubbleValue:function(){var t="Editor_Hints_"+this.props.hintId;if(this.props.isOneLiner)return i.translate(t+"_OneLiner").replace("\\n","\n");var r={title:i.translate(t+"_Title").replace("\\n","\n"),text:i.translate(t+"_Description").replace("\\n","\n")};return e.createElement(n.popoverTemplates.titleBodyAndLinkTooltip,r)},getBubbleAlignment:function(){switch(this.props.uiConfiguration.bubbleAlignment){case"LEFT":return r.TOOLTIP.ALIGNMENT.LEFT;case"RIGHT":return r.TOOLTIP.ALIGNMENT.RIGHT;case"TOP":return r.TOOLTIP.ALIGNMENT.TOP;case"BOTTOM":return r.TOOLTIP.ALIGNMENT.BOTTOM}},render:o})}),define("editorHints/presenters/hintPresenter.rt",["react","lodash","editorHints/presenters/overlayHint","editorHints/presenters/dotHint"],function(e,t,n,i){return function(){function t(){var t=this.state.hintData,r=t.uiConfiguration,o=this.getHintTargets(),a=o.target,s=o.preTarget;return e.createElement("div",{className:"hint-presenter",key:"hintPresenter"},"overlay"===t.uiType&&a?e.createElement(n,{key:"overlayHint_"+t.id,target:o.innerTarget||a,hintId:t.id,uiConfiguration:r,hideHint:this.hideHint,onHintShown:this.state.onHintShown.bind(null,t),onHideHint:this.state.onHideHint.bind(null,t),isOneLiner:t.isOneLiner}):null,"dot"===t.uiType&&(s||a)?e.createElement(i,{key:"dotHint_"+t.id,preTarget:o.innerPreTarget||s,target:o.innerTarget||a,bubbleTarget:s||a,hintId:t.id,uiConfiguration:r,onHideHint:this.state.onHideHint.bind(null,t),onHintShown:this.state.onHintShown.bind(null,t),isOneLiner:t.isOneLiner}):null)}return this.state.hintData?t.apply(this,[]):null}}),define("editorHints/presenters/hintPresenter",["react","lodash","core","editorHints/hintsManager/hintsManager","editorHints/presenters/hintPresenter.rt"],function(e,t,n,i,r){function o(e,t,n){var i='[data-hint-id="'+t+(n?"_"+n:"")+'"]';return e.querySelector(i)}return e.createClass({displayName:"hintPresenter",mixins:[n.mixins.editorAPIMixin],getInitialState:function(){return{hintData:null,onHideHint:null,onHintShown:null,preHintContainerDOMNode:null,hintContainerDOMNode:null}},componentDidMount:function(){i.init(this,this.getEditorAPI())},componentWillUnmount:function(){i&&i.onPresenterUnmount&&i.onPresenterUnmount()},presentHint:function(e,t,n,i,r){this.setState({hintData:e,onHintShown:t,onHideHint:n,preHintContainerDOMNode:i,hintContainerDOMNode:r})},getHintTargets:function(){var e=this.state.preHintContainerDOMNode,t=this.state.hintContainerDOMNode,n=this.state.hintData.primaryHintTarget,i=this.state.hintData.preHintTarget;return{preTarget:i&&e?o(e,i):null,innerPreTarget:i&&e?o(e,i,"inner"):null,target:t?o(t,n):null,innerTarget:t?o(t,n,"inner"):null}},hideHint:function(){this.setState({hintData:null,onHideHint:null,onHintShown:null,preHintContainerDOMNode:null,hintContainerDOMNode:null})},render:r})}),define("editorHints",["editorHints/hintsManager/hintsManager","editorHints/hintsManager/hintsNotify","editorHints/presenters/hintPresenter","editorHints/utils/constants","editorHints/configurations/hintsData.json"],function(e,t,n,i,r){return{manager:e,hintsNotify:t,hintPresenter:n,hintsContainers:i.HINTS_CONTAINERS,hintsData:r}});
//# sourceMappingURL=editorHints.min.js.map