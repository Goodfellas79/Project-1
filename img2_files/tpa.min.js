"use strict";define("tpa/constants/constants",[],function(){return{TPA_SETTINGS_PANEL_ID:"tpa.compPanels.tpaSettings",TPA_SETTING_MODAL:"tpa.compModals.tpaSettingsModal",TPA_DEFAULT_HELP_ID:"47f00d3e-78ae-4bd6-9c2f-4ddf0e9c42f4",BI:{initiator:{APP_MARKET:"APPMARKET_EDITOR",EDITOR:"EDITOR",SDK:"SDK"},type:{ADD_APP:"ADD_APP",GFPP_UPGRADE:"GFPP_UPGRADE",GFPP_SETTINGS:"GFPP_SETTINGS",GFPP_MANAGE:"GFPP_MANAGE",APP_UPGRADE_BUTTON:"APP_BUTTON_UPGRADE",APP_MANAGE_BUTTON:"APP_BUTTON_MANAGE",DOUBLECLICK_SETTINGS:"DOUBLECLICK_SETTINGS",OPENAPP_SETTINGS:"OPENAPP_SETTINGS"}}}}),define("tpa/superApps/superAppsConstants",[],function(){var e="1380b703-ce81-ff05-f115-39571d94dfcd",t={};return t["61f33d50-3002-4882-ae86-d319c1a249ab"]="blog_button",t[e]="ecom_button",{getMarketOpenOriginForBi:function(e){return t[e]},ECOM:{APP_DEF_ID:e,PRODUCT_PAGE:"13a94f09-2766-3c40-4a32-8edb5acdd8bc",GRID_GALLERY:"13afb094-84f9-739f-44fd-78d036adb028",SLIDER_GALLERY:"139a41fd-0b1d-975f-6f67-e8cbdf8ccc82",PRODUCT_GALLERY_PAGE:e,SHOPPING_CART:"1380bbab-4da3-36b0-efb4-2e0599971d14",TANK_YOU_PAGE:"1380bbb4-8df0-fd38-a235-88821cf3f8a4",SHOPPING_CART_WIDGET:"1380bbc4-1485-9d44-4616-92e36b1ead6b",PRODUCT_WIDGET:"13ec3e79-e668-cc0c-2d48-e99d53a213dd"},WIXMUSIC:{APP_DEF_ID:"13bb5d67-1add-e770-a71f-001277e17c57",WIDGET:"13bb5dc2-a098-5a74-502b-6bac84e80b23"},WIX_VIDEO:{APP_DEF_ID:"14409595-f076-4753-8303-9a86f9f71469",WIDGET:"144097ea-fea0-498e-ade7-e6de40127106"},BLOG_APP_DEF_ID:"61f33d50-3002-4882-ae86-d319c1a249ab",ECOM_APP_DEF_ID:e,WIXMUSIC_APP_DEF_ID:"13bb5d67-1add-e770-a71f-001277e17c57",HOTELS:{APP_DEF_ID:"135aad86-9125-6074-7346-29dc6a3c9bcf",SEARCH_BAR:"135aae78-42c9-63b5-d09a-77233cebc1c4"},GET_SUBSCRIBERS_APP_DEF_ID:"1375baa8-8eca-5659-ce9d-455b2009250d",WIX_BOOKINGS_APP_DEF_ID:"13d21c63-b5ec-5912-8397-c3a5ddb27a97",WIX_PHOTOALBUMS_APP_DEF_ID:"13ff8629-c1fc-e289-e81f-bc8c8968e9d6",SHOUTOUT_APP_DEF_ID:"135c3d92-0fea-1f9d-2ba5-2a1dfb04297e",PRO_GALLERY_APP_DEF_ID:"14271d6f-ba62-d045-549b-ab972ae1f70e",WIX_CHAT:{APP_DEF_ID:"14517e1a-3ff0-af98-408e-2bd6953c36a2",WIDGET:"14517f3f-ffc5-eced-f592-980aaa0bbb5c"}}}),define("tpa/bi/events.json",[],function(){return{APP_INTENT:{evid:12,src:75,endpoint:"app-sdk",fields:{type:"string",instance_id:"guid",initiator:"string",app_id:"guid"}},APP_ENGAGEMENT:{evid:13,src:75,endpoint:"app-sdk",fields:{instance_id:"guid",app_id:"guid",premium_intent:"string"}},TPA_ADDED:{evid:165,src:38,endpoint:"editor",fields:{is_permissions_app:"number",is_first:"boolean",app_id:"string",app_site_id:"string",instance_id:"string",category:"string",origin:"string",section:"string",search_term:"string",search_result_position:"number",referral_info_category:"string",referral_info:"string",adding_method:"string",template_guid:"string",modal_tab_name:"string",page_id:"string",widget_id:"string"}},TPA_ADD_CLICK:{evid:167,src:38,endpoint:"editor",fields:{adding_method:"string",section:"string",category:"string",origin:"string",app_id:"string",is_first:"boolean",is_permissions_app:"boolean"}},COMPONENT_ADDED_FROM_MARKET:{evid:168,src:38,endpoint:"editor",fields:{referral_info_category:"string",referral_info:"string",app_id:"guid",app_site_id:"guid",instance_id:"guid",search_result_position:"number",search_term:"string",modal_tab_name:"string",adding_method:"string",category:"string",origin:"string",component_id:"string",is_first:"boolean",component_type:"string"}},CLOSE_MARKET_CLICK:{evid:171,src:38,endpoint:"editor",fields:{open_origin:"string",closing_method:"string"}},MARKET_CLOSED:{evid:172,src:38,endpoint:"editor",fields:{open_origin:"string",seconds_opened:"number"}},OPEN_MODAL_CLICK:{evid:173,src:38,endpoint:"editor",fields:{app_id:"string",origin:"string",category:"string",section:"string",component_type:"string"}},MARKET_HELP_CLICK:{evid:174,src:38,endpoint:"editor"},TPA_HELP_CLICK:{evid:175,src:38,endpoint:"editor",fields:{widget_id:"string",help_status:"string",app_id:"string",origin:"string"}},EXTENSION_ADDED:{evid:177,src:38,endpoint:"editor",fields:{page_id:"string",app_site_id:"string",instance_id:"string",widget_id:"string",app_id:"string",preset_id:"string"}},EXTENSION_REMOVED:{evid:178,src:38,endpoint:"editor",fields:{page_id:"string",widget_id:"string",comp_id:"string",instance_id:"string",app_id:"string"}},TPA_OPEN_SETTINGS:{evid:179,src:38,endpoint:"editor",fields:{app_id:"string",app_site_id:"string",instance_id:"string"}},CUT_COMPONENT_OR_TPA:{evid:180,src:38,endpoint:"editor",fields:{component_type:"string",comp_id:"string",instance_id:"string",app_id:"string"}},COPY_COMPONENT_OR_TPA:{evid:181,src:38,endpoint:"editor",fields:{component_type:"string",comp_id:"string",instance_id:"string",app_id:"string"}},PASTE_COMPONENT_OR_TPA:{evid:182,src:38,endpoint:"editor",fields:{component_type:"string",comp_id:"string",instance_id:"string",app_id:"string"}},DUPLICATE_COMPONENT_OR_TPA:{evid:183,src:38,endpoint:"editor",fields:{component_type:"string",comp_id:"string",instance_id:"string",app_id:"string"}},CLICK_UPGRADE_APP:{evid:184,src:38,endpoint:"editor",fields:{pp_origin:"string",app_site_id:"string",app_id:"string"}},PP_OPENED:{evid:185,src:38,endpoint:"editor",fields:{app_id:"string",app_site_id:"string",pp_origin:"string",pp_type:"string"}},CLICK_UPGRADE_IN_PP:{evid:186,src:38,endpoint:"editor",fields:{pp_type:"string",pp_origin:"string",instance_id:"string",app_id:"string"}},CLICK_CYCLE:{evid:187,src:38,endpoint:"editor",fields:{cycle_id:"number",cycle_name:"string",pp_type:"string",pp_origin:"string",instance_id:"string",app_id:"string"}},EXPAND_OFFERING:{evid:188,src:38,endpoint:"editor",fields:{cycle_id:"number",cycle_name:"string",pp_type:"string",pp_origin:"string",instance_id:"string",app_id:"string"}},PERMISSION_MODAL_CLOSED:{evid:189,src:38,endpoint:"editor",fields:{closing_method:"string",app_id:"string"}},TPA_ERROR:{evid:190,src:38,endpoint:"editor",fields:{error_desc:"string",error_type:"string",app_id:"string"}},TPA_CLOSE_SETTINGS:{evid:191,src:38,endpoint:"editor",fields:{seconds_opened:"number",app_id:"string",app_site_id:"string",instance_id:"string"}},TPA_MESSAGE_LOADED:{evid:277,src:38,endpoint:"editor",fields:{app_id:"string",description:"string",type:"string"}},OPEN_DASHBOARD_APP_CLICK:{evid:278,src:38,endpoint:"editor",fields:{app_id:"string",app_site_id:"string",instance_id:"string",origin:"string"}},APP_MARKET_ICON_EXPANDED:{evid:675,src:38,endpoint:"editor"}}}),define("tpa/bi/errors.json",[],function(){return{ECOM_MISSING_PAGES:{errorName:"ECOM_MISSING_PAGES",errorCode:300,severity:"fatal"},APP_IS_NOT_RESPONSIVE:{errorName:"APP_IS_NOT_RESPONSIVE",errorCode:302,desc:"monitoring apps that are down",severity:"error",params:{p1:"endpoint",p2:"app_id"}}}}),define("tpa/bi/bi",["tpa/bi/events.json","tpa/bi/errors.json"],function(e,t){return{events:e,errors:t,registerEvents:function(t){t.documentServices.bi.register("tpa","event",e)}}}),define("tpa/utils/tpaUtils",["lodash","util","panels","tpa/constants/constants","tpa/superApps/superAppsConstants","tpa/bi/bi","experiment"],function(e,t,a,i,n,o,r){function s(){var e=window.location.hostname.match(/editor\.(.*)/);return e?"www."+e[1]:"www.wix.com"}function p(t,a){var i=t.documentServices.tpa.app.getDataByAppDefId(a)||{},n=t.documentServices.generalInfo.isFirstSave();return!i.notProvisioned&&i.instanceId&&(!i.demoMode||r.isOpen("se_tpaProvisionOnAdd"))&&!0!==e.get(i,"permissions.revoked")&&!n}function d(){return!e.isEmpty(t.url.getParameterByName("appDefinitionId"))}function l(e,t){return["//",s(),"/my-account/sites/",e,"/app/",t,"?referralInfo=editor"].join("")}function c(t,a){var i=t.getOpenPanels();return e.find(i,{name:a})}function g(t,a){if(!a)return!1;var i=t.widgets&&t.widgets[a];return e.get(i,"appPage.multiInstanceEnabled")}function m(e){return e===n.BLOG_APP_DEF_ID}function u(t,a){if(e.isUndefined(t)||e.isUndefined(a))return!1;for(var i=e.map(t.split("."),function(e){return parseInt(e,10)}),n=e.map(a.split("."),function(e){return parseInt(e,10)});i.length&&n.length;){var o=i.shift(),r=n.shift();if(o>r)return!0;if(o<r)return!1}return i.length>=n.length}function h(){return window}function y(t,a,i){var n=t.selection.getSelectedComponentData(),o=e.get(n,"applicationId");if(o&&o.toString()===a.applicationId.toString())i&&i();else{var r=t.documentServices.tpa.app.getFirstAppCompPageId(a.appDefinitionId),s=t.documentServices.pages.getFocusedPageId(),p=t.components.get.byId(r.compId,r.pageId);r.pageId!==s&&"masterPage"!==r.pageId?t.pages.navigateTo(r.pageId,function(){t.selection.selectComponentByCompRef(p),i&&i()}):(t.selection.selectComponentByCompRef(p),i&&i())}}function f(t,a,i,n,o){if(e.includes(_,a)){var r=v.bind(null,t,i,n,o),s=p.bind(null,t,i);t.bi.reportBI(a,[r],s)}}function P(t,a,n){var r=t.documentServices.tpa.app.getDataByAppDefId(a);if(e.get(r,"isWixTPA")){var s={msid:t.documentServices.generalInfo.getMetaSiteId(),src:o.events.APP_INTENT.src,evid:o.events.APP_INTENT.evid},p=v(t,a,i.BI.initiator.EDITOR,n);return e.merge(s,p)}return null}function v(e,t,a,i){return{app_id:t,instance_id:(e.documentServices.tpa.app.getDataByAppDefId(t)||{}).instanceId,initiator:a,type:i}}var _=[o.events.APP_INTENT];return{isInDevMode:d,getAppInMyAccountUrl:l,getOpenedPanel:c,isMultiSectionInstanceEnabled:g,isBlog:m,sdkVersionIsAtLeast:u,getWindow:h,selectComponentAndNavigateIfNeeded:y,bi:{reportBIOnAppIntent:f,getAppIntentBiParamsToAddToUrl:P,reportAddComponentBIEvent:function(e,t,a,i){i=i||{},e.bi.event(o.events.COMPONENT_ADDED_FROM_MARKET,{app_id:i.app_id,instance_id:t,component_type:a||"wix_component",origin:"ed_market",category:i.category,search_term:i.search_term,item_position:i.item_position,referral_info_category:i.referral_info_category,referral_info:i.referral_info,adding_method:i.adding_method,modal_tab_name:i.modal_tab_name})},reportTpaAddedBiEvent:function(e,t,a,i,n,r,s,p){var d=e.documentServices.generalInfo.isFirstSave()?e.documentServices.generalInfo.getMetaSiteId():"",l=e.documentServices.tpa.app.getDataByAppDefId(t);p=p||{};var c={is_permissions_app:s?1:0,is_first:r?1:0,app_id:t,widget_id:a,app_site_id:l.instanceId,instance_id:n,origin:"ed_market",adding_method:p.adding_method,category:p.category,section:p.section,search_term:p.search_term,item_position:p.item_position,referral_info_category:p.referral_info_category,referral_info:p.referral_info,template_guid:d,modal_tab_name:p.modal_tab_name,page_id:i};e.bi.event(o.events.TPA_ADDED,c)}}}}),define("tpa/utils/mediaDialogHandlerUtils",["lodash"],function(e){var t={photos:"IMAGE",secure_picture:"IMAGE_PRO",backgrounds:"BG_IMAGE",audio:"MUSIC",documents:"DOCUMENT",secure_music:"MUSIC_PRO",swf:"FLASH",video:"VIDEO",shape:"SHAPE",music:"MUSIC",clipart:"CLIPART",bg_video:"BG_VIDEO",icon_document:"ICON_DOCUMENT",bg_social:"ICON_SOCIAL",bg_favicon:"ICON_FAVICON"};return{convertMediaManagerResult:function(t){var a={};if(a.fileName=t.title||"","secure_music"===t.mediaType){var i=t.fileOutput&&t.fileOutput.audio,n=e.find(i,{tag:"preview-short"});a.shortPreviewFileName=n&&n.url||"",a.previewFileName=t.previewFileName||"",a.fileUrl=t.fileUrl||""}else a.relativeUri=t.fileName||"",a.width=Number(t.width)||0,a.height=Number(t.height)||0;return a},convertMediaManagerResultForSuperApps:function(t){var a=e.cloneDeep(t);return a.relativeUri=t.uri||"",a},convertMediaType:function(e,a){var i=t[e];return a.categories[i]}}}),define("tpa/handlers/editorRefreshTPADataAfterUpgrade",["lodash","jquery"],function(e,t){var a=null,i={},n=function(e,t){var a=e.documentServices.tpa.app.getRenderedReactCompsByApplicationId(t);e.documentServices.tpa.app.refreshApp(a)},o=function(e,t){var a=e.documentServices.generalInfo.getMetaSiteId();t.forEach(function(t){e.documentServices.tpa.provision.refreshAppSpecMap(t,a,function(){p(),e.selection.deselectComponents(),e.panelManager.closePanelByName("tpa.compPanels.tpaSettings"),n(e,t)})})},r=function(t,a){var n=t.documentServices.generalInfo.getMetaSiteId();t.documentServices.tpa.billing.getPremiumApps(n,function(t){if(!e.isEmpty(t)){var n,o,r=[];if(e.isArray(t)){t=e.keyBy(t,"appDefinitionId");for(n in i)e.isObject(t[i[n].appDefinitionId])&&(o=t[i[n].appDefinitionId],i[n].vendorProductId===o.vendorProductId&&i[n].upgradedToYearly===function(){return o&&o.cycle&&6===o.cycle}()||(delete i[n],r.push(n)))}a(r)}})},s=function(e){a||(a=function(){r(e,function(t){o(e,t)})},t(window).on("focus",a))},p=function(){a&&(t(window).off("focus",a),a=null)},d=function(){p();for(var e in i)i.hasOwnProperty(e)&&delete i[e]};return{trackAppUpgrade:function(e,t){var a=e.documentServices.tpa.app.getData(t);i[t]={appDefinitionId:a.appDefinitionId,vendorProductId:a.vendorProductId,upgradedToYearly:!0===a.upgradedToYearly},s(e)},trackedApps:i,resetListeners:d}}),define("tpa/services/tpaAlertsService",["lodash","tpa/bi/bi"],function(e,t){function a(e,a){e("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_dashboard_before_save_error_title",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_dashboard_before_save_error_step_3"],helpMessage:"tpa_messages_dashboard_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:t.events.TPA_MESSAGE_LOADED,biParams:{app_id:a,description:"provision failed",type:"provision_failed"}},!0)}function i(e){e.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_dashboard_before_save_error_title",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_dashboard_before_save_error_step_3"],helpMessage:"tpa_messages_dashboard_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:t.events.TPA_MESSAGE_LOADED,biParams:{description:"save for app market failed",type:"save_for_app_market_failed"}},!0)}function n(e,a){e.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_upgrade_before_save_error_title",description:"tpa_messages_upgrade_before_save_error_description",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_upgrade_before_save_error_step_3"],helpMessage:"tpa_messages_upgrade_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:t.events.TPA_MESSAGE_LOADED,biParams:{app_id:a,description:"Error on upgrade TPA from template site",type:"upgrade_save_error"}},!0)}function o(e){e.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"PUBLISH_ERROR_TITLE_LABEL",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["SAVE_PUBLISH_ERROR_OPTION_1","SAVE_PUBLISH_ERROR_OPTION_2"],helpMessage:"SAVE_ERROR_LEARN_MORE_LABEL",helpLinkMessage:"SAVE_PUBLISH_ERROR_LEARN_MORE_LINK",helpLink:""})}return{openProvisionFailedAlert:a,openSaveFailedAlertForAppMarket:i,openSaveFailedAlertForUpgrade:n,openSaveFailedAlertForDashboardUrl:function(e,a){e.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_dashboard_before_save_error_title",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_dashboard_before_save_error_step_3"],helpMessage:"tpa_messages_dashboard_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:t.events.TPA_MESSAGE_LOADED,biParams:{app_id:a,description:"Error on open dashboard from template site",type:"dashboard_save_error"}},!0)},openSaveFailedAlertForTemplateDashboardUrl:function(e,a){e.panelManager.openPanel("savePublish.panels.common.failPanel",{titleKey:"tpa_messages_dashboard_before_save_error_title",description:"SAVE_PUBLISH_ERROR_BODY_DESCRIPTION",steps:["tpa_messages_upgrade_before_save_error_step_1","tpa_messages_upgrade_before_save_error_step_2","tpa_messages_dashboard_before_save_error_step_3"],helpMessage:"tpa_messages_dashboard_before_save_error_support",helpLinkMessage:"tpa_messages_upgrade_before_save_error_support_link",helpLink:"",biEvent:t.events.TPA_MESSAGE_LOADED,biParams:{app_id:a,description:"Error on open dashboard from template site",type:"dashboard_save_error"}},!0)},openSaveFailedAlertForPackageBuying:o}}),define("tpa/packagePicker/packagePickerUtils",["lodash","jquery","tpa/handlers/editorRefreshTPADataAfterUpgrade","tpa/bi/bi","tpa/services/tpaAlertsService"],function(e,t,a,i,n){var o={BENEFITS:"tpaPanels.packagePicker.benefitsModal",CYCLES:"tpaPanels.packagePicker.cyclesModal",EXTERNAL:"tpaPanels.packagePicker.externalBenefitsModal",PACKAGES:"tpaPanels.packagePicker.packagePickerModal"},r=function(e,t,a,i,n,o){var r=e.selection.getSelectedComponentData(),s="tpa_"+n+"_ed_14";return e.documentServices.tpa.billing.getAppUpgradeUrl(r.applicationId,t,a,{referralAdditionalInfo:s,pp_type:i,premiumIntent:o})};return{upgradeToPremiumAndClosePickerModal:function(t,i,o,s,p,d,l){if(!t.documentServices.generalInfo.isFirstSave()){var c=r(t,i,o,s,p,l);window.open(c);var g=t.selection.getSelectedComponentData();a.trackAppUpgrade(t,g.applicationId)}else n.openSaveFailedAlertForPackageBuying(t);e.isFunction(d)&&d()},pickPickerForm:function(t,a,i,n){n=n||{};var r=e.assign(e.pick(a,["name","appIcon","colorSvgIcon","packages","features","price","upgradeBenefits","upgradeTitle","upgradedToYearly","appDefinitionId"]),e.pick(i,"vendorProductId"));if(r.packages=e.reject(a.packages,{id:"oneTime"}),e.get(i,"openPremiumPage")){r.panelName=o.EXTERNAL;var s={appDefId:i.appDefinitionId,referralAdditionalInfo:n.origin};return n.premiumIntent&&(s.premiumIntent=n.premiumIntent),r.upgradeUrl=t.documentServices.tpa.billing.getSiteUpgradeUrl(s),r}return"benefits"===a.billingPanelType?(r.panelName=o.BENEFITS,r):"cycles"===a.billingPanelType?(r.panelName=o.CYCLES,r):(r.panelName=o.PACKAGES,r)},sendBI:function(e,t,a){var n=e.selection.getSelectedComponentData(),o=e.documentServices.tpa.app.getData(n.applicationId),r={pp_type:t,pp_origin:a,app_site_id:o.instanceId,app_id:o.appDefinitionId};e.bi.event(i.events.CLICK_UPGRADE_IN_PP,r)},TYPE:o,BI_TYPE:{BENEFITS:"offering",CYCLES:"cycle",PACKAGES:"package",EXTERNAL:"external"}}}),define("tpa/packagePicker/packagePicker",["lodash","tpa/packagePicker/packagePickerUtils","tpa/handlers/editorRefreshTPADataAfterUpgrade","tpa/bi/bi","tpa/utils/tpaUtils","tpa/services/tpaAlertsService","experiment"],function(e,t,a,i,n,o,r){function s(e,t){var a=e.documentServices.tpa.app.getDataByAppDefId(t);return n.selectComponentAndNavigateIfNeeded(e,a),a}var p=function(t,a,i,n){var p=i||!1;n=e.assign({isAsyncFlow:p},n);var c=t.documentServices.tpa.appMarket.getData(a),g=s(t,a);r.isOpen("se_tpaProvisionOnAdd")?f(t,g)?d(t,n,a,c,g):l(t,a,c,g,n):g&&g.demoMode?t.documentServices.tpa.provision.provisionAppDemoSave(g.applicationId,function(){d(t,n,a,c,g)},function(){o.openProvisionFailedAlert(t.panelManager.openPanel,a)}):f(t,g)?d(t,n,a,c,g):l(t,a,c,g,n)},d=function(t,a,i,n,r){var s=function(){t.documentServices.tpa.appMarket.getDataAsync(i).then(function(e){a.isAsyncFlow=!0,l(t,i,e,r,a)})},p=e.partial(o.openSaveFailedAlertForUpgrade,t,i);t.saveManager.saveInBackground(s,p)},l=function(e,t,a,i,n){c(a)?e.documentServices.tpa.appMarket.getDataAsync(t).then(function(t){g(e,t,i,n)}):g(e,a,i,n)},c=function(t){return e.isUndefined(t)||t&&e.isUndefined(t.price)},g=function(i,n,o,r){var s=t.pickPickerForm(i,n,o,r),p=s.upgradeUrl;s.panelName!==t.TYPE.EXTERNAL||r.isAsyncFlow?i.panelManager.openPanel(s.panelName,e.assign(s,r),!0):(window.open(p),a.trackAppUpgrade(i,o.applicationId))},m=function(t,a){return e.last(t.packages).id===a.vendorProductId},u=function(t){return!e.last(t.packages).yearly.price},h=function(e,a,i){e.documentServices.tpa.appMarket.getDataAsync(a).then(function(n){var o=s(e,a),r=t.pickPickerForm(e,n,o);i(r.upgradeUrl)})},y=function(e,t,a){var i=s(e,t);f(e,i)?e.saveManager.saveInBackground(function(){h(e,t,a)}):h(e,t,a)},f=function(t,a){return r.isOpen("se_tpaProvisionOnAdd")?e.get(a,"notProvisioned"):!!t.documentServices.generalInfo.isFirstSave()||a&&(!t.documentServices.tpa.app.isAppProvisionedOnServer(a.applicationId)||t.documentServices.tpa.app.isPermissionsRevoked(a))};return{startUpgradeFlow:p,isFullyUpgraded:function(e,a){var i=e.documentServices.tpa.appMarket.getData(a.appDefinitionId);if(i){var n=t.pickPickerForm(e,i,a),o=!!a.vendorProductId,r=!!i.upgradedToYearly;switch(n.panelName){case t.TYPE.BENEFITS:return o;case t.TYPE.CYCLES:return o&&r;case t.TYPE.PACKAGES:var s=o&&m(n,a);return s=s&&(r||u(n));case t.TYPE.EXTERNAL:return o;default:return!1}}return!0},getWixUpgradeUrl:y,isSaveSiteNeeded:f,upgradeToPremiumAndClosePickerModal:t.upgradeToPremiumAndClosePickerModal,sendBI:t.sendBI,BI_TYPE:t.BI_TYPE}}),define("tpa/services/dashboardAppService",["util","tpa/utils/tpaUtils","tpa/services/tpaAlertsService"],function(e,t,a){var i=function(e){var t=e.selection.getSelectedComponentData();return e.documentServices.tpa.app.isHybrid(t.applicationId)},n=function(e){return!e.documentServices.generalInfo.isFirstSave()},o=function(e){var t=e.selection.getSelectedComponentData();return e.documentServices.tpa.app.getData(t.applicationId)};return{getDashboardAppUrl:function(e){var a=i(e),r=n(e),s=o(e);return a&&r?t.getAppInMyAccountUrl(e.documentServices.generalInfo.getMetaSiteId(),s.appDefinitionId):null},getDashboardAppUrlAsync:function(e,r){var s=o(e),p=i(e),d=n(e),l=e.documentServices.tpa.app.isAppProvisionedOnServer(s.applicationId);if(p&&d&&l){var c=t.getAppInMyAccountUrl(e.documentServices.generalInfo.getMetaSiteId(),s.appDefinitionId);r(c)}else if(d&&l)r(null);else{var g=function(){var a=t.getAppInMyAccountUrl(e.documentServices.generalInfo.getMetaSiteId(),s.appDefinitionId);r(a)},m=function(){a.openSaveFailedAlertForTemplateDashboardUrl(e,s.appDefinitionId),r(null)};e.saveManager.saveInBackground(g,m)}},getEditorGfppData:function(t){var a=t.selection.getSelectedComponentData();if(a){var i=t.documentServices.tpa.app.getData(a.applicationId),n=t.documentServices.tpa.appMarket.getData(i.appDefinitionId);if(n&&n.editorGfpp)return n.editorGfpp}return{upgradeText:e.translate("tpa_package_picker_upgrade_title"),openInDashboardText:e.translate("tpa_open_dashboard")}}}}),define("tpa/services/tpaAddRemoveDSService",["lodash","util","core","tpa/utils/tpaUtils","tpa/services/tpaAlertsService","experiment"],function(e,t,a,i,n,o){var r=[],s=function(e,t,a){a.onError=function(){n.openProvisionFailedAlert(e.panelManager.openPanel,t)};var i=e.documentServices.tpa.widget.add(t,a);return e.documentServices.waitForChangesApplied(function(){i&&e.components.is.exist(i)&&e.selection.selectComponentByCompRef(i),c(e,t)}),e.history.add("adding a tpa widget to stage"),g(e),i},p=function(t,a,i){if(!e.includes(r,a)){r.push(a);var o=(i=i||{}).callback||null;i.callback=function(t){r=e.without(r,a),o&&o(t)};var s=function(){r=e.without(r,a),n.openProvisionFailedAlert(t.panelManager.openPanel,a)},p=t.documentServices.tpa.section.add(a,i,s);return t.documentServices.waitForChangesApplied(function(){c(t,a)}),t.history.add("adding a tpa section to stage"),g(t),p}return{id:t.documentServices.pages.getFocusedPageId()}},d=function(e,t,a){var i=e.documentServices.tpa.section.addMultiSection(t,a);return e.documentServices.waitForChangesApplied(function(){c(e,t)}),e.history.add("adding multi section"),g(e),i},l=function(e,t,a){var i=e.documentServices.tpa.section.addSubSection(t,a);return e.history.add("adding sub section"),g(e),i},c=function(t,a){o.isOpen("se_tpaProvisionOnAdd")&&t.saveManager.saveInBackground(e.noop,function(){n.openProvisionFailedAlert(t.panelManager.openPanel,a)})},g=function(e){o.isOpen("dontCloseAddPanelOnAdd")||e.panelManager.closePanelByName("addPanelInfra.addPanel")};return{addWidget:s,addSection:p,addSubSection:l,addMultiSection:d,deleteWidget:function(e,t){e.documentServices.tpa.widget.delete(t),e.panelManager.closePanelByName("tpa.compPanels.tpaSettings")},deleteSection:function(e,a,i){e.documentServices.tpa.section.delete(a),e.bi.reportBI(t.bi.events.COMPONENT_REMOVED,i),e.components.reset()}}}),define("tpa/services/tpaStyleService",["lodash"],function(e){var t=null,a={},i=function(i){if(a[t]){var n=[],r=[],s=t;e.forEach(a[s],function(e){n.push(e.data),r.push(e.callback)}),delete a[s],t=null,o(i,s,n,r)}else t=null},n=function(t,a){e.isArray(t)?e.forEach(t,function(e){e&&e(a)}):t&&t(a)},o=function(e,o,r,s){if(t===o)return a[o]||(a[o]=[]),void a[o].push({data:r,callback:s});e.documentServices.tpa.style.setStyleParam(o,r,function(e){n(s,e)}),e.documentServices.waitForChangesApplied(i.bind(null,e)),t=o};return{setStyleParam:o}}),define("tpa/appMarket/utils/appMarketUtils",["lodash","util","helpIds","tpa/bi/bi","coreUtilsLib","stateManagement"],function(e,t,a,i,n,o){var r=o.panels.logic,s=function(){var e=t.url.parseUrlParams(window.location.search);return(e=e&&e.amexperiment)||""},p=function(){var a=["openAppDefId","appDefinitionId"],i={};return e.forEach(a,function(e){i[e]=t.url.getParameterByName(e)}),i.tests=s(),i},d=function(t,a,i){var n="tpa.compModals."+a;i.width=l(i.width),i.height=l(i.height);var o=e.pick(i,["title","width","height","closeModalBiEvent","closeModalBiParams","id"]);o.panelName=n,o.iframeUrl=i.url,o.shouldTranslate=i.shouldTranslateTitle,t(n,o,!0)},l=function(e){return"number"==typeof e&&(e=e.toString()),e},c=function(t,a){var i=t.panelManager.getOpenPanels();return e.find(i,{props:{id:a}})};return{openAppMarketModal:d,openAppMarketModalWithAppDefinitionId:function(e,t,a){var i="tpa.compModals."+t;e(i,{panelName:i,iframeUrl:a.url,appDefinitionId:a.appDefinitionId,onClose:a.onClose},!0)},closeAppMarketModal:function(e,t){e("tpa.compModals."+t)},closeAppMarketModalById:function(e,t){var a=c(e,t);a&&(e.store.dispatch(r.closePanelByPropKey("id",a.props.id)),a.props.closeModalBiEvent&&e.bi.event(a.props.closeModalBiEvent,a.props.closeModalBiParams))},closeAppMarket:function(e){e("tpa.compPanels.appMarketPanel")},openAppMarketHelp:function(e){var t={learn_more:!1,origin:"panel",panel_name:"tpa.compPanels.appMarketPanel"};e.panelManager.openHelpCenter(a.EXTERNAL.APP_MARKET,null,t),e.bi.event(i.events.MARKET_HELP_CLICK)},shouldOpenAppMarketTab:function(){return 0===t.url.getParameterByName("openpanel").indexOf("market")},getAppMarketUrlParams:p,getAppMarketOpenPanelUrlParams:function(){var a=t.url.getParameterByName("openpanel"),i={};if(!e.isEmpty(a)){var n=a.split(":"),o=p();switch(n.length){case 1:i.appDefinitionId=o.appDefinitionId,i.openAppDefId=o.openAppDefId;break;case 2:i.query=n[1];break;case 3:"Cat"===n[1]?i.categorySlug=n[2]:"appDefId"===n[1]&&(i.openAppDefId=n[2]);break;default:i.query=""}}return i},getAppMarketPersistedUserPrefs:function(e){return e.getUserPreferences().site.get("app-market")||{}},setAppMarketPersistedUserPrefs:function(e,t){return e.getUserPreferences().site.set("app-market",t)||!1},getAppMarketSessionUserPrefs:function(e){return e.getUserPreferences().session.get("app-market")||{}},setAppMarketSessionUserPrefs:function(e,t){return e.getUserPreferences().session.set("app-market",t)||!1},origin:function(){return n.urlUtils.origin()}}}),define("tpa/services/tpaHelpService",["lodash","bluebird"],function(e,t){var a={SETTINGS_MODAL:"settings_modal",SETTINGS:"settings",WIDGET:"widget"};return{getHelpId:function(i,n,o,r){return new t(function(t,s){var p="";e.isEmpty(n)?s(p):i.documentServices.tpa.appMarket.getDataAsync(n).then(function(n){var s=e.find(n.widgets,{widgetId:o}),d=e.get(s,"settings.helpId","");r===a.SETTINGS_MODAL?p=e.get(n,"dashboard.helpId",d):o&&(p=r===a.SETTINGS?d:i.isMobileEditor()?e.get(s,"mobileHelpId",""):e.get(s,"helpId","")),t(p)},s)})},HELP_END_POINTS:a}}),define("tpa/services/mediaDialogService",["lodash","tpa/utils/mediaDialogHandlerUtils"],function(e,t){return{openMediaDialogByPayloadParsingMethod:function(a,i,n,o){var r=a.mediaServices.mediaManager,s=t.convertMediaType(i.data.mediaType,r),p=i.data.callOnCancel,d={multiSelect:i.data.multiSelection,callback:function(t){var a;!e.isEmpty(t)?a=n(t):p&&(a={wasCancelled:!0}),a&&o(a)}},l=e.get(i,["data","options","imageAnalysis"]);l&&(d.imageAnalysis=l),r.open(s,d)}}}),define("tpa/services/tpaAddComponentService",["lodash","tpa/services/tpaAddRemoveDSService","tpa/utils/tpaUtils","tpa/bi/bi"],function(e,t,a,i){var n=function(t,a,i){if(i=e.isFunction(i)?i:e.noop,t.selection.getSelectedComponentData())switch(a.data.componentType){case"WIDGET":l(t,a,i);break;case"PAGE":o(t,a,i);break;default:i({onError:"componentType not supported."})}else i({onError:"General Error."})},o=function(t,a,i){var n=t.selection.getSelectedComponentData(),o=t.documentServices.tpa.app.getData(n.applicationId),p=m(t,e.get(a,"data.copyStyle"),e.get(a,"data.styleId"),e.get(a,"compId")),d=t.documentServices.tpa.app.getWidgetDataFromTPAPageId(e.get(o,"appDefinitionId"),a.data.page.pageId),l=r(t,o,d,i);if(l){var c=l(t,o.appDefinitionId,{pageId:a.data.page.pageId,title:a.data.page.title,styleId:p});s(t,c,d,a,i),g(t,o,c,d.widgetId)}},r=function(e,i,n,o){return n?a.isMultiSectionInstanceEnabled(i,n.widgetId)?t.addMultiSection:p(e,i,n)?(o({onError:"Page already installed."}),null):t.addSubSection:(o({onError:"No page found."}),null)},s=function(t,a,i,n,o){!1!==e.get(n,"data.page.shouldNavigate",null)?t.pages.navigateTo(a.id,function(){o(a.sectionId),t.panelManager.closePanelByName("tpa.compPanels.tpaSettings")}):t.documentServices.waitForChangesApplied(function(){o(a.sectionId)})},p=function(t,a,i){var n=e.get(i,"appPage.id");return t.documentServices.tpa.section.isSectionInstalledByTpaPageId(a.applicationId,n)},d=function(t,a){return e.includes(t.documentServices.pages.getPageIdList(),a)},l=function(a,i,n){var o=a.selection.getSelectedComponentData(),r=a.documentServices.tpa.app.getData(o.applicationId),s=m(a,e.get(i,"data.copyStyle"),e.get(i,"data.styleId"),e.get(i,"compId")),p=a.documentServices.pages.getFocusedPageId(),l=i.data.widget.wixPageId||p;if(d(a,l)||i.data.widget.allPages){var g=a.documentServices.tpa.app.getWidgetDataFromTPAWidgetId(r.appDefinitionId,i.data.widget.tpaWidgetId);if(g){var u=g.widgetId,h=t.addWidget(a,r.appDefinitionId,{pageId:l,widgetId:u,showOnAllPages:i.data.widget.allPages,styleId:s});l!==p&&a.pages.navigateTo(l,function(){a.panelManager.closePanelByName("tpa.compPanels.tpaSettings")}),a.documentServices.waitForChangesApplied(function(){n(h.id),c(a,r,h,u)})}else n({onError:"No widget found."})}else n({onError:"pageId was not found."})},c=function(e,t,a,n){var o=e.components.getPage(a),r=o&&o.id,s={app_id:t.appDefinitionId,app_site_id:t.instanceId,instance_id:a.id,widget_id:n,page_id:r};e.bi.event(i.events.EXTENSION_ADDED,s)},g=function(e,t,a,n){var o={app_id:t.appDefinitionId,app_site_id:t.instanceId,instance_id:a.sectionId,widget_id:n,page_id:a.id};e.bi.event(i.events.EXTENSION_ADDED,o)},m=function(t,a,i,n){var o;if(a)if(i)e.includes(t.theme.styles.getAllIds(),i)&&(o=i);else{var r=t.components.get.byId(n);o=t.components.style.getId(r)}return o};return{addComponent:n}}),define("tpa/handlers/editorSuperAppsHandlers",["lodash","tpa/packagePicker/packagePicker","tpa/utils/mediaDialogHandlerUtils","tpa/handlers/editorRefreshTPADataAfterUpgrade","tpa/services/mediaDialogService"],function(e,t,a,i,n){return{trackAppUpgrade:function(e){var t=e.selection.getSelectedComponentData();i.trackAppUpgrade(e,t.applicationId)},superAppsOpenMediaDialog:function(t,i,o){var r=function(t){e.isArray(t)||(t=[t]);var n=t.map(a.convertMediaManagerResultForSuperApps);return n=i.data.multiSelection?n:n[0]};n.openMediaDialogByPayloadParsingMethod(t,i,r,o)},getWixUpgradeUrl:function(e,a,i){var n=e.selection.getSelectedComponentData(),o=e.documentServices.tpa.app.getData(n.applicationId);e.documentServices.tpa.app.hasPremiumOffering(o.applicationId)&&t.getWixUpgradeUrl(e,o.appDefinitionId,i)},setHelpArticle:function(t,a){var i=e.get(a,"data.articleId");"MODAL"===e.get(a,"data.type")?t.panelManager.updatePanelProps("tpa.compModals.tpaSettingsModal",{articleId:i}):t.panelManager.updatePanelProps("tpa.compPanels.tpaSettings",{articleId:i})}}}),define("tpa/handlers/editorTPAHandlers",["lodash","util","tpa/utils/mediaDialogHandlerUtils","tpa/utils/tpaUtils","tpa/packagePicker/packagePicker","tpa/constants/constants","tpa/services/dashboardAppService","tpa/bi/bi","tpa/services/tpaAddRemoveDSService","tpa/services/tpaStyleService","tpa/appMarket/utils/appMarketUtils","textControls","tpa/services/tpaHelpService","tpa/services/mediaDialogService","tpa/services/tpaAddComponentService","tpa/handlers/editorSuperAppsHandlers","experiment"],function(e,t,a,i,n,o,r,s,p,d,l,c,g,m,u,h,y){function f(e,t){var a=i.getOpenedPanel(e.panelManager,t);a&&e.panelManager.closePanelByName(a.props.panelName)}function P(e){if(e){var t=v(e.left),a=v(e.right);return t&&a?{left:t||{},right:a||{}}:null}return{}}function v(t){return e.isNaN(e.toNumber(t))?e.endsWith(t,"px")?{px:parseFloat(t)}:e.endsWith(t,"vw")?{vw:parseFloat(t)}:e.endsWith(t,"%")?{pct:parseFloat(t)}:null:{px:e.toNumber(t)}}function _(t,a,i,n){var o=e.get(a,"left")||{},r=e.get(a,"right")||{},s={left:I(o),right:I(r)};t.components.layout.setDock(i,s),t.documentServices.waitForChangesApplied(n)}function I(t){return e.isNumber(t.pct)?{pct:t.pct}:{vw:t.vw||0,px:t.px||0}}function S(e,t,a){var i=e.selection.getSelectedComponentData(),n=e.documentServices.tpa.app.getDefaultLayout(i.applicationId,i.widgetId);n.height=e.components.layout.get(t).height,e.components.layout.unDock(t),e.documentServices.waitForChangesApplied(function(){e.components.layout.update(t,n),a()})}var A=function(t,a,i){t.panelManager.updatePanelProps("tpa.compPanels.tpaSettings",{isAlive:!0,sdkVersion:e.get(a,"data.version")});var n=t.documentServices.tpa.style.get(a.compId,!0);n.siteTextPresets=w(n.siteTextPresets),i(n)},w=function(a){var i=e.keyBy(c.constants.DEFAULT_STYLES_MAP,"cssClass");return e.transform(a,function(e,a,n){i[a.editorKey]&&(a.displayName=t.translate(i[a.editorKey].displayName),e[n]=a)},{})},D=function(e){return"number"==typeof e&&(e=e.toString()+"px"),e},b=function(t,a){return y.isOpen("se_tpaProvisionOnAdd")?a&&!t.documentServices.tpa.app.isPermissionsRevoked(a):a&&t.documentServices.tpa.app.isAppProvisionedOnServer(e.get(a,"applicationId"))&&!t.documentServices.tpa.app.isPermissionsRevoked(a)},T=function(t,a,i,n){var o=t.documentServices.tpa.app.getDataByAppDefId(a);b(t,o)?t.documentServices.tpa.appMarket.getPackages(a,e.get(o,"instanceId"),{currency:i}).then(n,n):n({error:"app is not installed"})},E=function(e){switch(e.toLowerCase()){case"all":return[o.TPA_SETTINGS_PANEL_ID,o.TPA_SETTING_MODAL];case"settings":return[o.TPA_SETTINGS_PANEL_ID];case"modal":default:return[o.TPA_SETTING_MODAL]}},C=function(){};return{closeWindow:function(t,a){var i=t.panelManager.getOpenPanels(),n=e.get(a.data,["message","target"],""),o=E(n);(o=e.reject(o,function(t){return!e.find(i,{name:t})})).forEach(function(e){t.panelManager.updatePanelProps(e,{shouldCloseModal:!0,closeModalMessage:a.data.message})})},openBillingPage:function(t,a){var i=t.selection.getSelectedComponentData();if(i){var o=t.documentServices.tpa.app.getData(i.applicationId);if(!n.isFullyUpgraded(t,o)){var r={origin:e.get(a,"data.referrer")||"settings"},s=e.get(a,"data.premiumIntent");s&&(r.premiumIntent=s),n.startUpgradeFlow(t,o.appDefinitionId,!0,r)}}},appEngaged:function(t,a){var i=t.selection.getSelectedComponentData();if(i){var n=t.documentServices.tpa.app.getData(i.applicationId),o={app_id:n.appDefinitionId,instance_id:n.instanceId,premium_intent:e.get(a,"data.premiumIntent")};t.bi.event(s.events.APP_ENGAGEMENT,o)}},postMessage:function(e,t){var a=e.selection.getSelectedComponentData();a&&e.documentServices.tpa.change.trigger.settingsUpdated(a.applicationId,t.data.compId,t.data.message)},openMediaDialog:function(t,i,n){if(t.documentServices.tpa.app.isSuperAppByCompId(i.compId)&&"SuperApps.Settings"===i.namespace)h.superAppsOpenMediaDialog(t,i,n);else{e.unset(i,["data","options","imageAnalysis"]);var o=function(t){e.isArray(t)||(t=[t]);var n=t.map(a.convertMediaManagerResult);return n=i.data.multiSelection?n:n[0]};m.openMediaDialogByPayloadParsingMethod(t,i,o,n)}},openSiteMembersSettingsDialog:function(e){e.panelManager.openPanel("panels.focusPanels.siteMembersSettingsPanel",{},!0)},setStyleParam:function(e,t,a){d.setStyleParam(e,t.compId,t.data,a),e.documentServices.tpa.style.setParamOldSDK(t.compId,t.data)},appIsAlive:A,stylesReady:function(t,a){t.panelManager.updatePanelProps("tpa.compPanels.tpaSettings",{stylesReady:!0,sdkVersion:e.get(a,"data.version")})},getDashboardAppUrl:function(e,t,a){r.getDashboardAppUrlAsync(e,a)},getCurrentPageId:function(e,t,a){a(e.pages.getCurrentPageId())},setWindowPlacement:function(t,a){var i=a.data.placement;if("CENTER"===i)throw new Error("Invalid position: "+i+". please use a valid position");var n=a.data.verticalMargin||0,o=a.data.horizontalMargin||0,r=t.components.get.byId(a.compId,"masterPage"),s=t.components.properties.get(r);e.assign(s,{placement:i,verticalMargin:n,horizontalMargin:o}),t.components.properties.update(r,s),t.documentServices.tpa.change.trigger.windowPlacement(a)},getWindowPlacement:function(e,t,a){var i=e.components.properties.get(e.selection.getSelectedComponents());if(!i)throw new Error("Selected widget is not Glued Widget");a({placement:i.placement,verticalMargin:parseFloat(i.verticalMargin),horizontalMargin:parseFloat(i.horizontalMargin)})},settingsOpenModal:function(t,a,i){var n,r,s=o.TPA_SETTING_MODAL,p=e.get(a,"data.appDefinitionId");p?n=t.documentServices.tpa.app.getDataByAppDefId(p):(r=t.selection.getSelectedComponentData(),n=t.documentServices.tpa.app.getData(r.applicationId));var d={url:a.data.url,deviceType:a.deviceType,applicationId:n.applicationId,origCompId:t.selection.getSelectedComponentId(),bi:a.data.bi},l=e.clone(a.data);l.width=D(l.width),l.height=D(l.height),l.onClose=i,f(t,s),n.isWixTPA?(l.isBareMode&&delete l.title,l.shouldNotCloseOnBlur=l.shouldNotCloseOnBlur||e.get(l,"options.shouldNotCloseOnBlur",!1)):(l.isBareMode=!1,l.shouldNotCloseOnBlur=!1);var c=t.documentServices.tpa.getSettingsModalParams(d,l)||{},m=e.get(r,"widgetId")||e.get(t.documentServices.tpa.app.getMainSectionWidgetData(n),"widgetId");g.getHelpId(t,n.appDefinitionId,m,g.HELP_END_POINTS.SETTINGS_MODAL).then(function(e){c.appDefinitionId=n.appDefinitionId,c.helpId=e,c.widgetId=m,t.panelManager.openPanel(s,c,!0)})},addComponent:function(e,t,a){u.addComponent(e,t,a)},setExternalId:function(e,t,a){var i=e.components.get.byId(t.compId);e.documentServices.tpa.comp.setExternalId(i,t.data.externalId,a)},getExternalId:function(e,t,a){var i=e.components.get.byId(t.compId);a(e.documentServices.tpa.comp.getExternalId(i))},setFullWidth:function(t,a,i){var n=a.data.stretch,o=t.selection.getSelectedComponents(),r=t.components.layout.isHorizontallyStretchedToScreen(o);if(n){var s=P(e.get(a,"data.margins"));s?_(t,s,o,i):i({onError:"Margin values are not valid."})}else r&&t.documentServices.waitForChangesApplied(function(){S(t,o,i)})},isFullWidth:function(e,t,a){var i=e.selection.getSelectedComponents();a(e.components.layout.isHorizontallyStretchedToScreen(i))},openReviewInfo:function(e){var t=e.selection.getSelectedComponentData(),a=e.documentServices.tpa.app.getData(t.applicationId);e.documentServices.tpa.appMarket.getDataAsync(a.appDefinitionId).then(function(t){if(t){var a={origin:l.origin(),openMarketOrigin:"settings_panel"},i=e.documentServices.tpa.appMarket.getAppReviewsUrl(a,t.slug);l.openAppMarketModal(e.panelManager.openPanel,"appMarketAppModal",{url:i})}})},getProducts:function(t,a,i){var o=t.selection.getSelectedComponentData(),r=t.documentServices.tpa.app.getData(e.get(o,"applicationId")),s=e.get(a,"data.appDefinitionId"),p=e.get(a,"data.currency");s&&r.isWixTPA?T(t,s,p,i):!y.isOpen("se_tpaProvisionOnAdd")&&n.isSaveSiteNeeded(t,r)?t.saveManager.saveInBackground(function(){t.documentServices.tpa.appMarket.getPackages(e.get(r,"appDefinitionId"),e.get(r,"instanceId"),{currency:p}).then(i,i)}):t.documentServices.tpa.appMarket.getPackages(e.get(r,"appDefinitionId"),e.get(r,"instanceId"),{currency:p}).then(i,i)},isComponentInstalled:function(t,a,i){var n=e.get(a,"data.componentId"),o=t.selection.getSelectedComponentData();if(o){var r=t.documentServices.tpa.app.getData(o.applicationId);if(r){var s=e.find(r.widgets,function(e){return e.appPage?e.appPage.id===n:e.tpaWidgetId===n});if(s)return void i(t.documentServices.tpa.comp.isInstalled(s.widgetId))}}i(!1)},openLinkPanel:function(t,a,i){t.openLinkPanel({link:e.get(a,"data.link"),hideExternalLinkTarget:!0,callback:i,onCancelCallback:function(){i&&i({onCancel:!0})}})},getViewModeInternal:C,toWixDate:C,getCompId:C,getOrigCompId:C,getWidth:C,getLocale:C,getCacheKiller:C,getTarget:C,getInstanceId:C,getSignDate:C,getUid:C,getPermissions:C,getIpAndPort:C,getDemoMode:C,getDeviceType:C,getInstanceValue:C,getSiteOwnerId:C,getImageUrl:C,getResizedImageUrl:C,getAudioUrl:C,getDocumentUrl:C,getSwfUrl:C,getPreviewSecureMusicUrl:C,getStyleParams:C,getStyleColorByKey:C,getColorByreference:C,getEditorFonts:C,getSiteTextPresets:C,getFontsSpriteUrl:C,getStyleFontByKey:C,getStyleFontByReference:C,getSiteColors:C,setUILIBParamValue:C}}),define("tpa/handlers/editorSettingsModalHandlersService",[],function(){function e(e){return{resizeWindow:function(t,a,i){e.panelManager.updatePanelProps(i.name,{width:t.data.width,height:t.data.height})}}}return e}),define("tpa/settings/uiLib/fontPickerStyleService",["lodash","textControls","tpa/services/tpaStyleService"],function(e,t,a){var i=function(e,t,i,n,o,s,p){var d={key:i,param:{value:r(e,t,i,o,s,p)},type:"font"};a.setStyleParam(e,t,d),e.documentServices.waitForChangesApplied(function(){var a=e.documentServices.tpa.style.get(t);n({fontParam:a.style.fonts[d.key]})})},n=function(t,a,i,n,r,s){a=e.isPlainObject(a)?a:{},"theme"===n?e.assign(a,o(t,r,s)):e.includes(["bold","italic","underline"],n)?e.set(a,["style",n],r):a[n]=r,s?a.displayName=s:delete a.displayName,i({fontParam:a})},o=function(e,a,i){var n=e.documentServices.tpa.style.getNameToFontsKeyMap()[a],o=e.documentServices.theme.fonts.get(a),r=t.fontUtils.parseStyleFont(o,e.documentServices.theme.fonts.getAll(),e.theme.colors.getAll());return{preset:n,editorKey:a,displayName:i,size:r.size,family:r.family.toLowerCase(),style:{bold:r.bold,italic:r.italic,underline:!1}}},r=function(t,a,i,n,r,s){var p={style:{italic:!1,bold:!1,underline:!1},family:"arial"},d=t.documentServices.tpa.style.get(a);switch(d.style&&d.style.fonts&&d.style.fonts[i]&&(delete(p=d.style.fonts[i]).displayName,delete p.value),n){case"theme":e.assign(p,o(t,r,s));break;case"family":p.preset="Custom",p.family=r;break;case"size":p.preset="Custom",p.size=r;break;case"bold":p.preset="Custom",p.style.bold=r;break;case"italic":p.preset="Custom",p.style.italic=r;break;case"underline":p.preset="Custom",p.style.underline=r}return p.fontStyleParam=!0,p};return{onStyleChange:i,onStyleChangeWithoutWixParam:n}}),define("tpa/settings/uiLib/colorPickerStyleService",["lodash","tpa/services/tpaStyleService"],function(e,t){var a=function(e,a,i,s,p){var d=e.documentServices.tpa.style.get(a)||{},l=d.style&&d.style.colors[i]||{},c=o(l.value),g=c?+c:1,m={key:i,param:{value:{opacity:g}},type:"color"};n(p)?m.param.value.rgba=r(p,g):m.param.value.color={name:p},t.setStyleParam(e,a,m),e.documentServices.waitForChangesApplied(function(){(d=e.documentServices.tpa.style.get(a)).style&&d.style.colors&&s({colorParam:d.style.colors[m.key]})})},i=function(e,t){var a={};a[n(t)?"value":"themeName"]=t,e({colorParam:a})},n=function(t){return!e.isUndefined(t)&&!!e.includes(t,"#")},o=function(e){return/^rgba\(((\d+),\s*){3}(0?\.\d+)\)$/.test(e)?e.split(",")[3].split(")")[0]:1},r=function(t,a){var i;if(e.includes(t,"rgba")){var n=t.split(",");n[3]=a+")",i=n.join(",")}else t=t.replace("#",""),i="rgba("+parseInt(t.substring(0,2),16)+","+parseInt(t.substring(2,4),16)+","+parseInt(t.substring(4,6),16)+","+a+")";return i};return{onStyleChangeWithoutWixParam:i,onStyleChange:a}}),define("tpa/handlers/editorUILibHandlers",["jquery","lodash","tpa/services/tpaStyleService","tpa/settings/uiLib/fontPickerStyleService","tpa/settings/uiLib/colorPickerStyleService"],function(e,t,a,i,n){var o=function(t){var a=e("#tpaSettingsFrame").offset();return a?{left:(t.left||0)+(a.left||0),top:(t.top||0)+(a.top||0)}:{left:t.left,top:t.top}},r=function(e,a,i){var n=e.documentServices.tpa.style.get(a);if(n&&t.has(n,"style.fonts"))return n.style.fonts[i]},s=function(e,a,i){var r,s=o(t.pick(a.data,["top","left"])),l=a.data.wixParam,c=a.compId,g=a.data.color||"#ffffff";r=l?n.onStyleChange.bind(null,e,c,l,i):t.partial(n.onStyleChangeWithoutWixParam,i),e.panelManager.openPanel("panels.toolPanels.colorPicker.colorPickerPanel",{value:g,onChange:r,onClose:d.bind(null,i),siteCustomColors:e.theme.colors.getCustomUsedInSkins(),sessionStorage:e.userPreferences.session,history:null,palettePresets:e.theme.colors.getColorPresets(),updateSitePalette:p.bind(null,e,c,i),previewOnHover:!1,top:s.top,left:s.left},!0)},p=function(e,t,a,i){e.theme.colors.update(i),e.documentServices.waitForChangesApplied(function(){var n=e.documentServices.tpa.style.get(t);n.style&&n.style.colors&&a({paletteChange:!0,colors:n.style.colors,palette:i})})},d=function(e){e({panelClose:!0})};return{openColorPicker:s,openFontPicker:function(e,a,n){var s,p,d=a.data.wixParam,l=a.compId,c=o(t.pick(a.data,["top","left"]));d?(p=r(e,l,d),s=i.onStyleChange.bind(null,e,l,d,n)):(p=t.isPlainObject(a.data.value)?a.data.value:{},s=t.partial(i.onStyleChangeWithoutWixParam,e,p,n)),e.panelManager.openPanel("tpaPanels.uiLib.uiLibTextParamDesignPanel",{title:a.data.title||"Font picker",hideTheme:a.data.hideTheme||!1,hideFont:a.data.hideFont||!1,hideSize:a.data.hideSize||!1,hideStyle:a.data.hideStyle||!1,top:c.top,left:c.left,fontMaxSize:a.data.fontMaxSize,fontMinSize:a.data.fontMinSize,compStyle:p,onStyleChange:s},!0)}}}),define("tpa/handlers/editorPublicDataHandlers",[],function(){return{setValue:function(e,t,a){var i=e.components.get.byId(t.compId);e.documentServices.tpa.data.set(i,t.data.key,t.data.value,t.data.scope,a)},removeValue:function(e,t,a){var i=e.components.get.byId(t.compId);e.documentServices.tpa.data.remove(i,t.data.key,t.data.scope,a)},getValue:function(e,t,a){if(t.data.scope===e.documentServices.tpa.data.SCOPE.APP){var i=e.selection.getSelectedComponentData();e.documentServices.tpa.data.app.get(i.applicationId,t.data.key,a)}else{var n=e.components.get.byId(t.compId);e.documentServices.tpa.data.comp.get(n,t.data.key,a)}},getValues:function(e,t,a){if(t.data.scope===e.documentServices.tpa.data.SCOPE.APP){var i=e.selection.getSelectedComponentData();e.documentServices.tpa.data.app.getMulti(i.applicationId,t.data.keys,a)}else{var n=e.components.get.byId(t.compId);e.documentServices.tpa.data.comp.getMulti(n,t.data.keys,a)}}}}),define("tpa/common/editorTPAPostMessageCommon",["lodash"],function(e){var t={TPA_MESSAGE:"TPA",TPA_MESSAGE2:"TPA2",TPA_RESPONSE:"TPA_RESPONSE",UI_LIB_RESPONSE:"UI_LIB_RESPONSE",PINGPONG_PREFIX:"pingpong:"},a=function(t,a,i){if(!e.isUndefined(t)){var n="";try{n=JSON.stringify(a)}catch(e){return}t.postMessage||(t=t.contentWindow),t.postMessage(n,i||"*")}},i=function(i,n){var o=["openColorPicker","openFontPicker"],r=t.TPA_RESPONSE;return e.includes(o,n.type)&&(r=t.UI_LIB_RESPONSE),function(e){try{a(i,{intent:r,callId:n.callId,type:n.type,res:e,status:!0})}catch(e){}}},n=function(e){return(e.intent===t.TPA_MESSAGE||e.intent===t.TPA_MESSAGE2)&&!o(e)},o=function(e){return"[UNKNOWN]"===e.compId};return{Intents:t,callPostMessage:a,generateResponseFunction:i,isTPAMessage:n,fixOldPingPongMessageType:function(e){return e.replace(t.PINGPONG_PREFIX,"")},handleTPAMessage:function(e,t,a){var o;try{a.data?o=JSON.parse(a.data):a.originalEvent&&a.originalEvent.data&&(a=a.originalEvent,o=JSON.parse(a.data))}catch(e){return}o&&n(o)&&t(e,o,i(a.source,o))}}}),define("tpa/services/tpaPostMessageService",["lodash","experiment","tpa/handlers/editorTPAHandlers","tpa/handlers/editorSettingsModalHandlersService","tpa/handlers/editorUILibHandlers","tpa/handlers/editorPublicDataHandlers","tpa/handlers/editorSuperAppsHandlers","tpa/common/editorTPAPostMessageCommon","tpa/utils/tpaUtils","tpa/constants/constants"],function(e,t,a,i,n,o,r,s,p,d){function l(l,c){function g(){c("message",s.handleTPAMessage.bind(this,l,P),!1)}var m=i(l),u=function(e){return function(t,a){return Boolean(e[a.type])}},h=function(e,t){return Boolean(r[t.type])&&e.documentServices.tpa.app.isSuperAppByCompId(t.compId)},y=[{test:u(o),handlers:o},{test:h,handlers:r},{test:u(a),handlers:a},{test:u(n),handlers:n}],f=function(t,a){var i=e.find(y,function(e){return e.test(t,a)});if(i)return i.handlers[a.type]},P=function(a,i,n){e.assign(i,{compId:a.selection.getSelectedComponentId()});var o=p.getOpenedPanel(l.panelManager,d.TPA_SETTING_MODAL);if(o&&m[i.type])m[i.type].call(this,i,n,o),t.isOpen("se_sendSdkMethodCallBI")&&a.documentServices.tpa.bi.sendBIEvent(i,"editor");else{var r=f(a,i);r?(r.call(this,a,i,n),t.isOpen("se_sendSdkMethodCallBI")&&a.documentServices.tpa.bi.sendBIEvent(i,"editor")):a.documentServices.tpa.handlers(e.assign(i,{originFrame:"editor"}),n)}};return{addListenerToTpaMessage:g}}return l}),define("tpa/services/pendingAppsService",["lodash","tpa/appMarket/utils/appMarketUtils"],function(e,t){var a=function(a,i){var n=t.getAppMarketPersistedUserPrefs(a);if(n){var o=n.removedPendingApps||[],r=e(i).keyBy("appDefinitionId").omit(o).value();i=e.values(r)}return i},i=function(e){var t=e.documentServices.tpa.getPendingApps();return a(e,t)},n=function(e){return e.documentServices.tpa.getPremiumPendingApps()},o=function(t){return e.size(t.documentServices.tpa.pending.getPendingApps())},r=function(e){e.leftBar.notifications.setCount("tpa.compPanels.appMarketPanel",o(e))};return{getPendingApps:function(t){var a=i(t),o=n(t);return e.union(a,o)},getPendingAppsCount:o,updateNotification:r,dismiss:function(e,t){e.documentServices.tpa.pending.dismiss(t),r(e)},add:function(e,t){e.documentServices.tpa.pending.add(t),r(e)}}}),define("tpa/appMarket/services/appMarketTabService",["lodash","util","tpa/appMarket/utils/appMarketUtils"],function(e,t,a){var i=function(e){a.shouldOpenAppMarketTab()&&n({urlParams:{openMarketOrigin:t.url.getParameterByName("referral_info")}},e)},n=function(t,i){(t=t||{}).urlParams=t.urlParams||{};var n=a.getAppMarketOpenPanelUrlParams();e.merge(t.urlParams||{},n),i("tpa.compPanels.appMarketPanel",t)};return{openAppMarketTab:n,closeAppMarketTab:function(e){e("tpa.compPanels.appMarketPanel")},openAppMarketTabFromUrlParamIfNeeded:i}}),define("tpa/addPanelData/addPanelService",["lodash","addPanelDataConsts"],function(e,t){var a,i={1024:t.CATEGORIES_ID.GALLERY,1025:t.CATEGORIES_ID.VIDEO,1026:t.CATEGORIES_ID.MUSIC,1027:t.CATEGORIES_ID.SOCIAL,1028:t.CATEGORIES_ID.CONTACT,1029:t.CATEGORIES_ID.IMAGE,1030:t.CATEGORIES_ID.OTHER,1031:t.CATEGORIES_ID.BUTTON,1032:t.CATEGORIES_ID.BOX,1034:t.CATEGORIES_ID.MENU,1035:t.CATEGORIES_ID.SHAPE,1036:t.CATEGORIES_ID.TEXT,1037:t.CATEGORIES_ID.LIST,1038:t.CATEGORIES_ID.BLOG,1039:t.CATEGORIES_ID.STORE,1153:t.CATEGORIES_ID.STORE},n={},o=function(){return e.keys(i)},r=function(e,t,i){a=t,e.documentServices.tpa.appMarket.getRelatedApps(function(e){s(e),i()})},s=function(t){e.forEach(t,function(t){var a=e.intersection(t.categories,o());e.forEach(a,function(e){p(e,t)})})},p=function(e,t){n[e]=n[e]?n[e]:[],n[e].push(t)},d=function(t){return e.sortBy(n[t],function(e){return e.weights?-e.weights.categories[t]:0})};return{init:r,initRelatedApps:s,getApps:function(){return n},getCategories:function(){return e(i).pick(e.keys(n)).values().xor(a).value()},getCategoryApps:function(t,a,i){if(e.isEmpty(n))r(t,function(){i(d(a))});else{var o=d(a);i(o)}},getCategoryNumber:function(e){switch(e){case t.CATEGORIES_ID.GALLERY:return"1024";case t.CATEGORIES_ID.VIDEO:return"1025";case t.CATEGORIES_ID.MUSIC:return"1026";case t.CATEGORIES_ID.SOCIAL:return"1027";case t.CATEGORIES_ID.CONTACT:return"1028";case t.CATEGORIES_ID.IMAGE:return"1029";case t.CATEGORIES_ID.OTHER:return"1030";case t.CATEGORIES_ID.BUTTON:return"1031";case t.CATEGORIES_ID.BOX:return"1032";case t.CATEGORIES_ID.MENU:return"1034";case t.CATEGORIES_ID.SHAPE:return"1035";case t.CATEGORIES_ID.TEXT:return"1036";case t.CATEGORIES_ID.LIST:return"1037";case t.CATEGORIES_ID.BLOG:return"1038";case t.CATEGORIES_ID.STORE:return"1153";case t.CATEGORIES_ID.STORE+"_post":return"1039"}}}}),define("tpa/addPanelData/tpaAddPanelAppBox.rt",["react","lodash","baseUI"],function(e,t,a){return function(){function i(){this.onMouseEnter(this.props.index)}function n(){this.onMouseLeave(this.props.index)}return e.createElement("div",{className:"box-app-wrapper",onMouseEnter:i.bind(this),onMouseLeave:n.bind(this),onClick:this.onClick},e.createElement("a",function(e,a){var i=t.assign({},e,a);return e.hasOwnProperty("style")&&(i.style=t.defaults(i.style,e.style)),e.hasOwnProperty("className")&&a.hasOwnProperty("className")&&(i.className=a.className+" "+e.className),i}({onMouseDown:this.onMouseDown,className:"box-app"},{style:{margin:"auto",top:"0",bottom:"0"},appDefinitionId:this.props.box.appDefinitionId}),e.createElement("div",{style:{backgroundImage:"url("+(this.props.box.colorSvgIcon||this.props.box.appIcon)+")",width:"100%",height:"100%",backgroundSize:"contain",borderRadius:"5px"}})),e.createElement("div",{className:"content"},e.createElement("div",{className:"title ellipsis"},this.props.box.name),e.createElement("label",{className:"ellipsis"},this.props.box.relatedAppsTeaser)),e.createElement("a",{onClick:this.onPlusClick.bind(this,this.props.index)},e.createElement("span",{className:"plus-tooltip"},e.createElement(a.tooltip,{value:"tpa_add_panel_add_to_site",alignment:a.uiConstants.TOOLTIP.ALIGNMENT.TOP},e.createElement("div",{},e.createElement(a.symbol,{className:"plus",name:"plusBig"}))))))}}),define("tpa/addPanelData/tpaAddPanelAppBox",["reactDOM","react","lodash","core","experiment","tpa/appMarket/utils/appMarketUtils","tpa/addPanelData/addPanelService","tpa/appMarket/services/appMarketTabService","tpa/bi/bi","tpa/constants/constants","tpa/utils/tpaUtils","tpa/services/tpaAddRemoveDSService","tpa/addPanelData/tpaAddPanelAppBox.rt"],function(e,t,a,i,n,o,r,s,p,d,l,c,g){return t.createClass({displayName:"tpaAddPanelApp",mixins:[i.mixins.editorAPIMixin],render:g,propTypes:{referralInfo:t.PropTypes.string.isRequired,category:t.PropTypes.string,box:t.PropTypes.object,onItemDrag:t.PropTypes.func},addApp:function(e,t,i,r,s,p){var d=this,l=this.getEditorAPI(),g=l.documentServices.tpa.app.isInstalled(e,!0);if(g&&p){var m=l.documentServices.pages.getFocusedPageId(),u=l.documentServices.tpa.app.getFirstAppCompPageId(e);u&&u.pageId!==m&&l.pages.navigateTo(u.pageId),l.documentServices.tpa.appMarket.getDataAsync(e).then(function(t){l.panelManager.openPanel("tpaPanels.message.sectionAlreadyInstalled",{appName:a.get(t,"name"),appIcon:a.get(t,"colorSvgIcon")||a.get(t,"appIcon"),appDefId:e})})}else if(t||g){var h=l.documentServices.pages.getFocusedPageId();if(p)l.documentServices.tpa.appMarket.getDataAsync(e).then(function(i){var o=c.addSection(l,e,{callback:function(o){a.get(i,"doNotShowPageAddedPanel")||l.panelManager.openPanel("tpaPanels.message.newPageAdded",{appName:a.get(i,"name"),appDefId:e},n.isOpen("photographyPromotionFixed")||n.isOpen("photographyPromotionRotation")),d.reportTpaAddedBiEvent(e,t,r,g,h,o.sectionId,s)}});l.pages.navigateTo(a.get(o,"id"),function(){var e=l.documentServices.tpa.section.getSectionRefByPageId(o.id);l.selection.selectComponentByCompRef(e)})});else{var y={pageId:h};(y=i?a.merge(y,{layout:i}):y).callback=function(a){d.reportTpaAddedBiEvent(e,t,r,g,y.pageId,a.comp.id,s)},c.addWidget(l,e,y)}}else l.documentServices.tpa.appMarket.getDataAsync(e).then(function(t){var n=l.documentServices.tpa.appMarket.getPermissionsUrl(this.getAppMarketParams(a.get(t,"slug")),e);n=i?n.concat("&x="+i.x+"&y="+i.y):n,o.openAppMarketModal(l.panelManager.openPanel,"appMarketPermissionsModal",{url:n})}.bind(this))},onMouseEnter:function(e){this.setState({hover:!0,selected:e})},onMouseLeave:function(){this.setState({hover:!1})},onMouseDown:function(t){var i=this;if(a.isFunction(this.props.onItemDrag)){var n,o,r=e.findDOMNode(this).getBoundingClientRect(),s=a.pick(a.merge({},r,{top:r.top+30,left:r.left+41,width:60,height:60}),["left","top","width","height"]);this.props.box.hasSection?(n=980,o=500):(n=this.props.box.widgets[0].defaultWidth,o=this.props.box.widgets[0].defaultHeight),this.props.onItemDrag(t,{rect:s,onDrop:function(e,t){i.onMouseDrop(e,t)},structure:{layout:{width:n,height:o}},selectedApp:this.props.box})}},onMouseDrop:function(e,t){var a=this.getEditorAPI(),i=t.selectedApp.appDefinitionId,n="Wix"===t.selectedApp.by,o=this.isFirstAdd(a,i),r=t.selectedApp.hasSection;this.reportTpaAddClickBiEvent(i,n,"drag",o),this.addApp(i,n,{width:t.structure.layout.width,height:t.structure.layout.height,x:e.x,y:e.y},"drag",o,r)},onClick:function(e){if(!this.svgClicked(e)){var t=this.getEditorAPI(),a=this.props.box,i=a.appDefinitionId;this.openInfoModal(a);var n={app_id:i,origin:this.props.referralInfo,category:this.getCategory(),section:"related apps",component_type:l.isBlog(i)?"blog":"tpa"};t.bi.event(p.events.OPEN_MODAL_CLICK,n),t.panelManager.closePanelByName("rEditor.addPanel")}},svgClicked:function(e){return"svg"===e.target.tagName||"circle"===e.target.tagName||"path"===e.target.tagName},onPlusClick:function(e,t){if(this.svgClicked(t)){var a=this.getEditorAPI(),i=this.props.box,n="Wix"===i.by,o=i.appDefinitionId,r=i.hasSection,s=this.isFirstAdd(a,o);this.reportTpaAddClickBiEvent(o,n,"direct_add",s),this.addApp(o,n,null,"direct_add",s,r)}},getAppMarketParams:function(e){return{origin:o.origin(),openMarketOrigin:this.props.referralInfo,referralInfoCategory:this.getCategory(),section:"related_apps",appName:e}},openInfoModal:function(e){var t=this.getEditorAPI(),i=t.documentServices.tpa.appMarket.getInfoUrl(this.getAppMarketParams(a.get(e,"slug")),e.slug);o.openAppMarketModal(t.panelManager.openPanel,"appMarketAppModal",{url:i})},reportTpaAddedBiEvent:function(e,t,i,n,o,r,s){var d=this.getEditorAPI(),l=this.getBasicBiParams(d,e,t,i,s),c=d.documentServices.tpa.app.getDataByAppDefId(e),g=d.documentServices.generalInfo.isFirstSave()?d.documentServices.generalInfo.getMetaSiteId():"",m={widget_id:"",app_site_id:c.instanceId,instance_id:r,search_term:"",search_result_position:"",referral_info_category:this.getCategory(),referral_info:this.props.referralInfo,template_guid:g,modal_tab_name:"",page_id:o};l=a.assign(l,m),d.bi.event(p.events.TPA_ADDED,l)},reportTpaAddClickBiEvent:function(e,t,a,i){var n=this.getEditorAPI();l.bi.reportBIOnAppIntent(n,p.events.APP_INTENT,e,d.BI.initiator.EDITOR,d.BI.type.ADD_APP);var o=this.getBasicBiParams(n,e,t,a,i);n.bi.event(p.events.TPA_ADD_CLICK,o)},getBasicBiParams:function(e,t,a,i,n){return{adding_method:i,section:"related_apps",category:this.getCategory(),origin:this.props.referralInfo,app_id:t,is_first:n?1:0,is_permissions_app:a?0:1}},isFirstAdd:function(e,t){return!e.documentServices.tpa.app.isInstalled(t,!0)},getCategory:function(){return this.props.category}})}),define("tpa/addPanelData/tpaAddPanelSection.rt",["react","lodash","util","baseUI","tpa/addPanelData/tpaAddPanelAppBox"],function(e,t,a,i,n){return function(){function o(t,a){return e.createElement("div",{key:t.appDefinitionId},e.createElement(n,{box:t,index:a,category:this.props.props.category,onItemDrag:this.props.onItemDrag,referralInfo:this.props.parentType}))}function r(){this.openCategory()}return e.createElement.apply(this,["div",{category:this.getCategory()},t.map(this.getAppBoxList(),o.bind(this)),e.createElement("div",{className:"more"},e.createElement(i.symbol,{name:"market"}),e.createElement("span",{},a.translate("tpa_add_panel_still_havent_found")),e.createElement("a",{onClick:r.bind(this)},a.translate("tpa_add_panel_browse_app_market")),e.createElement("span",{dangerouslySetInnerHTML:{__html:"&nbsp;"}}))])}}),define("tpa/addPanelData/tpaAddPanelSection",["react","lodash","core","tpa/addPanelData/addPanelService","tpa/appMarket/services/appMarketTabService","tpa/addPanelData/tpaAddPanelSection.rt","util","tpa/services/pendingAppsService"],function(e,t,a,i,n,o,r,s){return e.createClass({displayName:"tpaAddPanelSection",mixins:[a.mixins.editorAPIMixin],render:o,getAppBoxList:function(){return this.appBoxList},componentWillMount:function(){var e=this,t=this.getEditorAPI();i.getCategoryApps(t,this.getCategoryNum(),function(t){e.appBoxList=t}),this.referralInfo=this.props.parentType.toLowerCase()},openCategory:function(){var e=this.getEditorAPI();e.panelManager.closePanelByName("rEditor.addPanel");var t={referralInfoCategory:this.getCategory(),openMarketOrigin:this.referralInfo,section:"related_apps"};n.openAppMarketTab({urlParams:t},e.panelManager.openPanel),e.bi.event(r.bi.events.OPEN_MARKET_CLICK,{referral_info:this.referralInfo,referral_info_category:this.getCategory(),num_pending_apps:s.getPendingAppsCount(this.getEditorAPI())})},getCategory:function(){return this.props.props.category},getCategoryNum:function(){return this.props.props.categoryNum}})}),define("tpa/addPanelData/section",["tpa/addPanelData/tpaAddPanelSection","tpa/addPanelData/addPanelService","addPanelDataConsts","coreUtilsLib"],function(e,t,a,i){var n=function(e){var a=t.getCategories();e.addPanel.registerToAddSectionAtTheEndOfCategory(a,function(e){return[o(e,null)]})},o=function(t,n){var o=i.objectUtils.cloneDeep(a.SECTIONS_STRUCTURE.GENERAL_SECTION_STRUCTURE);return o.help.hide=!1,o.help.title="",o.help.text="add_section_info_text_relatedapps_general",o.teaser.hide=!0,o.props.class="tpaSection",o.props.template=e,o.props.category=t,o.props.categoryNum=n||r(t),"store"===t?o.help.text="1153"===n?"add_section_info_text_relatedapps_store":"add_section_info_text_relatedapps_store2":"blog"===t&&(o.help.text="add_section_info_text_relatedapps_blog"),o},r=function(e){return t.getCategoryNumber(e)};return{registerAddPanelSection:n,getSectionStructure:o}}),define("tpa/superApps/provisionService",["bluebird","tpa/bi/bi","tpa/utils/tpaUtils","tpa/services/tpaAlertsService"],function(e,t,a,i){var n=function(t,a){return new e(function(e){t.saveManager.saveInBackground(e,o.bind(null,t,a))})},o=function(e,t){i.openSaveFailedAlertForDashboardUrl(e,t.appDefinitionId)};return{preSaveProvision:function(t,a){var n=function(){i.openProvisionFailedAlert(t.panelManager.openPanel,a.appDefinitionId)};return new e(function(e){t.documentServices.tpa.provision.provisionAppDemoSave(a.applicationId,e,n)})},save:n,onSaveError:o}}),define("tpa/superApps/superApps",["lodash","superAppMenuInfra","tpa/utils/tpaUtils","tpa/handlers/editorTPAHandlers","tpa/appMarket/services/appMarketTabService","tpa/appMarket/utils/appMarketUtils","tpa/constants/constants","tpa/addPanelData/section","tpa/bi/bi","tpa/superApps/superAppsConstants","tpa/services/tpaAddRemoveDSService","tpa/packagePicker/packagePicker","tpa/services/tpaHelpService","tpa/superApps/provisionService","tpa/services/tpaStyleService","tpa/services/tpaAlertsService","experiment"],function(e,t,a,i,n,o,r,s,p,d,l,c,g,m,u,h,y){var f,P=["dontStretch","styleId","parentContainerRef"],v=function(t,i,n,o,s){o=o||{};var p=e.get(s,"type")||r.BI.type.GFPP_MANAGE;k(p,t),o.bi=a.bi.getAppIntentBiParamsToAddToUrl(f,t,p);var d=f.documentServices.tpa.app.getDataByAppDefId(t);d&&(y.isOpen("se_tpaProvisionOnAdd")?d.notProvisioned?f.saveManager.saveInBackground(e.partial(_,d,i,n,o),e.partial(h.openSaveFailedAlertForDashboardUrl,f,d.appDefinitionId)):_(d,i,n,o):d.demoMode?m.preSaveProvision(f,d).then(e.partial(m.save,f,d)).then(e.partial(_,d,i,n,o)):!f.documentServices.generalInfo.isFirstSave()&&f.documentServices.tpa.app.isAppProvisionedOnServer(d.applicationId)?_(d,i,n,o):m.save(f,d).then(e.partial(_,d,i,n,o)))},_=function(e,t,i,n){n=n||{};var o=r.TPA_SETTING_MODAL,s=a.getOpenedPanel(f.panelManager,o);s&&f.panelManager.closePanelByName(s.props.panelName);var p=e.dashboardUrl;if(n.state&&(p+="#"+n.state),e.dashboardUrl){var d={url:p,deviceType:"desktop",applicationId:e.applicationId,origCompId:f.selection.getSelectedComponentId(),origin:n.origin,bi:n.bi},l={width:t,height:i,title:n.title,isBareMode:n.isBareMode||!1,options:n.options},c=f.documentServices.tpa.getSettingsModalParams(d,l);c.onClose=n.onClose,c.shouldNotCloseOnBlur=n.shouldNotCloseOnBlur;var m=n.leavePanelsOpen||!1;g.getHelpId(f,e.appDefinitionId,n.widgetId,g.HELP_END_POINTS.SETTINGS_MODAL).then(function(t){c.appDefinitionId=e.appDefinitionId,c.helpId=t,c.widgetId=n.widgetId,a.selectComponentAndNavigateIfNeeded(f,e,function(){f.panelManager.openPanel(o,c,m)})})}},I=function(e,t){var i=f.documentServices.tpa.app.getDataByAppDefId(e),n=i.widgets[t];if(n&&a.isMultiSectionInstanceEnabled(i,n.widgetId)){a.bi.reportBIOnAppIntent(f,p.events.APP_INTENT,e,r.BI.initiator.EDITOR,r.BI.type.ADD_APP);var o=l.addMultiSection(f,i.appDefinitionId,{pageId:n.appPage.id});f.pages.navigateTo(o.id),b(i,o,n.widgetId)}},S=function(t,i,n,o){a.bi.reportBIOnAppIntent(f,p.events.APP_INTENT,t,r.BI.initiator.EDITOR,r.BI.type.ADD_APP);var s=A(i,n,o),d=l.addWidget(f,t,s);f.documentServices.waitForChangesApplied(function(a){if(e.isUndefined(a)){w(d,o);var n=f.documentServices.tpa.app.getDataByAppDefId(t);D(n,d,i,e.get(o,"presetId")),e.get(o,"cb")&&o.cb(d)}})},A=function(t,a,i){var n=e.merge({widgetId:t,layout:a},e.pick(i,P));return n.callback=function(){f.bi.tryFlushingConditionedEvents()},n},w=function(t,a){var i=a&&a.presetId;e.isString(i)&&!e.isEmpty(i)&&f.documentServices.tpa.data.set(t,"presetId",i,f.documentServices.tpa.data.SCOPE.COMPONENT)},D=function(e,t,a,i){var n={app_id:e.appDefinitionId,app_site_id:e.instanceId,instance_id:t.id,widget_id:a,page_id:t.pageId,preset_id:i};f.bi.event(p.events.EXTENSION_ADDED,n)},b=function(e,t,a){var i={app_id:e.appDefinitionId,app_site_id:e.instanceId,instance_id:t.sectionId,widget_id:a,page_id:t.id};f.bi.event(p.events.EXTENSION_ADDED,i)},T=function(e,t){return s.getSectionStructure(e,t,"vertical_button")},E=function(e,t,a){k(r.BI.type.APP_UPGRADE_BUTTON,e),c.startUpgradeFlow(f,e,!1,{origin:a})},C=function(t){i.settingsOpenModal(f,{data:e.omit(t,"autoProvision")})},M=function(t){var i=(t=t||{}).appDefinitionId||O();if(k(r.BI.type.APP_MANAGE_BUTTON,i),t.bi=a.bi.getAppIntentBiParamsToAddToUrl(f,i,r.BI.type.APP_MANAGE_BUTTON),e.get(t,"autoProvision")){var n=f.documentServices.tpa.app.getDataByAppDefId(i);n&&(y.isOpen("se_tpaProvisionOnAdd")?n.notProvisioned?f.saveManager.saveInBackground(e.partial(C,t),e.partial(h.openSaveFailedAlertForDashboardUrl,f,n.appDefinitionId)):C(t):n.demoMode?m.preSaveProvision(f,n).then(e.partial(m.save,f,n)).then(e.partial(C,t)):!f.documentServices.generalInfo.isFirstSave()?C(t):m.save(f,n).then(e.partial(C,t)))}else C(t)},k=function(e,t){a.bi.reportBIOnAppIntent(f,p.events.APP_INTENT,t,r.BI.initiator.EDITOR,e)},O=function(){var t=f.selection.getSelectedComponentData(),a=f.documentServices.tpa.app.getData(e.get(t,"applicationId"));return e.get(a,"appDefinitionId")};return{init:function(e){f=e},isPremium:function(e){return f.documentServices.tpa.app.isPremiumByAppDefinitionId(e)},getExtensions:function(e,t){t&&f.documentServices.tpa.appMarket.getDataAsync(e).then(function(e){t(f.documentServices.tpa.app.getExtensionsWidgets(e))})},openDashboardUrl:v,openAppMarketForAppDef:function(e){var t={urlParams:{openMarketOrigin:d.getMarketOpenOriginForBi(e),openAppDefId:e}};n.openAppMarketTab(t,f.panelManager.openPanel)},refreshAppCompsForAppDefId:function(e){var t=f.documentServices.tpa.app.getDataByAppDefId(e),a=f.documentServices.tpa.app.getRenderedReactCompsByApplicationId(t.applicationId);f.documentServices.tpa.app.refreshApp(a)},openAppMarketInfoModal:function(e){var t=f.documentServices.tpa.appMarket.getInfoUrl({origin:"http://editor.wix.com"},e);o.openAppMarketModal(f.panelManager.openPanel,"appMarketAppModal",{url:t})},registerOnAppInstalled:function(e,t){f.documentServices.tpa.app.registerOnInstalled(e,t)},registerOnAppDeleted:function(e,t){f.documentServices.tpa.app.registerOnDeleted(e,t)},addApp:function(e,t){return a.bi.reportBIOnAppIntent(f,p.events.APP_INTENT,e,r.BI.initiator.EDITOR,r.BI.type.ADD_APP),t=t||{},l.addSection(f,e,t)},addWidget:S,addSection:I,superAppsConstants:d,isInstalled:function(e){var t=f.documentServices.tpa.app.isInstalled(e);return t&&f.documentServices.tpa.appMarket.getData(e),t},getFirstAppCompPageId:function(e){return f.documentServices.tpa.app.getFirstAppCompPageId(e)},relatedApps:{addPanelCategories:["store"],constants:{store:{category:"store",categoryNum:{pre:"1153",post:"1039"}}},getRelatedAppsForPostInstall:T,getRelatedAppsForPreInstall:T},getSectionRefByPageId:function(e){return f.documentServices.tpa.section.getSectionRefByPageId(e)},upgrade:E,hasPremiumOffering:function(e){var t=f.documentServices.tpa.app.getDataByAppDefId(e);return!!t&&f.documentServices.tpa.app.hasPremiumOffering(t.applicationId)},openSuperAppPanel:function(e,a,i,n,o,r,s){t.button.registerButton(f,e,a,i,n,o,r,s,!0),f.panelManager.openPanel(i,{appWasManuallyInstalled:!0})},openSuperAppsModal:M,setStyleParam:function(e,t,a){u.setStyleParam(f,t,a)},unDockComp:function(e,t){f.components.layout.unDock(e),f.documentServices.waitForChangesApplied(function(){f.components.layout.update(e,t)})}}}),define("tpa/services/tpaAddAppService",["lodash","blog","core","experiment","tpa/services/pendingAppsService","tpa/utils/tpaUtils","tpa/constants/constants","tpa/services/tpaAddRemoveDSService","tpa/services/tpaAlertsService","tpa/superApps/superApps","tpa/bi/bi"],function(e,t,a,i,n,o,r,s,p,d,l){var c=function(e){e.documentServices.generalInfo.isFirstSave()?e.saveManager.saveInBackground(function(){d.openSuperAppPanel("shoutout",!0,a.constants.SUPER_APPS.SHOUTOUT_PANEL_NAME,"SiteApp_ShoutOut_Button_Hover_Caption","SiteApp_ShoutOut_Button_Hover_Caption","shoutout-panel","shoutOutLeftBarIcon")},function(){p.openSaveFailedAlertForAppMarket(e)}):d.openSuperAppPanel("shoutout",!0,a.constants.SUPER_APPS.SHOUTOUT_PANEL_NAME,"SiteApp_ShoutOut_Button_Hover_Caption","SiteApp_ShoutOut_Button_Hover_Caption","shoutout-panel","shoutOutLeftBarIcon")},g=function(t,a){return e.includes(t.documentServices.pages.getPageIdList(),a)},m=function(t,a,i,r,p,l){if(i=i||{},a===d.superAppsConstants.SHOUTOUT_APP_DEF_ID)c(t);else{var m={};i.x&&i.y&&(m={x:i.x,y:i.y});var u=t.documentServices.pages.getFocusedPageId(),h=!t.documentServices.tpa.app.isInstalled(a,!0),y={widgetId:i.widgetId,layout:m,callback:function(e){n.updateNotification(t),o.bi.reportTpaAddedBiEvent(t,a,i.widgetId,u,e.comp.id,h,r,p),t.bi.tryFlushingConditionedEvents()}};i.pageId&&g(t,i.pageId)&&(y.pageId=i.pageId),s.addWidget(t,a,y),i.shouldNavigate&&y.pageId&&u!==y.pageId?t.pages.navigateTo(i.pageId,function(){t.panelManager.closePanelByName("tpa.compPanels.tpaSettings")}):y.pageId&&u!==y.pageId||t.panelManager.closePanelByName("tpa.compPanels.tpaSettings"),t.documentServices.waitForChangesApplied(function(){if(l){var i=t.documentServices.tpa.app.getDataByAppDefId(a);l({instanceId:e.get(i,"instanceId")})}})}},u=function(t,a,r,d,l,c,g,m){var u=(l=l||{}).widgetId;if(t.documentServices.tpa.section.alreadyInstalled(a)){var h=function(){var e=t.documentServices.tpa.app.getFirstAppCompPageId(a);o.bi.reportTpaAddedBiEvent(t,a,u,e.pageId,e.compId,!0,c,g)},y=function(){p.openProvisionFailedAlert(t.panelManager.openPanel,a)};i.isOpen("se_tpaProvisionOnAdd")&&r.notProvisioned?t.saveManager.saveInBackground(h,y):r.demoMode&&t.documentServices.tpa.provision.provisionAppDemoSave(r.applicationId,h,y);var f=t.documentServices.tpa.app.getFirstAppCompPageId(a);if(f){var P=t.documentServices.pages.getFocusedPageId();l.shouldNavigate&&f.pageId!==P&&t.pages.navigateTo(f.pageId)}t.documentServices.tpa.appMarket.getDataAsync(a).then(function(i){t.panelManager.openPanel("tpaPanels.message.sectionAlreadyInstalled",{appName:d,appIcon:e.get(i,"colorSvgIcon")||e.get(i,"appIcon"),appDefId:a})})}else{var v=s.addSection(t,a,{widgetId:u,callback:function(e){l.showPageAddedPanel&&t.panelManager.openPanel("tpaPanels.message.newPageAdded",{appName:d,appDefId:a},i.isOpen("photographyPromotionFixed")||i.isOpen("photographyPromotionRotation")),n.updateNotification(t),o.bi.reportTpaAddedBiEvent(t,a,u,e.page.pageId,e.sectionId,!0,c,g)}});l.shouldNavigate&&t.pages.navigateTo(v.id,function(){t.panelManager.closePanelByName("tpa.compPanels.tpaSettings");var e=t.documentServices.tpa.section.getSectionRefByPageId(v.id);t.selection.selectComponentByCompRef(e)}),t.documentServices.waitForChangesApplied(function(){m&&(r=t.documentServices.tpa.app.getDataByAppDefId(a),m({instanceId:e.get(r,"instanceId")}))})}},h=function(t,a,i,n,s,p,d,c,g,h){switch(g=e.pick(g,["widgetId","showPageAddedPanel","x","y","shouldNavigate","pageId"]),s){case"tpaSection":o.bi.reportBIOnAppIntent(t,l.events.APP_INTENT,a,p,r.BI.type.ADD_APP),u(t,a,n,i,g,d,c,h);break;case"tpaWidget":o.bi.reportBIOnAppIntent(t,l.events.APP_INTENT,a,p,r.BI.type.ADD_APP),m(t,a,g,d,c,h);break;case"wixappsPart":y(t,s,c,g,h);break;default:throw new Error("Error: "+s+" is unknown tpa type")}},y=function(e,a,i,n,o){if(n=n||{},t.siteHasBlog(e)){var r=t.getBlogPageId(e),s=e.documentServices.pages.getFocusedPageId();n.shouldNavigate&&r!==s&&e.pages.navigateTo(r)}else t.installApp(e,null,function(t){f(e,t,a,i),o&&o()})},f=function(e,a,i,n){var r=t.getBlogMainAppPartCompRef(e,a);o.bi.reportAddComponentBIEvent(e,r.id,i,n)};return{addApp:h,isAppInstalled:function(e,a,i){return!(a!==d.superAppsConstants.BLOG_APP_DEF_ID||!t.siteHasBlog(e))||e.documentServices.tpa.app.isInstalled(a,!i)}}}),define("tpa/handlers/editorTPAPreviewHandlers",["lodash","util","tpa/constants/constants","tpa/services/tpaHelpService","tpa/services/tpaAddRemoveDSService","tpa/services/tpaAddAppService","tpa/appMarket/utils/appMarketUtils","tpa/superApps/superApps"],function(e,t,a,i,n,o,r,s){var p=function(t,a){if(t.isDesktopEditor()&&t.getPreviewMode()){var i=a.data.pageId,n=a.data.compId,o=[t.documentServices.pages.getFocusedPageId()];t.documentServices.pages.popupPages.isPopupOpened()||o.push(t.pages.getMasterPageId()),e.includes(o,i)?d(t,n,i):t.pages.navigateTo(i,d.bind(void 0,t,n,i))}},d=function(e,t,a){e.preview.togglePreview();var i=e.components.get.byId(t,a);e.selection.selectComponentByCompRef(i);var n={selectedComponent:e.selection.getSelectedComponents(),origCompId:t};e.panelManager.openPanel("tpa.compPanels.tpaSettings",n)};return{openHelp:function(e,t){e.preview.togglePreview();var a=e.documentServices.tpa.app.getFirstAppCompPageId(t.data),n=e.components.get.byId(a.compId,a.pageId);e.selection.selectComponentByCompRef(n);var o=e.selection.getSelectedComponentData(),r=e.documentServices.tpa.app.getData(o.applicationId),s=o.widgetId||e.documentServices.tpa.app.getMainSectionWidgetData(r).widgetId;i.getHelpId(e,r.appDefinitionId,s,i.HELP_END_POINTS.WIDGET).then(function(t){e.panelManager.openHelpCenter(t,{origin:"preview",component:"TPAWidget",learn_more:!1},{panel_name:"preview",origin:"preview"})})},getViewMode:function(e,t,a){return a(e.getPreviewMode()?"preview":"editor")},openSettingsDialog:p,deselectComponent:function(e){e.selection.deselectComponents()},editorAddApplication:function(t,i,n){var p=e.get(i,"data.appDefinitionId");o.isAppInstalled(t,p,!0)?n({error:"Application already installed."}):t.isMobileEditor()?n({error:"Can't add application in mobile editor."}):t.documentServices.tpa.appMarket.getDataAsync(p).then(function(d){if(d&&!d.error){var l="Wix"===d.by;if(l){var c=d.hasSection?"tpaSection":"tpaWidget";c=p===s.superAppsConstants.BLOG_APP_DEF_ID?"wixappsPart":c;var g=a.BI.initiator.SDK,m={adding_method:"sdk"},u={shouldNavigate:e.get(i,"data.shouldNavigate",!1),pageId:e.get(i,"data.pageId"),showPageAddedPanel:e.get(i,"data.showPageAddedPanel",!1)};o.addApp(t,p,d.name,null,c,g,!l,m,u,n)}else{var h=t.documentServices.tpa.appMarket.getPermissionsUrl({appName:e.get(d,"slug")},p);r.openAppMarketModal(t.panelManager.openPanel,"appMarketPermissionsModal",{url:h}),n()}}else n({error:"Application with "+p+" appDefinitionId do not exist."})})},editorIsApplicationInstalled:function(t,a,i){var n=e.get(a,"data.appDefinitionId");i(o.isAppInstalled(t,n,!0))}}}),define("tpa/services/tpaPreviewPostMessageService",["lodash","tpa/handlers/editorTPAPreviewHandlers","tpa/common/editorTPAPostMessageCommon"],function(e,t,a){function i(e){return Boolean(t[e.type])}var n=function(e,t){var a;try{t.data?a=JSON.parse(t.data):t.originalEvent&&t.originalEvent.data&&(t=t.originalEvent,a=JSON.parse(t.data))}catch(e){return}a&&s(a)&&i(a)&&o(e,a,r(t.source,a))},o=function(e,a,i){t[a.type].call(this,e,a,i)},r=function(e,t){return function(i){var n={intent:"TPA_PREVIEW",callId:t.callId,type:t.type,res:i,status:!0};a.callPostMessage(e,n)}},s=function(e){return"TPA_PREVIEW"===e.intent};return{init:function(e){window.addEventListener("message",n.bind(this,e),!1)}}}),define("tpa/settings/settings",["lodash","util","panels","tpa/superApps/superAppsConstants","tpa/appMarket/utils/appMarketUtils","experiment"],function(e,t,a,i,n,o){function r(t){return e.has(t,"settings.languages")?t.settings.languages:[]}function s(t,a){return e.includes(a,t)}function p(e){return c[e]+g}function d(e,t){return p(s(e,r(t))?e:"en")}function l(t,a,i,r,s){var p=t.appDefinitionId;if(!o.isOpen("se_tpaProvisionOnAdd")&&t.demoMode&&"Wix"!==a.by){var l=i.documentServices.tpa.appMarket.getPermissionsUrl({appName:e.get(a,"slug")},p);l=l.concat("&demoMode=true"),n.openAppMarketModal(i.panelManager.openPanel,"appMarketPermissionsModal",{url:l})}else{var c=e.find(a.widgets,{widgetId:s}),g=h(t,s),m=g?d(i.documentServices.generalInfo.getLanguage(),c):t.settingsWidth;f(i,r,{width:m,isNewVersion:g})}}var c={en:116,da:120,sv:120,es:120,tr:128,pl:128,no:128,it:128,fr:128,de:128,ru:128,ja:138,pt:138,nl:138,ko:138},g=288,m=["13afb094-84f9-739f-44fd-78d036adb028","139a41fd-0b1d-975f-6f67-e8cbdf8ccc82","1380bba0-253e-a800-a235-88821cf3f8a4"],u=function(t,a){return!e.get(t,"abTest")||(!(!o.isOpen("se_ecom_galleries_settings2")||!e.includes(m,a))||o.isOpen("se_"+a.replace(/-/g,"_")))},h=function(t,a){var i=e.get(t,["widgets",a,"settings"]),n=1!==e.get(i,"version"),o=e.get(i,"urlV2",!1);return n&&o&&u(i,a)},y=function(e,t){t=t||e.selection.getSelectedComponents();var a=e.components.data.get(t),i=e.documentServices.tpa.app.getData(a.applicationId),n=i.appDefinitionId;n?e.documentServices.tpa.appMarket.getDataAsync(n,{verticalsPremium:!0}).then(function(n){var o=a.widgetId||e.documentServices.tpa.app.getMainSectionWidgetData(i).widgetId;l(i,n,e,t,o)}):f(e,t)},f=function(t,a,i){if(!P("tpa.compPanels.tpaSettings",t.panelManager)){var n=e.merge({selectedComponent:a,origCompId:t.selection.getSelectedComponentId()},i);t.panelManager.openPanel("tpa.compPanels.tpaSettings",n)}},P=function(t,a){var i=a.getOpenPanels();return e.find(i,{name:t})};return{open:y}}),define("tpa/services/navigateAndOpenAppService",["lodash","util","tpa/appMarket/services/appMarketTabService","tpa/settings/settings","blog","core"],function(e,t,a,i,n,o){var r={},s=function(e,t,a){t.pageId===e.pages.getMasterPageId()||t.pageId===e.documentServices.pages.getFocusedPageId()?a():e.pages.navigateTo(t.pageId,a)},p=function(e){e.getPreviewMode()||(e.shouldUpdateEditorScrollAfterHeightUpdate=!0,e.applyPreviewScrollToEditorScroll())},d=function(e,t){var a=g(e,t);a&&i.open(e,a)},l=function(e){e.leftBar.collapseMenu(),e.panelManager.openPanel(o.constants.SUPER_APPS.BLOG_PANEL_NAME,{})},c=function(e,t){"61f33d50-3002-4882-ae86-d319c1a249ab"===t?l(e):d(e,t)},g=function(e,t){var a=e.documentServices.tpa.app.getFirstAppCompPageId(t,!0);if(a){var i=e.components.get.byId(a.compId,a.pageId);return e.selection.selectComponentByCompRef(i),i}return null};return r.handleIfComingFromETPA=function(i){var n=t.url.getParameterByName("etpa");if(n)if(i.documentServices.tpa.app.getFirstAppCompPageId(n)){var o="settings"===(t.url.getParameterByName("etpaMode")||"settings")?c:g;r.navigateAndScrollToComp(i,n,e.partial(o,i,n))}else a.openAppMarketTab({urlParams:{openAppDefId:n,openMarketOrigin:t.url.getParameterByName("referral_info")}},i.panelManager.openPanel)},r.navigateAndScrollToComp=function(e,t,a){var i;(i="61f33d50-3002-4882-ae86-d319c1a249ab"===t?{pageId:n.getBlogPageId(e),compId:void 0}:e.documentServices.tpa.app.getFirstAppCompPageId(t,!0))&&s(e,i,function(){e.pages.scrollToComponent(i.compId,{onComplete:a,onUpdate:p.bind(null,e)})})},r.navigateAndOpenSettingsForAppDefId=function(t,a){r.navigateAndScrollToComp(t,a,e.partial(c,t,a))},r}),define("tpa/componentsData/addCompKeyToCompTypeMap",[],function(){var e={addAccordion:"tpa.viewer.components.Accordion",addAdminLoginButton:"wysiwyg.viewer.components.AdminLoginButton",addAudioPlayer:"wysiwyg.viewer.components.AudioPlayer",addBgImageStrip:"wysiwyg.viewer.components.BgImageStrip",addCollage:"tpa.viewer.components.Collage",addContactForm:"wysiwyg.viewer.components.ContactForm",addDocumentMedia:"wysiwyg.viewer.components.documentmedia.DocumentMedia",addFacebookComment:"wysiwyg.viewer.components.WFacebookComment",addFacebookLike:"wysiwyg.viewer.components.WFacebookLike",addDisqusComment:"wysiwyg.common.components.disquscomments.viewer.DisqusComments",addFacebookShare:"wysiwyg.viewer.components.FacebookShare",addFlashComponent:"wysiwyg.viewer.components.FlashComponent",addFreestyle:"tpa.viewer.components.Freestyle",addGoogleMap:"wysiwyg.viewer.components.GoogleMap",addGooglePlusOne:"wysiwyg.viewer.components.WGooglePlusOne",addHtmlComponent:"wysiwyg.viewer.components.HtmlComponent",addHoneycomb:"tpa.viewer.components.Honeycomb",addImpress:"tpa.viewer.components.Impress",addItunesButton:"wysiwyg.viewer.components.ItunesButton",addLoginButton:"wysiwyg.viewer.components.LoginButton",addMasonry:"tpa.viewer.components.Masonry",addMatrixGallery:"wysiwyg.viewer.components.MatrixGallery",addPaginatedGridGallery:"wysiwyg.viewer.components.PaginatedGridGallery",addPayPalButton:"wysiwyg.viewer.components.PayPalButton",addPinterestFollow:"wysiwyg.viewer.components.PinterestFollow",addSliderGallery:"wysiwyg.viewer.components.SliderGallery",addSlideShowGallery:"wysiwyg.viewer.components.SlideShowGallery",addSocialBar:"wysiwyg.viewer.components.LinkBar",addSoundCloud:"wysiwyg.viewer.components.SoundCloudWidget",addStripShowcase:"tpa.viewer.components.StripShowcase",addStripSlideshow:"tpa.viewer.components.StripSlideshow",addSvgShape:"wysiwyg.viewer.components.svgshape.SvgShape",addThumbnails:"tpa.viewer.components.Thumbnails",addTPA3DCarousel:"wysiwyg.viewer.components.tpapps.TPA3DCarousel",addTPA3DGallery:"wysiwyg.viewer.components.tpapps.TPA3DGallery",addTwitterFollow:"wysiwyg.viewer.components.WTwitterFollow",addTwitterTweet:"wysiwyg.viewer.components.WTwitterTweet",addVideo:"wysiwyg.viewer.components.Video",addVKShare:"wysiwyg.viewer.components.VKShareButton"};return{getCompType:function(t){return e[t]||t}}}),define("tpa/componentsData/componentsDefaultData.json",[],function(){return{"wysiwyg.viewer.components.tpapps.TPA3DCarousel":{layout:{width:803,height:272},componentType:"wysiwyg.viewer.components.tpapps.TPA3DCarousel",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525}]},props:{type:"SlideShowGalleryProperties",metaData:{schemaVersion:"1.0"},expandEnabled:!0,galleryImageOnClickAction:"disabled",goToLinkText:"Go to link",imageMode:"clipImage",transition:"swipeHorizontal",autoplayInterval:5,autoplay:!1,transDuration:1,bidirectional:!0,reverse:!1,showAutoplay:!0,showNavigation:!0,showCounter:!0,showExpand:!1,showSocial:!1},style:"tfc1"},"wysiwyg.viewer.components.tpapps.TPA3DGallery":{layout:{width:790,height:237},componentType:"wysiwyg.viewer.components.tpapps.TPA3DGallery",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525,alt:""}]},props:{type:"SlideShowGalleryProperties",metaData:{schemaVersion:"1.0"},expandEnabled:!0,galleryImageOnClickAction:"disabled",goToLinkText:"Go to link",imageMode:"clipImage",transition:"swipeHorizontal",autoplayInterval:5,autoplay:!1,transDuration:1,bidirectional:!0,reverse:!1,showAutoplay:!0,showNavigation:!0,showCounter:!0,showExpand:!1,showSocial:!1},style:"tfg1"},"tpa.viewer.components.Accordion":{layout:{width:473,height:270},componentType:"tpa.viewer.components.Accordion",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525}]},props:{type:"AccordionProperties",metaData:{schemaVersion:"1.0"},font:"arial",descFont:"arial",alignText:"left",textMode:"titleOnly",galleryImageOnClickAction:"zoomMode",borderWidth:0,textColor:"#2F2E2E",alphaTextColor:"1",descriptionColor:"#605E5E",alphaDescriptionColor:"1",textBackgroundColor:"#FFFFFF",alphaTextBackgroundColor:"0.8",borderColor:"#FFFFFF",alphaBorderColor:"1"},style:{componentClassName:"tpa.viewer.components.Accordion",pageId:"",compId:"i6rzx2vz",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_15",color2:"color_14",color3:"color_11",color4:"color_11",color5:"color_15",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"0.8"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAAccordionSkin"}},"wysiwyg.viewer.components.AdminLoginButton":{layout:{width:125,height:20},componentType:"wysiwyg.viewer.components.AdminLoginButton",data:{type:"LinkableButton",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},label:"Webmaster Login"},props:{type:"ButtonProperties",metaData:{schemaVersion:"1.0"},align:"center",margin:0},style:"admb0"},"wysiwyg.viewer.components.PaginatedGridGallery":{layout:{width:273,height:204},componentType:"wysiwyg.viewer.components.PaginatedGridGallery",style:"pagg1"},"wysiwyg.viewer.components.AudioPlayer":{layout:{width:42,height:40},componentType:"wysiwyg.viewer.components.AudioPlayer",style:"ap1"},"tpa.viewer.components.Collage":{layout:{width:631,height:846},componentType:"tpa.viewer.components.Collage",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Almond Tree Flowers",uri:"7b45bb77d4727e68f365c65043b64a97.jpg",description:"Describe your image here",width:800,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Autumn Leaves",uri:"acd902b0f9d63e266ef47931afefa885.jpg",description:"Describe your image here",width:1e3,height:673},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Berry Branches",uri:"905004d09ba3b477e9ea48cb2d33ceac.jpg",description:"Describe your image here",width:2294,height:1524},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dramatic Dew Drops",uri:"e216a94ff6d1a540dc14ee2f4beda3be.jpg",description:"Describe your image here",width:800,height:1067},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Echinacea Coneflowers",uri:"dfb23621c1d676831ce35d50b279d1be.jpg",description:"Describe your image here",width:555,height:580},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fresh Herbs Close Up",uri:"9f5b9d38ec87d4d03d8ee8159af4d307.jpg",description:"Describe your image here",width:600,height:900},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lush Plants",uri:"7b181c91a72e6c368bb017f85b2f25f4.jpg",description:"Describe your image here",width:1e3,height:1500},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Open Field",uri:"dfcee47a2e2936abb046c3fa6c603ed2.jpg",description:"Describe your image here",width:700,height:814},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Raindrops on Window",uri:"e5433a67390ddeb83e13ebda5ddade7d.jpg",description:"Describe your image here",width:532,height:800},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tropical Berries Close Up",uri:"e6ab3aad737f5a6e8ddbe92567e164e5.jpg",description:"Describe your image here",width:803,height:1e3},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Stalks of Wheat",uri:"d30a81385011babaecf69c166c78ca8a.jpg",description:"Describe your image here",width:750,height:1e3}]},props:{type:"CollageProperties",metaData:{schemaVersion:"1.0"},font:"arial",alignText:"center",textMode:"titleOnly",galleryImageOnClickAction:"zoomMode",minImageSize:1,maxImageSize:3,margin:5,fitToScreenWidth:!1,showNavButtons:!0,orientation:"vertical",layoutSeed:50,numOfCells:5,textColor:"#2F2E2E",alphaTextColor:"1",descriptionColor:"#605E5E",alphaDescriptionColor:"1",backgroundMouseoverColor:"#FFFFFF",alphaBackgroundMouseoverColor:"0.7"},style:{componentClassName:"tpa.viewer.components.Collage",pageId:"",compId:"i6rzzs7n",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_15",color2:"color_14",color3:"color_11",color4:"color_15",color5:"color_15",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"0.7"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPACollageSkin"}},"wysiwyg.viewer.components.documentmedia.DocumentMedia":{layout:{width:70,height:90},componentType:"wysiwyg.viewer.components.documentmedia.DocumentMedia",data:{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Document Title",uri:"https://static.parastorage.com/services/skins/2.1144.0/images/wysiwyg/core/themes/editor_web/add_image_thumb.png",width:0,height:0,alt:"",link:{type:"DocumentLink"}},props:{type:"DocumentMediaProperties",metaData:{schemaVersion:"1.0"},showTitle:!0},style:"dm1"},"wysiwyg.viewer.components.WFacebookComment":{layout:{width:555,height:116},componentType:"wysiwyg.viewer.components.WFacebookComment",props:{type:"WFacebookCommentProperties",metaData:{schemaVersion:"1.0"},numPosts:2,width:555,colorScheme:"light",canBeShownOnAllPagesBug:!0},data:{type:"WFacebookComment",urlFormat:"hashBang"},style:"fbc1"},"wysiwyg.common.components.disquscomments.viewer.DisqusComments":{type:"Component",skin:"wysiwyg.common.components.disquscomments.viewer.skins.DisqusCommentsSkin",layout:{width:500,height:325,x:0,y:1,scale:1,rotationInDegrees:0},componentType:"wysiwyg.common.components.disquscomments.viewer.DisqusComments",data:{type:"DisqusComments",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},disqusId:""},style:"disq2"},"wysiwyg.viewer.components.FacebookShare":{layout:{width:71,height:30,rotationInDegrees:0,scale:1,fixedPosition:!1},componentType:"wysiwyg.viewer.components.FacebookShare",data:{type:"FacebookShareButton",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},urlChoice:"Current page",urlFormat:"hashBang",label:"Share"},skin:"skins.viewer.facebookshare.FacebookShareSkin",style:"fs1"},"wysiwyg.viewer.components.WFacebookLike":{layout:{width:250,height:40},data:{type:"WFacebookLike",urlFormat:"hashBang"},componentType:"wysiwyg.viewer.components.WFacebookLike",style:"fbl1"},"wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox":{layout:{width:280,height:575},componentType:"wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox",data:{type:"FacebookLikeBox",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},facebookPageId:"wix",colorScheme:"light",showFaces:!0,showStream:!0,showBorder:!0,showHeader:!0},props:{type:"FacebookLikeBoxProperties",metaData:{schemaVersion:"1.0"},transparentBg:!1},style:"FacebookLikeBox_1"},"wysiwyg.viewer.components.FlashComponent":{layout:{width:128,height:128},componentType:"wysiwyg.viewer.components.FlashComponent",data:{type:"LinkableFlashComponent",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},uri:"",placeHolderImage:{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Default Flash",uri:"7ff659c252dfd1ca5c76533695cb9611.wix_mp",description:"Some description here",width:128,height:128,alt:""}},props:{type:"FlashComponentProperties",metaData:{schemaVersion:"1.0"},displayMode:"original"},style:"swf1"},"tpa.viewer.components.Freestyle":{layout:{width:602,height:600},componentType:"tpa.viewer.components.Freestyle",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525}]},props:{type:"FreestyleProperties",metaData:{schemaVersion:"1.0"},galleryImageOnClickAction:"zoomMode",layoutSeed:50,cropAndFitStage:"fit",imageDecoration:"none",borderWidth:3,orientation:"horizontal",applyRotationInLayout:!0,borderColor:"#2F2E2E",alphaBorderColor:"1"},style:{componentClassName:"tpa.viewer.components.Freestyle",pageId:"",compId:"i6s02gma",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_15",color2:"color_15",color3:"color_15",color4:"color_15",color5:"color_15",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"1"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAFreestyleSkin"}},"wysiwyg.viewer.components.WGooglePlusOne":{layout:{width:250,height:24},componentType:"wysiwyg.viewer.components.WGooglePlusOne",style:"gp1"},"wysiwyg.viewer.components.GoogleMap":{layout:{width:500,height:400},componentType:"wysiwyg.viewer.components.GoogleMap",style:"gm1"},"wysiwyg.viewer.components.MatrixGallery":{layout:{width:675,height:712},componentType:"wysiwyg.viewer.components.MatrixGallery",style:"mg1"},"tpa.viewer.components.Honeycomb":{layout:{width:550,height:271},componentType:"tpa.viewer.components.Honeycomb",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Almond Tree Flowers",uri:"7b45bb77d4727e68f365c65043b64a97.jpg",description:"",width:800,height:594},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Autumn Leaves",uri:"acd902b0f9d63e266ef47931afefa885.jpg",description:"",width:1e3,height:673},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Berry Branches",uri:"905004d09ba3b477e9ea48cb2d33ceac.jpg",description:"",width:2294,height:1524},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Echinacea Coneflowers",uri:"dfb23621c1d676831ce35d50b279d1be.jpg",description:"",width:555,height:580},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fresh Herbs Close Up",uri:"9f5b9d38ec87d4d03d8ee8159af4d307.jpg",description:"",width:600,height:900},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"",width:700,height:525},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lush Plants",uri:"7b181c91a72e6c368bb017f85b2f25f4.jpg",description:"",width:1e3,height:1500},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Open Field",uri:"dfcee47a2e2936abb046c3fa6c603ed2.jpg",description:"",width:700,height:814},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tropical Berries close Up",uri:"e6ab3aad737f5a6e8ddbe92567e164e5.jpg",description:"",width:803,height:1e3},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Stalks of Wheat",uri:"d30a81385011babaecf69c166c78ca8a.jpg",description:"",width:750,height:1e3}]},props:{type:"HoneycombProperties",metaData:{schemaVersion:"1.0"},expandEnabled:!1,galleryImageOnClickAction:"zoomMode",font:"arial",alignText:"left",textMode:"titleAndDescription",margin:1,numOfColumns:4,layoutSeed:50,rolloverAnimation:"colorOnly",imageShape:"hexagon",imageScale:"x1",textColor:"#30BDFF",alphaTextColor:"1",descriptionColor:"#FFFFFF",alphaDescriptionColor:"1",textBackgroundColor:"#2F2E2E",alphaTextBackgroundColor:"1",backgroundMouseoverColor:"#FFFFFF",alphaBackgroundMouseoverColor:"0.7",holesColor:"#FFFFFF",alphaHolesColor:"1"},style:{componentClassName:"tpa.viewer.components.Honeycomb",pageId:"",compId:"i6s04hn3",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"0.7","alpha-color5":"1",color1:"color_18",color2:"color_1",color3:"color_15",color4:"color_11",color5:"color_11",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"1"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAHoneycombSkin"}},"wysiwyg.viewer.components.HtmlComponent":{layout:{width:200,height:200},componentType:"wysiwyg.viewer.components.HtmlComponent",data:{type:"HtmlComponent",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},url:"",sourceType:"external",freezeFrame:!1},style:"htco1"},"tpa.viewer.components.Impress":{layout:{width:980,height:390},componentType:"tpa.viewer.components.Impress",data:{type:"ImageList",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600,alt:""},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525,alt:""}]},props:{type:"ImpressProperties",metaData:{schemaVersion:"1.0"},font:"arial",textMode:"titleAndDescription",alignText:"left",autoplayInterval:5,autoplay:!1,galleryImageOnClickAction:"zoomMode",cropAndFitStage:"crop",transition:"random",showPagination:!0,bcgColor1:"#A0A09F",alphaBcgColor1:"1",bcgColor2:"#30BDFF",alphaBcgColor2:"1",bcgColor3:"#41BAAE",alphaBcgColor3:"1",bcgColor4:"#DE5021",alphaBcgColor4:"1",bcgColor5:"#DEC328",alphaBcgColor5:"1",textColor:"#BAE9FF",alphaTextColor:"1",descriptionColor:"#FFFFFF",alphaDescriptionColor:"1",textBackgroundColor:"#605E5E",alphaTextBackgroundColor:"1"},style:{componentClassName:"tpa.viewer.components.Impress",pageId:"",compId:"i6s05c77",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1","alpha-color6":"1","alpha-color7":"1","alpha-color8":"1",color1:"color_13",color2:"color_18",color3:"color_23",color4:"color_28",color5:"color_33",color6:"color_16",color7:"color_1",color8:"color_14","alpha-color1":"1","alpha-color2":"1","alpha-color3":"1"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",color6:"theme",color7:"theme",color8:"theme"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAImpressSkin"}},"wysiwyg.viewer.components.ItunesButton":{layout:{width:110,height:40},componentType:"wysiwyg.viewer.components.ItunesButton",data:{type:"ItunesButton",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},downloadUrl:""},props:{type:"ItunesButtonProperties",metaData:{schemaVersion:"1.0"},language:"en",openIn:"_blank"},style:"ib1"},"tpa.viewer.components.Masonry":{layout:{width:980,height:1450},componentType:"tpa.viewer.components.Masonry",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"0bfb60ff6550b68a849ada091f254158.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.",width:800,height:1e3},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"d5281560853f147420a877b24be7daec.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.    When your visitors click on me I can expand or link to anywhere you choose.",width:800,height:536},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray Of Light",uri:"84b2ba7d33c6c76e0976354bfeb53223.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:800,height:800},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil Forest",uri:"0560932b578ed39cc5ff0d4f9b257496.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.",width:800,height:800},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom ",uri:"c18ef262eff1988801adc0c6cd9f69c2.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.    When your visitors click on me I can expand or link to anywhere you choose.",width:800,height:511},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"ae505cb9630a240ff39bd7e3a6a30e5b.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:700,height:525},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"bab38d8e951657c1122c9ef971e512b3.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.",width:800,height:800},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"bbb19657224f3880b7af258ffe1329ec.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.  I'm a great way to display many images along with text to describe them.    When your visitors click on me I can expand or link to anywhere you choose.",width:800,height:532},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"e216a94ff6d1a540dc14ee2f4beda3be.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:800,height:1067}]},props:{type:"MasonryProperties",metaData:{schemaVersion:"1.0"},font:"arial",galleryImageOnClickAction:"zoomMode",numCols:3,margin:25,textMode:"titleAndDescription",alignText:"left",boxShadowIsOn:!0,boxShadow:"0 1px 3px 0 rgba(0,0,0,0.33)",textColor:"#000000",alphaTextColor:"1",descriptionColor:"#000000",alphaDescriptionColor:"1",textBackgroundColor:"#ffffff",alphaTextBackgroundColor:"1",backgroundMouseoverColor:"#000000",alphaBackgroundMouseoverColor:"0.4",textButtonColor:"#2F2E2E",alphaTextButtonColor:"1"},style:{componentClassName:"tpa.viewer.components.Masonry",pageId:"",compId:"i6s06d18",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"0.4","alpha-color5":"1",color1:"#000000",color2:"#000000",color3:"#ffffff",color4:"#000000",color5:"color_15",version:"2","alpha-color1":"1","alpha-color2":"1","alpha-color3":"1"},propertiesSource:{color1:"value",color2:"value",color3:"value",color4:"value",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAMasonrySkin"}},"wysiwyg.viewer.components.LoginButton":{layout:{width:190,height:46},componentType:"wysiwyg.viewer.components.LoginButton",data:{type:"LoginButton",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},language:"en"},style:"lgn0"},"wysiwyg.viewer.components.PayPalButton":{layout:{width:170,height:47},componentType:"wysiwyg.viewer.components.PayPalButton",data:{type:"PayPalButton",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},merchantID:""},props:{type:"PayPalButtonProperties",metaData:{schemaVersion:"1.0"},buttonType:"buy",itemName:"",itemID:"",organizationName:"",organizationID:"",amount:"",currencyCode:"USD",target:"_blank",showCreditCards:!0,smallButton:!1},style:"ppb0"},"wysiwyg.viewer.components.PinterestFollow":{layout:{width:40,height:20},componentType:"wysiwyg.viewer.components.PinterestFollow",data:{type:"PinterestFollow",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},urlChoice:"www.pinterest.com/wixcom/",label:"Pinterest"},style:"pf1"},"wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt":{layout:{width:40,height:20},componentType:"wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt",data:{type:"PinterestPinIt",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},uri:"",urlFormat:"hashBang",description:"Check it out!"},props:{type:"PinterestPinItProperties",metaData:{schemaVersion:"1.0"},size:"small",color:"gray",counterPosition:"none"},style:"PinterestPinIt_1"},"wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget":{layout:{width:237,height:377,x:385,y:6358},componentType:"wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget",data:{type:"PinItPinWidget",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},pinId:"http://www.pinterest.com/pin/204421270560540859/"},style:"PinItPinWidget_1"},"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer":{layout:{width:280,height:68},componentType:"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer",style:"SingleAudioPlayer_1"},"wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton":{layout:{width:56,height:24},componentType:"wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton",data:{type:"SkypeCallButton",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},skypeName:"",buttonType:"call"},props:{type:"SkypeCallButtonProperties",metaData:{schemaVersion:"1.0"},imageSize:"medium",imageColor:"blue"},style:"SkypeCallButton_1"},"wysiwyg.viewer.components.SliderGallery":{layout:{width:480,height:160},componentType:"wysiwyg.viewer.components.SliderGallery",style:"sg1"},"wysiwyg.viewer.components.SlideShowGallery":{layout:{width:480,height:360},componentType:"wysiwyg.viewer.components.SlideShowGallery",style:"ssg1"},"wysiwyg.viewer.components.LinkBar":{layout:{width:105,height:30},componentType:"wysiwyg.viewer.components.LinkBar",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Wix Facebook page",uri:"b1cd13f9d4dfb1450bbb325285106177.png",width:128,height:128,alt:"",link:{type:"ExternalLink",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},url:"https://www.facebook.com/wix",target:"_blank"}},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Wix Twitter page",uri:"01113281ebb7dfb57a8dc2a02eb1cb92.png",width:128,height:128,alt:"",link:{type:"ExternalLink",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},url:"http://www.twitter.com/wix",target:"_blank"}},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Wix Google+ page",uri:"806f5f56d9a7b8849f2f2ea71ff5c0cc.png",width:128,height:128,alt:"",link:{type:"ExternalLink",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},url:"https://plus.google.com/117167403531518744294/posts",target:"_blank"}}]},props:{type:"LinkBarProperties",metaData:{schemaVersion:"1.0"},gallery:"social_icons",iconSize:30,spacing:5,bgScale:1,orientation:"HORIZ"},style:"lb1"},"wysiwyg.viewer.components.SoundCloudWidget":{layout:{width:482,height:171},componentType:"wysiwyg.viewer.components.SoundCloudWidget",data:{type:"SoundCloudWidget",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},url:"",showArtWork:!0,autoPlay:!1},style:"scw1"},"wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow":{layout:{width:300,height:56},componentType:"wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow",data:{type:"SpotifyFollow",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},uri:""},props:{type:"SpotifyFollowProperties",metaData:{schemaVersion:"1.0"},size:"large",theme:"light",showFollowersCount:!0},style:"SpotifyFollow_1"},"wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer":{layout:{width:250,height:82},componentType:"wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer",data:{type:"SpotifyPlayer",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},uri:""},props:{type:"SpotifyPlayerProperties",metaData:{schemaVersion:"1.0"},size:"compact",color:"black",style:"list"},style:"SpotifyPlayer_1"},"tpa.viewer.components.StripShowcase":{layout:{width:500,height:500},componentType:"tpa.viewer.components.StripShowcase",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Almond Tree Flowers",uri:"7b45bb77d4727e68f365c65043b64a97.jpg",description:"Describe your image here",width:800,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Autumn Leaves",uri:"acd902b0f9d63e266ef47931afefa885.jpg",description:"Describe your image here",width:1e3,height:673},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Berry Branches",uri:"905004d09ba3b477e9ea48cb2d33ceac.jpg",description:"Describe your image here",width:2294,height:1524},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dramatic Dew Drops",uri:"e216a94ff6d1a540dc14ee2f4beda3be.jpg",description:"Describe your image here",width:800,height:1067},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Echinacea Coneflowers",uri:"dfb23621c1d676831ce35d50b279d1be.jpg",description:"Describe your image here",width:555,height:580},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fresh Herbs Close Up",uri:"9f5b9d38ec87d4d03d8ee8159af4d307.jpg",description:"Describe your image here",width:600,height:900},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lush Plants",uri:"7b181c91a72e6c368bb017f85b2f25f4.jpg",description:"Describe your image here",width:1e3,height:1500},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Open Field",uri:"dfcee47a2e2936abb046c3fa6c603ed2.jpg",description:"Describe your image here",width:700,height:814},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Raindrops on Window",uri:"e5433a67390ddeb83e13ebda5ddade7d.jpg",description:"Describe your image here",width:532,height:800},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tropical Berries Close Up",uri:"e6ab3aad737f5a6e8ddbe92567e164e5.jpg",description:"Describe your image here",width:803,height:1e3},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Stalks of Wheat",uri:"d30a81385011babaecf69c166c78ca8a.jpg",description:"Describe your image here",width:750,height:1e3}]},props:{type:"StripShowcaseProperties",metaData:{schemaVersion:"1.0"},galleryImageOnClickAction:"disabled",cropAndFitStage:"fit",imageScale:"4:3",imageMargin:5,showThumbnails:!0,thumbsScale:"4:3",thumbsMargin:5,autoplay:!1,autoplayInterval:5,arrowMode:!1},style:{componentClassName:"tpa.viewer.components.StripShowcase",pageId:"",compId:"i6s28d55",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_1",color2:"color_15",color3:"color_15",color4:"color_15",color5:"color_15",version:"1","alpha-color1":"0.5","alpha-color2":"1","alpha-color3":"1"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAStripShowcaseSkin"}},"tpa.viewer.components.StripSlideshow":{layout:{width:500,height:500},componentType:"tpa.viewer.components.StripSlideshow",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"27f904ad057a38ab22a806fba8051170.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:2560,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"632212ab58f9280a24539800cf453443.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:2560,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"f1aba941244eda43f8ed7116ab2a98d4.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:2560,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lily Pond",uri:"60562c9106f4ca8ba07bb4d430935993.jpg",description:"Describe your image here.  Click me and then 'Organize Images' to change my text.",width:2560,height:600}]},props:{type:"StripSlideshowProperties",metaData:{schemaVersion:"1.0"},font:"arial",textMode:"titleAndDescription",alignText:"left",autoplayInterval:5,autoplay:!1,transDuration:1,transition:"scroll",titleColor:"#30BDFF",alphaTitleColor:"1",descriptionColor:"#2F2E2E",alphaDescriptionColor:"1",backgroundColor:"#FFFFFF",alphaBackgroundColor:"0.75"},style:{componentClassName:"tpa.viewer.components.StripSlideshow",pageId:"",compId:"i6s2b7bp",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_18",color2:"color_15",color3:"color_11",color4:"color_15",color5:"color_15",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"0.75"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAStripSlideshowSkin"}},"tpa.viewer.components.Thumbnails":{layout:{width:980,height:500},componentType:"tpa.viewer.components.Thumbnails",data:{type:"ImageList",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},items:[{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Cherry Blossom",uri:"3dcc6f56be1f8507181d0197e52d09e8.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Ray of Light",uri:"8fed9ef13904fb85b6b12092c269a465.jpg",description:"Describe your image here",width:750,height:563},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Bloom",uri:"24bba47f40f8473a534ae0301bf748c9.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Dew",uri:"8dde68848c4daae3a6905dc6a17d270e.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Tranquil forest",uri:"568544c06dafc9d2ab6f4f4496e7d7b9.jpg",description:"Describe your image here",width:800,height:600},{type:"Image",metaData:{isPreset:!1,schemaVersion:"2.0",isHidden:!1},title:"Lilly Pond",uri:"a3ae91861f93fde1b8917291180c5fe0.jpg",description:"Describe your image here",width:700,height:525}]},props:{type:"ThumbnailsProperties",metaData:{schemaVersion:"1.0"},font:"arial",cropAndFitStage:"crop",componentScale:"4:3",margin:5,textMode:"titleAndDescription",arrowMode:!0,alignText:"left",autoplayInterval:5,autoplay:!1,transDuration:1,transition:"crossFade",thumbnailsGravity:"bottom",galleryImageOnClickAction:"disabled",textColor:"#FFFFFF",alphaTextColor:"1",descriptionColor:"#FFFFFF",alphaDescriptionColor:"1",textBackgroundColor:"#2F2E2E",alphaTextBackgroundColor:"0.6"},style:{componentClassName:"tpa.viewer.components.Thumbnails",pageId:"",compId:"i6s2bmjp",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-color4":"1","alpha-color5":"1",color1:"color_11",color2:"color_11",color3:"color_15",color4:"color_15",color5:"color_15",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"0.6"},propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAThumbnailsSkin"}},"wysiwyg.viewer.components.WTwitterFollow":{layout:{width:183,height:22},componentType:"wysiwyg.viewer.components.WTwitterFollow",data:{type:"TwitterFollow",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},accountToFollow:"wix"},props:{type:"WTwitterFollowProperties",metaData:{schemaVersion:"1.0"},showCount:!0,width:100,dataLang:"en",showScreenName:!0},style:"tf1"},"wysiwyg.viewer.components.WTwitterTweet":{layout:{width:100,height:20},componentType:"wysiwyg.viewer.components.WTwitterTweet",data:{type:"TwitterTweet",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},defaultText:"",urlFormat:"hashBang",accountToFollow:""},style:"twt1"},"wysiwyg.viewer.components.Video":{layout:{width:480,height:360},componentType:"wysiwyg.viewer.components.Video",style:"v1"},"wysiwyg.viewer.components.VKShareButton":{layout:{width:100,height:21},componentType:"wysiwyg.viewer.components.VKShareButton",data:{type:"VKShareButton",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},style:"Button",urlFormat:"hashBang",text:"Share"},props:{type:"VKShareProperties",metaData:{schemaVersion:"1.0"},rightAngles:!1},style:"vks1"},"wysiwyg.viewer.components.ContactForm":{layout:{width:480,height:180},componentType:"wysiwyg.viewer.components.ContactForm",style:"cf1"},"wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton":{layout:{width:212,height:55},componentType:"wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton",data:{type:"YouTubeSubscribeButton",metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},youtubeChannelId:"wix"},props:{type:"YouTubeSubscribeButtonProperties",metaData:{schemaVersion:"1.0"},layout:"full",theme:"light"},style:"YouTubeSubscribeButton_1"}}}),define("tpa/componentsData/componentsDefaultData",["lodash","tpa/componentsData/componentsDefaultData.json"],function(e,t){return{getComponentDefaultData:function(a){return e.cloneDeep(t[a])||{}}}}),define("tpa/componentsData/componentsDefaultDataGenerator",["lodash","jquery","baseUI","bluebird","tpa/componentsData/addCompKeyToCompTypeMap","tpa/componentsData/componentsDefaultData"],function(e,t,a,i,n,o){function r(e){var i=e.documentServices.siteSegments.getPagesContainer(),n=e.documentServices.siteSegments.layout.get(i);return{x:n.width/2,y:t(window).scrollTop()+window.innerHeight/2-n.y-a.uiConstants.TOPBAR_HEIGHT}}function s(t,a){var i={};return e.forIn(a,function(a,n){e.includes(["width","height"],n)&&(i[n]=t?t.stageLayout?t.stageLayout[n]:t.panelLayout[n]:a)}),i}function p(e,t){var a=r(e);return{x:a.x-t.width/2,y:a.y-t.height/2}}function d(t){var a=t&&t.data,i=e.merge({},e.omit(a,"id"),t.stageData);return e.isEmpty(i)?null:i}return{getComponentDefinition:function(t,a){var r=n.getCompType(a.compType),l=o.getComponentDefaultData(r);return new i(function(a){require(["addPanelInfra"],function(i){var n=i.componentsDefaultData.getComponentDefault(r);n&&(l.layout=s(n,l.layout),l.data=d(n)||l.data,l.props=n.props||l.props);var o=p(t,l.layout);e.merge(l.layout,o),l.type="Component",a(l)})})}}}),define("tpa/appMarket/appMarketHandlers",["lodash","blog","experiment","tpa/appMarket/services/appMarketTabService","tpa/appMarket/utils/appMarketUtils","tpa/services/pendingAppsService","tpa/services/navigateAndOpenAppService","tpa/componentsData/componentsDefaultDataGenerator","tpa/utils/tpaUtils","tpa/constants/constants","tpa/bi/bi","tpa/services/tpaAddAppService","tpa/services/tpaAlertsService","tpa/settings/settings","tpa/superApps/superApps","tpa/packagePicker/packagePicker"],function(e,t,a,i,n,o,r,s,p,d,l,c,g,m,u,h){function y(t){return"ADD_PANEL"===e.get(t,"params.biData.referral_info")?d.BI.initiator.EDITOR:d.BI.initiator.APP_MARKET}var f=function(e){n.closeAppMarketModal(e.panelManager.closePanelByName,"appMarketPermissionsModal")},P=function(e){n.closeAppMarketModal(e.panelManager.closePanelByName,"appMarketAppModal")},v=function(e,t){var a=e.documentServices.tpa.app.getDataByAppDefId(t);a&&(e.documentServices.tpa.app.hasMainSection(a)?e.panelManager.openPanel("tpa.message.cannotDeleteSection",{title:"tpa_messages_oops_title",appName:a.appDefinitionName,appDefId:a.appDefinitionId},!0):e.panelManager.openPanel("tpaPanels.message.deleteTPAWidgetInstructions",{appName:a.appDefinitionName,appDefId:a.appDefinitionId},!0))};return{openMarketPopup:function(e,t,a){n.openAppMarketModalWithAppDefinitionId(e.panelManager.openPanel,"appMarketAppModal",{url:t.params.url,appDefinitionId:t.params.appDefinitionId,onClose:a})},closeMarketPopup:P,openDeletePopupMessage:function(t,a){var n=e.get(a,"params.appDefinitionId"),o=v.bind(null,t,n);i.closeAppMarketTab(t.panelManager.closePanelByName),r.navigateAndScrollToComp(t,n,o)},openTPAUpgradeModal:function(t,a){var n=e.get(a,"params.appDefinitionId"),o=e.partial(h.startUpgradeFlow,t,n,!0);i.closeAppMarketTab(t.panelManager.closePanelByName),r.navigateAndScrollToComp(t,n,o)},openModal:function(e,t){n.openAppMarketModalWithAppDefinitionId(e.panelManager.openPanel,"appMarketPermissionsModal",{url:t.params.url,appDefinitionId:t.params.appDefinitionId})},closeModal:f,openAppMarketModal:function(e,t){t.params.shouldTranslateTitle=void 0!==t.params.shouldTranslateTitle&&t.params.shouldTranslateTitle,e.ui.focus.setOnEditor(),n.openAppMarketModal(e.panelManager.openPanel,"appMarketModal",t.params)},closeAppMarketModal:function(e,t){n.closeAppMarketModalById(e,t.params.id)},closeAppMarket:function(e){n.closeAppMarket(e.panelManager.closePanelByName)},openAppMarketHelp:function(e){n.openAppMarketHelp(e)},addComponentToSite:function(e,t){var a=t.params,n=a&&a.pageId||e.documentServices.pages.getFocusedPageId(),o=e.documentServices.pages.getReference(n);s.getComponentDefinition(e,a).then(function(t){e.components.add(o,t,void 0,function(t){e.selection.selectComponentByCompRef(t),e.history.add("add component from app market"),p.bi.reportAddComponentBIEvent(e,t.id,a.type,a.biData)}),i.closeAppMarketTab(e.panelManager.closePanelByName)})},getUserDetails:function(e,t,a){var i=e.documentServices.generalInfo.getUserInfo();a(i&&i.name||"")},getPendingAppsList:function(e,t,a){a(o.getPendingApps(e))},addAppToSite:function(t,n){var o=e.get(n,"params.appDefinitionDataObj"),r=e.get(o,"appDefinitionId"),s=n.params.widgetId,d=t.documentServices.pages.getFocusedPageId(),l=t.documentServices.tpa.app.getDataByAppDefId(r),u=n.params.biData,h=n.params.is_permissions_app;if(n.params.provision_demo_app){var v=function(){m.open(t,t.selection.getSelectedComponents()),p.bi.reportTpaAddedBiEvent(t,r,s,d,null,!0,h,u,!0)},_=function(){g.openProvisionFailedAlert(t.panelManager.openPanel,r)};a.isOpen("se_tpaProvisionOnAdd")?t.saveManager.saveInBackground(v,_):t.documentServices.tpa.provision.provisionAppDemoSave(l.applicationId,v,_)}else{var I=n.params.type,S=y(n),A=e.get(o,"appName"),w={widgetId:s,showPageAddedPanel:!e.get(o,"doNotShowPageAddedPanel"),x:n.params.x,y:n.params.y,shouldNavigate:!0};c.addApp(t,r,A,l,I,S,h,u,w)}f(t),P(t),i.closeAppMarketTab(t.panelManager.closePanelByName)},appIsInstalled:function(t,a,i){var n=e.get(a,"params.appDefinitionId"),o=e.get(a,"params.includingDemoMode");i(c.isAppInstalled(t,n,o))},removePendingApp:function(e,t){o.dismiss(e,t.params.id)},addPendingApp:function(e,t){o.add(e,t.params.id)},save:function(e,t,a){e.documentServices.generalInfo.isFirstSave()?e.saveManager.saveInBackground(function(){a({response:"success",metaSiteId:e.documentServices.generalInfo.getMetaSiteId()})},function(){g.openSaveFailedAlertForAppMarket(e),a({response:"site was not saved."})}):a({response:"success",metaSiteId:e.documentServices.generalInfo.getMetaSiteId()})},openApp:function(t,a){var n=e.get(a,"params.appDefinitionId");p.bi.reportBIOnAppIntent(t,l.events.APP_INTENT,n,d.BI.initiator.EDITOR,d.BI.type.OPENAPP_SETTINGS),i.closeAppMarketTab(t.panelManager.closePanelByName),r.navigateAndOpenSettingsForAppDefId(t,n)},setAppMarketState:function(t,a){var i=e.get(a,"params.state","");n.setAppMarketSessionUserPrefs(t,{state:i})},isDevMode:function(e,t,a){a({isDevMode:p.isInDevMode()})}}}),define("tpa/appMarket/utils/appMarketPostMessageUtils",["tpa/common/editorTPAPostMessageCommon","util"],function(e,t){var a={OPEN_MARKET_POPUP:"openMarketPopup",CLOSE_MARKET_POPUP:"closeMarketPopup",OPEN_MODAL:"openModal",CLOSE_MODAL:"closeModal",ADD_APP_TO_SITE:"addAppToSite",ADD_COMPONENT_TO_SITE:"addComponentToSite",GET_USER_DETAILS:"getUserDetails",GET_PENDING_APPS_LIST:"getPendingAppsList",APP_IS_INSTALLED:"appIsInstalled",REMOVE_PENDING_APP:"removePendingApp",ADD_PENDING_APP:"addPendingApp",OPEN_APP_MARKET_MODAL:"openAppMarketModal",CLOSE_APP_MARKET_MODAL:"closeAppMarketModal",CLOSE_APP_MARKET:"closeAppMarket",OPEN_APP_MARKET_HELP:"openAppMarketHelp",SAVE:"save",OPEN_APP:"openApp",SET_APP_MARKET_STATE:"setAppMarketState",IS_DEV_MODE:"isDevMode",OPEN_DELETE_POPUP_MESSAGE:"openDeletePopupMessage",OPEN_TPA_UPGRADE_MODAL:"openTPAUpgradeModal"},i=t.serviceTopology.htmlEditorRootUrl?t.serviceTopology.htmlEditorRootUrl.replace(/html\/editor\/?/,""):"http://editor.wix.com/",n=function(e){return!!o(e)},o=function(e){return a[e]};return{getMethodName:o,isAppMarketMessage:function(e){return"APP_MARKET"===e},shouldHandleMessage:n,sendOnOpenEvent:function(t){var a={eventType:"ON_MARKET_OPEN"};e.callPostMessage(t,a,i)},sendMessageToAppMarket:function(t,a,n){var o={eventType:"ON_COMMAND_RESPONSE",callerId:a,params:n};e.callPostMessage(t,o,i)}}}),define("tpa/appMarket/services/appMarketPostMessageService",["lodash","core","tpa/appMarket/appMarketHandlers","tpa/appMarket/utils/appMarketPostMessageUtils"],function(e,t,a,i){var n=function(e,t,n){var o=i.getMethodName(t.cmd);a[o].apply(this,[e,t,n])},o=function(e,t){var a;try{t.data?a=JSON.parse(t.data):t.originalEvent&&t.originalEvent.data&&(t=t.originalEvent,a=JSON.parse(t.data))}catch(e){return}a&&i.isAppMarketMessage(a.intent)&&i.shouldHandleMessage(a.cmd)&&n(e,a,r(t.source,a))},r=function(e,t){return function(a){i.sendMessageToAppMarket(e,t.id,a)}};return{init:function(e){window.addEventListener("message",o.bind(this,e),!1)},callHandler:n,handleAppMarketMessage:o}}),define("tpa/services/tpaCompNameService",["lodash"],function(e){return{getCompName:function(t,a){var i=t.components.data.get(a),n=t.documentServices.tpa.app.getData(i.applicationId),o=t.documentServices.tpa.appMarket.getData(n.appDefinitionId);if(o){var r=e.find(o.widgets,{widgetId:i.widgetId});return r?r.title:o.name}return n.appDefinitionName}}}),define("tpa/settings/frames/tpaSettingsPanelFrameSimple.rt",["react","lodash","symbols","baseUI","baseUILib"],function(e,t,a,i,n){return function(){function a(e){this.startDrag(e,this.getDragLimits())}return e.createElement("div",function(e,a){var i=t.assign({},e,a);return e.hasOwnProperty("style")&&(i.style=t.defaults(i.style,e.style)),e.hasOwnProperty("className")&&a.hasOwnProperty("className")&&(i.className=a.className+" "+e.className),i}({className:"tpa-settings-panel-frame"},this.getPanelProps()),e.createElement(n.PanelHeader,{className:"dragger dark",onMouseDown:a.bind(this),onHelp:this.props.openHelpCenter,onClose:this.props.close},e.createElement("span",{},this.props.title)),this.props.shouldAddScroll?e.createElement(n.CustomScroll,{key:"549"},e.createElement("div",{className:"content",style:this.getContentStyle()},this.props.children)):null,this.props.shouldAddScroll?null:e.createElement("div",{className:"content",style:this.getContentStyle(),key:"733"},this.props.children))}}),define("tpa/settings/frames/tpaSettingsPanelFrameSimple",["lodash","react","core","util","panels","constants","tpa/settings/frames/tpaSettingsPanelFrameSimple.rt"],function(e,t,a,i,n,o,r){return t.createClass({displayName:o.PANEL_TYPES.TPA_SETTINGS,mixins:[i.draggableMixin,n.mixins.panelDragLimitsMixin,a.mixins.editorAPIMixin],propTypes:{panelName:t.PropTypes.string.isRequired,title:t.PropTypes.string.isRequired,width:t.PropTypes.number,height:t.PropTypes.number,top:t.PropTypes.string,left:t.PropTypes.string,onHelpClicked:t.PropTypes.func,shouldAddScroll:t.PropTypes.bool.isRequired},getInitialState:function(){return{showHelp:!1}},getPanelProps:function(){var t=["width","top","left"],a={};return e.forEach(t,e.bind(function(e){this.props[e]&&(a[e]=this.props[e])},this)),e({style:a}).defaults(this.props).omit("children","top","left").value()},toggleHelp:function(){var e=!this.state.showHelp;this.setState({showHelp:e})},getContentStyle:function(){return{height:e.isNumber(this.props.height)?this.props.height+"px":"100%"}},render:r})}),define("tpa/settings/frames/tpaSettingsPanelFrame",["higherOrderComponents","tpa/settings/frames/tpaSettingsPanelFrameSimple"],function(e,t){return e.panelFrame(t)}),define("tpa/settings/compPanels/tpaSettings.rt",["react","lodash","baseUI","core","util","tpa/settings/frames/tpaSettingsPanelFrame"],function(e,t,a,i,n,o){return function(){return e.createElement(o,t.assign({},{className:t({"tpa-settings-panel-frame-padding":!this.state.isNewVersion,version2:this.state.isNewVersion}).transform(function(e,t,a){t&&e.push(a)},[]).join(" "),title:this.getAppName(),width:this.state.width,height:this.state.isNewVersion?this.state.height:null,ref:"tpaSettingsFrame",top:a.uiConstants.TOPBAR_HEIGHT+24+"px",left:"78px",onHelpClicked:this.onHelpClicked,shouldAddScroll:!this.state.isNewVersion},this.getFrameProps()),e.createElement("div",{className:t({"tpa-settings-iframe-wrapper":!0,"tpa-settings-iframe-wrapper-padding":!this.state.isNewVersion}).transform(function(e,t,a){t&&e.push(a)},[]).join(" "),style:this.getDialogStyle()},this.shouldShowPreloader()?e.createElement("div",{key:"preloader",className:"tpa-preloader"},e.createElement("div",{},e.createElement(a.preloader,{}),e.createElement("div",{className:"text"},n.translate("tpa_loading_settings"),"."))):null,this.state.overlay===this.OVERLAY_STATE.UNRESPONSIVE?e.createElement("div",{key:"unavailableMessage",className:"tpa-unresponsive"},e.createElement("header",{},e.createElement(a.symbol,{name:"alert"}),"\n                ",n.translate("tpa_oops"),"\n            "),e.createElement("div",{id:"textContainer"},e.createElement("span",{id:"text",dangerouslySetInnerHTML:{__html:this.getUnresponsiveText()}}),e.createElement("span",{id:"dismissButton",onClick:this.refs.tpaSettingsFrame.openHelpCenter},e.createElement("a",{}," ",this.getAppName()," ")),e.createElement("span",{id:"text_2",dangerouslySetInnerHTML:{__html:this.getUnresponsiveContact()}}))):null,e.createElement("iframe",{scrolling:"no",frameBorder:"0",marginHeight:"0",marginWidth:"0",className:"tpa-iframe",width:"100%",height:this.getIframeHeight(),id:"tpaSettingsFrame",src:this.state.url})))}}),define("tpa/common/withOnCloseMessage",["react","core"],function(e,t){return function(a){var i=e.createClass({mixins:[t.mixins.editorAPIMixin],displayName:"closeMessageWrapperFor-"+a.displayName,propTypes:{onClose:e.PropTypes.func,shouldCloseModal:e.PropTypes.bool,closeModalMessage:e.PropTypes.any,panelName:e.PropTypes.string.isRequired},componentWillUnmount:function(){this.props.onClose&&this.props.onClose(this.props.closeModalMessage)},componentWillReceiveProps:function(e){e.shouldCloseModal&&this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},render:function(){return e.createElement(a,this.props)}});return i._BaseClass=a,i}}),define("tpa/settings/compPanels/tpaSettings",["lodash","react","jquery","core","compPanels","tpa/bi/bi","util","tpa/utils/tpaUtils","tpa/services/tpaCompNameService","tpa/services/tpaHelpService","tpa/services/tpaAlertsService","tpa/settings/compPanels/tpaSettings.rt","tpa/constants/constants","tpa/common/withOnCloseMessage","experiment"],function(e,t,a,i,n,o,r,s,p,d,l,c,g,m,u){function h(e,t){return t=parseInt(t,10),e?Math.min(y,t):t}var y=528;return m(t.createClass({ALIVE_TIMEOUT:2e4,STYLES_READY_SDK_VERSION:"1.64.0",OVERLAY_STATE:{PRELOADER:"preloader",UNRESPONSIVE:"unresponsive",NONE:"none"},mixins:[n.compPanelMixin],displayName:"TPASettings",propTypes:{width:t.PropTypes.string},getDefaultProps:function(){return{panelName:"tpa.compPanels.tpaSettings"}},getInitialState:function(){var t=this.getEditorAPI();this.selectedComponent=e.isArray(this.props.selectedComponent)?this.props.selectedComponent[0]:this.props.selectedComponent,this.data=t.components.data.get(this.selectedComponent),this.appData=t.documentServices.tpa.app.getData(this.data.applicationId),this.maxScreenHeight=a(window).height()-126;var i=!!this.props.isNewVersion;if(this.helpId="",this.appDataIsValid()){var n=this.getContentSize(i);return{url:!0!==this.appData.demoMode||u.isOpen("se_tpaProvisionOnAdd")?this.getUrl():void 0,width:this.props.width||n.width,height:n.height,overlay:this.OVERLAY_STATE.PRELOADER,isNewVersion:i}}return{width:400,height:200}},appDataIsValid:function(){return!(e.isArray(this.appData)&&0===e.size(this.appData)||e.isObject(this.appData)&&e.isEmpty(this.appData))},componentDidMount:function(){var t=this.getEditorAPI();if(this.isAppReady(this.props)||(this._appAliveTimeout=window.setTimeout(this.onAppAliveTimeoutExpires,this.ALIVE_TIMEOUT)),t.leftBar.collapseMenu(),this.appDataIsValid()){if(u.isOpen("se_tpaProvisionOnAdd")&&this.appData.notProvisioned)t.saveManager.saveInBackground(e.noop,e.partial(l.openProvisionFailedAlert,t.panelManager.openPanel,this.appData.appDefinitionId));else if(this.appData.demoMode){var a=function(){this.appData=t.documentServices.tpa.app.getData(this.data.applicationId),this.setState({url:this.getUrl()}),this.reportTpaAddedBiEvent(t)},i=function(){l.openProvisionFailedAlert(t.panelManager.openPanel,this.appData.appDefinitionId),this.setState({overlay:this.OVERLAY_STATE.UNRESPONSIVE})};t.documentServices.tpa.provision.provisionAppDemoSave(this.appData.applicationId,a.bind(this),i.bind(this))}}else this.setState({overlay:this.OVERLAY_STATE.UNRESPONSIVE});this.panelOpenTime=this.getTime();var n={app_id:this.appData.appDefinitionId,app_site_id:this.appData.instanceId,instance_id:this.props.origCompId};t.bi.event(o.events.TPA_OPEN_SETTINGS,n)},componentWillReceiveProps:function(t){this.helpId=e.get(t,"articleId");var a=this.getEditorAPI();a.components.is.exist(this.props.selectedComponent)||a.panelManager.closePanelByName(this.props.panelName),this.isAppReady(t)&&this.setState({overlay:this.OVERLAY_STATE.NONE})},reportTpaAddedBiEvent:function(e){var t=e.documentServices.generalInfo.isFirstSave()?e.documentServices.generalInfo.getMetaSiteId():"",a={is_permissions_app:"Wix"===this.appData.by?0:1,is_first:1,app_id:this.appData.appDefinitionId,widget_id:this.data.widgetId,app_site_id:this.appData.instanceId,instance_id:this.props.origCompId,category:"",section:"",search_term:"",item_position:"",referral_info_category:"",referral_info:"",template_guid:t,modal_tab_name:"",origin:"template_provision",adding_method:"template",page_id:e.documentServices.pages.getFocusedPageId()};e.bi.event(o.events.TPA_ADDED,a)},getContentSize:function(e){var t=this.isSection()?this.appData.widgets[this.data.widgetId].settings:this.appData.sectionSettings;return{height:h(e,t.height),width:parseInt(t.width,10)}},isSection:function(){return this.appData.widgets&&this.data.widgetId},getUrl:function(){var e=this.getEditorAPI(),t=this.data.widgetId||e.documentServices.tpa.app.getMainSectionWidgetData(this.appData).widgetId;return e.documentServices.tpa.app.url.getSettingsUrl(this.appData.applicationId,t,this.props.origCompId,{width:this.props.width,isNewVersion:this.props.isNewVersion,bi:s.bi.getAppIntentBiParamsToAddToUrl(e,this.appData.appDefinitionId,g.BI.type.GFPP_SETTINGS)})},getDialogStyle:function(){var t="100%";return this.state.isNewVersion||(t=this.state.overlay===this.OVERLAY_STATE.NONE?"100%":e.min([this.maxScreenHeight,this.state.height])),{height:t,position:"relative"}},getIframeHeight:function(){return this.state.isNewVersion?"100%":this.state.height},onAppAliveTimeoutExpires:function(){this.showUnresponsiveOverlay()},showUnresponsiveOverlay:function(){this.isAppReady(this.props)?(this.clearAliveTimeout(),this.setState({overlay:this.OVERLAY_STATE.NONE})):(this.reportBIAppNotResponsive(),this.setState({overlay:this.OVERLAY_STATE.UNRESPONSIVE}))},reportBIAppNotResponsive:function(){var t=this.getEditorAPI(),a=this.data.widgetId?e.get(this.appData.widgets,this.data.widgetId):t.documentServices.tpa.app.getMainSectionWidgetDataFromApplicationId(this.data.applicationId),i={endpoint:e.get(a,"settings.url"),app_id:this.appData.appDefinitionId};t.documentServices.bi.error(o.errors.APP_IS_NOT_RESPONSIVE,i)},getTime:function(){return Date.now()},sendClosePanelBI:function(){var e=this.getEditorAPI(),t=this.props.origCompId,a={app_id:this.appData.appDefinitionId,app_site_id:this.appData.instanceId,instance_id:t,seconds_opened:parseInt((this.getTime()-this.panelOpenTime)/1e3,10)};e.bi.event(o.events.TPA_CLOSE_SETTINGS,a)},componentWillUnmount:function(){this.clearAliveTimeout(),this.sendClosePanelBI()},clearAliveTimeout:function(){this._appAliveTimeout&&window.clearTimeout(this._appAliveTimeout)},isAppReady:function(t){var a=e.get(t,"sdkVersion")||this.props.sdkVersion;return s.sdkVersionIsAtLeast(a,this.STYLES_READY_SDK_VERSION)?this.shouldShowSettingsPanelFromStyleReadyEvent(t):this.shouldShowSettingsPanelFromIsAliveEvent(t)},shouldShowSettingsPanelFromStyleReadyEvent:function(t){return e.get(t,"stylesReady")||!1},shouldShowSettingsPanelFromIsAliveEvent:function(t){return e.get(t,"isAlive")||!1},shouldShowPreloader:function(){return!this.isAppReady(this.props)&&this.state.overlay===this.OVERLAY_STATE.PRELOADER||!0===this.appData.demoMode&&!u.isOpen("se_tpaProvisionOnAdd")},onHelpClicked:function(){var t=this.getEditorAPI(),a=o.events.TPA_HELP_CLICK,n=this.data.widgetId||t.documentServices.tpa.app.getMainSectionWidgetData(this.appData).widgetId,r={widget_id:n,app_id:this.appData.appDefinitionId,origin:"settings"},s=this.props.panelName,p={openPanelBiEvent:a,openPanelBiParams:e.merge({help_status:"open"},r),closePanelBiEvent:a,closePanelBiParams:e.merge({help_status:"close"},r),origin:"settings"},l={panel_name:s,origin:i.constants.BI.HELP.ORIGIN.PANEL,component:t.selection.getSelectedComponentType(),learn_more:!1};this.helpId?t.panelManager.openHelpCenter(this.helpId,p,l):d.getHelpId(t,this.appData.appDefinitionId,n,d.HELP_END_POINTS.SETTINGS).then(function(e){t.panelManager.openHelpCenter(e,p,l)})},getUnresponsiveText:function(){var t=this.appData.appDefinitionName;if(t)return e.template(r.translate("tpa_unavail_problems"))({appName:t})},getAppName:function(){var e=this.getEditorAPI();return e.components.is.exist(this.props.selectedComponent)?p.getCompName(e,this.selectedComponent):""},getUnresponsiveContact:function(){if(!e.isEmpty(this.appData))return r.translate("tpa_unavail_problems_2")},render:c}))}),define("tpa/compPanels/appMarketPanel.rt",["react","lodash","panels","experiment"],function(e,t,a,i){return function(){return e.createElement(a.frames.leftPanelFrame,t.assign({},{panelName:this.props.panelName,label:i.isOpen("appMarketNoHeader")?void 0:this.translateIfNeeded("app_market_title"),className:this.getAppMarketPanelClass(),panelClass:this.getAppMarketContainingPanelClass(),panelIndex:this.props.panelIndex},this.getPanelProps()),e.createElement("iframe",{src:this.state.appMarketUrl,className:this.getAppMarketIframeClass(),frameBorder:"0",scrolling:"no"}))}}),define("tpa/compPanels/appMarketPanel",["lodash","react","core","util","tpa/appMarket/utils/appMarketUtils","tpa/utils/tpaUtils","tpa/compPanels/appMarketPanel.rt","tpa/bi/bi","helpIds","experiment"],function(e,t,a,i,n,o,r,s,p,d){function l(t,a){var i={};return"market_button"===a.openMarketOrigin&&(i=n.getAppMarketUrlParams()),e.assign(i,a),i.origin=n.origin(),i.newUrl=!0,i.state=e.get(n.getAppMarketSessionUserPrefs(t),"state",""),t.documentServices.tpa.appMarket.getUrl(i)}function c(){var e=["app-market-panel-20"];return d.isOpen("appMarketNoHeader")&&e.push("no-header"),e}return t.createClass({displayName:"AppMarketPanel",propTypes:{urlParams:t.PropTypes.shape({openMarketOrigin:t.PropTypes.string.isRequired,referralInfoCategory:t.PropTypes.string,section:t.PropTypes.string,openAppDefId:t.PropTypes.string,appDefinitionId:t.PropTypes.string,categorySlug:t.PropTypes.string,query:t.PropTypes.string,tags:t.PropTypes.string,tests:t.PropTypes.string}).isRequired,helpId:t.PropTypes.string.isRequired},mixins:[i.translationMixin,a.mixins.editorAPIMixin],getInitialState:function(){return{appMarketUrl:l(this.getEditorAPI(),this.props.urlParams)}},getDefaultProps:function(){return{panelName:"tpa.compPanels.appMarketPanel",helpId:p.EXTERNAL.APP_MARKET}},timeMarketOpened:void 0,openMarketOrigin:void 0,getTime:function(){return Date.now()},componentDidMount:function(){this.timeMarketOpened=this.getTime(),this.openMarketOrigin=this.props.urlParams&&this.props.urlParams.openMarketOrigin},componentWillUnmount:function(){var e={open_origin:this.openMarketOrigin,seconds_opened:parseInt((this.getTime()-this.timeMarketOpened)/1e3,10)};this.getEditorAPI().bi.event(s.events.MARKET_CLOSED,e)},getPanelProps:function(){return{urlParams:this.props.urlParams,onHelpClicked:this.onHelpClicked,helpId:this.props.helpId}},onHelpClicked:function(){this.getEditorAPI().bi.event(s.events.MARKET_HELP_CLICK)},getAppMarketContainingPanelClass:function(){var e=c();return d.isOpen("appMarketResponsivePanel")&&e.push("app-market-responsive"),e.join(" ")},getAppMarketIframeClass:function(){return d.isOpen("appMarketResponsivePanel")?"app-market-frame-responsive":"app-market-frame-20"},getAppMarketPanelClass:function(){return c().join(" ")},render:r})}),define("tpa/compModals/appMarketAppModal.rt",["react","lodash","panels"],function(e,t,a){return function(){return e.createElement(a.frames.focusPanelFrame,{panelName:this.props.panelName,title:this.translateIfNeeded("app_market_title"),shouldHideHelp:!0,onClose:this.onClose},e.createElement("div",{className:"app-market-app-modal-container"},e.createElement("iframe",{src:this.props.iframeUrl,width:"100%",height:"100%",frameBorder:"0"})))}}),define("tpa/compModals/appMarketAppModal",["react","core","util","tpa/compModals/appMarketAppModal.rt"],function(e,t,a,i){return e.createClass({propTypes:{onClose:e.PropTypes.func.isRequired},displayName:"appMarketAppModal",mixins:[a.translationMixin,t.mixins.editorAPIMixin],render:i,onClose:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName),this.props.onClose&&this.props.onClose()}})}),define("tpa/compModals/appMarketPermissionsModal.rt",["react","lodash","panels"],function(e,t,a){return function(){return e.createElement(a.frames.focusPanelFrame,{panelName:this.props.panelName,title:this.getTitle(),onClose:this.onClose,shouldHideHelp:!0},e.createElement("div",{className:"app-market-permissions-modal-container"},e.createElement("iframe",{src:this.props.iframeUrl,className:"app-market-permissions-modal",width:"100%",height:"100%",frameBorder:"0"})))}}),define("tpa/compModals/appMarketPermissionsModal",["lodash","react","core","util","tpa/compModals/appMarketPermissionsModal.rt","tpa/bi/bi","experiment"],function(e,t,a,i,n,o,r){return t.createClass({displayName:"appMarketPermissionsModal",mixins:[i.translationMixin,a.mixins.editorAPIMixin],onClose:function(){var e={closing_method:"X",app_id:this.props.appDefinitionId};return this.getEditorAPI().bi.event(o.events.PERMISSION_MODAL_CLOSED,e),!0},getTitle:function(){return!r.isOpen("se_tpaProvisionOnAdd")&&e.includes(this.props.iframeUrl,"demoMode=true")?this.translateIfNeeded("app_market_permissions_template_message_title"):this.translateIfNeeded("app_market_permissions_message_title")},render:n})}),define("tpa/compModals/tpaSettingsModal.rt",["react","lodash","panels","core"],function(e,t,a,i){return function(){return e.createElement(a.frames.focusPanelFrame,{title:this.props.title,shouldHideHeader:this.shouldHideHeader(),panelName:"tpa.compModals.tpaSettingsModal",width:this.getPanelWidth(),height:this.getPanelHeight(),onHelpClicked:this.helpClicked,isBareMode:this.props.isBareMode,className:this.getClassName(),containerBackground:t.get(this.props.options,"background"),overlayBackground:t.get(this.props.options,"overlay"),shouldNotCloseOnBlur:this.props.isBareMode||this.props.shouldNotCloseOnBlur},e.createElement("iframe",{id:"settingsModalIframe",src:this.props.url,style:{width:"100%",height:"100%",border:"0px"}}))}}),define("tpa/compModals/tpaSettingsModal",["lodash","react","core","baseUI","util","tpa/bi/bi","tpa/constants/constants","tpa/utils/tpaUtils","tpa/common/withOnCloseMessage","tpa/compModals/tpaSettingsModal.rt"],function(e,t,a,i,n,o,r,s,p,d){return p(t.createClass({mixins:[a.mixins.editorAPIMixin],displayName:"settingsModal",getInitialState:function(){return this.helpId="",{}},modalShouldNotHaveMargin:function(){return!1===e.get(this.props.options,"margin")},getPanelHeight:function(){var e=s.getWindow().innerHeight,t=this.parsePercentToPixel(this.props.height,e);this.props.title&&(t+=54);var a=.05*e;return this.modalShouldNotHaveMargin()&&(a=i.uiConstants.TOPBAR_HEIGHT),this.resizeToFitContainer(t,e,a).toString()},getPanelWidth:function(){var e=s.getWindow().innerWidth,t=this.parsePercentToPixel(this.props.width,e),a=.02*e;return this.modalShouldNotHaveMargin()&&(a=0),this.resizeToFitContainer(t,e,a).toString()},getClassName:function(){var t=e.template("tpa-settings-modal<%= c %>");return this.modalShouldNotHaveMargin()?t({c:" no-margin"}):this.props.isBareMode?"tpa-settings-modal bare":t({c:""})},parsePercentToPixel:function(t,a){return e.isString(t)&&/^[0-9]+%$/.test(t)?t=a*parseInt(t.replace("%",""),10)/100:e.isNumber(t)||(t=parseInt(t.replace("px",""),10)),t},resizeToFitContainer:function(e,t,a){var i=t-a;return e>i?i:e},shouldHideHeader:function(){return this.props.isBareMode},helpClicked:function(){var t=this.getEditorAPI(),i=this.props.appDefinitionId,n=this.helpId||this.props.helpId,r=this.props.widgetId,s=o.events.TPA_HELP_CLICK,p={widget_id:r||null,app_id:i,origin:"settings_modal"},d={openPanelBiEvent:s,openPanelBiParams:e.merge({help_status:"open"},p),closePanelBiEvent:s,closePanelBiParams:e.merge({help_status:"close"},p),origin:p.origin},l={panel_name:this.props.panelName,origin:a.constants.BI.HELP.ORIGIN.PANEL,component:t.selection.getSelectedComponentType(),learn_more:!1};t.panelManager.openHelpCenter(n,d,l)},componentWillReceiveProps:function(t){this.helpId=e.get(t,"articleId")},render:d}))}),define("tpa/compModals/appMarketModal.rt",["react","lodash","panels"],function(e,t,a){return function(){return e.createElement(a.frames.focusPanelFrame,{panelName:this.props.panelName,title:this.getTitle(),onClose:this.onClose,shouldHideHelp:!0,width:this.props.width,height:this.props.height,keyboardShortcuts:this.getShortcuts()},e.createElement("div",{className:"app-market-modal-container"},e.createElement("iframe",{src:this.props.iframeUrl,width:"100%",height:"100%",frameBorder:"0"})))}}),define("tpa/compModals/appMarketModal",["react","core","util","tpa/compModals/appMarketModal.rt"],function(e,t,a,i){var n={ESC:"esc"};return e.createClass({propTypes:{iframeUrl:e.PropTypes.string.isRequired,width:e.PropTypes.string.isRequired,height:e.PropTypes.string.isRequired,id:e.PropTypes.string.isRequired,title:e.PropTypes.string,closeModalBiEvent:e.PropTypes.object,closeModalBiParams:e.PropTypes.object},displayName:"appMarketModal",mixins:[a.translationMixin,t.mixins.editorAPIMixin],render:i,getTitle:function(){if(this.props.title)return this.translateIfNeeded(this.props.title)},onClose:function(e){var t=this.getEditorAPI();if(this.props.closeModalBiEvent){var a=this.props.closeModalBiParams||{};a.closeMethod=e,t.bi.event(this.props.closeModalBiEvent,a)}},getShortcuts:function(){var e=this;return{esc:function(){e.onClose(n.ESC)}}}})}),define("tpa/superApps/superAppsCustomData",["lodash","tpaGfppData"],function(e,t){return{getSuperAppsGfppData:function(){return t.getData()},getSuperAppsAddPanelStyles:function(a,i){var n=a+"."+i;return e.get(t.getAddPanelData(),n)}}}),define("tpa/addPanelData/addPanelAddCompService",["lodash","bluebird","tpa/superApps/superApps"],function(e,t,a){function i(t){return{width:e.get(t,"layout.width"),height:e.get(t,"layout.height")}}function n(t,a){var i={styleId:e.get(t,"style")||null};return a&&(i.dontStretch=!a.isFullWidth),i}return{addCompOnClick:function(o,r,s,p,d,l){return new t(function(t){require(["addPanelInfra"],function(c){var g=i(s),m=c.addPanelUtils.calcCompPastePosition(l,s,d);e.merge(g,m);var u=n(s,p);a.addWidget(o,r,g,u),t()})})},addCompOnDrop:function(t,o,r,s,p){var d=i(s.structure),l={x:r.x||0,y:r.y||0};e.merge(d,l);var c=n(s.structure,e.get(s,"tags"));return c.parentContainerRef=p,a.addWidget(t,o,d,c)}}}),define("tpa/addPanelData/music/musicSection",["lodash","addPanelDataConsts","tpa/superApps/superApps","tpa/superApps/superAppsConstants","tpa/superApps/superAppsCustomData","tpa/addPanelData/addPanelAddCompService","util","experiment"],function(e,t,a,i,n,o,r,s){function p(){return d(r.languages.getLanguageCode(),"wixMusicPlayerSection2_")}function d(e,t){return"addPanelData/sections/wixMusicPlayerSection_"+e+"/"+t+e+".png"}function l(){return[{id:"Music_Prop_Player_2",appDefinitionId:c,slug:"wix-music",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:680,height:210,x:14,y:71,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",applicationId:"16",tpaData:{type:"TPAData",content:"{'wmp::paymentsId':'0352442c-26dc-415d-81f8-79d681c7efcf'}"},widgetId:g},style:{type:"TopLevelStyle",style:s.isOpen("se_tpaAddPanelStyles")?n.getSuperAppsAddPanelStyles(c,"compact"):{properties:{"alpha-param_color_activeTrackColor":"1","alpha-param_color_albumArtistColor":"1","alpha-param_color_backgroundColor":"1","alpha-param_color_borderColor":"1","alpha-param_color_buyShareLinksColor":"1","alpha-param_color_controlBarColor":"1","alpha-param_color_dividersColor":"100","alpha-param_color_trackColor":"1","alpha-param_color_trackTitleColor":"1","param_boolean_wmp::isConnected":"true",param_boolean_trackListShow:"false","param_boolean_wmp::isMigrated":"true",param_color_activeTrackColor:"color_18",param_color_albumArtistColor:"color_15",param_color_backgroundColor:"color_11",param_color_borderColor:"color_15",param_color_buyShareLinksColor:"color_15",param_color_controlBarColor:"color_15",param_color_dividersColor:"color_12",param_color_trackColor:"color_15",param_color_trackTitleColor:"color_15",param_font_activeTrackButtonsFont:'{"family":"helvetica-w01-light","displayName":"Paragraph 2","style":{"bold":false,"italic":false,"underline":false},"size":"14","preset":"Body-M","editorKey":"font_8","fontStyleParam":true}',param_font_albumArtistFont:'{"family":"helvetica-w01-light","displayName":"Paragraph 2","style":{"bold":false,"italic":false,"underline":false},"size":"14","preset":"Body-M","editorKey":"font_8","fontStyleParam":true}',param_font_buyShareLinksFont:'{"family":"helvetica-w01-light","displayName":"Paragraph 2","style":{"bold":false,"italic":false,"underline":false},"size":"14","preset":"Body-M","editorKey":"font_8","fontStyleParam":true}',param_font_trackFont:'{"family":"helvetica-w01-light","displayName":"Paragraph 2","style":{"bold":false,"italic":false,"underline":false},"size":"14","preset":"Body-M","editorKey":"font_8","fontStyleParam":true}',param_font_trackTitleFont:'{"family":"helvetica-w01-light","displayName":"Paragraph 1","style":{"bold":false,"italic":false,"underline":false},"size":"15","preset":"Body-L","editorKey":"font_7","fontStyleParam":true}',"param_font_wmp::numberTracksShown":"{}","param_font_wmp::paymentsId":'{"value":"0352442c-26dc-415d-81f8-79d681c7efcf"}',param_number_layout:"1","param_number_wmp::styleParamsVersion":"2"},propertiesSource:{"param_boolean_wmp::isConnected":"value","param_boolean_wmp::isMigrated":"value",param_color_activeTrackColor:"theme",param_color_albumArtistColor:"theme",param_color_backgroundColor:"theme",param_color_borderColor:"theme",param_color_buyShareLinksColor:"theme",param_color_controlBarColor:"theme",param_color_dividersColor:"theme",param_color_trackColor:"theme",param_color_trackTitleColor:"theme",param_font_activeTrackButtonsFont:"value",param_font_albumArtistFont:"value",param_font_buyShareLinksFont:"value",param_font_trackFont:"value",param_font_trackTitleFont:"value","param_font_wmp::numberTracksShown":"value","param_font_wmp::paymentsId":"value",param_number_layout:"value","param_number_wmp::styleParamsVersion":"value"},groups:{}},componentClassName:"",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"}},preset:{rect:{width:324,height:160,x:0,y:0},label:"add_preset__WixMusic_Compact"}},{id:"Music_Prop_Player_1",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:350,height:700,x:315,y:18,scale:1,rotationInDegrees:0},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",appDefinitionId:c,slug:"wix-music",data:{type:"TPAWidget",applicationId:"16",widgetId:g},style:"tpaw0"},preset:{rect:{width:324,height:470,x:0,y:160},label:"add_preset__WixMusic_Classic"}}]}var c=i.WIXMUSIC.APP_DEF_ID,g=i.WIXMUSIC.WIDGET,m=function(t){t.addPanel.registerToAddSectionAtTheStartOfCategory(["music"],e.partial(y,t))},u=function(e,t,a,i,n){o.addCompOnClick(c,g,e,a,i,n)},h=function(e,t,a){return o.addCompOnDrop(c,g,e,t,a)},y=function(e){return{type:t.SECTIONS_TYPES.PRESET,hide:!1,title:"add_section_label_proplayer",showSectionHeader:!0,additionalBehaviours:{labelMode:t.LABEL_BEHAVIOUR.HOVER,infoIcon:t.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:t.HOVER_IMAGE_ACTIONS.SCALE,iconEnabledForComps:{}},props:{onClick:u,onDrop:h,image:p(),items:l()},help:{hide:!1,text:"add_section_info_text_proplayer"},teaser:{id:"proplayer_section_teaser",hide:!1,title:"add_section_teaser_title_proplayer",text:"add_section_teaser_text_proplayer",linkText:"add_category_teaser_link",learnMore:function(){a.openAppMarketInfoModal("wix-music"),e.panelManager.closePanelByName("rEditor.addPanel")}}}};return{registerSection:m}}),define("tpa/addPanelData/video/videoSection",["lodash","tpa/addPanelData/addPanelAddCompService","tpa/superApps/superAppsConstants","tpa/superApps/superAppsCustomData","addPanelDataConsts","experiment"],function(e,t,a,i,n,o){function r(e){e.addPanel.registerToAddSectionAtTheStartOfCategory(["video"],s)}function s(){var e="addPanelData/sections/videoSection_en/wixVideoSection_en.png",t=null;return o.isOpen("se_wixVideo_addPanel_Compact")&&(e="addPanelData/sections/videoSection_en/WixVideo_addpanel_regular.png",t="addPanelData/sections/videoSection_en/WixVideo_addpanel_hover.png"),{title:"ADD_SECTION_LABEL_WIXVIDEO",type:n.SECTIONS_TYPES.PRESET,hide:!1,sectionNumber:1,showSectionHeader:!0,additionalBehaviours:{labelMode:n.LABEL_BEHAVIOUR.HOVER,infoIcon:n.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:o.isOpen("se_wixVideo_addPanel_Compact")?n.HOVER_IMAGE_ACTIONS.IMAGE:n.HOVER_IMAGE_ACTIONS.NONE,iconEnabledForComps:[]},props:{image:e,imageHover:t,items:p(),onClick:c,onDrop:g},help:{hide:!1,text:"ADD_SECTION_INFO_TEXT_WIXVIDEO"}}}function p(){var e=[{id:"Video_Video_1",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:480,x:0,y:50,scale:1,rotationInDegrees:0,fixedPosition:!1,docked:{left:{px:0,vw:0},right:{px:0,vw:0}}},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",applicationId:"1598",widgetId:l},style:{componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",style:i.getSuperAppsAddPanelStyles(d,"strip"),type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"}},preset:{rect:{width:324,height:130,x:0,y:0},label:"add_preset_WixVideo_Strip",tags:{isFullWidth:!0,googleFontsCssUrl:"",uploadFontFaces:""}}},{id:"Video_Video_2",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:800,height:706,x:90,y:50,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",applicationId:"1598",widgetId:l},style:{componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",style:i.getSuperAppsAddPanelStyles(d,"classic"),type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"}},preset:{rect:{width:324,height:234,x:0,y:130},label:"add_preset_WixVideo_Classic"}}],t=[{id:"compact",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:800,height:490,x:76,y:56,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1598",referenceId:"a1ca9dac-7ee4-4d52-a418-68329471105b",widgetId:"144097ea-fea0-498e-ade7-e6de40127106"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:i.getSuperAppsAddPanelStyles(d,"compact"),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},mobileStructure:{layout:{width:280,height:247,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0},activeModes:{}},preset:{rect:{width:160,height:140,x:0,y:0},label:"add_preset_WixVideo_Compact"}},{id:"classic",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:800,height:761,x:90,y:34,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1598",referenceId:"a1ca9dac-7ee4-4d52-a418-68329471105b",widgetId:"144097ea-fea0-498e-ade7-e6de40127106"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:i.getSuperAppsAddPanelStyles(d,"classic_new"),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},mobileStructure:{layout:{width:320,height:279,x:0,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0},activeModes:{}},preset:{rect:{width:164,height:140,x:160,y:0},label:"add_preset_WixVideo_Classic"}},{id:"strip",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:979,height:410,x:0,y:58,scale:1,rotationInDegrees:0,fixedPosition:!1,docked:{left:{px:.5,vw:0},right:{px:.5,vw:0}}},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1598",referenceId:"a1ca9dac-7ee4-4d52-a418-68329471105b",widgetId:"144097ea-fea0-498e-ade7-e6de40127106"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:i.getSuperAppsAddPanelStyles(d,"strip_new"),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},mobileStructure:{layout:{width:280,height:247,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0},activeModes:{}},preset:{rect:{width:324,height:170,x:0,y:140},label:"add_preset_WixVideo_Strip",tags:{isFullWidth:!0,googleFontsCssUrl:"",uploadFontFaces:""}}}];return o.isOpen("se_wixVideo_addPanel_Compact")?t:e}var d=a.WIX_VIDEO.APP_DEF_ID,l=a.WIX_VIDEO.WIDGET,c=function(e,a,i,n,o){t.addCompOnClick(d,l,e,i,n,o)},g=function(e,a,i){return t.addCompOnDrop(d,l,e,a,i)};return{registerSection:r}}),define("tpa/addPanelData/styleParamUtils",["lodash"],function(e){function t(t){var r=[],s={numbers:a,booleans:i,colors:n,fonts:o};return e.forEach(s,function(a,i){var n=t[i];e.forEach(n,function(e,t){a(n,t,r)})}),r}function a(t,a,i){e.has(t,a)&&i.push({key:a,type:"number",param:{value:t[a]}})}function i(t,a,i){e.has(t,a)&&i.push({key:a,type:"boolean",param:{value:t[a]}})}function n(t,a,i){if(e.has(t,a)){var n={opacity:e.isNumber(t[a].opacity)?t[a].opacity:1};t[a].rgba?n.rgba=t[a].rgba:t[a].name&&(n.color={name:t[a].name}),i.push({key:a,type:"color",param:{value:n}})}}function o(t,a,i){e.has(t,a)&&i.push({key:a,type:"font",param:{value:t[a]}})}return{getTagsAsStyleParamsArray:t}}),define("tpa/addPanelData/gallery/proGalleriesSection",["lodash","addPanelDataConsts","panels","tpa/addPanelData/styleParamUtils","tpa/superApps/superApps","tpa/superApps/superAppsCustomData","tpa/addPanelData/addPanelAddCompService","experiment"],function(e,t,a,i,n,o,r,s){var p="14271d6f-ba62-d045-549b-ab972ae1f70e",d="142bb34d-3439-576a-7118-683e690a1e0d",l=function(e){e.addPanel.registerToAddSectionAtTheStartOfCategory(["gallery"],function(){return h()})},c=function(e,t,a,i,o){if(s.isOpen("se_tpaAddPanelStyles"))r.addCompOnClick(p,d,e,a,i,o);else{var l={dontStretch:a.booleans.shouldUnDock,cb:function(e){g(e.id,a)}};n.addWidget(p,d,null,l)}},g=function(e,t){var a=i.getTagsAsStyleParamsArray(t);n.setStyleParam(p,e,a)},m=function(e,t,a){if(s.isOpen("se_tpaAddPanelStyles"))return r.addCompOnDrop(p,d,e,t,a);var i=t.tags,o={dontStretch:i.booleans.shouldUnDock,cb:function(e){g(e.id,i)}};return n.addWidget(p,d,null,o)},u=function(){return s.isOpen("se_pro_gallery_label")?"add_section_label_progallery_v2":"design_section_label_explore_gallery_progallery"},h=function(){return{type:t.SECTIONS_TYPES.PRESET,hide:!1,title:u(),showSectionHeader:!0,sectionNumber:0,additionalBehaviours:{labelMode:t.LABEL_BEHAVIOUR.HOVER,infoIcon:t.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:t.HOVER_IMAGE_ACTIONS.VIDEO,iconEnabledForComps:{}},props:{onClick:c,onDrop:m,image:"addPanelData/sections/proGalleriesSection_en/add-panel-pro-gallery-section.png",items:y(),compTypes:["wysiwyg.viewer.components.tpapps.TPAWidget"]},help:{hide:!1,text:"add_section_info_text_progallery"}}},y=function(){return s.isOpen("se_tpaAddPanelStyles")?[{id:"collageFullWidth",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:350,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1,docked:{left:{px:0,vw:0},right:{px:0,vw:0}}},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1307",referenceId:"5dbd0eb3-d14f-449b-9e0e-170fdab99931",widgetId:"142bb34d-3439-576a-7118-683e690a1e0d"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:o.getSuperAppsAddPanelStyles(p,"collageFullWidth"),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},behaviors:{type:"ObsoleteBehaviorsList",items:"[{'action':{'sourceId':'comp-iqhqgi44','type':'comp','name':'screenIn'},'behavior':{'targetId':'nomsy','type':'site','name':'prefetchPages','params':{'prefetchFilters':{'id':['nomsy']}}}}]"},mobileStructure:{layout:{width:280,height:421,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0},activeModes:{}},preset:{rect:{width:324,height:174,x:0,y:0},label:"add_preset_Galleries_Pro_Galleries_1",tags:{isFullWidth:!0},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-1"}}},{id:"gridFullWidth",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:350,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1,docked:{left:{px:0,vw:0},right:{px:0,vw:0}}},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1307",referenceId:"f57fea8e-f497-480f-a40c-a341106fb371",widgetId:"142bb34d-3439-576a-7118-683e690a1e0d"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:o.getSuperAppsAddPanelStyles(p,"gridFullWidth"),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},behaviors:{type:"ObsoleteBehaviorsList",items:"[{'action':{'sourceId':'comp-iqhqgi44','type':'comp','name':'screenIn'},'behavior':{'targetId':'nomsy','type':'site','name':'prefetchPages','params':{'prefetchFilters':{'id':['nomsy']}}}}]"},mobileStructure:{layout:{width:280,height:373,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0},activeModes:{}},preset:{rect:{width:324,height:192,x:0,y:174},label:"add_preset_Galleries_Pro_Galleries_2",tags:{isFullWidth:!0},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-2",ignoreMargins:!0}}},{id:"masonryFullWidth",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:350,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1,docked:{left:{px:0,vw:0},right:{px:0,vw:0}}},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1307",referenceId:"34d252cb-0516-4a30-9372-4bf86d3ec898",widgetId:"142bb34d-3439-576a-7118-683e690a1e0d"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:o.getSuperAppsAddPanelStyles(p,"masonryFullWidth"),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},behaviors:{type:"ObsoleteBehaviorsList",items:"[{'action':{'sourceId':'comp-iqhqgi44','type':'comp','name':'screenIn'},'behavior':{'targetId':'nomsy','type':'site','name':'prefetchPages','params':{'prefetchFilters':{'id':['nomsy']}}}}]"},mobileStructure:{layout:{width:280,height:264,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0},activeModes:{}},preset:{rect:{width:324,height:190,x:0,y:366},label:"add_preset_Galleries_Pro_Galleries_3",tags:{isFullWidth:!0},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-3",ignoreMargins:!0}}},{id:"grid",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:350,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1307",referenceId:"3a13e72a-cc26-4550-85ea-63050b253376",widgetId:"142bb34d-3439-576a-7118-683e690a1e0d"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:o.getSuperAppsAddPanelStyles(p,"grid"),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},behaviors:{type:"ObsoleteBehaviorsList",items:"[{'action':{'sourceId':'comp-irag4gis','type':'comp','name':'screenIn'},'behavior':{'targetId':'nomsy','type':'site','name':'prefetchPages','params':{'prefetchFilters':{'id':['nomsy']}}}}]"},mobileStructure:{layout:{width:320,height:390,x:0,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0},activeModes:{}},preset:{rect:{width:162,height:182,x:0,y:556},label:"add_preset_Galleries_Pro_Galleries_5",tags:{isFullWidth:!1},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-4",ignoreMargins:!0}}},{id:"masonryVertical",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:350,x:-1,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1307",referenceId:"76d4dea1-c0ab-4adb-8cb3-d67f3a3a9fce",widgetId:"142bb34d-3439-576a-7118-683e690a1e0d"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:o.getSuperAppsAddPanelStyles(p,"masonryVertical"),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},behaviors:{type:"ObsoleteBehaviorsList",items:"[{'action':{'sourceId':'comp-ivi2gvj2','type':'comp','name':'screenIn'},'behavior':{'targetId':'nomsy','type':'site','name':'prefetchPages','params':{'prefetchFilters':{'id':['nomsy']}}}}]"},mobileStructure:{layout:{width:280,height:290,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0},activeModes:{}},preset:{rect:{width:162,height:198,x:0,y:738},label:"add_preset_Galleries_Pro_Galleries_6",tags:{isFullWidth:!1},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-5",ignoreMargins:!0}}},{id:"oneColumn",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:350,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"1307",referenceId:"759d03bd-9915-481e-91f3-51f4eb446f34",widgetId:"142bb34d-3439-576a-7118-683e690a1e0d"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:o.getSuperAppsAddPanelStyles(p,"oneColumn"),componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},behaviors:{type:"ObsoleteBehaviorsList",items:"[{'action':{'sourceId':'comp-iqhqgi44','type':'comp','name':'screenIn'},'behavior':{'targetId':'nomsy','type':'site','name':'prefetchPages','params':{'prefetchFilters':{'id':['nomsy']}}}}]"},mobileStructure:{layout:{width:280,height:2337,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0},activeModes:{}},preset:{rect:{width:162,height:380,x:162,y:556},label:"add_preset_Galleries_Pro_Galleries_4",tags:{isFullWidth:!1},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-6",ignoreMargins:!0}}}]:[{id:"Gallery_Pro_Galleries_3",structure:{type:"Component",componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:1905,height:864,x:-463,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1,docked:{left:{px:0,vw:0},right:{px:0,vw:0}}},style:"sdf"},preset:{rect:{width:324,height:174,x:0,y:0},label:"add_preset_Galleries_Pro_Galleries_1",tags:{numbers:{collageDensity:80,gallerySize:30,galleryLayout:0,"te-padding-slider":30},booleans:{shouldUnDock:!1,allowTitle:!0,addPanel:!0},colors:{backColor:{name:"color_12"},bgColorExpand:{name:"color_11"},descriptionColorExpand:{name:"color_15"},foreColor:{name:"color_12"},itemFontColor:{name:"color_11"},itemOpacity:{name:"color_15",opacity:.6},"te-background-color-picker":{rgba:"rgba(119,167,191,1)"},titleColorExpand:{name:"color_15"}},fonts:{descriptionFontExpand:{style:{italic:!1,bold:!1,underline:!1},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:!0},itemFont:{style:{italic:!1,bold:!1,underline:!1},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:!0},"text-editor-font":{family:"raleway",style:{bold:!1,italic:!1,underline:!1},size:40,preset:"Custom",editorKey:"font_2",fontStyleParam:!0},titleFontExpand:{style:{italic:!1,bold:!1,underline:!1},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:!0}}},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-1"}}},{id:"Gallery_Pro_Galleries_2",structure:{type:"Component",componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:1905,height:864,x:-463,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1,docked:{left:{px:0,vw:0},right:{px:0,vw:0}}},style:"fff"},preset:{rect:{width:324,height:192,x:0,y:174},label:"add_preset_Galleries_Pro_Galleries_2",tags:{numbers:{collageDensity:100,gallerySize:20,galleryLayout:2,"te-padding-slider":30},booleans:{shouldUnDock:!1,addPanel:!0},colors:{backColor:{name:"color_12"},bgColorExpand:{name:"color_11"},descriptionColorExpand:{name:"color_15"},foreColor:{name:"color_12"},itemFontColor:{name:"color_11"},itemOpacity:{name:"color_15",opacity:.6},"te-background-color-picker":{rgba:"rgba(119,167,191,1)"},titleColorExpand:{name:"color_15"}},fonts:{descriptionFontExpand:{style:{italic:!1,bold:!1,underline:!1},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:!0},itemFont:{style:{italic:!1,bold:!1,underline:!1},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:!0},"text-editor-font":{family:"din-next-w01-light",displayName:"Page Title",style:{bold:!1,italic:!1,underline:!1},size:25,preset:"Page-title",editorKey:"font_2",fontStyleParam:!0},titleFontExpand:{style:{italic:!1,bold:!1,underline:!1},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:!0}}},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-2",ignoreMargins:!0}}},{id:"Gallery_Pro_Galleries_1",structure:{type:"Component",componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:1905,height:864,x:-463,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1,docked:{left:{px:0,vw:0},right:{px:0,vw:0}}},style:"fff"},preset:{rect:{width:324,height:190,x:0,y:366},label:"add_preset_Galleries_Pro_Galleries_3",tags:{numbers:{collageDensity:100,gallerySize:40,galleryLayout:1,isVertical:1},booleans:{shouldUnDock:!1,addPanel:!0},colors:{bgColorExpand:{name:"color_11"},descriptionColorExpand:{name:"color_15"},itemFontColor:{name:"color_11"},itemOpacity:{name:"color_15",opacity:.6},titleColorExpand:{name:"color_15"}},fonts:{descriptionFontExpand:{style:{italic:!1,bold:!1,underline:!1},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:!0},itemFont:{style:{italic:!1,bold:!1,underline:!1},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:!0},titleFontExpand:{style:{italic:!1,bold:!1,underline:!1},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:!0}}},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-3",ignoreMargins:!0}}},{id:"Gallery_Pro_Galleries_4",structure:{type:"Component",componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:7853,x:-463,y:0,scale:1,rotationInDegrees:0,fixedPosition:!1,docked:{left:{px:0,vw:0},right:{px:0,vw:0}}},style:"fff"},preset:{rect:{width:162,height:182,x:0,y:556},label:"add_preset_Galleries_Pro_Galleries_5",tags:{numbers:{galleryLayout:2,"te-padding-slider":30},booleans:{shouldUnDock:!0,addPanel:!0},colors:{backColor:{name:"color_12"},bgColorExpand:{name:"color_11"},descriptionColorExpand:{name:"color_15"},foreColor:{name:"color_12"},itemFontColor:{name:"color_11"},itemOpacity:{name:"color_15",opacity:.6},"te-background-color-picker":{rgba:"rgba(119,167,191,1)"},titleColorExpand:{name:"color_15"}},fonts:{descriptionFontExpand:{style:{italic:!1,bold:!1,underline:!1},family:"din-next-w01-light",preset:"Body-M",editorKey:"font_8",size:15,displayName:"Paragraph 2",fontStyleParam:!0},itemFont:{style:{italic:!1,bold:!1,underline:!1},family:"din-next-w01-light",preset:"Body-M",editorKey:"font_8",size:15,displayName:"Paragraph 2",fontStyleParam:!0},"text-editor-font":{family:"raleway",style:{bold:!1,italic:!1,underline:!1},size:40,preset:"Custom",editorKey:"font_2",fontStyleParam:!0},titleFontExpand:{style:{italic:!1,bold:!1,underline:!1},family:"din-next-w01-light",preset:"Body-L",editorKey:"font_7",size:17,displayName:"Paragraph 1",fontStyleParam:!0}}},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-4",ignoreMargins:!0}}},{id:"Gallery_Pro_Galleries_5",structure:{type:"Component",componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:7853,x:0,y:62,scale:1,rotationInDegrees:0,fixedPosition:!1},style:"xcv"},preset:{rect:{width:162,height:198,x:0,y:738},label:"add_preset_Galleries_Pro_Galleries_6",tags:{numbers:{galleryLayout:1,isVertical:1},booleans:{shouldUnDock:!0,addPanel:!0},colors:{itemOpacity:{name:"color_15",opacity:.6},itemFontColor:{name:"color_11"}},fonts:{itemFont:{family:"din-next-w01-light",displayName:"Paragraph 2",style:{bold:!1,italic:!1,underline:!1},size:15,preset:"Body-M",editorKey:"font_8",fontStyleParam:!0}}},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-5",ignoreMargins:!0}}},{id:"Gallery_Pro_Galleries_6",structure:{type:"Component",componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:980,height:7853,x:0,y:62,scale:1,rotationInDegrees:0,fixedPosition:!1},style:"fff"},preset:{rect:{width:162,height:380,x:162,y:556},label:"add_preset_Galleries_Pro_Galleries_4",tags:{numbers:{collageDensity:100,gallerySize:30,galleryLayout:6},booleans:{shouldUnDock:!0,addPanel:!0},colors:{bgColorExpand:{name:"color_11"},descriptionColorExpand:{name:"color_15"},itemFontColor:{name:"color_11"},itemOpacity:{name:"color_15",opacity:.6},titleColorExpand:{name:"color_15"}},fonts:{descriptionFontExpand:{style:{italic:!1,bold:!1,underline:!1},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:!0},itemFont:{style:{italic:!1,bold:!1,underline:!1},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:!0},titleFontExpand:{style:{italic:!1,bold:!1,underline:!1},family:"din-next-w01-light",preset:"Page-title",editorKey:"font_2",size:25,displayName:"Page Title",fontStyleParam:!0}}},video:{poster:"poster-white-1x1.png",source:"gallery-video-thumb-pro-6",ignoreMargins:!0}}}]};return{registerSection:l}}),define("tpa/addPanelData/contact/contactSection",["staticAssets","addPanelDataConsts","util","tpa/superApps/superApps"],function(e,t,a,i){var n="1375baa8-8eca-5659-ce9d-455b2009250d",o="1375babd-6f2b-87ed-ff19-5778602c8b86",r=function(e){e.addPanel.registerToAddSectionAtTheStartOfCategory(["contact"],function(){return d(e)})},s=function(){return i.addWidget(n,o)},p=function(e){var t={width:350,height:700,x:e.x,y:e.y};return i.addWidget(n,o,t)},d=function(e){return{type:t.SECTIONS_TYPES.PRESET,hide:!1,title:"add_section_label_getsubscribers",additionalBehaviours:{labelMode:t.LABEL_BEHAVIOUR.NONE,infoIcon:t.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:t.HOVER_IMAGE_ACTIONS.SCALE,iconEnabledForComps:{}},showSectionHeader:!0,props:{onClick:s,onDrop:p,image:"addPanelData/sections/getSubscribersSection_"+a.languages.getLanguageCode()+"/getSubscribersSection_"+a.languages.getLanguageCode()+".png",items:[{structure:{layout:{x:315,y:650,width:500,height:122,scale:1,rotationInDegrees:0},type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",appDefinitionId:n,slug:"wix-get-subscribers",data:{widgetId:o,applicationId:"18",type:"TPAWidget",metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},style:"tpaw0"},preset:{rect:{width:324,height:110,x:0,y:0},label:""}}]},help:{hide:!1,text:"add_section_info_text_getsubscribers"},teaser:{id:"get_subscribers_section_teaser",hide:!1,title:"add_section_teaser_title_getsubscribers",text:"add_section_teaser_text_getsubscribers",linkText:"add_category_teaser_link",learnMore:function(){i.openAppMarketInfoModal("wix-get-subscribers"),e.panelManager.closePanelByName("rEditor.addPanel")}}}};return{registerSection:r}}),define("tpa/experiments/experiments",["experiment"],function(e){return{isEcomAddAppExperimentOn:function(){return e.isOpen("se_ecomAddApp")},isStorePagesUsability1bExperimentOn:function(){return e.isOpen("StorePagesUsability1b")},isShouldShowPhotoAlbumsAboutExperimentOn:function(){return e.isOpen("se_shouldShowPhotoAlbumsAbout")}}}),define("tpa/superApps/gfpp/superAppsGfppDataCacheService",["lodash","panels","tpa/superApps/superApps","tpa/superApps/superAppsCustomData","tpa/constants/constants","tpa/experiments/experiments"],function(e,t,a,i,n,o){var r={},s=function(e){var t=i.getSuperAppsGfppData();r=p(e,t)},p=function(t,a){return e.forEach(a,function(a){e.forEach(a,function(a){a.actions=e.filter(a.actions,function(e){return l(e)&&d(t,e)})})}),a},d=function(t,i){var n={openDashboardUrl:c,openSuperAppsModal:a.openSuperAppsModal,openPanel:t.openPanel};if(e.get(i,"onClick.name")&&e.get(i,"onClick.params")){var o=n[i.onClick.name];return!!e.isFunction(o)&&(i.onClick=o.bind.apply(o,[null].concat(i.onClick.params)),!0)}return!1},l=function(t){if(!t.experiment)return!0;var a=o[t.experiment];return e.isFunction(a)&&a()?(delete t.experiment,!0):void 0},c=function(e){e=e||{},a.openDashboardUrl(e.appDefId,e.width,e.height,{state:e.state,title:e.title,origin:e.origin,widgetId:e.widgetId,onClose:a.refreshAppCompsForAppDefId.bind(void 0,e.appDefId),shouldNotCloseOnBlur:e.shouldNotCloseOnBlur,isBareMode:e.isBareMode,options:e.options},{type:n.BI.type.GFPP_MANAGE})};return{init:s,getCustomMainActions:function(){return r},clearCustomMainActions:function(){r={}}}}),define("tpa/superApps/gfpp/superAppsGfppData",["lodash","tpa/superApps/superApps","tpa/superApps/gfpp/superAppsGfppDataCacheService"],function(e,t,a){var i=function(){return a.getCustomMainActions()};return{getCustomMainActionsFor:function(e,t,a){var n=i()[t];return n&&n[a]?n[a]:n&&n[t]?n[t]:void 0},hasCustomActions:function(t){var a=i();return!e.isUndefined(a[t])},hasExternalUpgrade:function(e,a){if(t.hasPremiumOffering(e)){var n=i()[e];if(n&&n[a])return n[a].showUpgrade;if(n&&n[e])return n[e].showUpgrade}return!1}}}),define("tpa/gfpp/tpaGfppConfig",[],function(){return{connectableTpaWidgetIds:["142bb34d-3439-576a-7118-683e690a1e0d"]}}),define("tpa/gfpp/tpaGfppData",["lodash","core","tpa/packagePicker/packagePicker","tpa/services/dashboardAppService","tpa/superApps/gfpp/superAppsGfppData","tpa/constants/constants","tpa/bi/bi","tpa/utils/tpaUtils","tpa/settings/settings","tpa/services/tpaHelpService","tpa/gfpp/tpaGfppConfig","experiment"],function(e,t,a,i,n,o,r,s,p,d,l,c){function g(e,t){var a=e.components.data.get(t)||{},i=e.documentServices.tpa.app.getData(a.applicationId);i&&i.appDefinitionId&&m(e,r.events.APP_INTENT,i.appDefinitionId)}function m(e,t,a){s.bi.reportBIOnAppIntent(e,t,a,o.BI.initiator.EDITOR,o.BI.type.GFPP_SETTINGS)}function u(t,a){var i=e.get(a,"appDefinitionId");e.forEach(t,function(e){e.appId=i})}var h={label:"gfpp_mainaction_tpa",isApplied:!0,onClick:function(e,t){g(e,t),p.open(e,t)}},y=function(e,t){t&&(window.open(t),I(e))},f=function(e,t){return{label:t,isApplied:!0,shouldTranslate:!1,onClick:function(){i.getDashboardAppUrlAsync(e,y.bind(null,e))}}},P=function(e){var t=[h];T(e,t);var a=e.selection.getSelectedComponentData(),i=e.documentServices.tpa.app.getData(a.applicationId);return n.hasCustomActions(i.appDefinitionId)&&D(e,i.appDefinitionId,a.widgetId,t),u(t,i),t},v=function(e,t){var a=[t.HELP],i=e.selection.getSelectedComponentData();return A(e,i)&&a.unshift(t.CONNECT),S(e,i)&&a.unshift(t.UPGRADE),a},_=function(n){var p={help:{isSelected:!1,tooltip:"gfpp_tooltip_help",onClick:function(){var a=b(n),i=n.selection.getSelectedComponentData().widgetId,o={widget_id:i,app_id:a.appDefinitionId,panel_name:n.selection.getSelectedComponentType(),origin:t.constants.BI.HELP.ORIGIN.GFPP},s={openPanelBiEvent:r.events.TPA_HELP_CLICK,openPanelBiParams:e.merge({help_status:"open"},o),closePanelBiParams:e.merge({help_status:"close"},o),closePanelBiEvent:r.events.TPA_HELP_CLICK};i=i||n.documentServices.tpa.app.getMainSectionWidgetData(a).widgetId,d.getHelpId(n,a.appDefinitionId,i,d.HELP_END_POINTS.WIDGET).then(function(e){var a={origin:t.constants.BI.HELP.ORIGIN.GFPP,panel_name:n.selection.getSelectedComponentType(),component:n.selection.getSelectedComponentType(),learn_more:!1};n.panelManager.openHelpCenter(e,s,a)})}},upgrade:{isSelected:!1,shouldTranslate:function(){return!i.getEditorGfppData(n).upgradeText},tooltip:function(){return i.getEditorGfppData(n).upgradeText||"tpa_package_picker_upgrade_title"},icon:"upgrade",onClick:function(){var e=b(n);s.bi.reportBIOnAppIntent(n,r.events.APP_INTENT,e.appDefinitionId,o.BI.initiator.EDITOR,o.BI.type.GFPP_UPGRADE),a.startUpgradeFlow(n,e.appDefinitionId,!1,{origin:"gfpp"});var t={pp_origin:"gfpp",app_site_id:e.instanceId,app_id:e.appDefinitionId};n.bi.event(r.events.CLICK_UPGRADE_APP,t)}}};return u(p,b(n)),p},I=function(e){var t=e.selection.getSelectedComponentData(),a=e.documentServices.tpa.app.getData(t.applicationId),i={app_id:a.appDefinitionId,app_site_id:a.instanceId,instance_id:t.id,origin:"gfpp"};e.bi.event(r.events.OPEN_DASHBOARD_APP_CLICK,i)},S=function(e,t){var i=e.documentServices.tpa.app.getData(t.applicationId);return!!n.hasExternalUpgrade(i.appDefinitionId,t.widgetId)||!!e.documentServices.tpa.app.hasPremiumOffering(t.applicationId)&&!a.isFullyUpgraded(e,i)},A=function(t,a){return!(!c.isOpen("se_platform1")||!c.isOpen("se_addConnectButtonToTpaGalleries"))&&e.includes(l.connectableTpaWidgetIds,a.widgetId)},w=function(e){var t,a=i.getEditorGfppData(e);return a.openInDashboard&&(t=f(e,a.openInDashboardText)),t},D=function(t,a,i,o){var r=n.getCustomMainActionsFor(t,a,i);e.isEmpty(r)||e.forEach(r.actions,function(e){e.addAtBack?C(e,o):E(e,o)})},b=function(e){var t=e.selection.getSelectedComponentData();return e.documentServices.tpa.app.getData(t.applicationId)},T=function(t,a){var i=w(t);e.isEmpty(i)||a.push(i)},E=function(t,a){e.isEmpty(t)||a.unshift(t)},C=function(t,a){e.isEmpty(t)||a.push(t)};return{mainActions:P,enabledActions:v,presetActions:_}}),define("tpa/services/tpaDeleteService",["lodash","util","tpa/services/tpaAddRemoveDSService","experiment"],function(e,t,a,i){var n=function(e,t,n,o){if(i.isOpen("us_groupRightClick"))return a.deleteSection(e,t,o),void(n&&n());e.pages.beforePageRemoveHook(t,function(){a.deleteSection(e,t,o),n&&n()})},o=function(e,t,a,i,o){e.panelManager.openPanel("panels.messagePanels.deletePageMessage",{pageTitle:t,onConfirm:function(){n(e,a,i,o)}},!0)},r=function(a,i,o,r){n(a,i,o,r);var s=e.clone(r);s=e.map(s,function(t){return e.pick(t,["app_id","app_site_id","component_id","component_type","instance_id","is_last_tpa"])}),a.bi.reportBI(t.bi.events.REMOVE_COMPONENT_SECOND_STEP_CLICK,s)},s=function(e,t,a,i,n,o){e.panelManager.openPanel("tpaPanels.confirmation.sectionDelete",{appName:t.appDefinitionName,pageName:a,appDefId:t.appDefinitionId,onConfirm:function(){r(e,i,n,o)}},!0)},p=function(t,a,i,n,o,s,p){t.panelManager.openPanel("tpaPanels.confirmation.sectionDeleteMultipleApps",{appName:a.appDefinitionName,pageName:i,appDefId:a.appDefinitionId,dependentAppNames:e.map(p,"appDefinitionName"),onConfirm:function(){r(t,n,o,s)}},!0)};return{deleteWidget:function(e,i,n,o){var r=e.components.data.get(i),s=e.documentServices.tpa.app.isPremium(r.applicationId),p=e.documentServices.tpa.app.getData(r.applicationId),d=e.documentServices.tpa.app.hasSections(p);s&&!d&&n?e.panelManager.openPanel("tpaPanels.confirmation.premiumTPADelete",{appName:p.appDefinitionName,appDefId:p.appDefinitionId,onConfirm:function(){var n=e.documentServices.tpa.app.isLastAppComp(r.applicationId);a.deleteWidget(e,i);var s={app_id:p.appDefinitionId,app_site_id:p.instanceId,instance_id:i.id,is_last_tpa:n?1:0,component_type:"tpa"};e.bi.event(t.bi.events.REMOVE_COMPONENT_SECOND_STEP_CLICK,s),o&&o()}},!0):(a.deleteWidget(e,i),o&&o())},deleteSection:function(t,a,r,d,l,c,g){e.assign(g,g);var m=t.documentServices.tpa.app.isMultiSectionInstalled(d.applicationId),u=t.documentServices.tpa.app.getInstalledDependentAppsData(d.applicationId);l&&!e.isEmpty(u)?p(t,d,r,a,c,g,u):!l||m||!i.isOpen("se_tpaProvisionOnAdd")&&d.demoMode?!i.isOpen("us_groupRightClick")&&l?o(t,r,a,c,g):n(t,a,c,g):s(t,d,r,a,c,g)},displaySectionDeleteMessage:function(e,t){var a=e.components.data.get(t),i=e.documentServices.tpa.app.getData(a.applicationId);e.panelManager.openPanel("tpaPanels.message.cannotDeleteSection",{title:"tpa_messages_oops_title",appName:i.appDefinitionName,appDefId:i.appDefinitionId},!0)}}}),define("tpa/services/tpaCopyPasteService",["lodash","tpa/services/tpaDeleteService","tpa/services/tpaAddRemoveDSService"],function(e,t,a){return{copyComponentPlugin:function(e,t){return t.originCompId=e.id,t},addComponentPlugin:function(t,i,n){var o=e.get(n,"data.applicationId"),r=e.get(n,"data.widgetId"),s=e.get(n,"originCompId"),p=t.documentServices.tpa.app.getData(o),d=t.components.get.byId(s),l=t.components.layout.isHorizontallyStretchedToScreen(d);return a.addWidget(t,p.appDefinitionId,{widgetId:r,componentDefinition:n,parentContainerRef:i,invokeAddAppCallbacks:!1,dontStretch:!l})},cutComponentPlugin:function(e,a){t.deleteWidget(e,a,!1)}}}),define("tpa",["lodash","core","experiment","tpa/utils/tpaUtils","tpa/constants/constants","tpa/services/tpaPostMessageService","tpa/services/tpaPreviewPostMessageService","tpa/appMarket/services/appMarketPostMessageService","tpa/appMarket/services/appMarketTabService","tpa/settings/compPanels/tpaSettings","tpa/compPanels/appMarketPanel","tpa/packagePicker/packagePicker","tpa/compModals/appMarketAppModal","tpa/compModals/appMarketPermissionsModal","tpa/compModals/tpaSettingsModal","tpa/compModals/appMarketModal","tpa/services/navigateAndOpenAppService","tpa/addPanelData/section","tpa/addPanelData/music/musicSection","tpa/addPanelData/video/videoSection","tpa/addPanelData/gallery/proGalleriesSection","tpa/addPanelData/contact/contactSection","tpa/bi/bi","tpa/superApps/superApps","tpa/services/pendingAppsService","tpa/services/dashboardAppService","tpa/gfpp/tpaGfppData","tpa/addPanelData/addPanelService","tpa/services/tpaDeleteService","tpa/services/tpaCompNameService","tpa/handlers/editorTPAHandlers","tpa/handlers/editorRefreshTPADataAfterUpgrade","tpa/appMarket/utils/appMarketUtils","tpa/appMarket/appMarketHandlers","tpa/settings/settings","tpa/experiments/experiments","tpa/superApps/superAppsConstants","tpa/superApps/gfpp/superAppsGfppDataCacheService","tpa/services/tpaCopyPasteService","tpa/handlers/editorSuperAppsHandlers","tpa/services/tpaAddAppService"],function(e,t,a,i,n,o,r,s,p,d,l,c,g,m,u,h,y,f,P,v,_,I,S,A,w,D,b,T,E,C,M,k,O,N,x,B,F,L,H,R,V){var U,G=!1,W=function(e){U=e,o(e,window.addEventListener).addListenerToTpaMessage(),r.init(e),s.init(e),A.init(e),L.init(e.panelManager),j(e)},j=function(i){a.isOpen("se_expandAppMarketAfterPublish")&&i.registerSitePublishedCallbacks(function(){!i.getUserPreferences().site.get("tpa.compPanels.appMarketPanel"+t.constants.LEFT_BAR.WAS_BUTTON_CLICKED_KEY)&&e.isEmpty(i.store.getState().leftBar.collapseOnClick)&&(i.leftBar.expandButton("tpa.compPanels.appMarketPanel"),i.bi.event(S.events.APP_MARKET_ICON_EXPANDED,{site_id:i.documentServices.generalInfo.getSiteId()}))})},K=function(t){var n=i.isInDevMode();t.documentServices.tpa.initEditor(n,B),ee(t);var o=t.pluginService;e.forEach(t.documentServices.tpa.constants.COMP_TYPES,function(e){t.registerCompNamePlugin(e,C.getCompName.bind(null,t)),o.registerPlugin(o.pluginConstants.DOUBLE_CLICK,e,q)}),e.forEach(t.documentServices.tpa.constants.TPA_COMP_TYPES,function(e){t.registerCompNamePlugin(e,C.getCompName.bind(null,t)),o.registerPlugin(o.pluginConstants.DOUBLE_CLICK,e,q)}),t.registerRemovePlugin(t.documentServices.tpa.constants.COMP_TYPES.TPA_WIDGET,E.deleteWidget.bind(null,t)),t.registerRemovePlugin(t.documentServices.tpa.constants.COMP_TYPES.TPA_GLUED_WIDGET,E.deleteWidget.bind(null,t)),t.registerRemovePlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_WIDGET,E.deleteWidget.bind(null,t)),t.registerRemovePlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,E.deleteWidget.bind(null,t)),t.registerRemovePlugin(t.documentServices.tpa.constants.COMP_TYPES.TPA_SECTION,E.deleteSection.bind(null,t)),t.registerRemovePlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_SECTION,E.deleteSection.bind(null,t)),t.registerCopyComponentPlugin(t.documentServices.tpa.constants.COMP_TYPES.TPA_WIDGET,H.copyComponentPlugin),t.registerCopyComponentPlugin(t.documentServices.tpa.constants.COMP_TYPES.TPA_GLUED_WIDGET,H.copyComponentPlugin),t.registerCopyComponentPlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_WIDGET,H.copyComponentPlugin),t.registerCopyComponentPlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,H.copyComponentPlugin),t.registerAddComponentPlugin(t.documentServices.tpa.constants.COMP_TYPES.TPA_WIDGET,H.addComponentPlugin),t.registerAddComponentPlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,H.addComponentPlugin),t.registerAddComponentPlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_WIDGET,H.addComponentPlugin),t.registerAddComponentPlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,H.addComponentPlugin),t.registerCutComponentPlugin(t.documentServices.tpa.constants.COMP_TYPES.TPA_WIDGET,H.cutComponentPlugin.bind(null,t)),t.registerCutComponentPlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,H.cutComponentPlugin.bind(null,t)),t.registerCutComponentPlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_WIDGET,H.cutComponentPlugin.bind(null,t)),t.registerCutComponentPlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,H.cutComponentPlugin.bind(null,t)),t.registerCannotRemovePlugin(t.documentServices.tpa.constants.COMP_TYPES.TPA_SECTION,E.displaySectionDeleteMessage.bind(null,t)),t.registerCannotRemovePlugin(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_SECTION,E.displaySectionDeleteMessage.bind(null,t)),a.isOpen("us_groupRightClick")||(t.tooltipTextService.registerTooltipText(t.documentServices.tpa.constants.COMP_TYPES.TPA_SECTION,"DELETE","tpa_section_cant_delete_tooltip"),t.tooltipTextService.registerTooltipText(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_SECTION,"DELETE","tpa_section_cant_delete_tooltip")),t.tooltipTextService.registerTooltipText(t.documentServices.tpa.constants.COMP_TYPES.TPA_GLUED_WIDGET,"SHOW_ON_ALL_PAGES","tpa_glued_show_on_all_pages_tooltip"),t.tooltipTextService.registerTooltipText(t.documentServices.tpa.constants.TPA_COMP_TYPES.TPA_GLUED_WIDGET,"SHOW_ON_ALL_PAGES","tpa_glued_show_on_all_pages_tooltip"),p.openAppMarketTabFromUrlParamIfNeeded(t.panelManager.openPanel),y.handleIfComingFromETPA(t),t.registerInitUserPrefsCallback(function(){w.updateNotification(t)}),te(t),X(t),t.documentServices.tpa.billing.getPremiumApps(t.site.getMetaSiteId()),t.registerSitePublishedCallbacks(Z.bind(null,t)),t.registerDeviceTypeChangeCallbacks(Q.bind(null,t)),J(t),S.registerEvents(t),z(t)},z=function(e){e.documentServices.tpa.app.isInstalled(F.ECOM.APP_DEF_ID)&&(Y(e)||(e.documentServices.bi.error(S.errors.ECOM_MISSING_PAGES),B.isEcomAddAppExperimentOn()&&e.panelManager.openPanel("tpaPanels.confirmation.addEcom",{onConfirm:function(){e.documentServices.tpa.section.add(F.ECOM.APP_DEF_ID)}},!0)))},Y=function(t){var a=t.documentServices.tpa.app.getDataByAppDefId(F.ECOM.APP_DEF_ID).applicationId,i=t.documentServices.tpa.app.getSections(a);return i&&!e.isEmpty(i)},q=function(t,a){var o=e.head(a.comp),r=t.components.data.get(o),s=t.documentServices.tpa.app.getData(r.applicationId);if(t.isDesktopEditor()){var p=e.get(s,"appDefinitionId",null);i.bi.reportBIOnAppIntent(t,S.events.APP_INTENT,p,n.BI.initiator.EDITOR,n.BI.type.DOUBLECLICK_SETTINGS),x.open(t,o)}},X=function(e){P.registerSection(e),v.registerSection(e),I.registerSection(e),_.registerSection(e)},J=function(e){e.documentServices.tpa.appMarket.getDataForPage(e.documentServices.pages.getFocusedPageId()),e.registerPageNavigationCallback(function(t){e.documentServices.tpa.appMarket.getDataForPage(t)})},$=function(e,t){e.documentServices.tpa.change.editMode(t?"preview":"editor"),G=t,t||e.documentServices.tpa.closePopupsAndModal()},Z=function(e){e.documentServices.tpa.change.sitePublished()},Q=function(e){e.documentServices.tpa.change.deviceType(e.getDeviceType())},ee=function(e){e.registerToViewerChange(function(){var t=e.getPreviewMode();t!==G&&$(e,t)})},te=function(e){T.init(e,A.relatedApps.addPanelCategories,function(){f.registerAddPanelSection(e)})};return{initEditor:W,onPreviewReady:K,editModeChange:$,packagePicker:c,compPanels:{tpaSettings:d,appMarketPanel:l},compModals:{tpaSettingsModal:u,appMarketAppModal:g,appMarketPermissionsModal:m,appMarketModal:h},constants:n,superApps:A,superAppsConstants:F,dashboardApps:D,gfpp:b,getEditorAPI:function(){return U},editorTPAHandlers:M,editorSuperAppsHandlers:R,editorRefreshTPADataAfterUpgrade:k,appMarketUtils:O,settings:x,appMarketTabService:p,appMarketHandlers:N,bi:S,services:{tpaAddAppService:V}}});
//# sourceMappingURL=tpa.min.js.map