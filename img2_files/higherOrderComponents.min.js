"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}();define("higherOrderComponents/util/displayName",[],function(){function e(e){return e.displayName||e.name||"Component"}function t(t,o){return t+"("+e(o)+")"}return t}),define("higherOrderComponents/connectEditorAPI/connectEditorAPI",["lodash","react","higherOrderComponents/util/displayName"],function(e,t,o){return function(r){return function(n){var i=t.createClass({contextTypes:{editorAPI:t.PropTypes.object.isRequired},render:function(){var o=r(this.context.editorAPI,this.props),i=e.defaults({},o,this.props);return t.createElement(n,i)}});return i.displayName=o("ConnectEditor",n),i}}}),define("higherOrderComponents/connectEditorAPI/EditorAPIProvider",["lodash","react"],function(e,t){var o=t.createClass({propTypes:{editorAPI:t.PropTypes.object.isRequired,children:t.PropTypes.element.isRequired},childContextTypes:{editorAPI:t.PropTypes.object.isRequired},getChildContext:function(){return{editorAPI:this.props.editorAPI}},render:function(){return t.Children.only(this.props.children)}});return o.displayName="EditorAPIProvider",o}),define("higherOrderComponents/overlappedCompTooltip/overlappedCompTooltip",["reactDOM","lodash","jquery","react","util","coreUtilsLib","core","baseUI","higherOrderComponents/util/displayName","higherOrderComponents/connectEditorAPI/connectEditorAPI"],function(e,t,o,r,n,i,s,p,l,c){function a(c){var a=r.createClass({propTypes:{registeredHideBubbleOnPreview:r.PropTypes.bool,setRegisteredHideBubbleOnPreview:r.PropTypes.func,previewMode:r.PropTypes.bool,previewTop:r.PropTypes.number,getComponentsUnderClick:r.PropTypes.func,getSitePreference:r.PropTypes.func,setSitePreference:r.PropTypes.func,getSessionPreference:r.PropTypes.func,setSessionPreference:r.PropTypes.func,reportBI:r.PropTypes.func,toggleHalfOpacityTools:r.PropTypes.func,toggleHideTools:r.PropTypes.func,showFloatingBubble:r.PropTypes.func,hideFloatingBubble:r.PropTypes.func,registerToGoToPreview:r.PropTypes.func,getRelativeToScreenConsideringScroll:r.PropTypes.func,toggleHideToolsBtnBlink:r.PropTypes.func},getInitialState:function(){return this.intersectionComp=null,this.hideQuickTipTimer=null,{quickTipAlreadyShown:!1}},componentDidMount:function(){this.props.registeredHideBubbleOnPreview||(this.props.registerToGoToPreview(this.hideQuickTip),this.props.setRegisteredHideBubbleOnPreview(!0)),this.checkOverlap=i.timeUtils.throttle(this.checkOverlap,u,{leading:!1})},getComponentsLayoutByMouseEvent:function(e){var o=this;return t.map(this.props.getComponentsUnderClick(e),function(e){return o.props.getRelativeToScreenConsideringScroll(e).bounding})},calcOverlapPercentage:function(e,t){var o=n.math.getSquaresIntersection(t,e);return o?(this.intersectionComp=t,o.width*o.height/(t.height*t.width)*100):0},isOverlapping:function(t){var o=this.getComponentsLayoutByMouseEvent(t);if(!this.wrapped)return!1;var r=e.findDOMNode(this.wrapped),n={x:r.offsetLeft,y:r.offsetTop-this.props.previewTop,width:r.offsetWidth,height:r.offsetHeight};for(var i in o)if(o.hasOwnProperty(i)&&this.calcOverlapPercentage(n,o[i])>d)return!0;return!1},hideQuickTip:function(){window.clearTimeout(this.hideQuickTipTimer),this.props.toggleHalfOpacityTools(!1),this.props.hideFloatingBubble()},showQuickTip:function(e){var t=o(window).width()/2,n=e.pageX<t?2:-2,i=r.createElement(p.popoverTemplates.quickTip,{text:"toolbars_hide_tooltip_text",linkActionText:"toolbars_hide_tooltip_link",linkAction:this.quickTipLinkAction,linkMouseEnter:this.quickTipLinkMouseEnter,linkMouseLeave:this.quickTipLinkMouseLeave,symbol:"idea-bulb",closeAction:this.quickTipCloseAction}),l={height:100,width:this.intersectionComp.width,top:e.clientY,left:this.intersectionComp.x+n},c={noArrow:!0,shake:!0,behindPopUps:!0,hideMethod:this.props.toggleHalfOpacityTools.bind(this,!1),alignment:p.uiConstants.TOOLTIP.ALIGNMENT.RIGHT,timeoutForMouseOverBubble:h};this.props.showFloatingBubble(i,l,c,!0),this.props.reportBI(s.bi.events.editor.hide_tools.show_controls_tooltip_appearance)},moveQuickTip:function(){var e=o(window).width()/2,t=r.createElement(p.popoverTemplates.quickTip,{text:"toolbars_show_tooltip_text",symbol:"idea-bulb",closeAction:this.quickTipCloseAction}),n={height:this.props.previewTop+30,width:284,top:0,left:e-142},i={noArrow:!0,behindPopUps:!0,shouldHaveTransition:!0};this.props.showFloatingBubble(t,n,i,!0),this.props.toggleHideToolsBtnBlink(!0)},quickTipCloseAction:function(){this.hideQuickTip(),this.props.reportBI(s.bi.events.editor.hide_tools.show_controls_tooltip_close);var e=this.props.getSessionPreference("hideToolsQuickTipShown")||0;this.props.setSessionPreference("hideToolsQuickTipShown",e+1)},quickTipLinkAction:function(){this.props.toggleHalfOpacityTools(!1),this.props.toggleHideTools(!0),this.props.reportBI(s.bi.events.editor.hide_tools.hide_controls,{origin:"tooltip"}),this.moveQuickTip(),this.props.setSitePreference("hideToolsQuickTipShown",!0)},quickTipLinkMouseEnter:function(){this.props.toggleHalfOpacityTools(!0)},quickTipLinkMouseLeave:function(){this.props.toggleHalfOpacityTools(!1)},resetQuickTip:function(){this.setState({quickTipAlreadyShown:!1})},checkOverlap:function(e){this.props.previewMode||this.props.getSitePreference("hideToolsQuickTipShown")||this.props.getSessionPreference("hideToolsQuickTipShown")>4||this.state.quickTipAlreadyShown||!this.isOverlapping(e)||(this.showQuickTip(e),this.setState({quickTipAlreadyShown:!0}))},wrappedMounted:function(e){this.wrapped=e},onMouseMove:function(e){e.persist(),this.checkOverlap(e)},render:function(){var e=t.assign({},this.props,{onMouseMove:this.onMouseMove,onMouseEnter:this.resetQuickTip,ref:this.wrappedMounted});return r.createElement(c,e)}});return a.displayName=l("Overlapped",c),a}var u=s.constants.OVARLAPPING_COMP.DELAY,h=s.constants.OVARLAPPING_COMP.HIDE_DELAY,d=s.constants.OVARLAPPING_COMP.MIN_OVERLAP,f=function(e){return{registeredHideBubbleOnPreview:e.registeredHideBubbleOnPreview,setRegisteredHideBubbleOnPreview:function(t){e.registeredHideBubbleOnPreview=t},registerToGoToPreview:e.preview.registerToGoToPreview,getRelativeToScreenConsideringScroll:e.components.layout.getRelativeToScreenConsideringScroll,getComponentsUnderClick:e.selection.getComponentsUnderClick,previewTop:e.getPreviewPosition().top,previewMode:e.getPreviewMode(),getSitePreference:e.userPreferences.site.get,setSitePreference:e.userPreferences.site.set,getSessionPreference:e.userPreferences.session.get,setSessionPreference:e.userPreferences.session.set,reportBI:e.bi.event,toggleHalfOpacityTools:e.toolsControl.toggleHalfOpacityTools,toggleHideTools:e.toolsControl.toggleHideTools,showFloatingBubble:e.showFloatingBubble,hideFloatingBubble:e.hideFloatingBubble,toggleHideToolsBtnBlink:e.toolsControl.toggleHideToolsBtnBlink}};return function(e){return c(f)(a(e))}}),define("higherOrderComponents/panelFrame/panelFrame",["lodash","react","prop-types","core","higherOrderComponents/util/displayName","higherOrderComponents/connectEditorAPI/connectEditorAPI"],function(e,t,o,r,n,i){function s(i){var s=t.createClass({propTypes:{selectedComponentType:o.string,onHelpClicked:o.func,panelName:o.string.isRequired,helpId:o.string,isSingleInstance:o.bool,registerPanelType:o.func.isRequired,closePanelByName:o.func.isRequired,openHelpCenter:o.func},getDefaultProps:function(){return{isSingleInstance:!1}},blockOuterScroll:function(e){var t=e.currentTarget,o=e.currentTarget.scrollHeight-e.currentTarget.offsetHeight,r=e.deltaY%3?e.deltaY:10*e.deltaY;t.scrollTop+r<=0?(t.scrollTop=0,e.preventDefault()):t.scrollTop+r>=o&&(t.scrollTop=o,e.preventDefault()),e.stopPropagation()},componentWillMount:function(){this.props.registerPanelType(this.props.panelName,i.displayName,this.props.isSingleInstance)},close:function(){this.props.closePanelByName(this.props.panelName)},openHelpCenter:function(t){if(this.props.helpId){var o={learn_more:!1,origin:r.constants.BI.HELP.ORIGIN.PANEL,panel_name:this.props.panelName,component:this.props.selectedComponentType};this.props.selectedComponentType||e.merge(o,e.pick(t,"component")),this.props.openHelpCenter(this.props.helpId,null,o)}this.props.onHelpClicked&&this.props.onHelpClicked()},render:function(){return t.createElement(i,e.assign({},this.props,{blockOuterScroll:this.blockOuterScroll,openHelpCenter:this.openHelpCenter,close:this.close}))}});return s.displayName=n("PanelFrame",i),s}var p=function(e){return{registerPanelType:e.panelManager.registerPanelType,closePanelByName:e.panelManager.closePanelByName,openHelpCenter:e.panelManager.openHelpCenter}};return function(e){return i(p)(s(e))}}),define("higherOrderComponents/linkUserPreferences/linkUserPreferences",["lodash","react","prop-types","higherOrderComponents/connectEditorAPI/connectEditorAPI","higherOrderComponents/util/displayName"],function(e,t,o,r,n){function i(r,i){var s=function(o){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e)),o=null;return t.props.userPrefType&&t.props.dontShowAgainKey&&(o=!!t.props.userPreferences[t.props.userPrefType].get(t.props.dontShowAgainKey)),t.state={dontShowAgain:o},t}return _inherits(n,o),_createClass(n,[{key:"toggleDontShowAgain",value:function(){if(this.props.userPrefType&&this.props.dontShowAgainKey){var e=!this.state.dontShowAgain;this.props.userPreferences[this.props.userPrefType].set(this.props.dontShowAgainKey,e),this.setState({dontShowAgain:e})}}},{key:"render",value:function(){var o=e.assign({},this.props,{toggleDontShowAgain:this.toggleDontShowAgain.bind(this),dontShowAgain:this.state.dontShowAgain});return t.createElement(r,o)}}]),n}(t.Component);return s.displayName=n("LinkUserPreferences",r),s.propTypes={userPreferences:o.object.isRequired,userPrefType:o.oneOf(["site","session","global"]),dontShowAgainKey:o.string},s.defaultProps=i||{},s}function s(e){return{userPreferences:e.userPreferences}}return function(e,t){return r(s)(i(e,t))}}),define("higherOrderComponents/renderWhenMutated/renderWhenMutated",["lodash","react","higherOrderComponents/util/displayName"],function(e,t,o){function r(r){var n=t.createClass({shouldComponentUpdate:function(t){var o=e.keys(r.propTypes),n=this.props;return e.some(o,function(o){var r=n[o],i=t[o];return(!e.isFunction(r)||!e.isFunction(i))&&!e.isEqual(r,i)})},render:function(){return t.createElement(r,this.props)}});return n.displayName=o("RenderWhenMutated",r),n}return r}),define("higherOrderComponents",["higherOrderComponents/connectEditorAPI/connectEditorAPI","higherOrderComponents/connectEditorAPI/EditorAPIProvider","higherOrderComponents/overlappedCompTooltip/overlappedCompTooltip","higherOrderComponents/panelFrame/panelFrame","higherOrderComponents/linkUserPreferences/linkUserPreferences","higherOrderComponents/renderWhenMutated/renderWhenMutated"],function(e,t,o,r,n,i){return{connectEditorAPI:e,EditorAPIProvider:t,overlappedCompTooltip:o,panelFrame:r,linkUserPreferences:n,renderWhenMutated:i}});
//# sourceMappingURL=higherOrderComponents.min.js.map