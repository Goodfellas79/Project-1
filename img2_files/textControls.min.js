"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("textControls/comps/iconButton.rt",["react","lodash","symbols","baseUI"],function(t,e,o,n){return function(){return t.createElement(n.tooltip,{value:this.props.tooltipValue,disabled:!this.props.tooltipValue,styleType:n.uiConstants.TOOLTIP.STYLE_TYPE.SMALL},t.createElement("div",{className:"icon-button-container"},t.createElement("button",{className:this.getClassName(),onClick:this.handleClick,style:this.props.style,disabled:this.props.disabled},this.props.name?t.createElement("span",{key:"key"+this.props.name},t.createElement(o.symbol,{name:this.props.name})):null,t.createElement("span",{},this.props.children),this.props.popupMode?t.createElement(n.arrowButton,{key:"iconButtonArrow",withoutBorder:!0}):null)))}}),define("textControls/comps/iconButton",["react","lodash","textControls/comps/iconButton.rt","baseUI"],function(t,e,o,n){function i(t){var e={};switch(t){case"textOutdentLeft":case"textOutdentRight":e.category="decrease";break;case"textIndentLeft":case"textIndentRight":e.category="increase";break;case"textWriteDirectionLeft":e.category="RTL";break;case"textWriteDirectionRight":e.category="LTR"}return e}return t.createClass({displayName:"iconButton",render:o,mixins:[n.reportUIChangeMixin],propTypes:{isSelected:t.PropTypes.bool,buttonMode:t.PropTypes.bool,popupMode:t.PropTypes.bool},contextTypes:{reportUIChange:t.PropTypes.func},getDefaultProps:function(){return{isSelected:!1,buttonMode:!0,popupMode:!1}},getClassName:function(){var t="";return this.props.className&&(t+=" "+this.props.className),this.props.isSelected&&(t+=" selected"),this.props.buttonMode&&!this.props.popupMode&&(t+=" icon-button"),this.props.popupMode&&(t+=" icon-button popup"),t.trim()},handleClick:function(){var t=i(this.props.name);this.reportUIChange(t,this.props.name||this.props.biName),this.props.onClick()}})}),define("textControls/comps/fontFamily.rt",["react","lodash","baseUI","symbols","experiment"],function(t,e,o,n,i){return function(){function s(t,e,o){this.handleOptionsVisible(o)}function r(e,n,i,s,r,l){return t.createElement(o.dropDown.option,{shouldTranslate:!1,value:r.value,key:r.value,searchText:r.label},t.createElement("div",{className:"font-option-container"},t.createElement("span",{className:"font-label"},r.label),t.createElement("span",{className:"font-example"},this.translateIfNeeded(r.example)),e&&r.isNew?t.createElement("span",{key:"font-badge",className:"font-badge"},this.translateIfNeeded("text_editor_fonts_dropdown_new_badge")):null))}function l(n,i,s,l){return t.createElement.apply(this,[o.dropDown.optgroup,{label:s.groupName,key:s.groupName},e.map(s.items,r.bind(this,n,i,s,l)),this.isMissingFont()?t.createElement(o.dropDown.option,{key:"textStyleCustom",value:this.props.value,style:{display:"none"},className:"missing-uploaded-font"},t.createElement("div",{className:"font-option-container"},t.createElement("span",{className:"font-label"},this.getMissingFontName()))):null])}function a(e,o,i,s){return t.createElement("div",{key:s,className:"font-family-footer-link "+i.className,onClick:i.onClick},i.symbol?t.createElement(n.symbol,{name:i.symbol,key:"footerLinkIcon-"+s}):null,t.createElement("span",{},this.translateIfNeeded(i.label)))}function c(t,e,o){this.handleOptionsVisible(o)}function p(e,n,i,s){return t.createElement(o.dropDown.option,{shouldTranslate:!1,value:i.value,className:"font-option "+(this.props.optionsClass?this.props.optionsClass:""),key:this.props.value,searchText:i.label},t.createElement("div",{className:"font-option-container"},t.createElement("span",{className:"font-label"},i.label),t.createElement("span",{className:"font-example"},this.translateIfNeeded(i.example)),e&&i.isNew?t.createElement("span",{key:"font-badge",className:"font-badge"},this.translateIfNeeded("text_editor_fonts_dropdown_new_badge")):null))}function u(e,o,n,i){return t.createElement("span",{key:i,className:"font-family-footer-label",onClick:n.onClick},this.translateIfNeeded(n.label))}function d(){var n=i.isOpen("newFontsBadge"),r=i.isOpen("fontsUpload")||i.isOpen("fontsUploadAsync");return t.createElement("div",{style:{display:"inline"}},r?t.createElement.apply(this,[o.dropDown.combobox,{key:"font-family-with-fonts-upload-changes",label:this.props.label,ref:"combobox",optionsWidth:this.getOptionsWidth(),valueLink:this.props.valueLink,value:this.props.value,className:"font-family-dd "+(this.props.toolbarMode?"toolbar-mode":""),onChange:this.props.onChange,infoText:this.props.infoText,onOptionsVisible:s.bind(this,n,r),infoTitle:this.props.infoTitle},e.map(this.state.fontsItems,l.bind(this,n,r)),this.props.footerLinks?t.createElement(o.dropDown.footer,{key:"font_family_footer",className:"footer-content"},t.createElement.apply(this,["div",{className:"footer-links-container fonts-upload"},e.map(this.props.footerLinks,a.bind(this,n,r))])):null]):null,r?null:t.createElement.apply(this,[o.dropDown.combobox,{key:"font-family-without-fonts-upload-changes",label:this.props.label,ref:"combobox",optionsWidth:this.props.optionsWidth,valueLink:this.props.valueLink,value:this.props.value,className:"font-family-dd "+(this.props.toolbarMode?"toolbar-mode":""),onChange:this.props.onChange,infoText:this.props.infoText,onOptionsVisible:c.bind(this,n,r),infoTitle:this.props.infoTitle},e.map(this.getFontOptionsWithoutGroups(),p.bind(this,n,r)),this.props.footerLinks?t.createElement(o.dropDown.footer,{key:"font_family_footer"},t.createElement.apply(this,["div",{className:"footer-links-container"},e.map(this.props.footerLinks,u.bind(this,n,r))])):null]))}return t.createElement(o.tooltip,{value:this.props.tooltipValue,disabled:!this.props.tooltipValue,styleType:this.props.tooltipStyleType},d.apply(this,[]))}}),define("textControls/utils/constants",["lodash","experiment"],function(t,e){var o={h1:{seoTag:"h1",label:"FONT_0_LABEL",tag:"h1",displayName:e.isOpen("us_theme_names")?"text_editor_theme_new_1":"text_editor_theme_1",cssClass:"font_0"},h2:{seoTag:"h2",label:"FONT_2_LABEL",tag:"h2",displayName:e.isOpen("us_theme_names")?"text_editor_theme_new_2":"text_editor_theme_2",cssClass:"font_2"},h3:{seoTag:"h3",label:"FONT_3_LABEL",tag:"h3",displayName:e.isOpen("us_theme_names")?"text_editor_theme_new_3":"text_editor_theme_3",cssClass:"font_3"},h4:{seoTag:"h4",label:"FONT_4_LABEL",tag:"h4",displayName:e.isOpen("us_theme_names")?"text_editor_theme_new_4":"text_editor_theme_4",cssClass:"font_4"},h5:{seoTag:"h5",label:"FONT_5_LABEL",tag:"h5",displayName:e.isOpen("us_theme_names")?"text_editor_theme_new_5":"text_editor_theme_5",cssClass:"font_5"},h6:{seoTag:"h6",label:"FONT_6_LABEL",tag:"h6",displayName:e.isOpen("us_theme_names")?"text_editor_theme_new_6":"text_editor_theme_6",cssClass:"font_6"},p:{seoTag:"p",label:"FONT_7_LABEL",tag:"p",displayName:"text_editor_theme_7",cssClass:"font_7"},div:{seoTag:"p",label:"FONT_8_LABEL",tag:"div",displayName:"text_editor_theme_8",cssClass:"font_8"},address:{seoTag:"p",label:"FONT_9_LABEL",tag:"address",displayName:"text_editor_theme_9",cssClass:"font_9"}};return{MAX_TEXT_LENGTH:6e4,CK_OFF:2,CK_ON:1,CK_DISABLED:0,IMAGE_WHITE_LIST_ATTRIBUTES:["src","style","wix-comp"],FORBIDDEN_TAGS:["script","iframe","embed","object","meta"],SENSITIVE_ATTRIBUTES:["href","src","style"],FORBIDDEN_TAGS_AND_ATTRIBUTES:["script","iframe","embed","object","meta","expression","id","comp","dataquery","propertyquery","styleid","skin","skinpart","y","x","scale","angle","idprefix","state","container","listposition","hasproxy","vcfield","vcview","vctype","pos","onAbort","onActivate","onAfterPrint","onAfterUpdate","onBeforeActivate","onBeforeCopy","onBeforeCut","onBeforeDeactivate","onBeforeEditFocus","onBeforePaste","onBeforePrint","onBeforeUnload","onBeforeUpdate","onBegin","onBlur","onBounce","onCellChange","onChange","onClick","onContextMenu","onControlSelect","onCopy","onCut","onDataAvailable","onDataSetChanged","onDataSetComplete","onDblClick","onDeactivate","onDrag","onDragEnd","onDragLeave","onDragEnter","onDragOver","onDragDrop","onDragStart","onDrop","onEnd","onError","onErrorUpdate","onFilterChange","onFinish","onFocus","onFocusIn","onFocusOut","onHashChange","onHelp","onInput","onKeyDown","onKeyPress","onKeyUp","onLayoutComplete","onLoad","onLoseCapture","onMediaComplete","onMediaError","onMessage","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onMouseWheel","onMove","onMoveEnd","onMoveStart","onOffline","onOnline","onOutOfSync","onPaste","onPause","onPopState","onProgress","onPropertyChange","onReadyStateChange","onRedo","onRepeat","onReset","onResize","onResizeEnd","onResizeStart","onResume","onReverse","onRowsEnter","onRowExit","onRowDelete","onRowInserted","onScroll","onSeek","onSelect","onSelectionChange","onSelectStart","onStart","onStop","onStorage","onSyncRestored","onSubmit","onTimeError","onTrackChange","onUndo","onUnload","onURLFlip","seekSegmentTime"],DEFAULT_STYLES_MAP:o,CLASS_TO_FONT:{font_0:{tag:"h1",class:"font_0"},font_2:{tag:"h2",class:"font_2"},font_3:{tag:"h3",class:"font_3"},font_4:{tag:"h4",class:"font_4"},font_5:{tag:"h5",class:"font_5"},font_6:{tag:"h6",class:"font_6"},font_7:{tag:"p",class:"font_7"},font_8:{tag:"p",class:"font_8"},font_9:{tag:"p",class:"font_9"}},PALETTE_SEQUENCES:["color_11","color_12","color_13","color_14","color_15","color_16","color_17","color_18","color_19","color_20","color_21","color_22","color_23","color_24","color_25","color_26","color_27","color_28","color_29","color_30","color_31","color_32","color_33","color_34","color_35"],TEXT_LIST_TYPES:{textListNone:"nonelist",textListNumbers:"numberedlist",textListBullets:"bulletedlist"},TEXT_BACK_COLOR_TYPES:{textListNone:"noColor"},TEXT_LIST_TYPES_RTL:{textListNone:"nonelist",textListNumbersRight:"numberedlist",textListBulletsRight:"bulletedlist"},ALIGNMENT_TYPES:{textAlignLeft:"justifyleft",textAlignCenter:"justifycenter",textAlignRight:"justifyright",textAlignBlock:"justifyblock"},FONT_SIZE:{MIN:6,MAX:215},BLOG_CK_EDITOR_FONT_STYLES:{type:"map",metaData:{isPreset:!0,isHidden:!1,description:"",isPersistent:!1},items:{font_0:{seoTag:"h1",label:"FONT_0_LABEL"},font_1:{seoTag:"h2",label:"FONT_1_LABEL"},font_2:{seoTag:"h2",label:"FONT_2_LABEL"},font_3:{seoTag:"h3",label:"FONT_3_LABEL"},font_4:{seoTag:"h4",label:"FONT_4_LABEL"},font_5:{seoTag:"h5",label:"FONT_5_LABEL"},font_6:{seoTag:"h6",label:"FONT_6_LABEL"},font_7:{seoTag:"p",label:"FONT_7_LABEL"},font_8:{seoTag:"p",label:"FONT_8_LABEL"},font_9:{seoTag:"p",label:"FONT_9_LABEL"},font_10:{seoTag:"p",label:"FONT_10_LABEL"}},id:"CK_EDITOR_FONT_STYLES"},BLOG_EDITOR_STYLES:{type:"map",metaData:{isPersistent:!1},items:{h1:{tag:"h1",cssClass:"font_3"},h2:{tag:"h2",cssClass:"font_4"},h3:{tag:"h3",cssClass:"font_5"},h4:{tag:"h4",cssClass:"font_6"},h5:{tag:"h5",cssClass:"font_7"},h6:{tag:"h6",cssClass:"font_8"},p:{tag:"p",cssClass:"font_9"},div:{tag:"div",cssClass:"font_8",label:"default",seoTag:"hatul"}},id:"WIXAPPS_EDITOR_STYLES"},DEFAULT_STYLE_CLASS:"font_100",FALLBACK_STYLE_CLASS:"font_8",STYLE_COMMANDS:["bold","fontSize","fontFamily","foreColor","italic"],TEXT_BLOCKS:t.keys(o).concat(["ul","ol"]),LANG_TO_EXAMPLE_KEY:{latin:"","latin-ext":"text_editor_font_example_latin_ext_constant",cyrillic:"text_editor_font_example_cyrillic_constant",japanese:"text_editor_text_editor_font_example_japanese_constant",korean:"text_editor_font_example_korean_constant",arabic:"text_editor_font_example_arabic_constant",hebrew:"text_editor_font_example_hebrew_constant"},FONT_GROUPS:{"my-uploads":"text_editor_font_dropdown_my_fonts",latin:"text_editor_font_dropdown_all_fonts","latin-ext":"add_languages_eastern_european",cyrillic:"add_languages_cyrillic",japanese:"add_languages_japanese",korean:"add_languages_korean",arabic:"add_languages_arabic",hebrew:"add_languages_hebrew"}}}),define("textControls/utils/colorUtils",["lodash","textControls/utils/constants","util"],function(t,e,o){function n(n,s){n=o.colors.getColorInHex(n);var r=t.findKey(s,function(t){return t===n});return i(r,e.PALETTE_SEQUENCES)?r:n}function i(e,o){return t.includes(o,e)}function s(e){var o=[];return t.forEach(e,function(t,e){var n=e.split("_")[1];o[n]=t}),{color:o}}function r(e,n){var i={};return t.forEach(n,function(t,n){i[e+n]=o.colors.getColorInHex(t)}),i}function l(t){return"noColor"!==t&&t?t:e.CK_OFF}return{getColorValueFromTheme:n,isColorInPaletteSequences:i,getThemeColorData:s,getHexColorsMap:r,getColorPickerValue:l}}),define("textControls/utils/fontUtils",["lodash","util","coreUtilsLib","pLoader","textControls/utils/colorUtils","experiment"],function(t,e,o,n,i,s){function r(t,e,o){var n=S.getFontsUrlWithParams(t,e,o);return n||""}function l(t,o){var i=n.getRootUrl("santa"),s=S.getWixStoredFontsCssUrlsWithParams(i,t);return"WixSite"===o&&(s=s.concat(e.serviceTopology.publicStaticsUrl+"/css/Helvetica/fontFace.css")),s}function a(e,o,n){return t.isString(e)?S.parseStyleFont(e,n,o):null}function c(e){var o=e.mediaServices.fontsManager.getList();if(!t.isEmpty(o)){var n=t.map(o);return t.sortBy(n,"displayName")}}function p(e,o,n){var i=t.get(e,"documentServices.fonts");if(i){var s=i.getSiteFontsOptions();return n&&(s=i.getAllFontsOptions()),L&&!o&&s.unshift({lang:"my-uploads",fonts:c(e)}),s}return[]}function u(t){return S.collectFontsFromTextDataArray([t])}function d(e,o,n){var s=i.getThemeColorData(e),r=t.groupBy(o,"cssClass"),l="";return t.forEach(n,function(t,e){var o="font: "+S.fontToCSSWithColor(t,s.color),n=h(e,r);l+=n+"{"+o+"}"}),l}function h(e,o){var n="";return o[e]&&t.forEach(o[e],function(t){n+=t.tag+", "}),n+="."+e}function f(e){return e=e.toLowerCase(),t.head(S.getMetadata([e]))}function m(e){var o="WixSite"!==e?t.omitBy(S.getFontsMetaData(),function(t){return"studio"===t.permissions}):{};return t.forEach(o,function(t,e){t.cssFontFamily=S.getFontFamilyWithFallbacks(e)}),o}function g(e,o){var n={};t.forEach(S.getFontsMetaData(),function(t,e){t.cdnName&&(n[e]=e)});var i=r(t.keys(n),e,o);return{missingFontsNames:n,missingFontsUrl:i}}function x(t){return this.stringifyFont(t,!1)}function C(t){return!0===t?"700":!1===t?"normal":t}function y(t){return!0===t?"italic":!1===t?"normal":t}function _(o,n,i){var s=y(o.italic)+" "+o.variant+" "+C(o.bold)+" "+o.size+"/"+o.lineHeight+" "+o.family.replace(/\s/g,"+");if(n&&o.color){var r=e.colors.getColorInHex(o.color);if(i){var l=t.findKey(i,function(t){return t===r});l&&(r="{"+l+"}")}s+=" "+r}return s}function T(){return"url("+e.media.getMediaUrl("textEditor/fonts.v3.png")+")"}function E(t){return S.getUploadedFontFaceStyles(t,e.serviceTopology.mediaRootUrl)}function v(e){return t(e).values().map(function(t){return S.getFontFamily(t)}).value()}function b(e){return t.transform(e.documentServices.theme.fonts.getMap(),function(e,o,n){var i=o.color.match("{(.*?)}");return e[n]=t.assign(o,{fontFamily:o.family,fontSize:t.parseInt(o.size),foreColor:i?i[1]:o.color}),e})}function k(e,o){var n=t.union(u(e),v(o));return t.filter(n,function(t){return S.isUploadedFontFamily(t)})}var S=o.fonts,L=s.isOpen("fontsUpload")||s.isOpen("fontsUploadAsync");return{getStyleFont:a,parseStyleFont:S.parseStyleFont,stringifyFontWithoutColor:x,stringifyFont:_,createFontsCssString:d,getCurrentSelectableFontsWithParams:p,getFont:f,getWixStoredFontsCss:l,getFontsMetadata:m,getAllCustomFontsUrls:g,getFontsSpriteUrl:T,getUploadedFontFace:E,isUploadedFont:S.isUploadedFontFamily,getUploadedId:S.getUploadedId,getThemeMap:b,getThemeFontFamilies:v,getUploadedUsedFonts:k}}),define("textControls/comps/fontFamily",["react","lodash","jquery","textControls/comps/fontFamily.rt","util","textControls/utils/constants","textControls/utils/fontUtils","experiment"],function(t,e,o,n,i,s,r,l){function a(t){return o(t).find("li:not(.missing-uploaded-font)")}function c(t){e.includes(m,t.label)&&e.assign(t,{isNew:!0})}function p(t){var e=t.scrollTop;return Math.round(e/f)}function u(t,e,o){var n=t.clientHeight,i=Math.round(n/f);return Math.min(e+i,o.length)}var d=l.isOpen("fontsUpload")||l.isOpen("fontsUploadAsync"),h=l.isOpen("fontsUploadFilterOtf"),f=d?36:24,m=["Adobe Caslon","Avenir","Avenir Light","Belinda","Brandon Grotesque","Bree","Cinzel","DIN Neuzeit Grotesk","Futura","Futura Light","Kepler","Libre Baskerville","Linotype Didot","Lulo Clean","Monotype Baskerville","Peaches & Cream","Playfair Display","Proxima Nova","Sail","Trend"];return t.createClass({displayName:"fontFamily",render:n,mixins:[i.translationMixin],propTypes:{infoText:t.PropTypes.string,label:t.PropTypes.string,onClose:t.PropTypes.func,doNotFocus:t.PropTypes.bool,footerLinks:t.PropTypes.arrayOf(t.PropTypes.shape({label:t.PropTypes.string.isRequired,onClick:t.PropTypes.func.isRequired})),fonts:t.PropTypes.arrayOf(t.PropTypes.shape({fonts:t.PropTypes.array.isRequired,lang:t.PropTypes.string.isRequired}).isRequired)},getUploadedFontName:function(t){var o=t.split(",")[2];return o=o.replace(i.fontsManagerUtils.constants.ORIGINAL_FONT_PREFIX,""),o=e.startCase(o)},getMissingFontName:function(){if(this.isMissingFont())return r.isUploadedFont(this.props.value)?this.getUploadedFontName(this.props.value):this.props.value&&r.getFont(this.props.value)?r.getFont(this.props.value).displayName:""},getInitialState:function(){return{fontsItems:this.getFontsItems(this.props.fonts)}},getDefaultProps:function(){return{optionsWidth:284}},componentWillReceiveProps:function(t){e.isEqual(this.props.fonts,t.fonts)||this.setState({fontsItems:this.getFontsItems(t.fonts)})},getFontsItems:function(t){var o=[],n=t;return e.forEach(n,function(t){var n={groupName:s.FONT_GROUPS[t.lang],items:[]};e.forEach(t.fonts,function(e){if("legacy"!==e.permissions){var o={label:e.displayName,value:e.fontFamily,example:s.LANG_TO_EXAMPLE_KEY[t.lang],cssFontFamily:h?e.cssFontFamily+"HelveticaNeueW01-45Ligh, HelveticaNeueW02-45Ligh, HelveticaNeueW10-45Ligh, Helvetica Neue, Helvetica, Arial, メイリオ, meiryo, ヒラギノ角ゴ pro w3, hiragino kaku gothic pro, sans-serif":e.cssFontFamily};l.isOpen("newFontsBadge")&&c(o),n.items.push(o)}}),o.push(n)}),o},getFontOptionsWithoutGroups:function(){return e(this.state.fontsItems).map("items").flattenDeep().value()},getFlattenItemsWithGropus:function(){var t=[];return e.forEach(this.state.fontsItems,function(o){t.push(o.groupName),e.forEach(o.items,function(e){t.push(e)})}),t},handleOptionsVisible:function(t){t&&this.addFontFamilyAttrToList(t)},addFontFamilyAttrToList:function(t){var o,n=a(t);o=d?this.getFlattenItemsWithGropus():this.getFontOptionsWithoutGroups();for(var i=p(t),s=u(t,i,n),r=i;r<s;r++){var l=o[r],c=n[r].firstChild;c&&e.includes(c.classList,"font-option-container")&&(c.style.fontFamily=l&&l.cssFontFamily)}},isExpanded:function(){return this.refs.combobox.isExpanded()},getOptionsWidth:function(){return d&&this.props.footerLinks?336:this.props.optionsWidth},isMissingFont:function(){var t=this.getFontOptionsWithoutGroups();return!e.find(t,{value:this.props.value})}})}),define("textControls/comps/iconsDropDown.rt",["react","lodash","baseUI"],function(t,e,o){return function(){function n(e,n){return t.createElement(o.dropDown.option,{value:e,className:"icons-dd-option",key:n},t.createElement(o.symbol,{name:n}))}return t.createElement(o.tooltip,{value:this.props.tooltipValue,disabled:!this.props.tooltipValue,styleType:this.props.tooltipStyleType},t.createElement("div",{style:{display:"inline-block",verticalAlign:"middle"}},t.createElement.apply(this,[o.dropDown.select,{ref:"dropdown",shouldTranslate:!1,value:this.props.value,onChange:this.props.onChange,className:"icons-dd "+this.props.className,optionsWidth:56,template:this.props.fixedIconName?this.getFixedIcon:void 0,doNotFocus:this.props.doNotFocus},e.map(this.props.items,n.bind(this))])))}}),define("textControls/comps/iconsDropDown",["react","lodash","textControls/comps/iconsDropDown.rt","baseUI"],function(t,e,o,n){return t.createClass({displayName:"iconsDropDown",propTypes:{fixedIconName:t.PropTypes.string},render:o,getFixedIcon:function(){if(this.props.fixedIconName)return t.createElement(n.symbol,{name:this.props.fixedIconName})},isExpanded:function(){return this.refs.dropdown.isExpanded()}})}),define("textControls/comps/colorDrop.rt",["react","lodash"],function(t,e){return function(){return t.createElement("span",{},this.props.isBackColor||this.props.colorDropOnly?null:t.createElement("span",{key:"backColorDrop"},t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"symbol-textForeColor",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"22px",height:"18px"},t.createElement("path",{fill:this.props.fill?this.props.fill:"none",fillRule:"evenodd",d:"M 17 3C 17 3 27.03 17 17 17 6.9 17 17 3 17 3Z"}),t.createElement("path",{fillRule:"evenodd",d:"M 16.96 18C 13.35 18 12 14.95 12 13.03 12 9.97 15.69 4.09 16.12 3.43 16.12 3.43 16.95 2.12 16.95 2.12 16.95 2.12 17.8 3.42 17.8 3.42 18.23 4.08 22 9.97 22 13.03 22 15.09 20.44 18 16.96 18ZM 16.96 3.97C 16.96 3.97 13 10.18 13 13.03 13 14.52 14.02 16.99 16.96 16.99 19.89 16.99 21 14.52 21 13.03 21 10.18 16.96 3.97 16.96 3.97ZM 3.6 9.02C 3.6 9.02 2 13.03 2 13.03 2 13.03-0 13.03-0 13.03-0 13.03 5 1 5 1 5 1 6 0 6 0 6 0 7 0 7 0 7 0 8 1 8 1 8 1 11 7.01 11 7.01 11 7.01 11 11.02 11 11.02 11 11.02 9.4 9.02 9.4 9.02 9.4 9.02 3.6 9.02 3.6 9.02ZM 7 3.01C 7 3.01 6 3.01 6 3.01 6 3.01 4.4 7.01 4.4 7.01 4.4 7.01 8.6 7.01 8.6 7.01 8.6 7.01 7 3.01 7 3.01Z"}))),this.props.isBackColor&&!this.props.colorDropOnly?t.createElement("span",{key:"foreColorDrop"},t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"symbol-textBackColor",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"28px",height:"21px"},t.createElement("path",{fill:this.props.fill?this.props.fill:"none",fillRule:"evenodd",d:"M 23 6C 23 6 33.03 20 23 20 12.9 20 23 6 23 6Z"}),t.createElement("path",{fillRule:"evenodd",d:"M 22.96 21C 19.35 21 18 17.95 18 16.03 18 12.98 21.69 7.09 22.12 6.43 22.12 6.43 22.95 5.12 22.95 5.12 22.95 5.12 23.8 6.42 23.8 6.42 24.23 7.09 28 12.97 28 16.03 28 18.09 26.44 21 22.96 21ZM 22.96 6.97C 22.96 6.97 19 13.18 19 16.03 19 17.52 20.02 20 22.96 20 25.89 20 27 17.52 27 16.03 27 13.18 22.96 6.97 22.96 6.97ZM 14 6.01C 14 6.01 15 10.02 15 10.02 15 10.02 12 10.02 12 10.02 12 10.02 13 6.01 13 6.01 13 6.01 14 6.01 14 6.01ZM 18 10.02C 18 10.02 15 4.01 15 4.01 15 4.01 14 3.01 14 3.01 14 3.01 13 3.01 13 3.01 13 3.01 12 4.01 12 4.01 12 4.01 6.63 16.03 6.63 16.03 6.63 16.03 9 16.03 9 16.03 9 16.03 11 12.02 11 12.02 11 12.02 16 12.02 16 12.02 16 12.02 16.79 13 16.79 13 16.32 14.18 16 15.26 16 16.03 16 16.93 16.3 18.07 16.98 19.04 16.98 19.04 6 19.04 6 19.04 4.9 19.04 4 18.14 4 17.03 4 17.03 4 15.03 4 15.03 4 15.03 3 15.03 3 15.03 2.45 15.03 2 14.58 2 14.03 2 13.47 2.45 13.02 3 13.02 3 13.02 4 13.02 4 13.02 4 13.02 4 11.02 4 11.02 4 11.02 3 11.02 3 11.02 2.45 11.02 2 10.57 2 10.02 2 9.47 2.45 9.02 3 9.02 3 9.02 4 9.02 4 9.02 4 9.02 4 7.01 4 7.01 4 7.01 2 7.01 2 7.01 1.45 7.01 1 6.57 1 6.01 1 5.46 1.45 5.01 2 5.01 2 5.01 4 5.01 4 5.01 4 5.01 4 2 4 2 4 2 1 2 1 2 0.45 2 0 1.56 0 1 0 0.45 0.45 0 1 0 1 0 4 0 4 0 4 0 20 0 20 0 21.1 0 22 0.9 22 2 22 2 22 4.01 22 4.01 22 4.01 21 5.01 21 5.01 21 5.01 19.43 7.1 18 10.02Z"}))):null,this.props.colorDropOnly?t.createElement("span",{key:"colorDrop"},t.createElement("svg",{width:"13px",height:"20px",viewBox:"0 0 13 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},t.createElement("g",{fill:this.props.fill?this.props.fill:"none",fillRule:"evenodd"},t.createElement("g",{stroke:"#FFFFFF"},t.createElement("path",{d:"M6.444,1.22000003 L5.521,2.66700003 C5.055,3.39800003 0.968,9.90800003 0.968,13.287 C0.968,15.411 2.457,18.783 6.454,18.783 C10.302,18.783 12.032,15.569 12.032,13.287 C12.032,9.90200003 7.857,3.39000003 7.381,2.65900003 L6.444,1.22000003 L6.444,1.22000003 Z"}))))):null)}}),define("textControls/comps/colorDrop",["react","lodash","textControls/comps/colorDrop.rt"],function(t,e,o){return t.createClass({propTypes:{fill:t.PropTypes.string},displayName:"colorDrop",render:o})}),define("textControls/comps/textColor.rt",["react","lodash","textControls/comps/colorDrop","textControls/comps/iconButton"],function(t,e,o,n){return function(){return t.createElement("span",{},t.createElement(n,{onClick:this.props.onClick,tooltipValue:this.props.tooltipValue,biName:this.getBiName()},t.createElement(o,{isBackColor:this.props.isBackColor,fill:this.props.value})))}}),define("textControls/utils/ckUtils",["textControls/utils/fontUtils","util","lodash"],function(t,e,o){function n(e,n){o(e).filter(function(e){return t.isUploadedFont(e)}).forEach(function(e){n.execCommand("wixCss",{id:e,value:t.getUploadedFontFace([e])})})}function i(t){e.browserUtil.isIE()||t.commands.expandCurrentLinkSelection()}function s(t){var e=t.getSelection();e.ignoreFillingCharRemoveOnSelectionChange(),t.focus(),e.resumeFillingCharRemoveOnSelectionChange()}function r(t,e){t.toggleSelectionToTransparent(e)}function l(t){t.execCommand("wixCss",{id:"overFlowCss",value:"body {overflow: hidden !important;}",isLink:!1,force:!1})}function a(t){t.execCommand("wixCss",{id:"overFlowCss",value:"",isLink:!1,force:!1})}function c(t,e,n){var i=n.getRawData(),s=function(){o.isEqual(i,n.getRawData())&&t()};return e?n.onAfterUndo(s):n.onAfterRedo(s),s}function p(t,o,n){e.browserUtil.isIE()&&!n||t.setReadOnly(o)}return{focus:s,toggleSelectionToTransparent:r,registerAfterUndoRedoListener:c,setOverflowCss:l,removeOverflowCss:a,setCkReadOnly:p,expandSelectionToLinks:i,insertUploadedFontsToCk:n}}),define("textControls/comps/textColor",["react","lodash","textControls/comps/textColor.rt","textControls/utils/ckUtils"],function(t,e,o){return t.createClass({displayName:"textColor",propTypes:{tooltipValue:t.PropTypes.string,value:t.PropTypes.string,isBackColor:t.PropTypes.bool,onClick:t.PropTypes.func.isRequired},getDefaultProps:function(){return{isBackColor:!1}},getBiName:function(){return this.props.isBackColor?"textHighlight":"textColor"},render:o})}),define("textControls/comps/textBackgroundColor.rt",["react","lodash","textControls/comps/colorDrop","textControls/comps/textColor","textControls/utils/constants","baseUI"],function(t,e,o,n,i,s){return function(){function r(){this.props.onClick()}function l(e,o){return t.createElement(s.dropDown.option,{value:e,className:"icons-dd-option",key:o},t.createElement(s.symbol,{name:o}))}return t.createElement("span",{},this.shouldRenderDropOwn()?null:t.createElement(n,{onClick:r.bind(this),tooltipValue:this.props.tooltipValue,key:"backColorButton",tooltipStyleType:this.props.tooltipStyleType,isBackColor:!0,value:this.props.color}),this.shouldRenderDropOwn()?t.createElement(s.tooltip,{value:this.props.tooltipValue,styleType:this.props.tooltipStyleType,key:"backColorDropdown"},t.createElement("span",{},t.createElement.apply(this,[s.dropDown.select,{ref:"dropdown",shouldTranslate:!1,value:this.getDropDownValue(),onChange:this.handleChange,className:"back-color-dd",optionsWidth:40,toggleIcon:!1,template:this.getTemplate,setSelectedAnyway:!0,doNotFocus:this.props.doNotFocus},e.map(i.TEXT_BACK_COLOR_TYPES,l.bind(this)),this.props.colorDrop?t.createElement(s.dropDown.option,{key:"colorDropOption",value:"customColor",className:"icons-dd-option"},t.createElement(o,{colorDropOnly:!0,fill:this.props.color})):null]))):null)}}),define("textControls/comps/textBackgroundColor",["react","lodash","textControls/comps/textBackgroundColor.rt","baseUI","textControls/comps/colorDrop"],function(t,e,o,n,i){return t.createClass({displayName:"backColorDropDown",render:o,getDefaultProps:function(){return{colorDrop:!0}},shouldRenderDropOwn:function(){return null!==this.props.color},getDropDownValue:function(){return null===this.props.color?"noColor":"customColor"},getTemplate:function(){return t.createElement(i,{fill:this.props.color,isBackColor:!0})},handleChange:function(t){"noColor"===t&&this.props.handleNoColor&&this.props.handleNoColor(),"customColor"===t&&this.props.onClick&&this.props.onClick()},isExpanded:function(){return this.refs.dropdown.isExpanded()}})}),define("textControls/comps/textLinkControl.rt",["react","lodash","baseUI"],function(t,e,o){return function(){return t.createElement("span",{},this.shouldRenderDropDown()?null:t.createElement(o.toggleButton,e.assign({},{key:"linkToggleButton"},this.props)),this.shouldRenderDropDown()?t.createElement(o.tooltip,{value:this.props.tooltipValue,styleType:this.props.tooltipStyleType,key:"textLinkDropdown"},t.createElement("span",{},t.createElement(o.dropDown.select,{ref:"dropdown",shouldTranslate:!1,onChange:this.handleChange,className:"text-link-dd",optionsWidth:40,toggleIcon:!1,value:"link",setSelectedAnyway:!0,onExpand:this.props.onExpand,doNotFocus:!0},t.createElement(o.dropDown.option,{value:"unlink",className:"link-dd-option"},t.createElement("div",{className:"link-icon-container"},t.createElement(o.symbol,{name:"textUnlink",key:"textUnlink"}))),t.createElement(o.dropDown.option,{value:"link",className:"link-dd-option"},t.createElement("div",{className:"link-icon-container"},t.createElement(o.symbol,{name:"textLink",key:"textLink"})))))):null)}}),define("textControls/comps/textLinkControl",["react","lodash","textControls/comps/textLinkControl.rt"],function(t,e,o){return t.createClass({displayName:"textLinkControl",render:o,shouldRenderDropDown:function(){return!0===this.props.value&&!this.props.disabled},handleChange:function(t){"unlink"===t?this.props.onUnlink():"link"===t&&this.props.onChange()},isExpanded:function(){return this.refs.dropdown.isExpanded()}})}),define("textControls/comps/textStyle.rt",["react","lodash","baseUI"],function(t,e,o){return function(){function n(e,n){return t.createElement(o.dropDown.option,{value:e.cssClass,key:e.displayName+e.family,className:"style-option "+(this.props.optionsClass?this.props.optionsClass:"")},t.createElement("div",{className:"style-option-header"},t.createElement("div",{className:"style-color-container"},t.createElement("span",{className:"style-color",style:{backgroundColor:e.cssColor}})),t.createElement("span",{className:"style-name",style:this.getDisplayStyle(e)},this.translateIfNeeded(e.displayName))),t.createElement("div",{className:"style-option-footer"},t.createElement("span",{className:"style-size"},e.size),t.createElement("span",{className:"style-tag"},"<",e.seoTag,">")),t.createElement("div",{className:"style-option-label"},t.createElement("span",{className:"display-name"},this.translateIfNeeded(e.displayName)),t.createElement("span",{className:"custom-style-indicator"},"*")))}return t.createElement(o.tooltip,{value:this.props.tooltipValue,disabled:!this.props.tooltipValue,styleType:this.props.tooltipStyleType},t.createElement("div",{style:{display:"inline"}},t.createElement.apply(this,[o.dropDown.select,{label:this.props.label,value:this.getValue(),onChange:this.props.onChange,ref:"dropdown",infoText:this.props.infoText,infoTitle:this.props.infoTitle,optionsWidth:this.props.optionsWidth,className:"text-style-dd "+(this.props.toolbarMode?"toolbar-mode":"")+" "+(this.props.className?this.props.className:""),setSelectedAnyway:!0,doNotFocus:this.props.doNotFocus},e.map(this.getStyleOptions(),n.bind(this)),this.isCustom()?t.createElement(o.dropDown.option,{key:"textStyleCustom",value:this.props.value,className:"style-option",style:{display:"none"}},"\n                ",this.state.nullLabel,"\n            "):null])))}}),define("textControls/comps/textStyle",["react","lodash","textControls/comps/textStyle.rt","textControls/utils/constants","textControls/utils/fontUtils","util","experiment"],function(t,e,o,n,i,s,r){return t.createClass({displayName:"textStyle",mixins:[s.translationMixin],propTypes:{nullLabel:t.PropTypes.string},getNullLabelFromProps:function(){return this.props.nullLabel||this.translateIfNeeded("list_design_panel_Customize_TextField_CustomTheme_DropdownItem_Label")},getInitialState:function(){return{nullLabel:this.getNullLabelFromProps()}},getDefaultProps:function(){return{stylesMap:n.DEFAULT_STYLES_MAP,toolbarMode:!1,optionsWidth:264}},getStyleOptions:function(){return e.map(this.props.stylesMap,e.bind(function(t){var o=i.getStyleFont(t.cssClass,this.props.themeColors,this.props.themeFonts),n=e.assign(o,e.pick(t,["seoTag","cssClass","displayName"]));if(r.isOpen("text_themes_sdk")&&this.props.isDeveloperMode&&/^font_[7-9]$/.test(n.cssClass)){var s=Number(n.cssClass.replace(/.*(\d)/,"$1"))-6;n.seoTag='p class="P'+s+'"'}return n},this))},getDisplayStyle:function(t){return{fontWeight:t.weight,fontFamily:t.family+","+t.fontWithFallbacks,fontSize:parseInt(t.size,10)<=28?t.size:"28px",fontStyle:t.style}},isExpanded:function(){return this.refs.dropdown.isExpanded()},getValue:function(){return e.get(this.props.value,"class")||this.props.value},render:o,isCustom:function(){return!e.some(this.props.stylesMap,{cssClass:this.getValue()})}})}),define("textControls/comps/textEffectButton.rt",["react","lodash"],function(t,e){return function(){return t.createElement("span",{className:this.props.className},t.createElement("button",{className:e({"text-effect-button":!0,selected:this.props.isSelected}).transform(function(t,e,o){e&&t.push(o)},[]).join(" "),onClick:this.props.onClick},t.createElement("span",{},this.props.children)))}}),define("textControls/comps/textEffectButton",["react","lodash","textControls/comps/textEffectButton.rt"],function(t,e,o){return t.createClass({displayName:"textEffectButton",render:o})}),define("textControls/comps/textEffects.rt",["react","lodash","textControls/comps/textEffectButton","symbols","baseUI","textControls/utils/constants"],function(t,e,o,n,i,s){return function(){function n(){this.handleOnChange("effect_0")}function s(t,e){this.handleOnChange(e)}function r(e,n){return t.createElement(o,{isSelected:this.props.value===n,onClick:s.bind(this,e,n),key:n,className:n},t.createElement("span",{className:"text-shadow-effect",style:{textShadow:e.cssData}},this.translateIfNeeded("text_editor_"+n)))}return t.createElement.apply(this,["div",{className:"text-effect-container"},t.createElement(i.tooltip,{value:"text_editor_effects_tooltip_no_effect",styleType:i.uiConstants.TOOLTIP.STYLE_TYPE.SMALL},t.createElement("span",{onClick:n.bind(this),className:"text-none-icon "+("EFFECT_0"===this.props.value?"selected":"")})),e.map(this.getShadowEffects(),r.bind(this))])}}),define("textControls/comps/textEffects",["react","lodash","textControls/comps/textEffects.rt","util","baseUI"],function(t,e,o,n,i){return t.createClass({displayName:"textEffects",mixins:[n.translationMixin,i.reportUIChangeMixin],render:o,getDefaultProps:function(){return{value:"effect_0",onChange:function(){}}},contextTypes:{reportUIChange:t.PropTypes.func},getShadowEffects:function(){var t=e.clone(this.props.shadowEffects);return t.effect_0&&delete t.effect_0,t},handleOnChange:function(t){this.props.onChange(t);var e="effect_0"===t?"none":t;this.reportUIChange({value:e,control_name:"text_effects"})}})}),define("textControls/comps/lineHeight.rt",["react","lodash","baseUI","baseUILib"],function(t,e,o,n){return function(){return t.createElement("div",{className:"control-line-height"},t.createElement(n.Composites.RadioButtonsLabeled,{},this.props.infoText||this.props.infoTitle?t.createElement(n.InfoIcon,{key:"lineHeightInfo",title:this.props.infoTitle,text:this.props.infoText}):null,t.createElement(n.TextLabel,{value:"text_editor_line_spacing_label"}),t.createElement(n.RadioButtons,{value:this.getSelectedOption(),className:"line-spacing",options:this.props.options||this.getDefaultOptions(),onChange:this.selectionChange})),"custom"===this.getSelectedOption()?t.createElement("div",{key:"line-height-slider",className:"slider-wrapper"},t.createElement(o.slider,{value:this.getLineHeightValue(),min:.5,max:3,stepperMax:9,stepperStep:.01,step:.1,onChange:this.handleSliderChange,onSlideEnd:this.props.onSlideEnd})):null)}}),define("textControls/comps/lineHeight",["react","lodash","textControls/comps/lineHeight.rt","baseUI","util"],function(t,e,o,n,i){return t.createClass({displayName:"lineHeight",render:o,mixins:[n.inputMixin,i.translationMixin],propTypes:{infoText:t.PropTypes.string,infoTitle:t.PropTypes.string,options:t.PropTypes.arrayOf(t.PropTypes.shape({label:t.PropTypes.string.isRequired,value:t.PropTypes.string.isRequired})),label:t.PropTypes.string,value:t.PropTypes.oneOfType([t.PropTypes.string,t.PropTypes.number])},getDefaultOptions:function(){return[{value:"auto",label:"text_editor_line_spacing_automatic"},{value:"custom",label:"text_editor_line_spacing_customize"}]},getSelectedOption:function(){return""===this.props.value?"auto":"custom"},handleSliderChange:function(t){this.callOnChangeIfExists(t)},getLineHeightValue:function(){return""===this.props.value?"auto":parseFloat(this.props.value)},selectionChange:function(t){"auto"===t?this.callOnChangeIfExists(t):""===this.props.value&&this.callOnChangeIfExists(1.2)}})}),define("textControls/comps/richTextFrame.rt",["react","lodash"],function(t,e){return function(){return t.createElement("div",{},this.props.children)}}),define("textControls/comps/richTextFrame",["react","lodash","util","textControls/comps/richTextFrame.rt"],function(t,e,o,n){return t.createClass({displayName:"richTextFrame",mixins:[o.outerClickMixin],onOuterClick:function(){this.props.onOuterClick()},render:n})}),define("textControls/comps/textPopup.rt",["react","lodash","textControls/comps/iconButton"],function(t,e,o){return function(){return t.createElement("div",{className:"text-popup-control"},t.createElement("span",{},t.createElement(o,{ref:"popupButton",isSelected:this.state.popupOpen,style:{width:this.props.width},onClick:this.togglePopup,popupMode:!0,name:this.props.iconName},this.props.label?t.createElement("span",{key:"textPopupLabel"},this.props.label):null)),t.createElement("div",{className:"tri with-shadow",style:{visibility:this.state.popupOpen?"visible":"hidden"}}),t.createElement("div",{className:"text-popup with-shadow",ref:"popupContainer",style:{visibility:this.state.popupOpen?"visible":"hidden"}},t.createElement("span",{},this.props.children)),t.createElement("div",{className:"tri cover-shadow",style:{visibility:this.state.popupOpen?"visible":"hidden"}}))}}),define("textControls/comps/textPopup",["reactDOM","react","lodash","util","textControls/comps/textPopup.rt"],function(t,e,o,n,i){return e.createClass({displayName:"textPopup",propTypes:{label:e.PropTypes.string,iconName:e.PropTypes.string,width:e.PropTypes.number},mixins:[n.outerClickMixin],getInitialState:function(){return{popupOpen:!1}},togglePopup:function(){var t=!this.state.popupOpen;this.setState({popupOpen:t}),t&&this.setPopupPosition()},hide:function(){this.state.popupOpen&&this.setState({popupOpen:!1})},onOuterClick:function(){this.hide()},setPopupPosition:function(){var e=t.findDOMNode(this.refs.popupButton).getBoundingClientRect();if(this.refs.popupContainer){var o=t.findDOMNode(this.refs.popupContainer),n=0-o.getBoundingClientRect().width/2,i=e.height+10;o.style.setProperty("bottom",i+"px"),o.style.setProperty("right",n+"px")}},render:i})}),define("textControls/comps/themeFontsLoader.rt",["react","lodash","experiment"],function(t,e,o){return function(){function n(e,o){return t.createElement("link",{type:"text/css",key:o,href:e,rel:"stylesheet"})}function i(e,o){return t.createElement("style",{key:o,dangerouslySetInnerHTML:{__html:e.fontFace}})}function s(e,o){return t.createElement("style",{key:o,dangerouslySetInnerHTML:{__html:this.createUploadedFontFace(e)}})}return t.createElement.apply(this,["div",{},e.map(this.getCssLinks(),n.bind(this)),o.isOpen("fontsUpload")||o.isOpen("fontsUploadAsync")?e.map(this.state.uploadedFonts,i.bind(this)):null,o.isOpen("fontsUpload")||o.isOpen("fontsUploadAsync")?e.map(this.getUploadedThemeFonts(this.props.themeFonts),s.bind(this)):null])}}),define("textControls/comps/themeFontsLoader",["react","lodash","textControls/utils/fontUtils","core","experiment","util","textControls/comps/themeFontsLoader.rt"],function(t,e,o,n,i,s,r){var l=i.isOpen("fontsUpload")||i.isOpen("fontsUploadAsync");return t.createClass({displayName:"themeFontsLoader",mixins:[n.mixins.editorAPIMixin],getCssLinks:function(){return this.getEditorAPI().documentServices.fonts.css.getUrls()},render:r,shouldComponentUpdate:function(t,o){return!e.isEqual(t,this.props)||!e.isEqual(o,this.state)},getInitialState:function(){return l?(this.fontsManager=this.getEditorAPI().mediaServices.fontsManager,{uploadedFonts:this.fontsManager.getList()}):{}},onUploadedFontsChange:function(t){t&&this.setState({uploadedFonts:t})},componentWillMount:function(){l&&this.fontsManager.registerObserver(s.fontsManagerUtils.constants.FONT_EVENTS_NAMES.LIST_CHANGED,this.onUploadedFontsChange)},componentWillUnmount:function(){l&&this.fontsManager.unregisterObserver(s.fontsManagerUtils.constants.FONT_EVENTS_NAMES.LIST_CHANGED,this.onUploadedFontsChange)},createUploadedFontFace:function(t){return o.getUploadedFontFace([t])},getUploadedThemeFonts:function(){return l?e.filter(o.getThemeFontFamilies(this.props.themeFonts),function(t){return o.isUploadedFont(t)}):{}}})}),define("textControls/comps/saveTextStyleConfirmation.rt",["react","lodash","panels","baseUI","baseUILib"],function(t,e,o,n,i){return function(){return t.createElement(o.frames.focusPanelFrame,{ref:"frame",key:"saveTextConfirmationPanel",helpId:"1df23b96-45a4-41e0-b356-e1ee05308c9b",className:"text-style-save-confirm-panel",title:this.translateIfNeeded("text_editor_save_theme_dialog_header"),panelName:this.props.panelName},t.createElement("div",{className:"text-style-save-confirm-content"},t.createElement("div",{className:"image-container",key:"save-your-theme-clipart"},t.createElement(n.symbol,{name:"save-your-theme-clipart"})),t.createElement("div",{className:"description-container"},t.createElement("span",{className:"description-text"},this.translateIfNeeded("text_editor_save_theme_dialog_text_1")),t.createElement("span",{className:"description-text bold"}," '",this.props.textStyleName,"' "),t.createElement("span",{className:"description-text"},this.translateIfNeeded("text_editor_save_theme_dialog_text_2")),t.createElement("div",{className:"learn-more-link-container"},t.createElement("a",{className:"learn-more-link",onClick:this.openLearnMore},this.translateIfNeeded("text_editor_save_theme_dialog_learn_more")))),t.createElement("div",{className:"footer-buttons"},t.createElement(i.Checkbox,{label:"text_editor_save_theme_dialog_dont_show",value:this.props.dontShowAgain,onChange:this.props.toggleDontShowAgain,labelAfterSymbol:!0}),t.createElement(n.button,{onClick:this.handleOnSave,className:"save-button btn-md",label:"text_editor_save_theme_confirm_button"}))))}}),define("textControls/comps/saveTextStyleConfirmation",["react","prop-types","panels","util","core","higherOrderComponents","textControls/comps/saveTextStyleConfirmation.rt"],function(t,e,o,n,i,s,r){var l=t.createClass({displayName:"saveTextStyleConfirmation",propTypes:{editorAPI:e.object.isRequired,panelName:e.string.isRequired,dontShowAgain:e.bool,toggleDontShowAgain:e.func.isRequired,onConfirm:e.func.isRequired,textStyleName:e.string.isRequired},mixins:[n.translationMixin,i.mixins.editorAPIMixin,o.mixins.reportBiEventOnUiChangeMixin],handleOnSave:function(){this.props.onConfirm(),this.close()},close:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},openLearnMore:function(){var t=this.getEditorAPI(),e={panel_name:this.props.panelName,origin:i.constants.BI.HELP.ORIGIN.PANEL,component:this.props.editorAPI.selection.getSelectedComponentType(),learn_more:!0};t.panelManager.openHelpCenter("1df23b96-45a4-41e0-b356-e1ee05308c9b",null,e)},render:r}),a={userPrefType:"session"},c=s.linkUserPreferences(l,a);return c.pure=l,c}),define("textControls/utils/dataUtils",["lodash","jquery","textControls/utils/constants"],function(t,e,o){function n(t){return i(t).replace(/[\u200b\s]/g,"").length<1}function i(t){var e=window.document.createElement("div");return e.innerHTML=t,e.textContent}function s(e){return e.nodeName&&t.includes(o.TEXT_BLOCKS,e.nodeName.toLowerCase())}function r(n){if(!t.isString(n))return n;var i,r=e.parseHTML(n.trim()),l=e("<div>");return t.forEach(r,function(t){s(t)?(i&&(l.append(i),i=void 0),l.append(t)):t.textContent.trim().length>0&&(i=i||e("<p>").addClass(o.DEFAULT_STYLES_MAP.div.cssClass)).append(t)}),i&&l.append(i),l.html()}return{getTextContentFromHtml:i,isEmptyHtmlText:n,wrapOrphans:r}}),define("textControls/utils/textLinkManager",[],function(){return function(t){this.convertExternalLinkToLinkRef=function(e){return t.createLinkFromHref(e)},this.convertLinkRefToLinkRef=function(e){return t.duplicateLink(e)},this.convertLinkRefToAttributes=function(e){var o=t.getLink(e);return o?{dataquery:"#"+o.id}:null},this.convertAttributesToLinkRef=function(t){return t.dataquery&&t.dataquery.slice(1)}}}),define("textControls/utils/linksHelper",["lodash","util"],function(t,e){function o(t){return{type:"ExternalLink",target:"_blank",url:t}}function n(t){if(!/^mailto:/i.test(t))return null;var o=t.replace(/mailto:/i,"").split("?");if(!e.validationExpressions.validEmailReg.test(o[0]))return null;var n=o[0],i=o[1];return i=/^subject=/i.test(i)?i.replace(/^subject=/i,""):"",{type:"EmailLink",recipient:n,subject:i}}function i(t,e){this.setCurrentLinks(t),this.setNonPasteableLinkTypes(e)}var s={};return i.prototype.getLink=function(t){return this._links[t]},i.prototype.setNonPasteableLinkTypes=function(t){this.nonPasteableLinkTypes=t},i.prototype.getAllLinks=function(){return t.map(this._links)},i.prototype.setCurrentLinks=function(e){this._links={};var o=this;t.forEach(e,function(t){o._links[t.id]=t})},i.prototype.cacheCopiedLinks=function(){s=t.clone(this._links)},i.prototype.createLinkFromHref=function(t){var i={};return i=e.validationExpressions.validUrlReg.test(t)?o(t):n(t),i?this.saveLink(i):null},i.prototype.saveLink=function(t){return t.id=e.guidUtils.getUniqueId("textLink","_"),this._links[t.id]=t,t.id},i.prototype.getLatestCopiedLink=function(e){var o=s[e];return o&&!t.includes(this.nonPasteableLinkTypes,o.type)?o:null},i.prototype.duplicateLink=function(e){var o=this.getLink(e)||this.getLatestCopiedLink(e);return o?this.saveLink(t.clone(o)):null},i}),define("textControls/utils/mobileUtils",["lodash","jquery","textControls/utils/fontUtils"],function(t,e,o){function n(t,e){var o={},n=window.document.createElement("div");return n.innerHTML=t,l(n,o,e,""),parseInt(r(o),10)}function i(e){return t.isString(e)&&t.get(e.match(/text\-align:\s((left|center|right|justify))/),1,"left")}function s(e){return t.isString(e)&&t.get(e.match(/\sclass=\"(color_\d+)\"/)||e.match(/[;"\d]color:\s?(#?[A-Z\d()]+;?)/),1)}function r(e){var o,n="";return t.forEach(e,function(t,e){(void 0===o||o<t)&&(o=t,n=e)}),n}function l(e,o,n,i){"#text"!==e.nodeName&&(i=a(e,n)?a(e,n):i,t.forEach(e.childNodes,function(t){if("#text"===t.nodeName){if(i){var e=t.textContent.replace(/ /g,"").length;o[i]||(o[i]=0),o[i]+=e}}else l(t,o,n,i)}))}function a(n,i){var s=e(n).css("fontSize");return s||t.forEach(n.classList,function(t){i[t]&&(s=o.parseStyleFont(t,i).size)}),s}return{getMostCommonTextSize:n,getFirstTextAlignment:i,getFirstColor:s}}),define("textControls/utils/textMigrationDomHelper",["lodash","jquery"],function(t,e){function o(t){if(null===t)return"null";if(t.$family)return t.$family();if(t.nodeName){if(1===t.nodeType)return"element";if(3===t.nodeType)return/\S/.test(t.nodeValue)?"textnode":"whitespace"}else if("number"==typeof t.length){if(t.callee)return"arguments";if("item"in t)return"collection"}return void 0===t?"undefined":_typeof(t)}function n(e){var o=e.attributes,n=[];if(o.length<20)n=s(o);else{var i=e.getProperties("class","style","dir","href","background","action","src","data","align","alt","color","face","label","for","link","id","name","value");t.forEach(i,function(t,e){e&&t&&n.push({name:e,value:t})})}return n}function i(t,e){if(t!==e)for(var o;o=t.firstChild;)e.appendChild(t.removeChild(o))}function s(t){return function(t){for(var e=[],o=t.length;o--;)e.unshift(t[o]);return e}(t)}function r(e,o){if(e.tagName.toLowerCase()===o.toLowerCase())return e;var s=window.document.createElement(o),r=n(e);return t.forEach(r,function(t){s.setAttribute(t.name,t.value)}),i(e,s),e.parentNode&&e.parentNode.replaceChild(s,e),s}function l(e){var o=e.tagName&&e.tagName.toLowerCase();return t.includes(g,o)}function a(t){return t.every(function(t){return"whitespace"===o(t)})}function c(t){return"element"===o(t)}function p(t){return"textnode"===o(t)}function u(e){return t.some(e.children,l)}function d(e){var o=e.parentNode,n=s(e.childNodes);t.forEach(n,function(t){o.insertBefore(t,e)}),o.removeChild(e)}function h(t){var e=n(t);if(!e)return!1;for(var o=0;o<e.length;o++)if(e[o].value)return!0;return!1}function f(t,o){var n=e(t);n.removeClass(o),0===n.prop("class").length&&n.removeAttr("class")}function m(t,o){e(t).css(o);var n=t.getAttribute("style");n&&" "===n.charAt(n.length-1)&&t.setAttribute("style",n.substr(0,n.length-1))}var g=["audio","dd","dt","li","video","address","article","aside","blockquote","details","div","dl","fieldset","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","menu","nav","ol","p","pre","section","table","ul","center","dir","noframes"];return{moveChildren:i,collectionToArray:s,isBlockElement:l,hasBlockElementChildren:u,isDomElement:c,isTextNode:p,isElementHasAttributes:h,replaceElementWithItsChildren:d,renameNode:r,isOnlyWhiteSpace:a,removeClass:f,setStyle:m}}),define("textControls/utils/textMigrationStylesHelper",["jquery","lodash","textControls/utils/textMigrationDomHelper","textControls/utils/fontUtils"],function(t,e,o,n){function i(t){return e.find(t.classList,function(t){return e.includes(t,"font_")})||null}function s(e,n){if(i(e))return e;var r=t(e).clone();r.empty();for(var a=o.collectionToArray(e.childNodes),c=0;c<a.length;c++){var p=a[c];if(i(p)||l(p)){var u=t(p).clone();u.empty();var d=s(p,u.get(0));return r.append(t(d)),u.get(0).firstChild&&t(n).append(u),r.get(0)}t(n).append(t(p))}return r.get(0)}function r(e){if(l(e)){var n=t(e).clone(!1);n.empty();for(var a=o.collectionToArray(e.childNodes),p=0;p<a.length;p++){var u=a[p];if(i(u)||l(u)){var d=t(u).clone(!1);d.empty();var h=s(u,d);return d.get(0).firstChild&&n.append(d),t(e).before(n),t(e).before(t(h)),c(h),void r(e)}n.append(t(u))}}}function l(e){return o.isDomElement(e)&&t(e).find('span[class*="font_"]').length}function a(t,n){return o.isDomElement(t)&&(i(t)&&"span"===t.tagName.toLowerCase()?n.push(t):e.forEach(t.children,function(t){n.concat(a(t,n))})),n}function c(t){if(i(t)&&r(t),l(t)){var o=a(t,[]);e.forEach(o,r)}}function p(t){if(o.isTextNode(t))return!0;if(i(t))return!1;for(var e=o.collectionToArray(t.childNodes),n=0;n<e.length;n++)if(p(e[n]))return!0;return!1}function u(t){var o=0,n=null;return e.forEach(t,function(t,e){t>o&&(o=t,n=e)}),n}function d(t){var o={};return e.forEach(t,function(t){var e=i(t);o[e]=o[e]||0,o[e]+=t.textContent.length}),u(o)}function h(t,e,o,i){var s=t&&n.parseStyleFont(t,o,i),r=n.parseStyleFont(e,o,i);return r?s&&s.color===r.color?null:"#"===r.color.charAt(0)?{isRef:!1,value:r.color}:{isRef:!0,value:r.color.replace("{","").replace("}","")}:null}function f(t,o,i,s){var r=t&&n.parseStyleFont(t,i,s),l=n.parseStyleFont(o,i,s),a={};return e.forEach(m,function(t,e){r&&r[t]===l[t]||(a[e]=l[t])}),a}var m={"font-family":"family","font-size":"size","font-style":"style","font-variant":"variant","font-weight":"weight","line-height":"lineHeight"};return{flattenStyledSpans:c,isBlockContainUnstyledText:p,getStyledSpansRecursive:a,getMostCommonStyle:d,getElementStyleClass:i,getStyleDelta:f,getColorDelta:h}}),define("textControls/utils/textStylesMigration",["lodash","jquery","textControls/utils/textMigrationDomHelper","textControls/utils/textMigrationStylesHelper","textControls/utils/fontUtils","textControls/utils/constants"],function(t,e,o,n,i,s){function r(e,i,s,r){t.forEach(i,function(t){var i=n.getElementStyleClass(t);i===e?0===t.childNodes.length?t.remove():l(t,e):(o.removeClass(t,i),a(e,i,t,s,r))})}function l(t,n){e(t).removeClass(n),o.isElementHasAttributes(t)||o.replaceElementWithItsChildren(t)}function a(t,i,s,r,l){var a=n.getStyleDelta(t,i,r,l),c=s;o.setStyle(c,a);var p=n.getColorDelta(t,i,r,l);p&&(p.isRef?e(c).addClass(p.value):o.setStyle(c,{color:p.value}))}function c(e,n,s,r){var l;return t.includes(t.keys(s),n)&&(l=i.parseStyleFont(n,s,r).lineHeight,o.setStyle(e,{"line-height":l}),p(e,l),e=u(e,n)),e}function p(t,e){var n=window.document.createElement("span");o.setStyle(n,{"line-height":e}),o.moveChildren(t,n),t.appendChild(n)}function u(t,e){var n=v[e];return o.renameNode(t,n)}function d(e){return t.includes(E,e)}function h(t){return d(t)?s.FALLBACK_STYLE_CLASS:t}function f(t,o,i){var s=n.getStyledSpansRecursive(t,[]),l=n.getMostCommonStyle(s),a=null;if(l){var c=h(l);return c!==l&&(a=l,l=c),e(t).addClass(l),r(l,s,o,i),a&&m(t,l,a,o,i),l}return null}function m(t,e,n,s,r){var l=i.parseStyleFont(n,s,r).size;l<i.parseStyleFont(e,s,r).size&&o.setStyle(t,{"font-size":l})}function g(t,n,i){if(!n||!i)return null;if(t&&t.tagName===n&&t.hasClass(i))return null;var s=o.renameNode(t,n);return e(s).addClass(i),s}function x(t,e,o,i,s){if(0!==t.childNodes.length){n.flattenStyledSpans(t);var l=null;if(n.isBlockContainUnstyledText(t)){var a=g(t,e,o);r(null,n.getStyledSpansRecursive(a,[]),i,s)}else(l=f(t,i,s))&&c(t,l,i,s);C(t,l,i,s)}}function C(t,o,n,i){var s=e(t).find('span[class*="font_"]');s.length&&r(o,s,n,i)}function y(t,n,i,s,r){if(!o.isOnlyWhiteSpace(t)){var l=window.document.createElement("p");e(t[0]).before(e(l)),e(l).append(e(t)),x(l,n,i,s,r)}}function _(e,n,i,s,r){var l=[],a=o.collectionToArray(e.childNodes);t.forEach(a,function(e){o.isBlockElement(e)?(l.length>0&&(y(l,n,i,s,r),l=[]),!t.includes(T,e.tagName.toLowerCase())||o.hasBlockElementChildren(e)?_(e,n,i,s,r):x(e,n,i,s,r)):l.push(e)}),l.length>0&&y(l,n,i,s,r)}var T=["h1","h2","h3","h4","h5","h6","p","div"],E=["font_1","font_10"],v=t.transform(s.DEFAULT_STYLES_MAP,function(t,e){t[e.cssClass]=e.seoTag});return{migrateElement:_,verifyNoStyledSpans:C}}),define("textControls/utils/textSimpleFormatMigration",["lodash","jquery","textControls/utils/textMigrationDomHelper","textControls/utils/textMigrationStylesHelper","textControls/utils/constants"],function(t,e,o,n,i){function s(t){r(t),l(t),a(t),c(t),p(t),u(t),d(t)}function r(t){h(e(t).find(".bold"),"bold","strong")}function l(t){h(e(t).find(".italic"),"italic","em")}function a(t){h(e(t).find(".underline"),"underline","u")}function c(t){f(e(t).find(".alignRight"),"alignRight","text-align","right")}function p(t){f(e(t).find(".alignCenter"),"alignCenter","text-align","center")}function u(t){f(e(t).find(".alignJustify"),"alignJustify","text-align","justify")}function d(o){var s=e(o).find("ul, ol");t.forEach(s,function(t){n.getElementStyleClass(t)||e(t).addClass(i.DEFAULT_STYLE_CLASS)})}function h(n,i,s){t.forEach(n,function(t){var n=window.document.createElement(s);o.moveChildren(t,n),o.removeClass(t,i),o.isElementHasAttributes(t)||"span"!==t.nodeName.toLowerCase()?e(t).append(e(n)):e(t).replaceWith(e(n))})}function f(e,n,i,s){t.forEach(e,function(t){o.removeClass(t,n);var e={};e[i]=s,o.setStyle(t,e)})}return{migrateElement:s}}),define("textControls/utils/textMigrationHandler",["lodash","textControls/utils/textStylesMigration","textControls/utils/textSimpleFormatMigration"],function(t,e,o){function n(n,i,s,r,l){if(r=r||"p",l=l||"font_8",!t.isString(n))return null;if(""===n)return t.template('<<%= defaultTag %> class="<%= defaultClass %>"></<%= defaultTag %>>')({defaultTag:r,defaultClass:l});var a=window.document.createElement("div");return a.innerHTML=n,e.migrateElement(a,r,l,i,s),o.migrateElement(a),a.innerHTML}return{migrateText:n}}),define("textControls/utils/migrationUtils",["lodash","textControls/utils/textMigrationHandler"],function(t,e){function o(t,e){var o=e.components.data.get(t);return"StyledText"!==o.type&&"MediaRichText"!==o.type}function n(o,n,i,s,r){function l(e,o){return!t.includes(["id","metaData"],o)}var a=e.migrateText(o.text,n,i,s,r),c=t.omit(o,l);return c.type="StyledText",c.stylesMapId="CK_EDITOR_PARAGRAPH_STYLES",c.text=a,c}function i(t,e){var o=e.components.data.get(t);o=n(o,e.theme.fonts.getAll(),e.theme.colors.getAll()),e.components.data.update(t,o,!0),e.components.style.setId(t,"txtNew")}return{isOldTextComponent:o,migrateComponent:i}}),define("textControls/mixins/textTooltipMixin",["react","baseUI","core"],function(t,e,o){return{getTooltipValue:function(t,e){return"bold"===t||"italic"===t||"underline"===t?this.getTooltipWithShortcut(t,e):"text_editor_buttons_tooltip_"+t},getTooltipWithShortcut:function(n,i){return t.createElement(e.popoverTemplates.keyboardShortcutTooltip,{label:"text_editor_buttons_tooltip_"+n,shortcut:o.constants.KEYBOARD_SPECIAL_KEY.label+" + "+i})}}}),define("textControls/mixins/textEditorMixin",["lodash","prop-types","util","textControls/utils/ckUtils","textControls/utils/constants","textControls/utils/colorUtils"],function(t,e,o,n,i,s){function r(t,e){t.execCommand(e)}function l(t){n.expandSelectionToLinks(t)}function a(t){t.openLinkDialog()}function c(t){t&&"EmailLink"===t.type&&!t.subject&&(t.subject="")}function p(t){return t.hasSelection()?"text_editor_link_disabled_2":"text_editor_link_disabled"}function u(t){t.removeLink()}var d=o.browserUtil;return{propTypes:{isLinkDialogClosed:e.bool.isRequired,isColorPickerClosed:e.bool.isRequired},isCkReady:function(){return!!this.props.textManager},execCommand:function(t,e,o){this.isCkReady()&&this.props.textManager.execCommand(t,e,o)},getValue:function(t){return this.isCkReady()?this.props.cmdState[t]:""},getListType:function(){return this.getValue(i.TEXT_LIST_TYPES.textListNumbers)?i.TEXT_LIST_TYPES.textListNumbers:this.getValue(i.TEXT_LIST_TYPES.textListBullets)?i.TEXT_LIST_TYPES.textListBullets:i.TEXT_LIST_TYPES.textListNone},getTextAlignment:function(){var e=this;return t.find(i.ALIGNMENT_TYPES,function(t){return e.getValue(t)})},execListCommand:function(t){var e=this.getListType();t!==e&&(t===i.TEXT_LIST_TYPES.textListNone?this.execCommand(e):this.execCommand(t)),this.focus()},execLineHeightCommand:function(t){"auto"===t?this.execCommand("lineHeight",i.CK_OFF):this.execCommand("lineHeight",t+"em")},getLineHeightValue:function(){return this.getValue("lineHeight")},changeAlignment:function(t){t!==this.getTextAlignment()&&this.execCommand(t),this.focus()},getBackColorValue:function(){if(this.isCkReady()){var e=this.getValue("backColor");return""===e?null:t.startsWith(e,"back")?this.props.themeColors[e.replace("back","")]:e}},getForeColorValue:function(){var e=this.getValue("foreColor");return t.startsWith(e,"color")?this.props.themeColors[e]:e},prepareColorPickerParams:function(t,e){var n=t?"foreColor":"backColor",i=t?this.getValue(n):this.getBackColorValue(),r=o.colors.getColorInHex(i),l=s.getColorValueFromTheme(i,this.props.themeColors),a=this.props.textManager.hasSelection();return i=l||r,{colorCommand:n,colorValue:i,originalColor:r,isOriginalColorFromTheme:t&&this.isColorFromTheme(),themeColorValue:l,previewOnHover:a,position:e}},execColorPickerChangeCommand:function(e,o,s,r,l){this.props.isColorPickerClosed||(n.setCkReadOnly(this.props.textManager,!1),t.startsWith(e,"color")&&t.startsWith(o,"back")&&(e="back"+e),l&&e===s?this.execCommand(o,i.CK_OFF,{execWithoutHistory:r}):this.execCommand(o,e,{execWithoutHistory:r}),n.setCkReadOnly(this.props.textManager,!0))},handleColorClick:function(t,e){var o=this,i=this.prepareColorPickerParams(t,e);n.setCkReadOnly(this.props.textManager,!0),this.props.openColorPicker(function(t,e){var n=s.getColorPickerValue(t);o.execColorPickerChangeCommand(n,i.colorCommand,i.originalColor,e,i.isOriginalColorFromTheme)},i.colorValue,!0,i.position,i.previewOnHover,!1),this.forceIsCustomStyleValue=this.isCustomStyle()},isColorFromTheme:function(){return this.getValue("foreColor")===i.CK_OFF},componentWillReceiveProps:function(t){!this.props.isLinkDialogClosed&&t.isLinkDialogClosed&&this.focus(),this.props.isColorPickerClosed!==t.isColorPickerClosed&&(n.toggleSelectionToTransparent(this.props.textManager,!t.isColorPickerClosed),t.isColorPickerClosed&&(this.focus(),n.setCkReadOnly(t.textManager,!1),this.forceIsCustomStyleValue=void 0))},getFormatBlockValue:function(){return this.isCkReady()?this.getValue("formatBlock"):""},getFormatBlockCss:function(){return this.isCkReady()?t.get(this.getValue("formatBlock"),"class")||"font_8":""},getFormatBlockHtmlTag:function(){return this.isCkReady()?t.get(this.getValue("formatBlock"),"tag")||"p":""},execFormatBlockCommand:function(t){var e=i.CLASS_TO_FONT[t];this.execCommand("formatBlock",e),this.focus()},resetBlocks:function(){this.execCommand("formatBlock",{getNewBlockValue:function(t){return i.CLASS_TO_FONT[t]}}),this.focus()},execSEOTagChange:function(t){this.execCommand("formatBlock",{tag:t,shouldRetainThemesAndStyles:!0}),this.focus()},execNoBackColor:function(){return this.execCommand("backColor",i.CK_OFF)},handleFontFamilyChange:function(t){n.insertUploadedFontsToCk([t],this.props.textManager),this.execCommand("fontFamily",t)},focus:function(){if(this.props.textManager){var t=this.props.textManager;window.setTimeout(function(){t.focus()},0)}},isCustomStyle:function(){if(void 0!==this.forceIsCustomStyleValue)return this.forceIsCustomStyleValue;var e=!1;if(this.props.cmdState){var o=this,n=this.getFormatBlockCss();t.forEach(i.STYLE_COMMANDS,function(t){n&&o.props.cmdState[t]!==o.props.themeMap[n][t]&&(e=!0)})}return e},canPerformSaveTheme:function(){return this.props.isColorPickerClosed&&this.isCustomStyle()&&this.props.textManager&&!this.props.textManager.isMultipleBlockSelection()},getBoldProps:function(){return{name:"textBold",instanceId:"textBold",tooltipValue:this.getTooltipValue("bold","B"),value:this.getValue("bold"),onChange:t.partial(r,this,"bold")}},getItalicProps:function(){return{name:"textItalic",instanceId:"textItalic",tooltipValue:this.getTooltipValue("italic","I"),value:this.getValue("italic"),onChange:t.partial(r,this,"italic")}},getUnderlineProps:function(){return{name:"textUnderline",instanceId:"textUnderline",tooltipValue:this.getTooltipValue("underline","U"),value:this.getValue("underline"),onChange:t.partial(r,this,"underline")}},getLinkProps:function(){return{name:"textLink",instanceId:"textLink",tooltipValue:this.shouldEnableLinkButton()?this.getTooltipValue("link"):p(this.props.textManager),value:this.hasLink(),onChange:t.partial(a,this),disabled:!this.shouldEnableLinkButton(),onUnlink:t.partial(u,this),onExpand:t.partial(l,this.props.textManager)}},shouldEnableLinkButton:function(){return this.getValue("wixLink")!==i.CK_DISABLED},getBulletsItems:function(){return this.getValue("bidiltr")?i.TEXT_LIST_TYPES:i.TEXT_LIST_TYPES_RTL},getBulletsIconName:function(){return this.getValue("bidiltr")?"textListBullets":"textListBulletsRight"},hasLink:function(){return!t.isEmpty(this.getValue("wixLink"))},removeLink:function(){this.execCommand("wixUnlink")},openLinkDialog:function(){function e(t){var e=o.props.linksHelper.saveLink(t);e&&o.execCommand("wixLink",e)}var o=this,i=this.getValue("wixLink"),s=this.props.linksHelper.getLink(i),r=s&&s.id;d.isIE()&&n.expandSelectionToLinks(this.props.textManager),this.props.openLinkPanel(s,t.once(function(t){c(t),r?t?e(t):o.removeLink():t&&e(t)}))},linkFontSize:function(){return{value:this.getValue("fontSize"),requestChange:function(t,e){e?this.execCommandWithoutFocus("fontSize",t+"px"):this.execCommand("fontSize",t+"px")}.bind(this)}},handleFontSizeEnd:function(){this.focus()},linkSpacing:function(){return{value:parseFloat(this.getValue("letterSpacing")),requestChange:function(t,e){e?this.execCommandWithoutFocus("letterSpacing",t+"em"):this.execCommand("letterSpacing",t+"em")}.bind(this)}},execCommandWithoutFocus:function(t,e){this.execCommand(t,e,{execWithoutFocus:!0})},registerSaveThemeUndoRedoHandler:function(t,e){var o=e?"undo":"redo";this.savedThemeSnapshotListener||(this.savedThemeSnapshotListener={}),this.savedThemeSnapshotListener[o]&&this.props.textManager.unRegisterListener(this.savedThemeSnapshotListener[o]),this.savedThemeSnapshotListener[o]=n.registerAfterUndoRedoListener(t,e,this.props.textManager)}}}),define("textControls/mixins/textBiMixin",["core","lodash"],function(t,e){return{sendTextBiEvent:function(e,o){this.getEditorAPI().bi.event(t.bi.events.textControls[e],o)},sendTextBiEventWithPanelName:function(t,o){var n=this.constructor.displayName,i=e.merge({panel_name:n},o);this.sendTextBiEvent(t,i)}}}),define("textControls/utils/textLimitsUtils",["lodash","textControls/utils/ckUtils","textControls/utils/constants"],function(t,e,o){function n(t){return t>o.MAX_TEXT_LENGTH}function i(t){return Math.max(t,p)>p}function s(o,n){t.defer(function(){n.undo(),e.setCkReadOnly(n,!0,!0)}),r(o,n),o.openPanel(u,{isSingleInstance:!0},!0)}function r(t,e){e.onKey(function o(n){n&&l(u)?e.unRegisterListener(o()):n&&27===n.keyCode&&(t.closePanelByName(u),e.unRegisterListener(o()))})}function l(e){return!t.find(e.getOpenPanels(),{name:u})}function a(t){p=t}function c(t){return n(t)&&i(t)}var p,u="panels.focusPanels.createNewTextBoxPanel";return{handleTextLengthExceeded:s,setCachedTextReadableLength:a,isNewTextLengthLimitExceeded:c}}),define("textControls/comps/textToolBar.rt",["react","lodash","textControls/comps/iconButton","textControls/comps/textColor","textControls/comps/fontFamily","textControls/comps/textStyle","textControls/comps/textPopup","textControls/comps/lineHeight","textControls/comps/iconsDropDown","textControls/comps/textBackgroundColor","textControls/comps/textLinkControl","textControls/utils/constants","baseUI"],function(t,e,o,n,i,s,r,l,a,c,p,u,d){return function(){function h(t,e){this.execFormatBlockCommand(e)}function f(t,e){this.handleFontFamilyChange(e)}function m(t,e){this.execCommand("fontSize",e+"px")}function g(t){this.onColorClick(!0)}function x(t){this.onColorClick(!1)}function C(t){this.execCommand("resetThemeAndStyles")}function y(t){this.toggleToolbar()}function _(t,e){this.changeAlignment(e)}function T(t,e){this.execListCommand(e)}function E(t){this.execCommand("outdent")}function v(t){this.execCommand("indent")}function b(t,e){this.execLineHeightCommand(e)}function k(t){this.execCommand("bidiltr")}function S(t){this.execCommand("bidirtl")}function L(){var L=d.uiConstants.TOOLTIP.STYLE_TYPE.SMALL;return t.createElement("div",{className:"rich-text-toolbar",key:"richTextToolBar"},t.createElement("section",{},t.createElement(s,{value:this.getFormatBlockCss(),themeColors:this.props.themeColors,ref:"textStyle",tooltipStyleType:L,themeFonts:this.props.themeFonts,toolbarMode:!0,hasSmallArrow:!0,tooltipValue:"text_editor_theme_label",optionsWidth:264,onChange:h.bind(this,L),isDeveloperMode:this.props.isDeveloperMode}),t.createElement(i,{ref:"fontFamily",tooltipStyleType:L,value:this.getValue("fontFamily"),onChange:f.bind(this,L),tooltipValue:"text_editor_font_label",fonts:this.props.fonts,toolbarMode:!0}),t.createElement(r,{label:this.getValue("fontSize")+" px",width:71,ref:"fontSizePopUp"},t.createElement(d.slider,{label:"text_editor_font_size_label",id:"font-size-slider",value:this.getValue("fontSize"),min:6,max:176,stepperMax:999,onChange:m.bind(this,L),onSlideEnd:this.focus})),t.createElement(d.toggleButton,this.getBoldProps()),t.createElement(d.toggleButton,this.getItalicProps()),t.createElement(d.toggleButton,this.getUnderlineProps()),t.createElement(n,{value:this.getForeColorValue(),onClick:g.bind(this,L),tooltipValue:this.getTooltipValue("text_color"),tooltipStyleType:L,ref:"foreColorButton"}),t.createElement(c,{ref:"backColorButton",color:this.getBackColorValue(),onClick:x.bind(this,L),handleNoColor:this.execNoBackColor,tooltipValue:this.getTooltipValue("text_highlight"),tooltipStyleType:L}),t.createElement(p,e.assign({},{ref:"linkDropdownOption",key:"linkDropdownOption",tooltipStyleType:L},this.getLinkProps())),t.createElement(o,{onClick:C.bind(this,L),name:"textRemoveFormat",tooltipValue:"text_editor_reset_button",tooltipStyleType:L}),t.createElement("span",{className:"expand-toolbar-button",onClick:y.bind(this,L)},this.state.extraToolbarOpened?null:t.createElement("span",{className:"more-text",key:"richTextToolBarMore"},t.createElement(d.symbol,{name:"accordionClose"}),t.createElement("span",{},this.translateIfNeeded("list_dbe_edit_item_text_toolbar_more"))),this.state.extraToolbarOpened?t.createElement("span",{className:"less-text",key:"richTextToolBarLess"},t.createElement(d.symbol,{name:"accordionOpen"}),t.createElement("span",{},this.translateIfNeeded("list_dbe_edit_item_text_toolbar_less"))):null)),this.state.extraToolbarOpened?t.createElement("div",{key:"richTextToolBarDivider",className:"toolbar-divider"}):null,this.state.extraToolbarOpened?t.createElement("section",{key:"richTextToolBarExtraControls"},t.createElement(a,{ref:"textAlign",className:"align-dd",value:this.getTextAlignment(),onChange:_.bind(this,L),items:u.ALIGNMENT_TYPES,tooltipValue:this.getTooltipValue("alignment"),tooltipStyleType:L}),t.createElement(a,{ref:"textBullets",className:"bullets-dd",value:this.getListType(),onChange:T.bind(this,L),items:this.getBulletsItems(),tooltipValue:this.getTooltipValue("bullets_and_numbering"),tooltipStyleType:L,fixedIconName:this.getBulletsIconName()}),t.createElement(o,{onClick:E.bind(this,L),name:this.getValue("bidiltr")?"textOutdentLeft":"textOutdentRight",tooltipValue:this.getTooltipValue("decrease_indent"),tooltipStyleType:L}),t.createElement(o,{onClick:v.bind(this,L),name:this.getValue("bidiltr")?"textIndentLeft":"textIndentRight",tooltipValue:this.getTooltipValue("increase_indent"),tooltipStyleType:L}),t.createElement(r,{iconName:"textLineHeight",ref:"lineHeightPopUp"},t.createElement(l,{value:this.getLineHeightValue(),onChange:b.bind(this,L),onSlideEnd:this.focus})),t.createElement(r,{iconName:"textCharSpacing",ref:"charSpacingPopUp"},t.createElement(d.slider,{valueLink:this.linkSpacing(),min:-.1,max:.7,stepperMin:-.4,stepperMax:3,step:.05,stepperStep:.01,label:"text_editor_character_spacing_label",onSlideEnd:this.focus})),this.getValue("bidirtl")?t.createElement(o,{onClick:k.bind(this,L),key:"richTextWriteLTR",name:"textWriteDirectionLeft",tooltipValue:this.getTooltipValue("text_direction"),tooltipStyleType:L}):null,this.getValue("bidiltr")?t.createElement(o,{onClick:S.bind(this,L),key:"richTextWriteRTL",name:"textWriteDirectionRight",tooltipValue:this.getTooltipValue("text_direction"),tooltipStyleType:L}):null):null)}return L.apply(this,[])}}),define("textControls/comps/textToolBar",["reactDOM","react","lodash","jquery","util","textControls/mixins/textEditorMixin","textControls/mixins/textTooltipMixin","baseUI","textControls/comps/textToolBar.rt"],function(t,e,o,n,i,s,r,l,a){function c(t){return o.some(t,function(t){return t&&t.isExpanded()})}return e.createClass({displayName:"textToolBar",mixins:[i.translationMixin,s,r,l.inputMixin],render:a,getInitialState:function(){return{extraToolbarOpened:!1}},componentWillUnmount:function(){this.state.extraToolbarOpened&&this.changeRichTextHeight(!1)},isAnyDropdownOpen:function(){return c([this.refs.textStyle,this.refs.fontFamily,this.refs.textBullets,this.refs.textAlign,this.refs.backColorButton&&this.refs.backColorButton.refs.dropdown,this.refs.linkDropdownOption&&this.refs.linkDropdownOption.refs.dropdown])},toggleToolbar:function(){var t=!this.state.extraToolbarOpened;this.setState({extraToolbarOpened:t}),this.changeRichTextHeight(t)},getColorPickerPosition:function(e){var o=e?t.findDOMNode(this.refs.foreColorButton):t.findDOMNode(this.refs.backColorButton),i=n(o).offset(),s=i.top-n(window.document).scrollTop(),r=i.left;return{top:s<=370?s+40:s-370,left:r}},onColorClick:function(t){var e=this.getColorPickerPosition(t);this.handleColorClick(t,e)},changeRichTextHeight:function(t){var e=this.props.textManager.getDimensions().height||150;t?e-=50:e+=50,this.props.textManager.resize("100%",e)}})}),define("textControls",["textControls/comps/iconButton","textControls/comps/fontFamily","textControls/comps/iconsDropDown","textControls/comps/textBackgroundColor","textControls/comps/textLinkControl","textControls/comps/textStyle","textControls/comps/textColor","textControls/comps/textEffects","textControls/comps/lineHeight","textControls/comps/richTextFrame","textControls/comps/textPopup","textControls/comps/themeFontsLoader","textControls/comps/saveTextStyleConfirmation","textControls/utils/constants","textControls/utils/fontUtils","textControls/utils/dataUtils","textControls/utils/textLinkManager","textControls/utils/linksHelper","textControls/utils/ckUtils","textControls/utils/mobileUtils","textControls/utils/migrationUtils","textControls/mixins/textTooltipMixin","textControls/mixins/textEditorMixin","textControls/mixins/textBiMixin","textControls/utils/colorUtils","textControls/utils/textLimitsUtils","textControls/comps/textToolBar"],function(t,e,o,n,i,s,r,l,a,c,p,u,d,h,f,m,g,x,C,y,_,T,E,v,b,k,S){return{textStyle:s,fontFamily:e,iconButton:t,iconsDropDown:o,textBackgroundColor:n,textLinkControl:i,textColor:r,textEffects:l,lineHeight:a,textPopup:p,richTextFrame:c,themeFontsLoader:u,constants:h,fontUtils:f,dataUtils:m,ckUtils:C,mobileUtils:y,textTooltipMixin:T,saveTextStyleConfirmation:d,textEditorMixin:E,migrationUtils:_,textBiMixin:v,colorUtils:b,textToolBar:S,TextLinksManager:g,textLimitsUtils:k,LinksHelper:x}});
//# sourceMappingURL=textControls.min.js.map