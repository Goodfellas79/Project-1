"use strict";define("mobileEditor/mobileElementsPanel/mobileElementsData",["lodash","experiment"],function(e,t){function i(e){return e.mobile.qab.isEnabled()&&e.mobile.qab.getActions().length>0}function n(e){return{id:"mobileView",desc:"mobile_view_title",symbol:"mobile_left_menu_mobile_view",helpId:"e1dc62c8-2c70-47c5-8bc7-5b1c32169002",toggle:{action:e.mobile.enableOptimizedView,state:e.mobile.isOptimized},tooltip:{}}}function o(e){return{id:"backToTop",desc:"mobile_backtotop_title",symbol:"mobile_left_menu_back_to_top",helpId:"ca3e54a0-3d76-4ede-af8c-f9ccbaeeba5d",toggle:{action:e.mobile.mobileOnlyComponents.enableBackToTopButton,state:e.mobile.mobileOnlyComponents.isMobileOnlyComponentExistOnStructure.bind(null,e.mobile.mobileOnlyComponents.mobileOnlyComps.BACK_TO_TOP_BUTTON)},tooltip:{}}}function l(e){return{id:"actionBar",desc:"mobile_action_bar_title",symbol:"mobile_left_menu_action_bar",helpId:"ec11d690-b5f0-4c35-b95f-2e928067049d",toggle:{action:e.mobile.actionBar.enable,state:e.mobile.actionBar.isEnabled},tooltip:{}}}function a(e){var t={key:"qabActivatedTooltip",id:"qabActivatedTooltip",content:"mobile_quick_actions_preinstalled_tooltip",alignment:"RIGHT",isEnabled:i(e)};return{id:"actionBar",desc:"mobile_action_bar_title",symbol:"mobileEditorLeftBarQuickActionBar",classNames:{disabled:i(e)},expandSymbol:"plusBig",callback:function(){i(e)||(e.mobile.actionBar.version.upgrade(),e.history.add("add quickActionBar"))},tooltip:t}}var s=e.once(function(e){var n=e.mobile.actionBar.isEnabled();return i(e)||t.isOpen("se_qab")&&!n});return function(e){var t=[n(e),o(e)];return s(e)?t.push(a(e)):e.mobile.qab.isEnabled()||t.push(l(e)),t}}),define("mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsMixin",["core"],function(e){return{getInitialState:function(){return{toggleValue:this.getToggleState()}},componentWillReceiveProps:function(){this.setState({toggleValue:this.getToggleState()})},onToggleChange:function(e,t){switch(this.setState({toggleValue:e}),this.runToggleAction(e),this.props.id){case"mobileView":this.sendToggleBIOptimized(e,t||"mobile_view_panel_toggle");break;case"backToTop":this.sendToggleBIBackToTop(e);break;case"actionBar":this.sendToggleBIActionBar(e);break;default:throw"Error: mobile settings cannot toggle "+this.props.id}},getImage:function(){return this.state.toggleValue?this.props.image.on:this.props.image.off},getToggleState:function(){return!!this.props.toggle.state&&this.props.toggle.state()},runToggleAction:function(e){this.props.toggle.action&&(this.props.toggle.action(e),this.getEditorAPI().history.add("toggledAction"))},getValueLink:function(){return{value:this.getToggleState(),requestChange:this.onToggleChange}},sendToggleBIActionBar:function(t){this.getEditorAPI().bi.event(e.bi.events.mobileEditor.mobileActionBar.MOBILE_ACTION_BAR_TOGGLE,{toggle_status:t?"on":"off",site_id:this.getEditorAPI().documentServices.generalInfo.getSiteId()})},sendToggleBIBackToTop:function(t){var i=e.bi.events.mobileEditor.backToTop.BACK_TO_TOP_SHOW_TOGGLE,n={toggle_status:t?"on":"off"};this.getEditorAPI().bi.event(i,n)},sendToggleBIOptimized:function(t,i){var n="mobileView"===this.props.id?e.bi.events.topbar.mobile_view_mode_toggle:null;if(n){var o={origin:i||"",status:t?1:0};this.getEditorAPI().bi.event(n,o)}}}}),define("mobileEditor/mobileElementsPanel/mobileElementSettings/mobileElementsSettingsHeader.rt",["react","lodash","util","symbols"],function(e,t,i,n){return function(){return e.createElement("div",{className:"mobile-settings-header"},e.createElement("div",{className:"title"},i.translate(this.props.title)),e.createElement("div",{className:"helpSign",onClick:this.openHelpCenter},"?"),e.createElement("div",{onClick:this.minimize},e.createElement(n.symbol,{className:"arrow",name:"arrowRightBig"})))}}),define("mobileEditor/mobileElementsPanel/mobileElementSettings/mobileElementsSettingsHeader",["react","lodash","core","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileElementsSettingsHeader.rt"],function(e,t,i,n){return e.createClass({displayName:"mobileElementsSettingsHeader",render:n,mixins:[i.mixins.editorAPIMixin],minimize:function(){this.props.minimize()},openHelpCenter:function(){var e={panel_name:this.props.title,origin:i.constants.BI.HELP.ORIGIN.LEFTBAR,learn_more:!1};this.getEditorAPI().panelManager.openHelpCenter(this.props.helpId,null,e)}})}),define("mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSelectorButton.rt",["react","lodash","util"],function(e,t,i){return function(){function n(e){this.props.onMobileItemClicked(e,this.props.isOptimized)}return e.createElement("div",{className:"mobile-item-wrapper"},e.createElement("div",{className:t(this.getClassesForMobileElementImage()).transform(function(e,t,i){t&&e.push(i)},[]).join(" "),onClick:n.bind(this)},e.createElement("div",{className:"image optimized-image"})),e.createElement("div",{className:"desc"},e.createElement("div",{className:"imgDesc"},i.translate(this.props.label)),e.createElement("div",{className:"imgDesc2"},i.translate(this.props.additionalLabel))))}}),define("mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSelectorButton",["react","lodash","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSelectorButton.rt"],function(e,t,i){return e.createClass({displayName:"mobileSelectorButton",render:i,propTypes:{isOptimized:e.PropTypes.bool.isRequired,selected:e.PropTypes.bool.isRequired,onMobileItemClicked:e.PropTypes.func.isRequired,label:e.PropTypes.string.isRequired,additionalLabel:e.PropTypes.string},getClassesForMobileElementImage:function(){var e=this.props.isOptimized;return{"mobile-item-selection":!0,"mobile-item-optimized":e,"mobile-item-non-optimized":!e,selected:this.props.selected}}})}),define("mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsOptimized.rt",["react","lodash","baseUI","util","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileElementsSettingsHeader","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSelectorButton"],function(e,t,i,n,o,l){return function(){return e.createElement("div",{className:"mobile-element-settings"},e.createElement(o,{title:"mobile_view_title",helpId:this.props.helpId,minimize:this.props.onClick}),e.createElement("div",{className:"content"},e.createElement("div",{className:"category-desc"},e.createElement("p",{className:"text"},"\r\n                ",n.translate("mobile_view_text")," ",e.createElement("a",{className:"learn-more",onClick:this.openHelpCenter},n.translate("mobile_view_link")))),e.createElement(i.toggle,{label:"mobile_view_toggle_label",valueLink:this.getValueLink()}),e.createElement("br",{}),e.createElement("div",{className:"optimized-toggle-images"},e.createElement(l,{onMobileItemClicked:this.onMobileItemClicked,isOptimized:!1,selected:!this.state.toggleValue,label:"mobile_view_toggle_regularview"}),e.createElement(l,{onMobileItemClicked:this.onMobileItemClicked,isOptimized:!0,selected:this.state.toggleValue,label:"mobile_view_toggle_mobileview",additionalLabel:"mobile_view_toggle_mobileview_recommended"}))))}}),define("mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsOptimized",["react","core","lodash","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsMixin","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsOptimized.rt"],function(e,t,i,n,o){return e.createClass({displayName:"mobileSettingsOptimized",mixins:[n,t.mixins.editorAPIMixin],render:o,onMobileItemClicked:function(e,t){t!==this.state.toggleValue&&this.onToggleChange(t,"mobile panel icons")},openHelpCenter:function(){var e={learn_more:!0,panel_name:this.props.id,origin:t.constants.BI.HELP.ORIGIN.LEFTBAR};this.getEditorAPI().panelManager.openHelpCenter(this.props.helpId,null,e)}})}),define("mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsBackToTop.rt",["react","lodash","baseUI","util","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileElementsSettingsHeader"],function(e,t,i,n,o){return function(){return e.createElement("div",{className:t({"mobile-element-settings":!0,backToTopEnabled:this.state.toggleValue}).transform(function(e,t,i){t&&e.push(i)},[]).join(" ")},e.createElement(o,{title:"mobile_backtotop_title",helpId:this.props.helpId,minimize:this.props.onClick}),e.createElement("div",{className:"content"},e.createElement("div",{className:"category-desc"},e.createElement("p",{className:"text"},"\r\n                ",n.translate("mobile_backtotop_text")," ",e.createElement("a",{className:"learn-more",onClick:this.openHelpCenter},n.translate("mobile_backtotop_link")))),e.createElement(i.toggle,{label:"mobile_backtotop_show_label",valueLink:this.getValueLink()}),e.createElement("br",{}),e.createElement("div",{className:"imageWrapper"},e.createElement("div",{className:"img"})),e.createElement("p",{className:"text"},"\r\n            ",n.translate("mobile_backtotop_bottom_text")," ",e.createElement("a",{onClick:this.goToPreview,className:"go-to-preview"},n.translate("mobile_backtotop_preview_text")),"\r\n            ",n.translate("mobile_backtotop_bottom_text2"),"\r\n        ")))}}),define("mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsBackToTop",["react","core","lodash","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsMixin","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsBackToTop.rt"],function(e,t,i,n,o){return e.createClass({displayName:"mobileSettingsBackToTop",mixins:[n,t.mixins.editorAPIMixin],render:o,goToPreview:function(){var e=this.getEditorAPI();e.preview.togglePreview(),e.bi.event(t.bi.events.mobileEditor.backToTop.BACK_TO_TOP_PREVIEW_CLICK,{})},openHelpCenter:function(){var e={learn_more:!0,panel_name:this.props.id,origin:t.constants.BI.HELP.ORIGIN.LEFTBAR};this.getEditorAPI().panelManager.openHelpCenter(this.props.helpId,null,e)}})}),define("mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsActionBar.rt",["react","lodash","baseUI","baseUILib","util","panels","symbols","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileElementsSettingsHeader"],function(e,t,i,n,o,l,a,s){return function(){function l(n,l){return e.createElement("li",{className:t({"action-bar-item":!0,"social-media-open":this.isSubPanelOpen(n.id)}).transform(function(e,t,i){t&&e.push(i)},[]).join(" "),key:n.id},n.isForm?e.createElement("div",{key:n.id},e.createElement(i.textInputWithToggle,{placeholder:this.getPlaceholder(n.id),symbol:this.getSymbol(n.symbol),toggleType:"switch",toggleValueLink:this.getActionValueLink(n.id),inputValueLink:this.getActionDataValueLink(n.id),label:n.label,shouldInputFocus:this.state.shouldInputFocus,inputKey:n.id,onBlur:this.handleBlur.bind(this,n.id),maxLength:this.getMaxLength(),validator:n.validators,invalidMessage:n.invalidMessage,disabled:!this.isActionBarEnabled()})):null,n.isForm?null:e.createElement("div",{key:n.id},e.createElement(a.symbol,{className:n.symbol+" symbol",name:this.getSymbol(n.symbol)}),"socialLinks"!==n.id?e.createElement(i.toggle,{key:n.id,name:"switch",valueLink:this.getActionValueLink(n.id),disabled:!this.isActionBarEnabled(),label:n.label}):null,"socialLinks"===n.id?e.createElement("span",{className:t({"link-label":!0,"link-active":this.isActionBarEnabled()}).transform(function(e,t,i){t&&e.push(i)},[]).join(" "),key:n.id+"label",onClick:this.openPanel},"\n                                ",o.translate(n.label),"\n                            "):null,"socialLinks"===n.id?e.createElement(i.toggle,{key:n.id,name:"switch",disabled:!this.isActionBarEnabled(),valueLink:this.getActionValueLink(n.id)}):null))}return e.createElement("div",{className:t({"mobile-element-settings":!0,"action-bar-settings":!0}).transform(function(e,t,i){t&&e.push(i)},[]).join(" ")},e.createElement(s,{title:"mobile_action_bar_title",helpId:this.props.helpId,minimize:this.props.onClick}),e.createElement("div",{className:"content"},e.createElement("div",{className:"category-desc"},e.createElement("p",{className:"text"},"\n                ",o.translate("mobile_action_bar_text")," ",e.createElement("a",{className:"learn-more",onClick:this.openHelpCenter},o.translate("mobile_action_bar_text_link")))),e.createElement(i.toggle,{label:"mobile_action_bar_toggle_label",valueLink:this.getValueLink()}),e.createElement("br",{}),e.createElement("div",{className:"action-bar-main-content"},e.createElement("div",{className:"action-bar-menu-wrapper"},e.createElement("div",{className:"action-bar-menu-title"},"\n                    ",o.translate("mobile_action_bar_section_label"),"\n                "),e.createElement("div",{className:"action-bar-menu"},e.createElement(n.CustomScroll,{ref:"customScroll",heightRelativeToParent:"100%",addScrolledClass:!0},e.createElement.apply(this,["ul",{},t.map(this.getActions(),l.bind(this))]))),e.createElement("div",{className:"action-bar-color-scheme"},e.createElement("div",{className:"action-bar-color-scheme-picker"},e.createElement("div",{className:"color-scheme-label"},o.translate("mobile_action_bar_colors_label")),e.createElement(i.buttonsGroup,{disabled:!this.isActionBarEnabled(),options:this.getColorSchemeOptions(),valueLink:this.getColorSchemeValueLink()})),e.createElement("div",{className:"action-bar-preview",style:{backgroundImage:this.getMobileActionBarDevicePreview()}},this.isActionBarEnabled()?e.createElement("div",{className:"action-bar-menu-preview",key:"actionBarMenuPreview",style:{backgroundImage:this.getMobileActionBarMenuPreview(),backgroundPosition:this.getMobileActionBarMenuPreviewPosition()}}):null)))),e.createElement("div",{className:"action-bar-footer"},e.createElement("span",{},"\n                ",o.translate("mobile_action_bar_bottom_text"),"\n            "),e.createElement("span",{className:"action-bar-publish",onClick:this.goToPublishHelp},"\n                ",o.translate("mobile_action_bar_bottom_link"),"\n            "))))}}),define("mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsActionBar",["react","core","lodash","util","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsMixin","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsActionBar.rt"],function(e,t,i,n,o,l){return e.createClass({displayName:"mobileSettingsActionBar",mixins:[o,t.mixins.editorAPIMixin],render:l,getInitialState:function(){return{shouldInputFocus:!1}},goToPublishHelp:function(){var e={component:"publish_your_site",learn_more:!0,panel_name:this.props.id,origin:t.constants.BI.HELP.ORIGIN.LEFTBAR};this.getEditorAPI().panelManager.openHelpCenter("c61857c1-9b9f-48f8-ae8b-c46c74427ec8",null,e)},openHelpCenter:function(){var e={learn_more:!0,panel_name:this.props.id,origin:t.constants.BI.HELP.ORIGIN.LEFTBAR};this.getEditorAPI().panelManager.openHelpCenter(this.props.helpId,null,e)},getActions:function(){return[{id:"navigationMenu",label:"mobile_action_bar_menu_label",symbol:"mba_navigation_menu",isForm:!1},{id:"phone",label:"mobile_action_bar_phone_label",symbol:"mba_Phone_number",validators:[n.validate.notEmpty,n.validate.phone],invalidMessage:"Validation_V3_Numeric_Input",isForm:!0},{id:"email",label:"mobile_action_bar_email_label",symbol:"mba_email",validators:[n.validate.notEmpty,n.validate.email],invalidMessage:"Validation_V1_Email",isForm:!0},{id:"address",label:"mobile_action_bar_address_label",symbol:"mba_address",isForm:!0},{id:"socialLinks",label:"mobile_action_bar_social_label",symbol:"mba_social",isForm:!1}]},toggleAction:function(e){var n=this.getEditorAPI().mobile.actionBar.actions,o=n.getEnabled(),l=n.get()[e],a=i.find(this.getActions(),{id:e}).isForm,s=this.getDefaultActionValue(e),r=l===s,m={},d="socialLinks"===e,c=!1;o[e]=!o[e],this.getEditorAPI().bi.event(t.bi.events.mobileEditor.mobileActionBar.MOBILE_ACTION_BAR_COMPONENT_TOGGLE,{toggle_name:e,toggle_status:o[e]?"on":"off",site_id:this.getEditorAPI().documentServices.generalInfo.getSiteId()}),a?(o[e]?(m[e]=l||s,n.update(m)):r&&(m[e]="",n.update(m)),c=o[e]):d&&o[e]&&(i(l).values().compact().value().length>0||(o[e]=!1),this.openPanel()),this.setState({shouldInputFocus:c}),n.enable(o)},isActionEnabled:function(e){return this.getEditorAPI().mobile.actionBar.actions.getEnabled()[e]},getDefaultActionValue:function(e){return n.translate("mobile_action_bar_"+e+"_default")},getPlaceholder:function(e){return"mobile_action_bar_"+e+"_placeholder"},changeActionData:function(e,t){var i={};i[e]=t,this.getEditorAPI().mobile.actionBar.actions.update(i)},handleBlur:function(e,t){var i=this.getEditorAPI().mobile.actionBar,n=i.actions,o={};!t.target.value&&i.isEnabled()&&(o[e]=!1,n.enable(o))},getActionValueLink:function(e){return{value:this.isActionEnabled(e),requestChange:this.toggleAction.bind(this,e)}},getActionDataValueLink:function(e){return{value:this.getEditorAPI().mobile.actionBar.actions.get()[e],requestChange:this.changeActionData.bind(this,e)}},getColorSchemeValueLink:function(){var e=this.getEditorAPI().mobile.actionBar.colorScheme;return{value:e.get(),requestChange:e.set}},getColorSchemeOptions:function(){return[{label:"mobile_action_bar_colors_dark",value:"dark"},{label:"mobile_action_bar_colors_light",value:"light"}]},openPanel:function(){this.isActionBarEnabled()&&this.getEditorAPI().panelManager.openPanel("panels.toolPanels.mobileActionBarSubPanel",{top:194,left:666},!0)},isActionBarEnabled:function(){return this.getEditorAPI().mobile.actionBar.isEnabled()},getMobileActionBarDevicePreview:function(){var e=this.isActionBarEnabled()?"mobileEditor/mobileSettings/mobilePreviewActive.png":"mobileEditor/mobileSettings/mobilePreviewDisable.png";return"url('"+n.media.getMediaUrl(e)+"')"},getMobileActionBarMenuPreview:function(){return"url('"+n.media.getMediaUrl("mobileEditor/mobileSettings/mobilePreviewQuickActionButtons.png")+"')"},getMobileActionBarMenuPreviewPosition:function(){var e=this.getEditorAPI().mobile.actionBar,t=e.actions.getEnabled(),n={navigationMenu:16,phone:8,email:4,address:2,socialLinks:1},o=32*("light"===e.colorScheme.get());return"50% "+(i(t).pickBy(function(e){return e}).map(function(e,t){return n[t]}).sum()+o)/63*100+"%"},getSymbol:function(e){return e+(this.isActionBarEnabled()?"":"_DS")},isSubPanelOpen:function(e){var t=this.getEditorAPI().panelManager.getOpenPanels(),n="socialLinks"===e,o=i.some(t,{name:"panels.toolPanels.mobileActionBarSubPanel"});return n&&o},getMaxLength:function(){return 256}})}),define("mobileEditor/mobileElementsPanel/mobileElementSettings/mobileElementSettings",["react","core","lodash","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsOptimized","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsBackToTop","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileSettingsActionBar"],function(e,t,i,n,o,l){return e.createClass({displayName:"mobileElementSettings",mixins:[t.mixins.editorAPIMixin],render:function(){var t={mobileView:n,backToTop:o,actionBar:l};return e.createElement(t[this.props.id],i.assign({},this.props))}})}),define("mobileEditor/mobileElementsPanel/mobileElementsPanel.rt",["react","lodash","experiment","util","panels","baseUI","baseUILib","mobileEditor/mobileElementsPanel/mobileElementSettings/mobileElementSettings","mobileEditor/mobileElementsPanel/mobileElementsData"],function(e,t,i,n,o,l,a,s,r){return function(){function i(e){e.preventDefault()}function m(i,n,o){return e.createElement("div",{className:t(this.getClass(n)).transform(function(e,t,i){t&&e.push(i)},[]).join(" "),key:n.id},e.createElement(a.Tooltip,{key:n.tooltip.key,id:n.tooltip.id,content:n.tooltip.content,alignment:n.tooltip.alignment,disabled:!n.tooltip.isEnabled},e.createElement(l.listItemWithSymbol,t.assign({},{key:"itemWithSymbol"},this.getMobileElementProps(n)))))}function d(){var i=this.getEditorAPI();return e.createElement.apply(this,["div",{className:"items-wrapper"},t.map(r(i),m.bind(this,i))])}return e.createElement(o.frames.leftPanelFrame,{className:"mobile-elements-panel "+t({"action-bar-menu-open":this.isActionBarOpened()}).transform(function(e,t,i){t&&e.push(i)},[]).join(" "),ref:"mobileElementsPanel",panelName:this.props.panelName,panelClass:this.getPanelClass(),label:n.translate("mobile_elements_panel_title"),onContextMenu:i.bind(this)},this.state.selectedMobileElement?e.createElement(s,t.assign({},{key:"mobileElement"},this.getMobileElementSettingsProps())):null,e.createElement("div",{className:"panel-shadow"}),d.apply(this,[]))}}),define("mobileEditor/mobileElementsPanel/mobileElementsPanel",["react","core","lodash","mobileEditor/mobileElementsPanel/mobileElementsData","mobileEditor/mobileElementsPanel/mobileElementsPanel.rt"],function(e,t,i,n,o){function l(e,t){var o=n(e);return i.find(o,function(e){return e.id.toLowerCase()===t})}return e.createClass({displayName:"mobileElementsPanel",mixins:[t.mixins.editorAPIMixin],propTyps:{mobileElementId:e.PropTypes.string},getInitialState:function(){return{selectedMobileElement:l(this.getEditorAPI(),this.props.mobileElementId)}},isItemSelected:function(e){return this.state.selectedMobileElement&&this.state.selectedMobileElement.id===e.id},componentWillReceiveProps:function(e){if(e.mobileElementId!==this.props.mobileElementId){var t=l(this.getEditorAPI(),e.mobileElementId);this.setState({selectedMobileElement:t})}},setMobileElement:function(e){this.setState({selectedMobileElement:e})},getMobileElementSettingsProps:function(){return i.assign(this.state.selectedMobileElement,{onClick:this.setMobileElement})},getMobileElementProps:function(e){return i.defaults(e,{callback:this.setMobileElement.bind(this,e)})},getClass:function(e){return i.defaults(e.classNames,{"item-in-list":!0,selected:this.isItemSelected(e)})},isActionBarOpened:function(){return this.isItemSelected("actionBar")},getPanelClass:function(){return"mobile-elements-panel "+(this.isActionBarOpened()?"action-bar-menu-open-wrapper":"")},render:o})}),define("mobileEditor/hiddenItemsPanel/mobileOnlyHiddenItemsData",[],function(){var e={TINY_MENU:{id:"TINY_MENU",className:"wysiwyg.viewer.components.mobile.TinyMenu",label:"component_label_tinyMenu"}};return{getMobileItemData:function(t){return e[t]}}}),define("mobileEditor/hiddenItemsPanel/hiddenItemsData",["lodash","util","mobileEditor/hiddenItemsPanel/mobileOnlyHiddenItemsData"],function(e,t,i){function n(e){var t=window.document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue}function o(e){var i=e||"";return i=t.stringUtils.removeHtmlTagsFromString(i),i=t.stringUtils.removeBreakLinesFromString(i),i=i.substring(0,m),i=n(i)}function l(e,t,i){var n=i.components.getDisplayName(e);if(c[t]){var l=i.components.data.get(e);l&&(n+=": "+l[c[t]])}return o(n)}function a(e){var n=i.getMobileItemData(e),o=t.compIcon.getCompIconInfo(null,n.className,d);return{compId:n.id,compType:n.id,label:t.translate(n.label),iconUrl:o.src,svgName:o.svgName,css:o.css}}function s(e,t,i){var n=i.components.get.byId(e,t,i.documentServices.viewMode.VIEW_MODES.DESKTOP),o=i.components.getType(n),a=i.components.getIconInfo(n,d);return{compId:n.id,compType:o,label:l(n,o,i),iconUrl:a.src,svgName:a.svgName,css:a.css}}function r(e,t,i,n){return n?a(t):s(t,i,e)}var m=50,d={width:50,height:50},c={"wysiwyg.viewer.components.SiteButton":"label","wysiwyg.viewer.components.WRichText":"text"};return{getItemData:r}}),define("mobileEditor/hiddenItemsUtils/hiddenItemsUtils",["lodash","mobileEditor/hiddenItemsPanel/hiddenItemsData"],function(e,t){function i(i,n){var o=i.mobile.hiddenComponents.get(n);return e.map(o,function(e){var o=i.mobile.mobileOnlyComponents.isMobileOnlyComponent(e);return t.getItemData(i,e,n,o)})}function n(t,n){n=n||t.documentServices.pages.getFocusedPageId();var o=i(t,"masterPage"),l=i(t,n);return e.union(o,l)}return{getHiddenCompsForPage:i,getFocusedPageHiddenComps:n}}),define("mobileEditor/hiddenItemsPanel/hiddenItem/hiddenItem.rt",["react","lodash","baseUI","util"],function(e,t,i,n){return function(){return e.createElement("div",{className:"hidden-item"},e.createElement("div",function(e,i){var n=t.assign({},e,i);return e.hasOwnProperty("style")&&(n.style=t.defaults(n.style,e.style)),e.hasOwnProperty("className")&&i.hasOwnProperty("className")&&(n.className=i.className+" "+e.className),n}({className:"icon"},this.getStyle()),this.props.svgName?e.createElement(i.symbol,{key:"hiddenItemIcon",name:this.props.svgName}):null),e.createElement("div",{className:"label"},this.props.label),e.createElement(i.tooltip,{value:"mobile_hidden_items_show_tooltip"},e.createElement("div",{className:"add-button",onClick:this.reAddComp},e.createElement(i.symbol,{name:"showComp"}))))}}),define("mobileEditor/hiddenItemsPanel/hiddenItem/hiddenItem",["react","core","lodash","mobileEditor/hiddenItemsPanel/hiddenItem/hiddenItem.rt"],function(e,t,i,n){return e.createClass({displayName:"hiddenItem",render:n,mixins:[t.mixins.editorAPIMixin],propTypes:{label:e.PropTypes.string.isRequired,compId:e.PropTypes.string.isRequired,compType:e.PropTypes.string.isRequired,pageId:e.PropTypes.string.isRequired,sectionType:e.PropTypes.string.isRequired,svgName:e.PropTypes.string,iconUrl:e.PropTypes.string},sendReAddBiEvent:function(){var e=this.getEditorAPI(),i={current_page_name:this.props.pageId,component_type:this.props.compType,section:this.props.sectionType};if(e.isTpa(this.props.compType)){var n=e.components.get.byId(this.props.compId,this.props.pageId,e.documentServices.viewMode.VIEW_MODES.DESKTOP),o=e.components.data.get(n),l=e.documentServices.tpa.app.getData(o.applicationId);i.app_id=l.appDefinitionId,i.app_site_id=l.instanceId,i.instance_id=this.props.compId}e.bi.event(t.bi.events.mobileEditor.hiddenElements.HIDDEN_ELEMENTS_SHOW,i)},reAddComp:function(){var e=this.getEditorAPI();e.mobile.hiddenComponents.show(this.props.compId,this.props.pageId),e.history.add("unhide mobile component"),this.sendReAddBiEvent()},getStyle:function(){var e={};return this.props.css&&((e=this.props.css).backgroundImage="url("+this.props.iconUrl+")"),{style:e}}})}),define("mobileEditor/hiddenItemsPanel/hiddenItemsContainer/hiddenItemsContainer.rt",["react","lodash","mobileEditor/hiddenItemsPanel/hiddenItem/hiddenItem"],function(e,t,i){return function(){function n(n,o){return e.createElement(i,t.assign({},{key:n.compId},t.assign(n,{pageId:this.props.pageId,sectionType:this.props.sectionType})))}return e.createElement("div",{className:"hidden-items-container"},e.createElement("div",{className:"container-header"},this.props.title),e.createElement.apply(this,["div",{className:"container-comps"},t.map(this.props.hiddenComps,n.bind(this))]))}}),define("mobileEditor/hiddenItemsPanel/hiddenItemsContainer/hiddenItemsContainer",["react","lodash","mobileEditor/hiddenItemsPanel/hiddenItemsContainer/hiddenItemsContainer.rt"],function(e,t,i){return e.createClass({displayName:"hiddenItemsContainer",propTypes:{hiddenComps:e.PropTypes.arrayOf(e.PropTypes.shape({label:e.PropTypes.string.isRequired,compId:e.PropTypes.string.isRequired,compType:e.PropTypes.string.isRequired,iconUrl:e.PropTypes.string,svgName:e.PropTypes.string,css:e.PropTypes.object})).isRequired,pageId:e.PropTypes.string.isRequired,title:e.PropTypes.string.isRequired,sectionType:e.PropTypes.string.isRequired},render:i})}),define("mobileEditor/hiddenItemsPanel/hiddenItemsPanel.rt",["react","lodash","baseUI","baseUILib","util","core","panels","experiment","mobileEditor/hiddenItemsPanel/hiddenItemsContainer/hiddenItemsContainer"],function(e,t,i,n,o,l,a,s,r){return function(){function i(e){e.preventDefault()}return e.createElement(a.frames.leftPanelFrame,{className:"hidden-items-panel",ref:"hiddenItemsPanel",panelName:this.props.panelName,panelClass:"hidden-items-panel",helpId:"769b8807-30b7-4ee4-8a7b-93674099732f",label:o.translate("mobile_hidden_items_panel_title")+" ("+this.getAllHiddenItems().length+")",onContextMenu:i.bind(this)},e.createElement(n.CustomScroll,{heightRelativeToParent:"inherit",addScrolledClass:!0},e.createElement("div",{className:"content"},e.createElement("div",{className:"scrollable"},this.hasHiddenItemsMasterPage()?e.createElement(r,t.assign({},{key:"hiddenItemsMP"},this.getMasterPageProps())):null,this.hasHiddenItemsCurrPage()?e.createElement(r,t.assign({},{key:"hiddenItemsCP"},this.getCurrentPageProps())):null,this.hasDeletedItemsOnPanel()?null:e.createElement("div",{className:"no-items",key:"hiddenItemsNoItems"},"\n                    ",o.translate("mobile_hidden_items_no_elements"),"\n                ")))))}}),define("mobileEditor/hiddenItemsPanel/hiddenItemsPanel",["reactDOM","react","lodash","core","util","baseUI","mobileEditor/hiddenItemsUtils/hiddenItemsUtils","mobileEditor/hiddenItemsPanel/hiddenItemsPanel.rt"],function(e,t,i,n,o,l,a,s){function r(e){if(e)return e.getBoundingClientRect()}function m(e,t,i){return{hiddenComps:a.getHiddenCompsForPage(this.getEditorAPI(),e),pageId:e,title:t,sectionType:i}}return t.createClass({displayName:"hiddenItemsPanel",mixins:[n.mixins.editorAPIMixin],getDefaultProps:function(){return{panelName:"mobileEditor.hiddenItemsPanel"}},getFirstTimeInfoBoxProps:function(){return{id:"mobileEditor_hiddenItemsPanel_teaser",hide:!1,title:"mobile_hidden_items_teaser_title",text:"mobile_hidden_items_teaser_text"}},isFirstTimeInfoBoxShown:function(){return!0},getMasterPageProps:function(){return m.call(this,"masterPage",o.translate("mobile_hidden_items_section_title_allpages"),"masterPage")},getCurrentPageProps:function(){var e=o.translate("mobile_hidden_items_section_title_currentpage"),t=this.getEditorAPI().documentServices.pages.getFocusedPageId();return e=e.replace("$$PAGE$$",this.getEditorAPI().pages.getPageTitle(t)),m.call(this,t,e,"currentPage")},getAllHiddenItems:function(){return a.getFocusedPageHiddenComps(this.getEditorAPI())},hasHiddenItemsCurrPage:function(){var e=this.getEditorAPI().mobile.hiddenComponents.get(this.getEditorAPI().documentServices.pages.getFocusedPageId());return!i.isEmpty(e)},hasHiddenItemsMasterPage:function(){var e=this.getEditorAPI().mobile.hiddenComponents.get("masterPage");return!i.isEmpty(e)},hasDeletedItemsOnPanel:function(){return this.hasHiddenItemsMasterPage()||this.hasHiddenItemsCurrPage()},componentWillMount:function(){this.getEditorAPI().mobile.hideHiddenItemsCounter()},getTooltipsPanelBounds:function(){var t=r(e.findDOMNode(this));return{left:t?t.left:180,width:t?t.width:352}},render:s})}),define("mobileEditor/layoutOptimizerPanel/layoutOptimizerPanel.rt",["react","lodash","baseUI","util","symbols","panels"],function(e,t,i,n,o,l){return function(){function t(e){e.preventDefault()}return e.createElement(l.frames.leftPanelFrame,{className:"layout-optimizer-panel",ref:"layoutOptimizerPanel",panelName:this.props.panelName,panelClass:"layout-optimizer-panel",helpId:this.helpId,label:n.translate("mobile_layout_optimizer_panel_title"),onContextMenu:t.bind(this)},e.createElement("div",{className:"content"},e.createElement("div",{className:"image-container"},e.createElement(o.symbol,{name:"autoRefreshingLayout"})),e.createElement("div",{className:"text"},n.translate(this.textKey),"\n            ",e.createElement("span",{className:"learn-more",onClick:this.openHelpCenter},"\n                ",n.translate("Notification_Box_Mobile_Layout_Optimizer_FirstTime_Learn_More"),"\n            ")),e.createElement(i.button,{className:"optimize-layout-button",label:"Notification_Box_Mobile_Layout_Optimizer_FirstTime_Button",disabled:!this.canOptimize(),onClick:this.optimizeLayout})))}}),define("mobileEditor/layoutOptimizerPanel/layoutOptimizerPanel",["react","lodash","core","baseUI","mobileEditor/layoutOptimizerPanel/layoutOptimizerPanel.rt"],function(e,t,i,n,o){return e.createClass({displayName:"layoutOptimizerPanel",mixins:[i.mixins.editorAPIMixin],textKey:"Notification_Box_Mobile_Layout_Optimizer_FirstTime_Body",helpId:"1a65ebfc-138a-45df-bd54-5f06c03b5973",getDefaultProps:function(){return{panelName:"mobileEditor.layoutOptimizerPanel"}},canOptimize:function(){var e=this.getEditorAPI(),t=e.documentServices.generalInfo.isFirstSave();return e.documentServices.history.canUndo()||!t},optimizeLayout:function(){var e=this.getEditorAPI();e.mobile.optimizeLayout(),e.panelManager.closeAllPanels()},sendBILearnMore:function(){this.getEditorAPI().bi.event(i.bi.events.mobileEditor.hiddenElements.HIDDEN_ELEMENTS_REFRESH_LAYOUT_TOOLTIP_OPEN,{})},openHelpCenter:function(){var e=this.getEditorAPI(),t={panel_name:this.props.panelName,origin:i.constants.BI.HELP.ORIGIN.LEFTBAR,learn_more:!0};e.panelManager.openHelpCenter(this.helpId,null,t)},render:o})}),define("mobileEditor/panels/cantMakeChangeMobile.rt",["react","lodash","util","core","baseUI","panels"],function(e,t,i,n,o,l){return function(){return e.createElement(l.frames.messagePanelFrame,{ref:"frame",key:"cantMakeChangesOnMobile",panelName:this.props.panelName,className:"mobile-cant-make-changes",panelTitle:i.translate("Notification_Box_Changes_Mobile_Title"),confirmLabel:"Notification_Box_Got_It",dontShowAgainKey:n.constants.USER_PREFS.CANT_MAKE_CHANGES.MOBILE_CANT_MAKE_CHANGE_DONT_SHOW_AGAIN,userPrefType:"site"},e.createElement("div",{className:"content-wrapper"},e.createElement("div",{className:"logo"},e.createElement(o.symbol,{name:"plaster"})),e.createElement("div",{className:"message"},i.translate("Notification_Box_Changes_Mobile_Text"))))}}),define("mobileEditor/panels/cantMakeChangeMobile",["react","core","lodash","mobileEditor/panels/cantMakeChangeMobile.rt"],function(e,t,i,n){return e.createClass({displayName:"cantMakeChangeMobile",render:n})}),define("mobileEditor",["mobileEditor/mobileElementsPanel/mobileElementsPanel","mobileEditor/hiddenItemsPanel/hiddenItemsPanel","mobileEditor/hiddenItemsPanel/hiddenItemsData","mobileEditor/hiddenItemsUtils/hiddenItemsUtils","mobileEditor/layoutOptimizerPanel/layoutOptimizerPanel","mobileEditor/panels/cantMakeChangeMobile"],function(e,t,i,n,o,l){return{mobileElementsPanel:e,hiddenItemsPanel:t,hiddenItemsData:i,hiddenItemsUtils:n,layoutOptimizerPanel:o,panels:{cantMakeChangeMobile:l}}});
//# sourceMappingURL=mobileEditor.min.js.map