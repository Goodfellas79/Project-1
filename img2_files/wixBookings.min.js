"use strict";define("wixBookings/common/dataProvider",["core"],function(e){function n(){return i}var i="13d21c63-b5ec-5912-8397-c3a5ddb27a97";return{getAppDefID:n,superAppPanelName:e.constants.SUPER_APPS.BOOKINGS_PANEL_NAME,superAppButtonLabel:"SiteApp_WixBookings_Button_Hover_Caption",superAppPanelClassName:"wix-bookings-panel",superAppSymbolName:"leftBarWixBookingsPanel",superAppId:"wixBookings"}}),define("wixBookings/common/sitePrefsService",["lodash","jquery","bluebird"],function(e,n,i){function o(e){return e.payload.fields[0].value}function t(e){return i.resolve(n.get("//editor.wix.com/_api/wix-bi-profile-webapp/siteprofile/"+e+"?fields=category&accept=json"))}function p(e){return t(e).then(a)}function a(e){return s(o(e))?i.resolve():i.reject()}function s(n){return e.includes(r,n)}var r=["business","photography","design","events","beauty-wellness","other","all",null];return{ifPostRegRelevant:p}}),define("wixBookings/common/bi/wixBookingsEvents",[],function(){var e={TABS_CLICK:{evid:204,src:38,endpoint:"editor",fields:{app_id:"string",panel:"string"}},MANAGE_PANEL_BUTTON_CLICK:{evid:205,src:38,endpoint:"editor",fields:{app_id:"string",button_name:"string"}},LEARN_MORE_CLICK:{evid:209,src:38,endpoint:"editor",fields:{app_id:"string",category:"string"}}};return{wixBookingsEvents:e,registerEvents:function(n){n.documentServices.bi.register("components","event",e)}}}),define("wixBookings/common/bi/wixBookingsBi",["wixBookings/common/bi/wixBookingsEvents"],function(e){return{events:e.wixBookingsEvents,registerEvents:e.registerEvents}}),define("wixBookings/common/editorActionsService",["tpa","superAppMenuInfra","core","helpIds","wixBookings/common/dataProvider","wixBookings/common/sitePrefsService","wixBookings/common/bi/wixBookingsBi"],function(e,n,i,o,t,p,a){function s(e){I=e}function r(){return I.documentServices.tpa.app.isInstalled(t.getAppDefID())}function l(){var e=!I.documentServices.generalInfo.isFirstSave(),n=I.documentServices.tpa.app.getDataByAppDefId(t.getAppDefID()).demoMode;return e&&I.documentServices.tpa.app.isAppProvisionedOnServer(t.getAppDefID())&&!n}function g(){e.superApps.refreshAppCompsForAppDefId(t.getAppDefID())}function d(){e.superApps.addApp(t.getAppDefID())}function u(n,o,t,p){e.superApps.addWidget(n,o,t,{presetId:p}),I.panelManager.closePanelByName(i.constants.SUPER_APPS.BOOKINGS_PANEL_NAME)}function c(){n.button.onAppInstalled(I,b,E,y,N,h)}function m(){n.button.registerButton(I,b,r(),E,y,M,N,h)}function A(){r()?m():k().then(m)}function f(){B(),I.bi.event(a.events.MANAGE_PANEL_BUTTON_CLICK,{app_id:t.getAppDefID(),button_name:"manage"})}function B(n){(n=n||{to:"dd"}).onClose=g;var i={type:e.constants.BI.type.APP_MANAGE_BUTTON};return e.superApps.openDashboardUrl(t.getAppDefID(),T,v,n,i)}function k(){return p.ifPostRegRelevant(x())}function _(){var e=t.getAppDefID(),n=I.documentServices.tpa.app.getFirstAppCompPageId(e);n&&I.pages.navigateTo(n.pageId)}function w(){var e={origin:i.constants.BI.HELP.ORIGIN.LEFTBAR,panel_name:E,learn_more:!0};I.panelManager.openHelpCenter(o.WIX_BOOKINGS,null,e)}function x(){return I.documentServices.generalInfo.getMetaSiteId()}function S(){n.button.unRegisterButton(I,E)}function P(){S()}var I,T="100%",v="100%",b=t.superAppId,E=t.superAppPanelName,y=t.superAppButtonLabel,M=t.superAppButtonLabel,h=t.superAppSymbolName,N=t.superAppPanelClassName;return{init:s,isAppInstalled:r,isAppProvisioned:l,addAppToSite:d,onWidgetDrop:function(e,n){e.width=n.structure.layout.width,e.height=n.structure.layout.height,u(t.getAppDefID(),n.structure.data.widgetId,e,n.itemId)},onWidgetClick:function(e,n,i,o){u(t.getAppDefID(),e.data.widgetId,void 0,o)},onAppInstalled:c,openBackOfficeInEditor:B,manageBookings:f,goToContainingPage:_,registerButtonIfRequired:A,openHelp:w,onAppDeleted:P}}),define("wixBookings/appMenu/panels/firstTimeTour/promotionalFlow/promotionalStep1.rt",["react","lodash","superAppMenuInfra","wixBookings/common/dataProvider"],function(e,n,i,o){return function(){return e.createElement(i.firstTimeTourPanels.installAppSlide,n.assign({},{installApp:this.installApp,origin:"promotionalPanel",appWasManuallyInstalled:this.props.appWasManuallyInstalled,superAppPanelName:o.superAppPanelName,superAppButtonLabel:o.superAppButtonLabel,superAppPanelClassName:o.superAppPanelClassName,superAppSymbolName:o.superAppSymbolName,title:"SiteApp_WixBookings_PromotionalFTUE_Step1_Title",subTitle:"SiteApp_WixBookings_PromotionalFTUE_Step1_SubTitle",pros:["SiteApp_WixBookings_PromotionalFTUE_Step1_Bullet1","SiteApp_WixBookings_PromotionalFTUE_Step1_Bullet2","SiteApp_WixBookings_PromotionalFTUE_Step1_Bullet3"],nextButtonLabel:"SiteApp_WixBookings_PromotionalFTUE_Step1_NextButton_Caption",openAppMarketLabel:"SiteApp_Blog_PromotionalFTUE_Step1_SeeInAppMarket_LinkCaption",openAppMarket:this.openHelp,loadingLabel:"SiteApp_WixBookings_PromotionalFTUE_Step2_Loader_Caption",sliderImages:this.getSliderImages(),installImage:"bookingsInstallBtnPromotional"},this.filteredProps()))}}),define("wixBookings/appMenu/panels/firstTimeTour/promotionalFlow/promotionalStep1",["react","core","util","wixBookings/common/editorActionsService","wixBookings/appMenu/panels/firstTimeTour/promotionalFlow/promotionalStep1.rt"],function(e,n,i,o,t){return e.createClass({displayName:"promotionalStep1Bookings",mixins:[n.mixins.editorAPIMixin,i.propTypesFilterMixin],installApp:function(e){o.addAppToSite(),e()},openHelp:function(){o.openHelp()},getSliderImages:function(){return[i.media.getMediaUrl("wixBookings/appMenuPanel/gallery/bookingsGallery01.png"),i.media.getMediaUrl("wixBookings/appMenuPanel/gallery/bookingsGallery02.png"),i.media.getMediaUrl("wixBookings/appMenuPanel/gallery/bookingsGallery03.png")]},render:t})}),define("wixBookings/appMenu/panels/firstTimeTour/templateFlow/templateStep1.rt",["react","lodash","superAppMenuInfra"],function(e,n,i){return function(){return e.createElement(i.firstTimeTourPanels.getStartedSlide,n.assign({},{nextSlide:this.openBackOffice,superApp:this.props.superApp,appWasManuallyInstalled:this.props.appWasManuallyInstalled,title:"SiteApp_WixBookings_TemplateFTUE_Step1_Title",subTitle:"SiteApp_WixBookings_TemplateFTUE_Step1_SubTitle",pros:[],nextButtonLabel:"SiteApp_WixBookings_TemplateFTUE_Step1_NextButton_Caption",mainImage:"bookingsManager"},this.filteredProps()))}}),define("wixBookings/appMenu/panels/firstTimeTour/templateFlow/templateStep1",["react","lodash","util","wixBookings/common/editorActionsService","wixBookings/appMenu/panels/firstTimeTour/templateFlow/templateStep1.rt"],function(e,n,i,o,t){return e.createClass({propTypes:{nextSlide:e.PropTypes.func},displayName:"templateStep1Bookings",mixins:[i.propTypesFilterMixin],componentDidMount:function(){o.isAppProvisioned()?this.props.nextSlide():o.goToContainingPage()},openBackOffice:function(){o.openBackOfficeInEditor(),this.props.nextSlide()},render:t})}),define("wixBookings/appMenu/panels/manageBookings/manageBookingsPanel.rt",["react","lodash","superAppMenuInfra","util","baseUI","baseUILib"],function(e,n,i,o,t,p){return function(){function n(){this.openBookingsManager()}return e.createElement("div",{className:"wix-bookings-manage-panel"},e.createElement(p.CustomScroll,{heightRelativeToParent:"100%"},e.createElement("div",{className:"manage-bookings"}),e.createElement("p",{className:"manage-panel-description"},o.translate("SiteApp_WixBookings_Manage_Instructor")),e.createElement("div",{className:"buttons-container"},e.createElement("div",{},e.createElement(t.button,{className:"btn-confirm-primary manage-btn",label:"SiteApp_WixBookings_Manage_OpenBackOffice",onClick:n.bind(this)})))))}}),define("wixBookings/appMenu/panels/manageBookings/manageBookingsPanel",["react","lodash","util","wixBookings/common/editorActionsService","wixBookings/appMenu/panels/manageBookings/manageBookingsPanel.rt"],function(e,n,i,o,t){return e.createClass({displayName:"manageBookingsPanel",mixins:[i.propTypesFilterMixin],render:t,openBookingsManager:function(){o.manageBookings()}})}),define("wixBookings/addPanel/serviceWidget",["wixBookings/common/editorActionsService","addPanelDataConsts"],function(e,n){var i=n;return{type:i.SECTIONS_TYPES.PRESET,hide:!1,title:"SiteApp_WixBookings_AddElement_Service",showSectionHeader:!0,additionalBehaviours:{labelMode:i.LABEL_BEHAVIOUR.ALWAYS,infoIcon:i.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:i.HOVER_IMAGE_ACTIONS.NONE,scaleProportion:i.DEFAULT_SCALE_FOR_PRESET,iconEnabledForComps:[]},props:{image:"wixBookings/addPanel/service_widget.png",imageHover:null,onDrop:e.onWidgetDrop,onClick:e.onWidgetClick,items:[{id:"Wix_Bookings_Service_Widget1",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:850,height:360,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"2269",tpaData:{type:"TPAData",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},content:'"{"buttonStyle":"border"}"'},widgetId:"14756c3d-f10a-45fc-4df1-808f22aabe80"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{},propertiesSource:{},groups:{}},componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},mobileStructure:{layout:{width:280,height:583,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0}},preset:{rect:{width:324,height:164,x:0,y:0},label:"",tags:null}}],compTypes:["wysiwyg.viewer.components.tpapps.TPAWidget"]},help:{hide:!1,text:"SiteApp_WixBookings_AddElement_Info"}}}),define("wixBookings/addPanel/wixBookingsAddPanelSections",["wixBookings/addPanel/serviceWidget"],function(e){return function(){return[e]}}),define("wixBookings/appMenu/superApp",["util","wixBookings/common/dataProvider","wixBookings/common/editorActionsService","wixBookings/appMenu/panels/firstTimeTour/promotionalFlow/promotionalStep1","wixBookings/appMenu/panels/firstTimeTour/templateFlow/templateStep1","wixBookings/appMenu/panels/manageBookings/manageBookingsPanel","wixBookings/addPanel/wixBookingsAddPanelSections","addPanelDataConsts"],function(e,n,i,o,t,p,a,s){return{id:n.superAppId,appDefId:n.getAppDefID(),appName:"WixBookings",firstTimeTour:{templateFlow:[t],manuallyInstalledFlow:[t],promotionalFlow:[o]},panel:{name:"wixBookings.panels.bookingsPanel",manage:{title:"SiteApp_WixBookings_Menu_ManageBookings",helpId:"bf44fdcd-7f35-41a2-a04a-93a0a821e55d",template:p},pages:{isHidden:!0},addElements:{title:"SiteApp_WixBookings_AddElement_Title",helpId:"fb8a363d-c55d-4a8e-bd0b-cb7d5bcb85d5",sections:a,categoryId:s.CATEGORIES_ID.BOOKINGS},learnMore:{title:"SiteApp_WixBookings_Learn_Title",section2HeaderViewA:"SiteApp_WixBookings_Learn_Forum",section3HeaderViewA:"SiteApp_WixBookings_Learn_Blog",data:{viewA:{helpCenterPopUp:{isHidden:!0},supportForumsPopUp:{link:"https://www.wix.com/support/html5/wix-bookings/setting-up-wix-bookings",image:e.media.getMediaUrl("superAppMenuInfra/ViewTheBlogHelpCenter.png")},wixTipsBlog:{link:"http://www.wix.com/blog/",image:e.media.getMediaUrl("superAppMenuInfra/OpenTheBlogSupportForum.png")}}}}},isAppInstalled:i.isAppInstalled}}),define("wixBookings/appMenu/bookingsPanel.rt",["react","lodash","superAppMenuInfra","wixBookings/common/dataProvider","wixBookings/appMenu/superApp"],function(e,n,i,o,t){return function(){return e.createElement(i.superAppPanel,n.assign({},{superApp:t,selectedTabName:this.props.selectedTabName,panelClass:o.superAppPanelClassName},this.filteredProps()))}}),define("wixBookings/appMenu/bookingsPanel",["react","lodash","util","wixBookings/appMenu/bookingsPanel.rt"],function(e,n,i,o){return e.createClass({displayName:"BookingsPanel",mixins:[i.propTypesFilterMixin],render:o})}),define("wixBookings",["tpa","wixBookings/appMenu/bookingsPanel","wixBookings/common/dataProvider","wixBookings/common/editorActionsService","experiment","wixBookings/common/bi/wixBookingsEvents"],function(e,n,i,o,t,p){function a(n){t.isOpen("wixBookingsButton")&&(o.init(n),o.registerButtonIfRequired(),p.registerEvents(n),e.superApps.registerOnAppInstalled(i.getAppDefID(),o.onAppInstalled),e.superApps.registerOnAppDeleted(i.getAppDefID(),o.onAppDeleted))}return{onPreviewReady:a,panels:{bookingsPanel:n}}});
//# sourceMappingURL=wixBookings.min.js.map